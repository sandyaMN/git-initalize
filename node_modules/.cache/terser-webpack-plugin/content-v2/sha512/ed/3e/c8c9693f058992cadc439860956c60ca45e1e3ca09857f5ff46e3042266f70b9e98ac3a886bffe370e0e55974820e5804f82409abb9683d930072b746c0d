{"map":"{\"version\":3,\"sources\":[\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/src/panels/config/cloud/alexa/cloud-alexa.ts\"],\"names\":[\"IGNORE_INTERFACES\",\"configIsExposed\",\"config\",\"undefined\",\"should_expose\",\"customElement\",\"CloudAlexa\",\"property\",\"type\",\"Boolean\",\"memoizeOne\",\"filter\",\"generateFilter\",\"include_domains\",\"include_entities\",\"exclude_domains\",\"exclude_entities\",\"_this2\",\"this\",\"_entities\",\"html\",\"_templateObject\",\"emptyFilter\",\"isEmptyFilter\",\"cloudStatus\",\"alexa_entities\",\"filterFunc\",\"_getEntityFilterFunc\",\"showInExposed\",\"_isInitialExposed\",\"Set\",\"trackExposed\",\"selected\",\"exposedCards\",\"notExposedCards\",\"forEach\",\"entity\",\"stateObj\",\"hass\",\"states\",\"entity_id\",\"_entityConfigs\",\"isExposed\",\"add\",\"has\",\"push\",\"_templateObject2\",\"_showMoreInfo\",\"interfaces\",\"ifc\",\"includes\",\"map\",\"replace\",\"join\",\"_exposeChanged\",\"localize\",\"_templateObject3\",\"narrow\",\"_templateObject4\",\"_templateObject5\",\"_openDomainToggler\",\"_templateObject6\",\"length\",\"_templateObject7\",\"_templateObject8\",\"changedProps\",\"_get\",\"_getPrototypeOf\",\"prototype\",\"call\",\"_fetchData\",\"prefs\",\"alexa_entity_configs\",\"entities\",\"_this3\",\"regeneratorRuntime\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"fetchCloudAlexaEntities\",\"sent\",\"sort\",\"a\",\"b\",\"stateA\",\"stateB\",\"compare\",\"computeStateName\",\"stop\",\"ev\",\"entityId\",\"currentTarget\",\"fireEvent\",\"newExposed\",\"_context2\",\"target\",\"checked\",\"_updateExposed\",\"curExposed\",\"_context3\",\"abrupt\",\"_updateConfig\",\"_ensureEntitySync\",\"values\",\"updatedConfig\",\"_context4\",\"updateCloudAlexaEntityConfig\",\"Object\",\"assign\",\"_ensureStatusReload\",\"_this4\",\"showDomainTogglerDialog\",\"domains\",\"computeDomain\",\"value\",\"idx\",\"self\",\"indexOf\",\"toggleDomain\",\"domain\",\"turnOn\",\"_popstateReloadStatusAttached\",\"parent\",\"parentElement\",\"window\",\"addEventListener\",\"once\",\"_popstateSyncAttached\",\"css\",\"_templateObject9\",\"LitElement\"],\"mappings\":\"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\",\"sourcesContent\":[\"import {\\n  LitElement,\\n  TemplateResult,\\n  html,\\n  CSSResult,\\n  css,\\n  customElement,\\n  property,\\n} from \\\"lit-element\\\";\\nimport \\\"@polymer/paper-icon-button\\\";\\nimport memoizeOne from \\\"memoize-one\\\";\\n\\nimport \\\"../../../../layouts/hass-subpage\\\";\\nimport \\\"../../../../layouts/hass-loading-screen\\\";\\nimport \\\"../../../../components/ha-card\\\";\\nimport \\\"../../../../components/ha-switch\\\";\\nimport \\\"../../../../components/entity/state-info\\\";\\n\\nimport { HomeAssistant } from \\\"../../../../types\\\";\\nimport {\\n  CloudStatusLoggedIn,\\n  CloudPreferences,\\n  updateCloudAlexaEntityConfig,\\n  AlexaEntityConfig,\\n} from \\\"../../../../data/cloud\\\";\\nimport {\\n  generateFilter,\\n  isEmptyFilter,\\n  EntityFilter,\\n} from \\\"../../../../common/entity/entity_filter\\\";\\nimport { compare } from \\\"../../../../common/string/compare\\\";\\nimport { fireEvent } from \\\"../../../../common/dom/fire_event\\\";\\nimport { showDomainTogglerDialog } from \\\"../../../../dialogs/domain-toggler/show-dialog-domain-toggler\\\";\\nimport { AlexaEntity, fetchCloudAlexaEntities } from \\\"../../../../data/alexa\\\";\\n// tslint:disable-next-line: no-duplicate-imports\\nimport { HaSwitch } from \\\"../../../../components/ha-switch\\\";\\n\\nimport { computeStateName } from \\\"../../../../common/entity/compute_state_name\\\";\\nimport { computeDomain } from \\\"../../../../common/entity/compute_domain\\\";\\n\\nconst DEFAULT_CONFIG_EXPOSE = true;\\nconst IGNORE_INTERFACES = [\\\"Alexa.EndpointHealth\\\"];\\n\\nconst configIsExposed = (config: AlexaEntityConfig) =>\\n  config.should_expose === undefined\\n    ? DEFAULT_CONFIG_EXPOSE\\n    : config.should_expose;\\n\\n@customElement(\\\"cloud-alexa\\\")\\nclass CloudAlexa extends LitElement {\\n  @property() public hass!: HomeAssistant;\\n\\n  @property()\\n  public cloudStatus!: CloudStatusLoggedIn;\\n\\n  @property({ type: Boolean }) public narrow!: boolean;\\n\\n  @property() private _entities?: AlexaEntity[];\\n\\n  @property()\\n  private _entityConfigs: CloudPreferences[\\\"alexa_entity_configs\\\"] = {};\\n  private _popstateSyncAttached = false;\\n  private _popstateReloadStatusAttached = false;\\n  private _isInitialExposed?: Set<string>;\\n\\n  private _getEntityFilterFunc = memoizeOne((filter: EntityFilter) =>\\n    generateFilter(\\n      filter.include_domains,\\n      filter.include_entities,\\n      filter.exclude_domains,\\n      filter.exclude_entities\\n    )\\n  );\\n\\n  protected render(): TemplateResult | void {\\n    if (this._entities === undefined) {\\n      return html`\\n        <hass-loading-screen></hass-loading-screen>\\n      `;\\n    }\\n    const emptyFilter = isEmptyFilter(this.cloudStatus.alexa_entities);\\n    const filterFunc = this._getEntityFilterFunc(\\n      this.cloudStatus.alexa_entities\\n    );\\n\\n    // We will only generate `isInitialExposed` during first render.\\n    // On each subsequent render we will use the same set so that cards\\n    // will not jump around when we change the exposed setting.\\n    const showInExposed = this._isInitialExposed || new Set();\\n    const trackExposed = this._isInitialExposed === undefined;\\n\\n    let selected = 0;\\n\\n    // On first render we decide which cards show in which category.\\n    // That way cards won't jump around when changing values.\\n    const exposedCards: TemplateResult[] = [];\\n    const notExposedCards: TemplateResult[] = [];\\n\\n    this._entities.forEach((entity) => {\\n      const stateObj = this.hass.states[entity.entity_id];\\n      const config = this._entityConfigs[entity.entity_id] || {};\\n      const isExposed = emptyFilter\\n        ? configIsExposed(config)\\n        : filterFunc(entity.entity_id);\\n      if (isExposed) {\\n        selected++;\\n\\n        if (trackExposed) {\\n          showInExposed.add(entity.entity_id);\\n        }\\n      }\\n\\n      const target = showInExposed.has(entity.entity_id)\\n        ? exposedCards\\n        : notExposedCards;\\n\\n      target.push(html`\\n        <ha-card>\\n          <div class=\\\"card-content\\\">\\n            <state-info\\n              .hass=${this.hass}\\n              .stateObj=${stateObj}\\n              secondary-line\\n              @click=${this._showMoreInfo}\\n            >\\n              ${entity.interfaces\\n                .filter((ifc) => !IGNORE_INTERFACES.includes(ifc))\\n                .map((ifc) =>\\n                  ifc.replace(\\\"Alexa.\\\", \\\"\\\").replace(\\\"Controller\\\", \\\"\\\")\\n                )\\n                .join(\\\", \\\")}\\n            </state-info>\\n            <ha-switch\\n              .entityId=${entity.entity_id}\\n              .disabled=${!emptyFilter}\\n              .checked=${isExposed}\\n              @change=${this._exposeChanged}\\n            >\\n              ${this.hass!.localize(\\\"ui.panel.config.cloud.alexa.expose\\\")}\\n            </ha-switch>\\n          </div>\\n        </ha-card>\\n      `);\\n    });\\n\\n    if (trackExposed) {\\n      this._isInitialExposed = showInExposed;\\n    }\\n\\n    return html`\\n      <hass-subpage header=\\\"${this.hass!.localize(\\n        \\\"ui.panel.config.cloud.alexa.title\\\"\\n      )}\\\">\\n        <span slot=\\\"toolbar-icon\\\">\\n          ${selected}${\\n      !this.narrow\\n        ? html`\\n            selected\\n          `\\n        : \\\"\\\"\\n    }\\n        </span>\\n        ${\\n          emptyFilter\\n            ? html`\\n                <paper-icon-button\\n                  slot=\\\"toolbar-icon\\\"\\n                  icon=\\\"hass:tune\\\"\\n                  @click=${this._openDomainToggler}\\n                ></paper-icon-button>\\n              `\\n            : \\\"\\\"\\n        }\\n        ${\\n          !emptyFilter\\n            ? html`\\n                <div class=\\\"banner\\\">\\n                  ${this.hass!.localize(\\\"ui.panel.config.cloud.alexa.banner\\\")}\\n                </div>\\n              `\\n            : \\\"\\\"\\n        }\\n          ${\\n            exposedCards.length > 0\\n              ? html`\\n                  <h1>\\n                    ${this.hass!.localize(\\n                      \\\"ui.panel.config.cloud.alexa.exposed_entities\\\"\\n                    )}\\n                  </h1>\\n                  <div class=\\\"content\\\">${exposedCards}</div>\\n                `\\n              : \\\"\\\"\\n          }\\n          ${\\n            notExposedCards.length > 0\\n              ? html`\\n                  <h1>\\n                    ${this.hass!.localize(\\n                      \\\"ui.panel.config.cloud.alexa.not_exposed_entities\\\"\\n                    )}\\n                  </h1>\\n                  <div class=\\\"content\\\">${notExposedCards}</div>\\n                `\\n              : \\\"\\\"\\n          }\\n        </div>\\n      </hass-subpage>\\n    `;\\n  }\\n\\n  protected firstUpdated(changedProps) {\\n    super.firstUpdated(changedProps);\\n    this._fetchData();\\n  }\\n\\n  protected updated(changedProps) {\\n    super.updated(changedProps);\\n    if (changedProps.has(\\\"cloudStatus\\\")) {\\n      this._entityConfigs = this.cloudStatus.prefs.alexa_entity_configs;\\n    }\\n  }\\n\\n  private async _fetchData() {\\n    const entities = await fetchCloudAlexaEntities(this.hass);\\n    entities.sort((a, b) => {\\n      const stateA = this.hass.states[a.entity_id];\\n      const stateB = this.hass.states[b.entity_id];\\n      return compare(\\n        stateA ? computeStateName(stateA) : a.entity_id,\\n        stateB ? computeStateName(stateB) : b.entity_id\\n      );\\n    });\\n    this._entities = entities;\\n  }\\n\\n  private _showMoreInfo(ev) {\\n    const entityId = ev.currentTarget.stateObj.entity_id;\\n    fireEvent(this, \\\"hass-more-info\\\", { entityId });\\n  }\\n\\n  private async _exposeChanged(ev: Event) {\\n    const entityId = (ev.currentTarget as any).entityId;\\n    const newExposed = (ev.target as HaSwitch).checked;\\n    await this._updateExposed(entityId, newExposed);\\n  }\\n\\n  private async _updateExposed(entityId: string, newExposed: boolean) {\\n    const curExposed = configIsExposed(this._entityConfigs[entityId] || {});\\n    if (newExposed === curExposed) {\\n      return;\\n    }\\n    await this._updateConfig(entityId, {\\n      should_expose: newExposed,\\n    });\\n    this._ensureEntitySync();\\n  }\\n\\n  private async _updateConfig(entityId: string, values: AlexaEntityConfig) {\\n    const updatedConfig = await updateCloudAlexaEntityConfig(\\n      this.hass,\\n      entityId,\\n      values\\n    );\\n    this._entityConfigs = {\\n      ...this._entityConfigs,\\n      [entityId]: updatedConfig,\\n    };\\n    this._ensureStatusReload();\\n  }\\n\\n  private _openDomainToggler() {\\n    showDomainTogglerDialog(this, {\\n      domains: this._entities!.map((entity) =>\\n        computeDomain(entity.entity_id)\\n      ).filter((value, idx, self) => self.indexOf(value) === idx),\\n      toggleDomain: (domain, turnOn) => {\\n        this._entities!.forEach((entity) => {\\n          if (computeDomain(entity.entity_id) === domain) {\\n            this._updateExposed(entity.entity_id, turnOn);\\n          }\\n        });\\n      },\\n    });\\n  }\\n\\n  private _ensureStatusReload() {\\n    if (this._popstateReloadStatusAttached) {\\n      return;\\n    }\\n    this._popstateReloadStatusAttached = true;\\n    // Cache parent because by the time popstate happens,\\n    // this element is detached\\n    const parent = this.parentElement!;\\n    window.addEventListener(\\n      \\\"popstate\\\",\\n      () => fireEvent(parent, \\\"ha-refresh-cloud-status\\\"),\\n      { once: true }\\n    );\\n  }\\n\\n  private _ensureEntitySync() {\\n    if (this._popstateSyncAttached) {\\n      return;\\n    }\\n    this._popstateSyncAttached = true;\\n    // Cache parent because by the time popstate happens,\\n    // this element is detached\\n    // const parent = this.parentElement!;\\n    window.addEventListener(\\n      \\\"popstate\\\",\\n      () => {\\n        // We don't have anything yet.\\n        // showToast(parent, { message: \\\"Synchronizing changes to Google.\\\" });\\n        // cloudSyncGoogleAssistant(this.hass);\\n      },\\n      { once: true }\\n    );\\n  }\\n\\n  static get styles(): CSSResult {\\n    return css`\\n      .banner {\\n        color: var(--primary-text-color);\\n        background-color: var(\\n          --ha-card-background,\\n          var(--paper-card-background-color, white)\\n        );\\n        padding: 16px 8px;\\n        text-align: center;\\n      }\\n      h1 {\\n        color: var(--primary-text-color);\\n        font-size: 24px;\\n        letter-spacing: -0.012em;\\n        margin-bottom: 0;\\n        padding: 0 8px;\\n      }\\n      .content {\\n        display: flex;\\n        flex-wrap: wrap;\\n        padding: 4px;\\n      }\\n      ha-switch {\\n        clear: both;\\n      }\\n      ha-card {\\n        margin: 4px;\\n        width: 100%;\\n        max-width: 300px;\\n      }\\n      .card-content {\\n        padding-bottom: 12px;\\n      }\\n      state-info {\\n        cursor: pointer;\\n      }\\n      ha-switch {\\n        padding: 8px 0;\\n      }\\n\\n      @media all and (max-width: 450px) {\\n        ha-card {\\n          max-width: 100%;\\n        }\\n      }\\n    `;\\n  }\\n}\\n\\ndeclare global {\\n  interface HTMLElementTagNameMap {\\n    \\\"cloud-alexa\\\": CloudAlexa;\\n  }\\n}\\n\"]}","code":"(self.webpackJsonp=self.webpackJsonp||[]).push([[24],{725:function(e,t,n){\"use strict\";n.r(t);var r=n(0),i=(n(105),n(119)),o=(n(148),n(157),n(174),n(195),n(188),n(291)),a=n(505),s=n(199),c=n(14),l=n(506),u=n(503),d=n(173),f=n(115);function p(e){return(p=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function h(){var e=x([\"\\n      .banner {\\n        color: var(--primary-text-color);\\n        background-color: var(\\n          --ha-card-background,\\n          var(--paper-card-background-color, white)\\n        );\\n        padding: 16px 8px;\\n        text-align: center;\\n      }\\n      h1 {\\n        color: var(--primary-text-color);\\n        font-size: 24px;\\n        letter-spacing: -0.012em;\\n        margin-bottom: 0;\\n        padding: 0 8px;\\n      }\\n      .content {\\n        display: flex;\\n        flex-wrap: wrap;\\n        padding: 4px;\\n      }\\n      ha-switch {\\n        clear: both;\\n      }\\n      ha-card {\\n        margin: 4px;\\n        width: 100%;\\n        max-width: 300px;\\n      }\\n      .card-content {\\n        padding-bottom: 12px;\\n      }\\n      state-info {\\n        cursor: pointer;\\n      }\\n      ha-switch {\\n        padding: 8px 0;\\n      }\\n\\n      @media all and (max-width: 450px) {\\n        ha-card {\\n          max-width: 100%;\\n        }\\n      }\\n    \"]);return h=function(){return e},e}function y(){var e=x([\"\\n                  <h1>\\n                    \",'\\n                  </h1>\\n                  <div class=\"content\">',\"</div>\\n                \"]);return y=function(){return e},e}function m(){var e=x([\"\\n                  <h1>\\n                    \",'\\n                  </h1>\\n                  <div class=\"content\">',\"</div>\\n                \"]);return m=function(){return e},e}function v(){var e=x(['\\n                <div class=\"banner\">\\n                  ',\"\\n                </div>\\n              \"]);return v=function(){return e},e}function b(){var e=x(['\\n                <paper-icon-button\\n                  slot=\"toolbar-icon\"\\n                  icon=\"hass:tune\"\\n                  @click=',\"\\n                ></paper-icon-button>\\n              \"]);return b=function(){return e},e}function g(){var e=x([\"\\n            selected\\n          \"]);return g=function(){return e},e}function k(){var e=x(['\\n      <hass-subpage header=\"','\">\\n        <span slot=\"toolbar-icon\">\\n          ',\"\",\"\\n        </span>\\n        \",\"\\n        \",\"\\n          \",\"\\n          \",\"\\n        </div>\\n      </hass-subpage>\\n    \"]);return k=function(){return e},e}function w(){var e=x(['\\n        <ha-card>\\n          <div class=\"card-content\">\\n            <state-info\\n              .hass=',\"\\n              .stateObj=\",\"\\n              secondary-line\\n              @click=\",\"\\n            >\\n              \",\"\\n            </state-info>\\n            <ha-switch\\n              .entityId=\",\"\\n              .disabled=\",\"\\n              .checked=\",\"\\n              @change=\",\"\\n            >\\n              \",\"\\n            </ha-switch>\\n          </div>\\n        </ha-card>\\n      \"]);return w=function(){return e},e}function _(){var e=x([\"\\n        <hass-loading-screen></hass-loading-screen>\\n      \"]);return _=function(){return e},e}function x(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function E(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t,n=A(e.key);\"method\"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:\"get\"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:\"set\"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:\"field\"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var r={kind:\"field\"===e.kind?\"field\":\"method\",key:n,placement:e.static?\"static\":\"field\"===e.kind?\"own\":\"prototype\",descriptor:t};return e.decorators&&(r.decorators=e.decorators),\"field\"===e.kind&&(r.initializer=e.value),r}function S(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function P(e){return e.decorators&&e.decorators.length}function C(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function D(e,t){var n=e[t];if(void 0!==n&&\"function\"!=typeof n)throw new TypeError(\"Expected '\"+t+\"' to be a function\");return n}function A(e){var t=function(e,t){if(\"object\"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||\"default\");if(\"object\"!==p(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===p(t)?t:String(t)}function T(e,t,n){return(T=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=[\"Alexa.EndpointHealth\"],F=function(e){return void 0===e.should_expose||e.should_expose};!function(e,t,n,r){var i=function(){var e={elementsDefinitionOrder:[[\"method\"],[\"field\"]],initializeInstanceElements:function(e,t){[\"method\",\"field\"].forEach(function(n){t.forEach(function(t){t.kind===n&&\"own\"===t.placement&&this.defineClassElement(e,t)},this)},this)},initializeClassElements:function(e,t){var n=e.prototype;[\"method\",\"field\"].forEach(function(r){t.forEach(function(t){var i=t.placement;if(t.kind===r&&(\"static\"===i||\"prototype\"===i)){var o=\"static\"===i?e:n;this.defineClassElement(o,t)}},this)},this)},defineClassElement:function(e,t){var n=t.descriptor;if(\"field\"===t.kind){var r=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===r?void 0:r.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],r=[],i={static:[],prototype:[],own:[]};if(e.forEach(function(e){this.addElementPlacement(e,i)},this),e.forEach(function(e){if(!P(e))return n.push(e);var t=this.decorateElement(e,i);n.push(t.element),n.push.apply(n,t.extras),r.push.apply(r,t.finishers)},this),!t)return{elements:n,finishers:r};var o=this.decorateConstructor(n,t);return r.push.apply(r,o.finishers),o.finishers=r,o},addElementPlacement:function(e,t,n){var r=t[e.placement];if(!n&&-1!==r.indexOf(e.key))throw new TypeError(\"Duplicated element (\"+e.key+\")\");r.push(e.key)},decorateElement:function(e,t){for(var n=[],r=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&r.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);n.push.apply(n,l)}}return{element:e,finishers:r,extras:n}},decorateConstructor:function(e,t){for(var n=[],r=t.length-1;r>=0;r--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[r])(i)||i);if(void 0!==o.finisher&&n.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError(\"Duplicated element (\"+e[a].key+\")\")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:\"Descriptor\",configurable:!0}),\"field\"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()).map(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,\"finisher\",\"An element descriptor\"),this.disallowProperty(e,\"extras\",\"An element descriptor\"),t},this)},toElementDescriptor:function(e){var t=String(e.kind);if(\"method\"!==t&&\"field\"!==t)throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or \"field\", but a decorator created an element descriptor with .kind \"'+t+'\"');var n=A(e.key),r=String(e.placement);if(\"static\"!==r&&\"prototype\"!==r&&\"own\"!==r)throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\", \"prototype\" or \"own\", but a decorator created an element descriptor with .placement \"'+r+'\"');var i=e.descriptor;this.disallowProperty(e,\"elements\",\"An element descriptor\");var o={kind:t,key:n,placement:r,descriptor:Object.assign({},i)};return\"field\"!==t?this.disallowProperty(e,\"initializer\",\"A method descriptor\"):(this.disallowProperty(i,\"get\",\"The property descriptor of a field descriptor\"),this.disallowProperty(i,\"set\",\"The property descriptor of a field descriptor\"),this.disallowProperty(i,\"value\",\"The property descriptor of a field descriptor\"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){var t=this.toElementDescriptor(e),n=D(e,\"finisher\"),r=this.toElementDescriptors(e.extras);return{element:t,finisher:n,extras:r}},fromClassDescriptor:function(e){var t={kind:\"class\",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:\"Descriptor\",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if(\"class\"!==t)throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator created a class descriptor with .kind \"'+t+'\"');this.disallowProperty(e,\"key\",\"A class descriptor\"),this.disallowProperty(e,\"placement\",\"A class descriptor\"),this.disallowProperty(e,\"descriptor\",\"A class descriptor\"),this.disallowProperty(e,\"initializer\",\"A class descriptor\"),this.disallowProperty(e,\"extras\",\"A class descriptor\");var n=D(e,\"finisher\"),r=this.toElementDescriptors(e.elements);return{elements:r,finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var r=(0,t[n])(e);if(void 0!==r){if(\"function\"!=typeof r)throw new TypeError(\"Finishers must return a constructor.\");e=r}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+\" can't have a .\"+t+\" property.\")}};return e}();if(r)for(var o=0;o<r.length;o++)i=r[o](i);var a=t(function(e){i.initializeInstanceElements(e,s.elements)},n),s=i.decorateClass(function(e){for(var t=[],n=function(e){return\"method\"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if(\"method\"===o.kind&&(i=t.find(n)))if(C(o.descriptor)||C(i.descriptor)){if(P(o)||P(i))throw new ReferenceError(\"Duplicated methods (\"+o.key+\") can't be decorated.\");i.descriptor=o.descriptor}else{if(P(o)){if(P(i))throw new ReferenceError(\"Decorators can't be placed on different accessors with for the same property (\"+o.key+\").\");i.decorators=o.decorators}S(o,i)}else t.push(o)}return t}(a.d.map(j)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([Object(r.d)(\"cloud-alexa\")],function(e,t){var n=function(n){function r(){var t,n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,r);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return i=this,n=!(o=(t=z(r)).call.apply(t,[this].concat(s)))||\"object\"!==p(o)&&\"function\"!=typeof o?E(i):o,e(E(n)),n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(r,t),r}();return{F:n,d:[{kind:\"field\",decorators:[Object(r.g)()],key:\"hass\",value:void 0},{kind:\"field\",decorators:[Object(r.g)()],key:\"cloudStatus\",value:void 0},{kind:\"field\",decorators:[Object(r.g)({type:Boolean})],key:\"narrow\",value:void 0},{kind:\"field\",decorators:[Object(r.g)()],key:\"_entities\",value:void 0},{kind:\"field\",decorators:[Object(r.g)()],key:\"_entityConfigs\",value:function(){return{}}},{kind:\"field\",key:\"_popstateSyncAttached\",value:function(){return!1}},{kind:\"field\",key:\"_popstateReloadStatusAttached\",value:function(){return!1}},{kind:\"field\",key:\"_isInitialExposed\",value:void 0},{kind:\"field\",key:\"_getEntityFilterFunc\",value:function(){return Object(i.a)(function(e){return Object(a.a)(e.include_domains,e.include_entities,e.exclude_domains,e.exclude_entities)})}},{kind:\"method\",key:\"render\",value:function(){var e=this;if(void 0===this._entities)return Object(r.f)(_());var t=Object(a.b)(this.cloudStatus.alexa_entities),n=this._getEntityFilterFunc(this.cloudStatus.alexa_entities),i=this._isInitialExposed||new Set,o=void 0===this._isInitialExposed,s=0,c=[],l=[];return this._entities.forEach(function(a){var u=e.hass.states[a.entity_id],d=e._entityConfigs[a.entity_id]||{},f=t?F(d):n(a.entity_id);f&&(s++,o&&i.add(a.entity_id)),(i.has(a.entity_id)?c:l).push(Object(r.f)(w(),e.hass,u,e._showMoreInfo,a.interfaces.filter(function(e){return!R.includes(e)}).map(function(e){return e.replace(\"Alexa.\",\"\").replace(\"Controller\",\"\")}).join(\", \"),a.entity_id,!t,f,e._exposeChanged,e.hass.localize(\"ui.panel.config.cloud.alexa.expose\")))}),o&&(this._isInitialExposed=i),Object(r.f)(k(),this.hass.localize(\"ui.panel.config.cloud.alexa.title\"),s,this.narrow?\"\":Object(r.f)(g()),t?Object(r.f)(b(),this._openDomainToggler):\"\",t?\"\":Object(r.f)(v(),this.hass.localize(\"ui.panel.config.cloud.alexa.banner\")),c.length>0?Object(r.f)(m(),this.hass.localize(\"ui.panel.config.cloud.alexa.exposed_entities\"),c):\"\",l.length>0?Object(r.f)(y(),this.hass.localize(\"ui.panel.config.cloud.alexa.not_exposed_entities\"),l):\"\")}},{kind:\"method\",key:\"firstUpdated\",value:function(e){T(z(n.prototype),\"firstUpdated\",this).call(this,e),this._fetchData()}},{kind:\"method\",key:\"updated\",value:function(e){T(z(n.prototype),\"updated\",this).call(this,e),e.has(\"cloudStatus\")&&(this._entityConfigs=this.cloudStatus.prefs.alexa_entity_configs)}},{kind:\"method\",key:\"_fetchData\",value:function(){var e,t=this;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Object(u.a)(this.hass));case 2:(e=n.sent).sort(function(e,n){var r=t.hass.states[e.entity_id],i=t.hass.states[n.entity_id];return Object(s.b)(r?Object(d.a)(r):e.entity_id,i?Object(d.a)(i):n.entity_id)}),this._entities=e;case 5:case\"end\":return n.stop()}},null,this)}},{kind:\"method\",key:\"_showMoreInfo\",value:function(e){var t=e.currentTarget.stateObj.entity_id;Object(c.a)(this,\"hass-more-info\",{entityId:t})}},{kind:\"method\",key:\"_exposeChanged\",value:function(e){var t,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.currentTarget.entityId,n=e.target.checked,r.next=4,regeneratorRuntime.awrap(this._updateExposed(t,n));case 4:case\"end\":return r.stop()}},null,this)}},{kind:\"method\",key:\"_updateExposed\",value:function(e,t){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=F(this._entityConfigs[e]||{}),t!==n){r.next=3;break}return r.abrupt(\"return\");case 3:return r.next=5,regeneratorRuntime.awrap(this._updateConfig(e,{should_expose:t}));case 5:this._ensureEntitySync();case 6:case\"end\":return r.stop()}},null,this)}},{kind:\"method\",key:\"_updateConfig\",value:function(e,t){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(o.i)(this.hass,e,t));case 2:n=r.sent,this._entityConfigs=Object.assign({},this._entityConfigs,(s=n,(a=e)in(i={})?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i)),this._ensureStatusReload();case 5:case\"end\":return r.stop()}var i,a,s},null,this)}},{kind:\"method\",key:\"_openDomainToggler\",value:function(){var e=this;Object(l.a)(this,{domains:this._entities.map(function(e){return Object(f.a)(e.entity_id)}).filter(function(e,t,n){return n.indexOf(e)===t}),toggleDomain:function(t,n){e._entities.forEach(function(r){Object(f.a)(r.entity_id)===t&&e._updateExposed(r.entity_id,n)})}})}},{kind:\"method\",key:\"_ensureStatusReload\",value:function(){if(!this._popstateReloadStatusAttached){this._popstateReloadStatusAttached=!0;var e=this.parentElement;window.addEventListener(\"popstate\",function(){return Object(c.a)(e,\"ha-refresh-cloud-status\")},{once:!0})}}},{kind:\"method\",key:\"_ensureEntitySync\",value:function(){this._popstateSyncAttached||(this._popstateSyncAttached=!0,window.addEventListener(\"popstate\",function(){},{once:!0}))}},{kind:\"get\",static:!0,key:\"styles\",value:function(){return Object(r.c)(h())}}]}},r.a)}}]);","extractedComments":[]}