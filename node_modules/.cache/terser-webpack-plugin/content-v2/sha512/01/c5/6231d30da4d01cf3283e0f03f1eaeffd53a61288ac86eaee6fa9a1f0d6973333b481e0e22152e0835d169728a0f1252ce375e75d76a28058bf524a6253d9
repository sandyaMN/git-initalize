{"map":"{\"version\":3,\"sources\":[\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/src/panels/lovelace/common/structs/struct.ts\",\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/src/panels/lovelace/common/structs/is-entity-id.ts\",\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/src/panels/lovelace/common/structs/is-icon.ts\",\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/src/resources/codemirror.ondemand.ts\",\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/src/components/ha-code-editor.ts\",\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/src/panels/lovelace/hui-editor.ts\"],\"names\":[\"__webpack_require__\",\"d\",\"__webpack_exports__\",\"struct\",\"superstruct\",\"types\",\"entity-id\",\"value\",\"includes\",\"icon\",\"loaded\",\"_decorate\",\"customElement\",\"_initialize\",\"_UpdatingElement\",\"HaCodeEditor\",\"_UpdatingElement2\",\"_getPrototypeOf2\",\"_this\",\"_classCallCheck\",\"this\",\"_len\",\"arguments\",\"length\",\"args\",\"Array\",\"_key\",\"_getPrototypeOf\",\"call\",\"apply\",\"concat\",\"_assertThisInitialized\",\"_inherits\",\"F\",\"kind\",\"key\",\"decorators\",\"property\",\"_value\",\"codemirror\",\"getValue\",\"shadowRoot\",\"querySelector\",\"_get\",\"prototype\",\"refresh\",\"autofocus\",\"focus\",\"changedProps\",\"has\",\"setOption\",\"mode\",\"setValue\",\"_calcGutters\",\"_setScrollBarDirection\",\"classList\",\"toggle\",\"error\",\"_load\",\"codeMirror\",\"_this2\",\"regeneratorRuntime\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"Promise\",\"all\",\"e\",\"then\",\"bind\",\"abrupt\",\"stop\",\"sent\",\"attachShadow\",\"innerHTML\",\"codeMirrorCss\",\"lineNumbers\",\"tabSize\",\"viewportMargin\",\"Infinity\",\"extraKeys\",\"Tab\",\"Shift-Tab\",\"gutters\",\"on\",\"_onChange\",\"newValue\",\"fireEvent\",\"rtl\",\"getWrapperElement\",\"UpdatingElement\",\"lovelaceStruct\",\"title\",\"views\",\"resources\",\"optional\",\"LovelaceFullConfigEditor\",\"LitElement\",\"hass\",\"lovelace\",\"closeEditor\",\"_saving\",\"_changed\",\"haStyle\",\"css\",\"_templateObject2\",\"html\",\"_templateObject\",\"_closeEditor\",\"localize\",\"classMap\",\"saved\",\"_handleSave\",\"computeRTL\",\"_yamlChanged\",\"yamlEditor\",\"safeDump\",\"config\",\"getDoc\",\"isClean\",\"_generation\",\"window\",\"onbeforeunload\",\"confirm\",\"hasComments\",\"safeLoad\",\"alert\",\"t0\",\"t1\",\"saveConfig\",\"t2\",\"changeGeneration\",\"customElements\",\"define\"],\"mappings\":\"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\",\"sourcesContent\":[\"import { superstruct } from \\\"superstruct\\\";\\nimport { isEntityId } from \\\"./is-entity-id\\\";\\nimport { isIcon } from \\\"./is-icon\\\";\\n\\nexport const struct = superstruct({\\n  types: {\\n    \\\"entity-id\\\": isEntityId,\\n    icon: isIcon,\\n  },\\n});\\n\",\"export function isEntityId(value: any): string | boolean {\\n  if (typeof value !== \\\"string\\\") {\\n    return \\\"entity id should be a string\\\";\\n  }\\n  if (!value.includes(\\\".\\\")) {\\n    return \\\"entity id should be in the format 'domain.entity'\\\";\\n  }\\n  return true;\\n}\\n\",\"export function isIcon(value: any): string | boolean {\\n  if (typeof value !== \\\"string\\\") {\\n    return \\\"icon should be a string\\\";\\n  }\\n  if (!value.includes(\\\":\\\")) {\\n    return \\\"icon should be in the format 'mdi:icon'\\\";\\n  }\\n  return true;\\n}\\n\",\"interface LoadedCodeMirror {\\n  codeMirror: any;\\n  codeMirrorCss: any;\\n}\\n\\nlet loaded: Promise<LoadedCodeMirror>;\\n\\nexport const loadCodeMirror = async (): Promise<LoadedCodeMirror> => {\\n  if (!loaded) {\\n    loaded = import(/* webpackChunkName: \\\"codemirror\\\" */ \\\"./codemirror\\\");\\n  }\\n  return loaded;\\n};\\n\",\"import { loadCodeMirror } from \\\"../resources/codemirror.ondemand\\\";\\nimport { fireEvent } from \\\"../common/dom/fire_event\\\";\\nimport {\\n  UpdatingElement,\\n  property,\\n  customElement,\\n  PropertyValues,\\n} from \\\"lit-element\\\";\\nimport { Editor } from \\\"codemirror\\\";\\n\\ndeclare global {\\n  interface HASSDomEvents {\\n    \\\"editor-save\\\": undefined;\\n  }\\n}\\n\\n@customElement(\\\"ha-code-editor\\\")\\nexport class HaCodeEditor extends UpdatingElement {\\n  public codemirror?: Editor;\\n  @property() public mode?: string;\\n  @property() public autofocus = false;\\n  @property() public rtl = false;\\n  @property() public error = false;\\n  @property() private _value = \\\"\\\";\\n\\n  public set value(value: string) {\\n    this._value = value;\\n  }\\n\\n  public get value(): string {\\n    return this.codemirror ? this.codemirror.getValue() : this._value;\\n  }\\n\\n  public get hasComments(): boolean {\\n    return this.shadowRoot!.querySelector(\\\"span.cm-comment\\\") ? true : false;\\n  }\\n\\n  public connectedCallback() {\\n    super.connectedCallback();\\n    if (!this.codemirror) {\\n      return;\\n    }\\n    this.codemirror.refresh();\\n    if (this.autofocus !== false) {\\n      this.codemirror.focus();\\n    }\\n  }\\n\\n  protected update(changedProps: PropertyValues): void {\\n    super.update(changedProps);\\n\\n    if (!this.codemirror) {\\n      return;\\n    }\\n\\n    if (changedProps.has(\\\"mode\\\")) {\\n      this.codemirror.setOption(\\\"mode\\\", this.mode);\\n    }\\n    if (changedProps.has(\\\"autofocus\\\")) {\\n      this.codemirror.setOption(\\\"autofocus\\\", this.autofocus !== false);\\n    }\\n    if (changedProps.has(\\\"_value\\\") && this._value !== this.value) {\\n      this.codemirror.setValue(this._value);\\n    }\\n    if (changedProps.has(\\\"rtl\\\")) {\\n      this.codemirror.setOption(\\\"gutters\\\", this._calcGutters());\\n      this._setScrollBarDirection();\\n    }\\n    if (changedProps.has(\\\"error\\\")) {\\n      this.classList.toggle(\\\"error-state\\\", this.error);\\n    }\\n  }\\n\\n  protected firstUpdated(changedProps: PropertyValues): void {\\n    super.firstUpdated(changedProps);\\n    this._load();\\n  }\\n\\n  private async _load(): Promise<void> {\\n    const loaded = await loadCodeMirror();\\n\\n    const codeMirror = loaded.codeMirror;\\n\\n    const shadowRoot = this.attachShadow({ mode: \\\"open\\\" });\\n\\n    shadowRoot!.innerHTML = `\\n    <style>\\n      ${loaded.codeMirrorCss}\\n      .CodeMirror {\\n        height: var(--code-mirror-height, auto);\\n        direction: var(--code-mirror-direction, ltr);\\n      }\\n      .CodeMirror-scroll {\\n        max-height: var(--code-mirror-max-height, --code-mirror-height);\\n      }\\n      .CodeMirror-gutters {\\n        border-right: 1px solid var(--paper-input-container-color, var(--secondary-text-color));\\n        background-color: var(--paper-dialog-background-color, var(--primary-background-color));\\n        transition: 0.2s ease border-right;\\n      }\\n      :host(.error-state) .CodeMirror-gutters {\\n        border-color: var(--error-state-color, red);\\n      }\\n      .CodeMirror-focused .CodeMirror-gutters {\\n        border-right: 2px solid var(--paper-input-container-focus-color, var(--primary-color));\\n      }\\n      .CodeMirror-linenumber {\\n        color: var(--paper-dialog-color, var(--primary-text-color));\\n      }\\n      .rtl .CodeMirror-vscrollbar {\\n        right: auto;\\n        left: 0px;\\n      }\\n      .rtl-gutter {\\n        width: 20px;\\n      }\\n    </style>`;\\n\\n    this.codemirror = codeMirror(shadowRoot, {\\n      value: this._value,\\n      lineNumbers: true,\\n      tabSize: 2,\\n      mode: this.mode,\\n      autofocus: this.autofocus !== false,\\n      viewportMargin: Infinity,\\n      extraKeys: {\\n        Tab: \\\"indentMore\\\",\\n        \\\"Shift-Tab\\\": \\\"indentLess\\\",\\n      },\\n      gutters: this._calcGutters(),\\n    });\\n    this._setScrollBarDirection();\\n    this.codemirror!.on(\\\"changes\\\", () => this._onChange());\\n  }\\n\\n  private _onChange(): void {\\n    const newValue = this.value;\\n    if (newValue === this._value) {\\n      return;\\n    }\\n    this._value = newValue;\\n    fireEvent(this, \\\"value-changed\\\", { value: this._value });\\n  }\\n\\n  private _calcGutters(): string[] {\\n    return this.rtl ? [\\\"rtl-gutter\\\", \\\"CodeMirror-linenumbers\\\"] : [];\\n  }\\n\\n  private _setScrollBarDirection(): void {\\n    if (this.codemirror) {\\n      this.codemirror.getWrapperElement().classList.toggle(\\\"rtl\\\", this.rtl);\\n    }\\n  }\\n}\\n\\ndeclare global {\\n  interface HTMLElementTagNameMap {\\n    \\\"ha-code-editor\\\": HaCodeEditor;\\n  }\\n}\\n\",\"import { LitElement, html, TemplateResult, CSSResult, css } from \\\"lit-element\\\";\\nimport { classMap } from \\\"lit-html/directives/class-map\\\";\\nimport { safeDump, safeLoad } from \\\"js-yaml\\\";\\n\\nimport \\\"@polymer/app-layout/app-header-layout/app-header-layout\\\";\\nimport \\\"@polymer/app-layout/app-header/app-header\\\";\\nimport \\\"@polymer/app-layout/app-toolbar/app-toolbar\\\";\\nimport \\\"@material/mwc-button\\\";\\nimport \\\"@polymer/paper-icon-button/paper-icon-button\\\";\\nimport \\\"@polymer/paper-spinner/paper-spinner\\\";\\n\\nimport { struct } from \\\"./common/structs/struct\\\";\\nimport { Lovelace } from \\\"./types\\\";\\n\\nimport \\\"../../components/ha-icon\\\";\\nimport { haStyle } from \\\"../../resources/styles\\\";\\nimport \\\"../../components/ha-code-editor\\\";\\n// This is not a duplicate import, one is for types, one is for element.\\n// tslint:disable-next-line\\nimport { HaCodeEditor } from \\\"../../components/ha-code-editor\\\";\\nimport { HomeAssistant } from \\\"../../types\\\";\\nimport { computeRTL } from \\\"../../common/util/compute_rtl\\\";\\n\\nconst lovelaceStruct = struct.interface({\\n  title: \\\"string?\\\",\\n  views: [\\\"object\\\"],\\n  resources: struct.optional([\\\"object\\\"]),\\n});\\n\\nclass LovelaceFullConfigEditor extends LitElement {\\n  public hass!: HomeAssistant;\\n  public lovelace?: Lovelace;\\n  public closeEditor?: () => void;\\n  private _saving?: boolean;\\n  private _changed?: boolean;\\n  private _generation = 1;\\n\\n  static get properties() {\\n    return {\\n      hass: {},\\n      lovelace: {},\\n      closeEditor: {},\\n      _saving: {},\\n      _changed: {},\\n    };\\n  }\\n\\n  public render(): TemplateResult | void {\\n    return html`\\n      <app-header-layout>\\n        <app-header>\\n          <app-toolbar>\\n            <paper-icon-button\\n              icon=\\\"hass:close\\\"\\n              @click=\\\"${this._closeEditor}\\\"\\n            ></paper-icon-button>\\n            <div main-title>\\n              ${this.hass!.localize(\\n                \\\"ui.panel.lovelace.editor.raw_editor.header\\\"\\n              )}\\n            </div>\\n            <div\\n              class=\\\"save-button\\n              ${classMap({\\n                saved: this._saving! === false || this._changed === true,\\n              })}\\\"\\n            >\\n              ${this._changed\\n                ? this.hass!.localize(\\n                    \\\"ui.panel.lovelace.editor.raw_editor.unsaved_changes\\\"\\n                  )\\n                : this.hass!.localize(\\n                    \\\"ui.panel.lovelace.editor.raw_editor.saved\\\"\\n                  )}\\n            </div>\\n            <mwc-button raised @click=\\\"${this._handleSave}\\\"\\n              >${this.hass!.localize(\\n                \\\"ui.panel.lovelace.editor.raw_editor.save\\\"\\n              )}</mwc-button\\n            >\\n          </app-toolbar>\\n        </app-header>\\n        <div class=\\\"content\\\">\\n          <ha-code-editor\\n            mode=\\\"yaml\\\"\\n            autofocus\\n            .rtl=${computeRTL(this.hass)}\\n            .hass=\\\"${this.hass}\\\"\\n            @value-changed=\\\"${this._yamlChanged}\\\"\\n            @editor-save=\\\"${this._handleSave}\\\"\\n          >\\n          </ha-code-editor>\\n        </div>\\n      </app-header-layout>\\n    `;\\n  }\\n\\n  protected firstUpdated() {\\n    this.yamlEditor.value = safeDump(this.lovelace!.config);\\n  }\\n\\n  static get styles(): CSSResult[] {\\n    return [\\n      haStyle,\\n      css`\\n        :host {\\n          --code-mirror-height: 100%;\\n        }\\n\\n        app-header-layout {\\n          height: 100vh;\\n        }\\n\\n        app-toolbar {\\n          background-color: var(--dark-background-color, #455a64);\\n          color: var(--dark-text-color);\\n        }\\n\\n        .comments {\\n          font-size: 16px;\\n        }\\n\\n        .content {\\n          height: calc(100vh - 68px);\\n        }\\n\\n        hui-code-editor {\\n          height: 100%;\\n        }\\n\\n        .save-button {\\n          opacity: 0;\\n          font-size: 14px;\\n          padding: 0px 10px;\\n        }\\n\\n        .saved {\\n          opacity: 1;\\n        }\\n      `,\\n    ];\\n  }\\n\\n  private _yamlChanged() {\\n    this._changed = !this.yamlEditor\\n      .codemirror!.getDoc()\\n      .isClean(this._generation);\\n    if (this._changed && !window.onbeforeunload) {\\n      window.onbeforeunload = () => {\\n        return true;\\n      };\\n    } else if (!this._changed && window.onbeforeunload) {\\n      window.onbeforeunload = null;\\n    }\\n  }\\n\\n  private _closeEditor() {\\n    if (this._changed) {\\n      if (\\n        !confirm(\\n          this.hass.localize(\\n            \\\"ui.panel.lovelace.editor.raw_editor.confirm_unsaved_changes\\\"\\n          )\\n        )\\n      ) {\\n        return;\\n      }\\n    }\\n    window.onbeforeunload = null;\\n    if (this.closeEditor) {\\n      this.closeEditor();\\n    }\\n  }\\n\\n  private async _handleSave() {\\n    this._saving = true;\\n\\n    if (this.yamlEditor.hasComments) {\\n      if (\\n        !confirm(\\n          this.hass.localize(\\n            \\\"ui.panel.lovelace.editor.raw_editor.confirm_unsaved_comments\\\"\\n          )\\n        )\\n      ) {\\n        return;\\n      }\\n    }\\n\\n    let value;\\n    try {\\n      value = safeLoad(this.yamlEditor.value);\\n    } catch (err) {\\n      alert(\\n        this.hass.localize(\\n          \\\"ui.panel.lovelace.editor.raw_editor.error_parse_yaml\\\",\\n          \\\"error\\\",\\n          err\\n        )\\n      );\\n      this._saving = false;\\n      return;\\n    }\\n    try {\\n      value = lovelaceStruct(value);\\n    } catch (err) {\\n      alert(\\n        this.hass.localize(\\n          \\\"ui.panel.lovelace.editor.raw_editor.error_invalid_config\\\",\\n          \\\"error\\\",\\n          err\\n        )\\n      );\\n      return;\\n    }\\n    try {\\n      await this.lovelace!.saveConfig(value);\\n    } catch (err) {\\n      alert(\\n        this.hass.localize(\\n          \\\"ui.panel.lovelace.editor.raw_editor.error_save_yaml\\\",\\n          \\\"error\\\",\\n          err\\n        )\\n      );\\n    }\\n    this._generation = this.yamlEditor\\n      .codemirror!.getDoc()\\n      .changeGeneration(true);\\n    window.onbeforeunload = null;\\n    this._saving = false;\\n    this._changed = false;\\n  }\\n\\n  private get yamlEditor(): HaCodeEditor {\\n    return this.shadowRoot!.querySelector(\\\"ha-code-editor\\\")! as HaCodeEditor;\\n  }\\n}\\n\\ndeclare global {\\n  interface HTMLElementTagNameMap {\\n    \\\"hui-editor\\\": LovelaceFullConfigEditor;\\n  }\\n}\\n\\ncustomElements.define(\\\"hui-editor\\\", LovelaceFullConfigEditor);\\n\"]}","code":"(self.webpackJsonp=self.webpackJsonp||[]).push([[81],{189:function(e,t,r){\"use strict\";var n=r(230);r.d(t,\"a\",function(){return o});var o=Object(n.a)({types:{\"entity-id\":function(e){return\"string\"!=typeof e?\"entity id should be a string\":!!e.includes(\".\")||\"entity id should be in the format 'domain.entity'\"},icon:function(e){return\"string\"!=typeof e?\"icon should be a string\":!!e.includes(\":\")||\"icon should be in the format 'mdi:icon'\"}}})},238:function(e,t,r){\"use strict\";var n,o=r(14),i=r(0);function a(e){return(a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t,r=p(e.key);\"method\"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:\"get\"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:\"set\"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:\"field\"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:\"field\"===e.kind?\"field\":\"method\",key:r,placement:e.static?\"static\":\"field\"===e.kind?\"own\":\"prototype\",descriptor:t};return e.decorators&&(n.decorators=e.decorators),\"field\"===e.kind&&(n.initializer=e.value),n}function u(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function d(e){return e.decorators&&e.decorators.length}function h(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function f(e,t){var r=e[t];if(void 0!==r&&\"function\"!=typeof r)throw new TypeError(\"Expected '\"+t+\"' to be a function\");return r}function p(e){var t=function(e,t){if(\"object\"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||\"default\");if(\"object\"!==a(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===a(t)?t:String(t)}function m(e,t,r){return(m=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t,r,n){var o=function(){var e={elementsDefinitionOrder:[[\"method\"],[\"field\"]],initializeInstanceElements:function(e,t){[\"method\",\"field\"].forEach(function(r){t.forEach(function(t){t.kind===r&&\"own\"===t.placement&&this.defineClassElement(e,t)},this)},this)},initializeClassElements:function(e,t){var r=e.prototype;[\"method\",\"field\"].forEach(function(n){t.forEach(function(t){var o=t.placement;if(t.kind===n&&(\"static\"===o||\"prototype\"===o)){var i=\"static\"===o?e:r;this.defineClassElement(i,t)}},this)},this)},defineClassElement:function(e,t){var r=t.descriptor;if(\"field\"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],o={static:[],prototype:[],own:[]};if(e.forEach(function(e){this.addElementPlacement(e,o)},this),e.forEach(function(e){if(!d(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)},this),!t)return{elements:r,finishers:n};var i=this.decorateConstructor(r,t);return n.push.apply(n,i.finishers),i.finishers=n,i},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError(\"Duplicated element (\"+e.key+\")\");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],o=e.decorators,i=o.length-1;i>=0;i--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,o[i])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var o=this.fromClassDescriptor(e),i=this.toClassDescriptor((0,t[n])(o)||o);if(void 0!==i.finisher&&r.push(i.finisher),void 0!==i.elements){e=i.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError(\"Duplicated element (\"+e[a].key+\")\")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:\"Descriptor\",configurable:!0}),\"field\"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()).map(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,\"finisher\",\"An element descriptor\"),this.disallowProperty(e,\"extras\",\"An element descriptor\"),t},this)},toElementDescriptor:function(e){var t=String(e.kind);if(\"method\"!==t&&\"field\"!==t)throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or \"field\", but a decorator created an element descriptor with .kind \"'+t+'\"');var r=p(e.key),n=String(e.placement);if(\"static\"!==n&&\"prototype\"!==n&&\"own\"!==n)throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\", \"prototype\" or \"own\", but a decorator created an element descriptor with .placement \"'+n+'\"');var o=e.descriptor;this.disallowProperty(e,\"elements\",\"An element descriptor\");var i={kind:t,key:r,placement:n,descriptor:Object.assign({},o)};return\"field\"!==t?this.disallowProperty(e,\"initializer\",\"A method descriptor\"):(this.disallowProperty(o,\"get\",\"The property descriptor of a field descriptor\"),this.disallowProperty(o,\"set\",\"The property descriptor of a field descriptor\"),this.disallowProperty(o,\"value\",\"The property descriptor of a field descriptor\"),i.initializer=e.initializer),i},toElementFinisherExtras:function(e){var t=this.toElementDescriptor(e),r=f(e,\"finisher\"),n=this.toElementDescriptors(e.extras);return{element:t,finisher:r,extras:n}},fromClassDescriptor:function(e){var t={kind:\"class\",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:\"Descriptor\",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if(\"class\"!==t)throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator created a class descriptor with .kind \"'+t+'\"');this.disallowProperty(e,\"key\",\"A class descriptor\"),this.disallowProperty(e,\"placement\",\"A class descriptor\"),this.disallowProperty(e,\"descriptor\",\"A class descriptor\"),this.disallowProperty(e,\"initializer\",\"A class descriptor\"),this.disallowProperty(e,\"extras\",\"A class descriptor\");var r=f(e,\"finisher\"),n=this.toElementDescriptors(e.elements);return{elements:n,finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if(\"function\"!=typeof n)throw new TypeError(\"Finishers must return a constructor.\");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+\" can't have a .\"+t+\" property.\")}};return e}();if(n)for(var i=0;i<n.length;i++)o=n[i](o);var a=t(function(e){o.initializeInstanceElements(e,s.elements)},r),s=o.decorateClass(function(e){for(var t=[],r=function(e){return\"method\"===e.kind&&e.key===i.key&&e.placement===i.placement},n=0;n<e.length;n++){var o,i=e[n];if(\"method\"===i.kind&&(o=t.find(r)))if(h(i.descriptor)||h(o.descriptor)){if(d(i)||d(o))throw new ReferenceError(\"Duplicated methods (\"+i.key+\") can't be decorated.\");o.descriptor=i.descriptor}else{if(d(i)){if(d(o))throw new ReferenceError(\"Decorators can't be placed on different accessors with for the same property (\"+i.key+\").\");o.decorators=i.decorators}u(i,o)}else t.push(i)}return t}(a.d.map(l)),e);o.initializeClassElements(a.F,s.elements),o.runClassFinishers(a.F,s.finishers)}([Object(i.d)(\"ha-code-editor\")],function(e,t){var l=function(r){function n(){var t,r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,n);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return o=this,r=!(i=(t=v(n)).call.apply(t,[this].concat(l)))||\"object\"!==a(i)&&\"function\"!=typeof i?s(o):i,e(s(r)),r}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,t),n}();return{F:l,d:[{kind:\"field\",key:\"codemirror\",value:void 0},{kind:\"field\",decorators:[Object(i.g)()],key:\"mode\",value:void 0},{kind:\"field\",decorators:[Object(i.g)()],key:\"autofocus\",value:function(){return!1}},{kind:\"field\",decorators:[Object(i.g)()],key:\"rtl\",value:function(){return!1}},{kind:\"field\",decorators:[Object(i.g)()],key:\"error\",value:function(){return!1}},{kind:\"field\",decorators:[Object(i.g)()],key:\"_value\",value:function(){return\"\"}},{kind:\"set\",key:\"value\",value:function(e){this._value=e}},{kind:\"get\",key:\"value\",value:function(){return this.codemirror?this.codemirror.getValue():this._value}},{kind:\"get\",key:\"hasComments\",value:function(){return!!this.shadowRoot.querySelector(\"span.cm-comment\")}},{kind:\"method\",key:\"connectedCallback\",value:function(){m(v(l.prototype),\"connectedCallback\",this).call(this),this.codemirror&&(this.codemirror.refresh(),!1!==this.autofocus&&this.codemirror.focus())}},{kind:\"method\",key:\"update\",value:function(e){m(v(l.prototype),\"update\",this).call(this,e),this.codemirror&&(e.has(\"mode\")&&this.codemirror.setOption(\"mode\",this.mode),e.has(\"autofocus\")&&this.codemirror.setOption(\"autofocus\",!1!==this.autofocus),e.has(\"_value\")&&this._value!==this.value&&this.codemirror.setValue(this._value),e.has(\"rtl\")&&(this.codemirror.setOption(\"gutters\",this._calcGutters()),this._setScrollBarDirection()),e.has(\"error\")&&this.classList.toggle(\"error-state\",this.error))}},{kind:\"method\",key:\"firstUpdated\",value:function(e){m(v(l.prototype),\"firstUpdated\",this).call(this,e),this._load()}},{kind:\"method\",key:\"_load\",value:function(){var e,t,o,i=this;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n||(n=Promise.all([r.e(123),r.e(29)]).then(r.bind(null,722))),e.abrupt(\"return\",n);case 2:case\"end\":return e.stop()}}));case 2:e=a.sent,t=e.codeMirror,(o=this.attachShadow({mode:\"open\"})).innerHTML=\"\\n    <style>\\n      \".concat(e.codeMirrorCss,\"\\n      .CodeMirror {\\n        height: var(--code-mirror-height, auto);\\n        direction: var(--code-mirror-direction, ltr);\\n      }\\n      .CodeMirror-scroll {\\n        max-height: var(--code-mirror-max-height, --code-mirror-height);\\n      }\\n      .CodeMirror-gutters {\\n        border-right: 1px solid var(--paper-input-container-color, var(--secondary-text-color));\\n        background-color: var(--paper-dialog-background-color, var(--primary-background-color));\\n        transition: 0.2s ease border-right;\\n      }\\n      :host(.error-state) .CodeMirror-gutters {\\n        border-color: var(--error-state-color, red);\\n      }\\n      .CodeMirror-focused .CodeMirror-gutters {\\n        border-right: 2px solid var(--paper-input-container-focus-color, var(--primary-color));\\n      }\\n      .CodeMirror-linenumber {\\n        color: var(--paper-dialog-color, var(--primary-text-color));\\n      }\\n      .rtl .CodeMirror-vscrollbar {\\n        right: auto;\\n        left: 0px;\\n      }\\n      .rtl-gutter {\\n        width: 20px;\\n      }\\n    </style>\"),this.codemirror=t(o,{value:this._value,lineNumbers:!0,tabSize:2,mode:this.mode,autofocus:!1!==this.autofocus,viewportMargin:1/0,extraKeys:{Tab:\"indentMore\",\"Shift-Tab\":\"indentLess\"},gutters:this._calcGutters()}),this._setScrollBarDirection(),this.codemirror.on(\"changes\",function(){return i._onChange()});case 9:case\"end\":return a.stop()}},null,this)}},{kind:\"method\",key:\"_onChange\",value:function(){var e=this.value;e!==this._value&&(this._value=e,Object(o.a)(this,\"value-changed\",{value:this._value}))}},{kind:\"method\",key:\"_calcGutters\",value:function(){return this.rtl?[\"rtl-gutter\",\"CodeMirror-linenumbers\"]:[]}},{kind:\"method\",key:\"_setScrollBarDirection\",value:function(){this.codemirror&&this.codemirror.getWrapperElement().classList.toggle(\"rtl\",this.rtl)}}]}},i.b)},697:function(e,t,r){\"use strict\";r.r(t);var n=r(0),o=r(70),i=r(268),a=(r(201),r(216),r(146),r(83),r(105),r(184),r(189)),s=(r(176),r(54)),c=(r(238),r(93));function l(e){return(l=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function u(){var e=h([\"\\n        :host {\\n          --code-mirror-height: 100%;\\n        }\\n\\n        app-header-layout {\\n          height: 100vh;\\n        }\\n\\n        app-toolbar {\\n          background-color: var(--dark-background-color, #455a64);\\n          color: var(--dark-text-color);\\n        }\\n\\n        .comments {\\n          font-size: 16px;\\n        }\\n\\n        .content {\\n          height: calc(100vh - 68px);\\n        }\\n\\n        hui-code-editor {\\n          height: 100%;\\n        }\\n\\n        .save-button {\\n          opacity: 0;\\n          font-size: 14px;\\n          padding: 0px 10px;\\n        }\\n\\n        .saved {\\n          opacity: 1;\\n        }\\n      \"]);return u=function(){return e},e}function d(){var e=h(['\\n      <app-header-layout>\\n        <app-header>\\n          <app-toolbar>\\n            <paper-icon-button\\n              icon=\"hass:close\"\\n              @click=\"','\"\\n            ></paper-icon-button>\\n            <div main-title>\\n              ','\\n            </div>\\n            <div\\n              class=\"save-button\\n              ','\"\\n            >\\n              ','\\n            </div>\\n            <mwc-button raised @click=\"','\"\\n              >','</mwc-button\\n            >\\n          </app-toolbar>\\n        </app-header>\\n        <div class=\"content\">\\n          <ha-code-editor\\n            mode=\"yaml\"\\n            autofocus\\n            .rtl=','\\n            .hass=\"','\"\\n            @value-changed=\"','\"\\n            @editor-save=\"','\"\\n          >\\n          </ha-code-editor>\\n        </div>\\n      </app-header-layout>\\n    ']);return d=function(){return e},e}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=a.a.interface({title:\"string?\",views:[\"object\"],resources:a.a.optional([\"object\"])}),g=function(e){function t(){var e,r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=this,r=!(o=(e=p(t)).call.apply(e,[this].concat(a)))||\"object\"!==l(o)&&\"function\"!=typeof o?m(n):o,y(m(r),\"hass\",void 0),y(m(r),\"lovelace\",void 0),y(m(r),\"closeEditor\",void 0),y(m(r),\"_saving\",void 0),y(m(r),\"_changed\",void 0),y(m(r),\"_generation\",1),r}var r,a,h;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,n[\"a\"]),r=t,h=[{key:\"properties\",get:function(){return{hass:{},lovelace:{},closeEditor:{},_saving:{},_changed:{}}}},{key:\"styles\",get:function(){return[s.a,Object(n.c)(u())]}}],(a=[{key:\"render\",value:function(){return Object(n.f)(d(),this._closeEditor,this.hass.localize(\"ui.panel.lovelace.editor.raw_editor.header\"),Object(o.a)({saved:!1===this._saving||!0===this._changed}),this._changed?this.hass.localize(\"ui.panel.lovelace.editor.raw_editor.unsaved_changes\"):this.hass.localize(\"ui.panel.lovelace.editor.raw_editor.saved\"),this._handleSave,this.hass.localize(\"ui.panel.lovelace.editor.raw_editor.save\"),Object(c.a)(this.hass),this.hass,this._yamlChanged,this._handleSave)}},{key:\"firstUpdated\",value:function(){this.yamlEditor.value=Object(i.safeDump)(this.lovelace.config)}},{key:\"_yamlChanged\",value:function(){this._changed=!this.yamlEditor.codemirror.getDoc().isClean(this._generation),this._changed&&!window.onbeforeunload?window.onbeforeunload=function(){return!0}:!this._changed&&window.onbeforeunload&&(window.onbeforeunload=null)}},{key:\"_closeEditor\",value:function(){this._changed&&!confirm(this.hass.localize(\"ui.panel.lovelace.editor.raw_editor.confirm_unsaved_changes\"))||(window.onbeforeunload=null,this.closeEditor&&this.closeEditor())}},{key:\"_handleSave\",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._saving=!0,!this.yamlEditor.hasComments){t.next=4;break}if(confirm(this.hass.localize(\"ui.panel.lovelace.editor.raw_editor.confirm_unsaved_comments\"))){t.next=4;break}return t.abrupt(\"return\");case 4:t.prev=4,e=Object(i.safeLoad)(this.yamlEditor.value),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(4),alert(this.hass.localize(\"ui.panel.lovelace.editor.raw_editor.error_parse_yaml\",\"error\",t.t0)),this._saving=!1,t.abrupt(\"return\");case 13:t.prev=13,e=b(e),t.next=21;break;case 17:return t.prev=17,t.t1=t.catch(13),alert(this.hass.localize(\"ui.panel.lovelace.editor.raw_editor.error_invalid_config\",\"error\",t.t1)),t.abrupt(\"return\");case 21:return t.prev=21,t.next=24,regeneratorRuntime.awrap(this.lovelace.saveConfig(e));case 24:t.next=29;break;case 26:t.prev=26,t.t2=t.catch(21),alert(this.hass.localize(\"ui.panel.lovelace.editor.raw_editor.error_save_yaml\",\"error\",t.t2));case 29:this._generation=this.yamlEditor.codemirror.getDoc().changeGeneration(!0),window.onbeforeunload=null,this._saving=!1,this._changed=!1;case 33:case\"end\":return t.stop()}},null,this,[[4,8],[13,17],[21,26]])}},{key:\"yamlEditor\",get:function(){return this.shadowRoot.querySelector(\"ha-code-editor\")}}])&&f(r.prototype,a),h&&f(r,h),t}();customElements.define(\"hui-editor\",g)}}]);","extractedComments":[]}