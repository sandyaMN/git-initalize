{"map":"{\"version\":3,\"sources\":[\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/node_modules/webpack/buildin/module.js\",\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/node_modules/codemirror/lib/codemirror.js\",\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/node_modules/raw-loader/dist/cjs.js!/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/node_modules/codemirror/lib/codemirror.css\",\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/node_modules/codemirror/mode/yaml/yaml.js\",\"/home/sandya/Sandya/workspace/Brandon/home-assistant-polymer/node_modules/codemirror/mode/jinja2/jinja2.js\"],\"names\":[\"module\",\"exports\",\"webpackPolyfill\",\"deprecate\",\"paths\",\"children\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"l\",\"i\",\"factory\",\"userAgent\",\"navigator\",\"platform\",\"gecko\",\"test\",\"ie_upto10\",\"ie_11up\",\"exec\",\"edge\",\"ie\",\"ie_version\",\"document\",\"documentMode\",\"webkit\",\"qtwebkit\",\"chrome\",\"presto\",\"safari\",\"vendor\",\"mac_geMountainLion\",\"phantom\",\"ios\",\"android\",\"mobile\",\"mac\",\"chromeOS\",\"windows\",\"presto_version\",\"match\",\"Number\",\"flipCtrlCmd\",\"captureRightClick\",\"classTest\",\"cls\",\"RegExp\",\"range\",\"rmClass\",\"node\",\"current\",\"className\",\"after\",\"slice\",\"index\",\"length\",\"removeChildren\",\"e\",\"count\",\"childNodes\",\"removeChild\",\"firstChild\",\"removeChildrenAndAdd\",\"parent\",\"appendChild\",\"elt\",\"tag\",\"content\",\"style\",\"createElement\",\"cssText\",\"createTextNode\",\"eltP\",\"setAttribute\",\"contains\",\"child\",\"nodeType\",\"parentNode\",\"host\",\"activeElt\",\"activeElement\",\"body\",\"shadowRoot\",\"addClass\",\"joinClasses\",\"a\",\"b\",\"as\",\"split\",\"createRange\",\"start\",\"end\",\"endNode\",\"r\",\"setEnd\",\"setStart\",\"createTextRange\",\"moveToElementText\",\"collapse\",\"moveEnd\",\"moveStart\",\"selectInput\",\"select\",\"bind\",\"f\",\"args\",\"Array\",\"prototype\",\"call\",\"arguments\",\"apply\",\"copyObj\",\"obj\",\"target\",\"overwrite\",\"prop\",\"hasOwnProperty\",\"countColumn\",\"string\",\"tabSize\",\"startIndex\",\"startValue\",\"search\",\"n\",\"nextTab\",\"indexOf\",\"selectionStart\",\"selectionEnd\",\"value\",\"_e\",\"Delayed\",\"this\",\"id\",\"array\",\"set\",\"ms\",\"clearTimeout\",\"setTimeout\",\"scrollerGap\",\"Pass\",\"toString\",\"sel_dontScroll\",\"scroll\",\"sel_mouse\",\"origin\",\"sel_move\",\"findColumn\",\"goal\",\"pos\",\"col\",\"skipped\",\"Math\",\"min\",\"spaceStrs\",\"spaceStr\",\"push\",\"lst\",\"arr\",\"map\",\"out\",\"nothing\",\"createObj\",\"base\",\"props\",\"inst\",\"create\",\"nonASCIISingleCaseWordChar\",\"isWordCharBasic\",\"ch\",\"toUpperCase\",\"toLowerCase\",\"isWordChar\",\"helper\",\"source\",\"isEmpty\",\"extendingChars\",\"isExtendingChar\",\"charCodeAt\",\"skipExtendingChars\",\"str\",\"dir\",\"charAt\",\"findFirst\",\"pred\",\"from\",\"to\",\"midF\",\"mid\",\"ceil\",\"floor\",\"bidiOther\",\"getBidiPartAt\",\"order\",\"sticky\",\"found\",\"cur\",\"bidiOrdering\",\"lowTypes\",\"arabicTypes\",\"bidiRE\",\"isNeutral\",\"isStrong\",\"countsAsLeft\",\"countsAsNum\",\"BidiSpan\",\"level\",\"direction\",\"outerType\",\"code\",\"len\",\"types\",\"i$1\",\"prev\",\"type\",\"i$2\",\"type$1\",\"i$3\",\"prev$1\",\"type$2\",\"i$4\",\"type$3\",\"replace\",\"j\",\"i$5\",\"cur$1\",\"type$4\",\"i$6\",\"end$1\",\"before\",\"replace$1\",\"j$1\",\"m\",\"i$7\",\"at\",\"j$2\",\"splice\",\"nstart\",\"unshift\",\"reverse\",\"getOrder\",\"line\",\"text\",\"noHandlers\",\"on\",\"emitter\",\"addEventListener\",\"attachEvent\",\"map$$1\",\"_handlers\",\"concat\",\"getHandlers\",\"off\",\"removeEventListener\",\"detachEvent\",\"signal\",\"handlers\",\"signalDOMEvent\",\"cm\",\"override\",\"preventDefault\",\"defaultPrevented\",\"e_defaultPrevented\",\"codemirrorIgnore\",\"signalCursorActivity\",\"cursorActivity\",\"curOp\",\"cursorActivityHandlers\",\"hasHandler\",\"eventMixin\",\"ctor\",\"e_preventDefault\",\"returnValue\",\"e_stopPropagation\",\"stopPropagation\",\"cancelBubble\",\"e_stop\",\"e_target\",\"srcElement\",\"e_button\",\"which\",\"button\",\"ctrlKey\",\"zwspSupported\",\"badBidiRects\",\"dragAndDrop\",\"div\",\"zeroWidthElement\",\"measure\",\"offsetHeight\",\"offsetWidth\",\"hasBadBidiRects\",\"txt\",\"r0\",\"getBoundingClientRect\",\"r1\",\"left\",\"right\",\"splitLinesAuto\",\"result\",\"nl\",\"rt\",\"hasSelection\",\"window\",\"getSelection\",\"te\",\"range$$1\",\"ownerDocument\",\"selection\",\"parentElement\",\"compareEndPoints\",\"hasCopyEvent\",\"oncopy\",\"badZoomedRects\",\"modes\",\"mimeModes\",\"resolveMode\",\"spec\",\"name\",\"getMode\",\"options\",\"mfactory\",\"modeObj\",\"modeExtensions\",\"exts\",\"helperType\",\"modeProps\",\"prop$1\",\"extendMode\",\"mode\",\"properties\",\"copyState\",\"state\",\"nstate\",\"val\",\"innerMode\",\"info\",\"startState\",\"a1\",\"a2\",\"StringStream\",\"lineOracle\",\"lastColumnPos\",\"lastColumnValue\",\"lineStart\",\"getLine\",\"doc\",\"first\",\"size\",\"Error\",\"chunk\",\"lines\",\"sz\",\"chunkSize\",\"getBetween\",\"iter\",\"getLines\",\"updateLineHeight\",\"height\",\"diff\",\"lineNo\",\"no\",\"lineAtHeight\",\"h\",\"outer\",\"lh\",\"isLine\",\"lineNumberFor\",\"String\",\"lineNumberFormatter\",\"firstLineNumber\",\"Pos\",\"cmp\",\"equalCursorPos\",\"copyPos\",\"x\",\"maxPos\",\"minPos\",\"clipLine\",\"max\",\"clipPos\",\"last\",\"linelen\",\"clipToLen\",\"clipPosArray\",\"eol\",\"sol\",\"peek\",\"undefined\",\"next\",\"eat\",\"eatWhile\",\"eatSpace\",\"skipToEnd\",\"skipTo\",\"backUp\",\"column\",\"indentation\",\"pattern\",\"consume\",\"caseInsensitive\",\"cased\",\"substr\",\"hideFirstChars\",\"inner\",\"lookAhead\",\"oracle\",\"baseToken\",\"SavedContext\",\"Context\",\"maxLookAhead\",\"baseTokens\",\"baseTokenPos\",\"highlightLine\",\"context\",\"forceToEnd\",\"st\",\"modeGen\",\"lineClasses\",\"runMode\",\"loop\",\"o\",\"overlay\",\"overlays\",\"i_end\",\"opaque\",\"styles\",\"classes\",\"bgClass\",\"textClass\",\"getLineStyles\",\"updateFrontier\",\"getContextBefore\",\"resetState\",\"maxHighlightLength\",\"stateAfter\",\"save\",\"styleClasses\",\"highlightFrontier\",\"modeFrontier\",\"precise\",\"display\",\"minindent\",\"minline\",\"lim\",\"indented\",\"findStartLine\",\"saved\",\"fromSaved\",\"processLine\",\"viewFrom\",\"viewTo\",\"nextLine\",\"startAt\",\"stream\",\"callBlankLine\",\"readToken\",\"blankLine\",\"token\",\"copy\",\"Token\",\"takeToken\",\"asArray\",\"tokens\",\"extractLineClasses\",\"output\",\"lineClass\",\"flattenSpans\",\"curStart\",\"curStyle\",\"addModeClass\",\"mName\",\"sawReadOnlySpans\",\"sawCollapsedSpans\",\"MarkedSpan\",\"marker\",\"getMarkedSpanFor\",\"spans\",\"span\",\"removeMarkedSpan\",\"stretchSpansOverChange\",\"change\",\"full\",\"oldFirst\",\"markedSpans\",\"oldLast\",\"startCh\",\"endCh\",\"isInsert\",\"old\",\"nw\",\"inclusiveLeft\",\"insertLeft\",\"endsAfter\",\"inclusiveRight\",\"markedSpansBefore\",\"startsBefore\",\"markedSpansAfter\",\"sameLine\",\"offset\",\"span$1\",\"clearEmptySpans\",\"newMarkers\",\"gapMarkers\",\"gap\",\"clearWhenEmpty\",\"detachMarkedSpans\",\"detachLine\",\"attachMarkedSpans\",\"attachLine\",\"extraLeft\",\"extraRight\",\"compareCollapsedMarkers\",\"lenDiff\",\"aPos\",\"find\",\"bPos\",\"fromCmp\",\"toCmp\",\"collapsedSpanAtSide\",\"sps\",\"sp\",\"collapsed\",\"collapsedSpanAtStart\",\"collapsedSpanAtEnd\",\"collapsedSpanAround\",\"conflictingCollapsedRange\",\"lineNo$$1\",\"visualLine\",\"merged\",\"visualLineNo\",\"lineN\",\"vis\",\"visualLineEndNo\",\"lastLine\",\"lineIsHidden\",\"widgetNode\",\"lineIsHiddenInner\",\"heightAtLine\",\"lineObj\",\"p\",\"lineLength\",\"found$1\",\"findMaxLine\",\"d\",\"maxLine\",\"maxLineLength\",\"maxLineChanged\",\"Line\",\"estimateHeight\",\"cleanUpLine\",\"styleToClassCache\",\"styleToClassCacheWithMode\",\"interpretTokenStyle\",\"cache\",\"buildLineContent\",\"lineView\",\"builder\",\"pre\",\"trailingSpace\",\"splitSpaces\",\"getOption\",\"rest\",\"addToken\",\"buildToken\",\"buildTokenBadBidi\",\"insertLineContent\",\"externalMeasured\",\"maps\",\"caches\",\"lastChild\",\"querySelector\",\"defaultSpecialCharPlaceholder\",\"title\",\"startStyle\",\"endStyle\",\"css\",\"attributes\",\"displayText\",\"trailingBefore\",\"spaceBefore\",\"special\",\"specialChars\",\"mustWrap\",\"createDocumentFragment\",\"lastIndex\",\"txt$1\",\"tabWidth\",\"specialCharPlaceholder\",\"fullStyle\",\"attr\",\"part\",\"buildCollapsedSpan\",\"ignoreWidget\",\"widget\",\"input\",\"needsContentAttribute\",\"setUneditable\",\"allText\",\"spanStyle\",\"spanEndStyle\",\"spanStartStyle\",\"nextChange\",\"Infinity\",\"foundBookmarks\",\"endStyles\",\"upto\",\"tokenText\",\"LineView\",\"visualLineContinued\",\"hidden\",\"buildViewArray\",\"nextPos\",\"view\",\"operationGroup\",\"orphanDelayedCallbacks\",\"signalLater\",\"list\",\"delayedCallbacks\",\"fireOrphanDelayed\",\"delayed\",\"updateLineForChanges\",\"dims\",\"changes\",\"updateLineText\",\"updateLineGutter\",\"updateLineClasses\",\"updateLineWidgets\",\"ensureLineWrapped\",\"replaceChild\",\"zIndex\",\"getLineContent\",\"ext\",\"built\",\"background\",\"wrap\",\"insertBefore\",\"updateLineBackground\",\"wrapClass\",\"gutter\",\"gutterBackground\",\"gutterClass\",\"fixedGutter\",\"fixedPos\",\"gutterTotalWidth\",\"markers\",\"gutterMarkers\",\"lineNumbers\",\"wrap$1\",\"gutterWrap\",\"lineNumber\",\"gutterLeft\",\"lineNumInnerWidth\",\"k\",\"gutterSpecs\",\"gutterWidth\",\"alignable\",\"nextSibling\",\"insertLineWidgets\",\"buildLineElement\",\"insertLineWidgetsFor\",\"allowAbove\",\"widgets\",\"ws\",\"handleMouseEvents\",\"positionLineWidget\",\"above\",\"noHScroll\",\"width\",\"wrapperWidth\",\"coverGutter\",\"paddingLeft\",\"position\",\"marginLeft\",\"widgetHeight\",\"parentStyle\",\"gutters\",\"wrapper\",\"clientWidth\",\"eventInWidget\",\"getAttribute\",\"sizer\",\"mover\",\"paddingTop\",\"lineSpace\",\"offsetTop\",\"paddingVert\",\"paddingH\",\"cachedPaddingH\",\"getComputedStyle\",\"currentStyle\",\"data\",\"parseInt\",\"paddingRight\",\"isNaN\",\"scrollGap\",\"nativeBarWidth\",\"displayWidth\",\"scroller\",\"barWidth\",\"displayHeight\",\"clientHeight\",\"barHeight\",\"mapFromLineView\",\"measureChar\",\"bias\",\"measureCharPrepared\",\"prepareMeasureForLine\",\"findViewForLine\",\"findViewIndex\",\"getDimensions\",\"forceUpdate\",\"lineMeasure\",\"updateExternalMeasurement\",\"rect\",\"hasHeights\",\"prepared\",\"varHeight\",\"key\",\"wrapping\",\"lineWrapping\",\"curWidth\",\"heights\",\"rects\",\"getClientRects\",\"abs\",\"bottom\",\"top\",\"ensureLineHeights\",\"place\",\"nodeAndOffsetInLineMap\",\"coverStart\",\"coverEnd\",\"getUsefulRect\",\"screen\",\"logicalXDPI\",\"deviceXDPI\",\"normal\",\"fromRange\",\"hasBadZoomedRects\",\"scaleX\",\"scaleY\",\"logicalYDPI\",\"deviceYDPI\",\"maybeUpdateRectForZooming\",\"rSpan\",\"charWidth\",\"nullRect\",\"rtop\",\"rbot\",\"bot\",\"bogus\",\"singleCursorHeightPerLine\",\"rbottom\",\"measureCharInner\",\"measureText\",\"mStart\",\"mEnd\",\"clearLineMeasurementCacheFor\",\"clearLineMeasurementCache\",\"externalMeasure\",\"clearCaches\",\"cachedCharWidth\",\"cachedTextHeight\",\"lineNumChars\",\"pageScrollX\",\"pageXOffset\",\"documentElement\",\"scrollLeft\",\"pageScrollY\",\"marginTop\",\"pageYOffset\",\"scrollTop\",\"widgetTopHeight\",\"intoCoordSystem\",\"includeWidgets\",\"yOff\",\"viewOffset\",\"lOff\",\"xOff\",\"fromCoordSystem\",\"coords\",\"localBox\",\"lineSpaceBox\",\"charCoords\",\"cursorCoords\",\"preparedMeasure\",\"getBidi\",\"partPos\",\"invert\",\"other\",\"estimateCoords\",\"PosWithInfo\",\"outside\",\"xRel\",\"coordsChar\",\"y\",\"coordsCharInner\",\"rangeEnd\",\"wrappedLineExtent\",\"begin\",\"wrappedLineExtentChar\",\"boxIsAfter\",\"box\",\"widgetHeight$$1\",\"ltr\",\"_lineNo\",\"ref\",\"closestDist\",\"endX\",\"dist\",\"baseX\",\"chAround\",\"boxAround\",\"atLeft\",\"atStart\",\"textHeight\",\"anchor\",\"clientLeft\",\"offsetLeft\",\"compensateForHScroll\",\"th\",\"perLine\",\"widgetsHeight\",\"estimateLineHeights\",\"est\",\"estHeight\",\"posFromMouse\",\"liberal\",\"forRect\",\"space\",\"clientX\",\"clientY\",\"colDiff\",\"round\",\"regChange\",\"lendiff\",\"updateLineNumbers\",\"viewChanged\",\"resetView\",\"cut\",\"viewCuttingPoint\",\"cut$1\",\"cutTop\",\"cutBot\",\"regLineChange\",\"oldN\",\"newN\",\"countDirtyView\",\"dirty\",\"updateSelection\",\"showSelection\",\"prepareSelection\",\"primary\",\"curFragment\",\"cursors\",\"selFragment\",\"sel\",\"ranges\",\"primIndex\",\"empty\",\"showCursorWhenSelecting\",\"drawSelectionCursor\",\"head\",\"drawSelectionRange\",\"cursor\",\"cursorHeight\",\"otherCursor\",\"cmpCoords\",\"fragment\",\"padding\",\"leftSide\",\"rightSide\",\"sizerWidth\",\"docLTR\",\"add\",\"drawForLine\",\"fromArg\",\"toArg\",\"lineLen\",\"wrapX\",\"side\",\"extent\",\"iterateBidiSections\",\"fromPos\",\"toPos\",\"openStart\",\"openEnd\",\"openRight\",\"topLeft\",\"topRight\",\"botLeft\",\"botRight\",\"sFrom\",\"sTo\",\"fromLine\",\"toLine\",\"singleVLine\",\"leftEnd\",\"rightStart\",\"restartBlink\",\"focused\",\"clearInterval\",\"blinker\",\"cursorDiv\",\"visibility\",\"cursorBlinkRate\",\"setInterval\",\"ensureFocus\",\"focus\",\"onFocus\",\"delayBlurEvent\",\"delayingBlurEvent\",\"onBlur\",\"readOnly\",\"selForContextMenu\",\"reset\",\"receivedFocus\",\"shift\",\"updateHeightsInViewport\",\"prevBottom\",\"lineDiv\",\"updateWidgetHeight\",\"chWidth\",\"w\",\"visibleLines\",\"viewport\",\"ensure\",\"ensureFrom\",\"ensureTo\",\"calculateScrollPos\",\"snapMargin\",\"screentop\",\"docBottom\",\"atTop\",\"atBottom\",\"newTop\",\"screenleft\",\"screenw\",\"tooWide\",\"addToScrollTop\",\"resolveScrollToPos\",\"ensureCursorVisible\",\"getCursor\",\"scrollToPos\",\"margin\",\"cursorScrollMargin\",\"scrollToCoords\",\"scrollToCoordsRange\",\"sPos\",\"updateScrollTop\",\"updateDisplaySimple\",\"setScrollTop\",\"startWorker\",\"forceScroll\",\"scrollHeight\",\"scrollbars\",\"setScrollLeft\",\"isScroller\",\"scrollWidth\",\"alignHorizontally\",\"measureForScrollbars\",\"gutterW\",\"docH\",\"viewHeight\",\"viewWidth\",\"barLeft\",\"docHeight\",\"NativeScrollbars\",\"vert\",\"horiz\",\"tabIndex\",\"checkedZeroWidth\",\"minHeight\",\"minWidth\",\"update\",\"needsH\",\"needsV\",\"sWidth\",\"totalHeight\",\"totalWidth\",\"zeroWidthHack\",\"disableHoriz\",\"enableZeroWidthBar\",\"disableVert\",\"pointerEvents\",\"bar\",\"delay\",\"maybeDisable\",\"elementFromPoint\",\"clear\",\"NullScrollbars\",\"updateScrollbars\",\"startWidth\",\"startHeight\",\"updateScrollbarsInner\",\"sizes\",\"paddingBottom\",\"heightForcer\",\"borderBottom\",\"scrollbarFiller\",\"coverGutterNextToScrollbar\",\"gutterFiller\",\"scrollbarModel\",\"native\",\"null\",\"initScrollbars\",\"scrollbarStyle\",\"axis\",\"nextOpId\",\"startOperation\",\"op\",\"updateInput\",\"typing\",\"changeObjs\",\"cursorActivityCalled\",\"selectionChanged\",\"updateMaxLine\",\"ops\",\"ownsGroup\",\"endOperation\",\"endCb\",\"group\",\"callbacks\",\"fireCallbacksForOps\",\"finishOperation\",\"endOperation_R1\",\"updatedDisplay\",\"mustUpdate\",\"updateDisplayIfNeeded\",\"endOperation_R2\",\"endOperation_W2\",\"endOperation_finish\",\"endOperations\",\"scrollbarsClipped\",\"marginBottom\",\"borderRightWidth\",\"maybeClipScrollbars\",\"DisplayUpdate\",\"barMeasure\",\"adjustWidthTo\",\"maxScrollLeft\",\"preparedSelection\",\"takeFocus\",\"setDocumentHeight\",\"postUpdateDisplay\",\"wheelStartX\",\"wheelStartY\",\"doScroll\",\"innerHeight\",\"scrollNode\",\"scrollIntoView\",\"maybeScrollWindow\",\"limit\",\"changed\",\"endCoords\",\"scrollPos\",\"startTop\",\"startLeft\",\"scrollPosIntoView\",\"maybeHiddenMarkers\",\"unhidden\",\"maybeUnhiddenMarkers\",\"finish\",\"runInOp\",\"operation\",\"methodOp\",\"docMethodOp\",\"time\",\"highlight\",\"highlightWorker\",\"Date\",\"workTime\",\"changedLines\",\"oldStyles\",\"highlighted\",\"oldCls\",\"newCls\",\"ischange\",\"workDelay\",\"force\",\"visible\",\"editorIsHidden\",\"wrapperHeight\",\"oldDisplayWidth\",\"events\",\"renderedView\",\"maybeUpdateLineNumberWidth\",\"viewportMargin\",\"different\",\"lastWrapHeight\",\"lastWrapWidth\",\"adjustView\",\"toUpdate\",\"selSnapshot\",\"hasFocus\",\"active\",\"anchorNode\",\"extend\",\"anchorOffset\",\"focusNode\",\"focusOffset\",\"selectionSnapshot\",\"updateNumbersFrom\",\"container\",\"rm\",\"currentWheelTarget\",\"updateNumber\",\"patchDisplay\",\"snapshot\",\"removeAllRanges\",\"addRange\",\"restoreSelection\",\"selectionDiv\",\"reportedViewFrom\",\"reportedViewTo\",\"updateGutterSpace\",\"alignWidgets\",\"comp\",\"align\",\"innerW\",\"lineGutter\",\"lineNumWidth\",\"getGutters\",\"sawLineNumbers\",\"renderGutters\",\"specs\",\"gElt\",\"updateGutters\",\"Display\",\"draggable\",\"wheelDX\",\"wheelDY\",\"activeTouch\",\"init\",\"wheelSamples\",\"wheelPixelsPerUnit\",\"wheelEventDelta\",\"dx\",\"wheelDeltaX\",\"dy\",\"wheelDeltaY\",\"detail\",\"HORIZONTAL_AXIS\",\"VERTICAL_AXIS\",\"wheelDelta\",\"wheelEventPixels\",\"delta\",\"onScrollWheel\",\"canScrollX\",\"canScrollY\",\"pixels\",\"movedX\",\"movedY\",\"sample\",\"Selection\",\"equals\",\"here\",\"there\",\"deepCopy\",\"Range\",\"somethingSelected\",\"normalizeSelection\",\"mayTouch\",\"selectionsMayTouch\",\"prim\",\"sort\",\"inv\",\"simpleSelection\",\"changeEnd\",\"adjustForChange\",\"computeSelAfterChange\",\"offsetPos\",\"loadMode\",\"modeOption\",\"resetModeState\",\"isWholeLineUpdate\",\"wholeLineUpdateBefore\",\"updateDoc\",\"estimateHeight$$1\",\"spansFor\",\"updateLine\",\"linesFor\",\"firstLine\",\"lastText\",\"lastSpans\",\"nlines\",\"insert\",\"remove\",\"added\",\"added$1\",\"added$2\",\"linkedDocs\",\"sharedHistOnly\",\"propagate\",\"skip\",\"sharedHist\",\"linked\",\"rel\",\"shared\",\"attachDoc\",\"setDirectionClass\",\"History\",\"startGen\",\"done\",\"undone\",\"undoDepth\",\"lastModTime\",\"lastSelTime\",\"lastOp\",\"lastSelOp\",\"lastOrigin\",\"lastSelOrigin\",\"generation\",\"maxGeneration\",\"historyChangeFromChange\",\"histChange\",\"attachLocalSpans\",\"clearSelectionEvents\",\"pop\",\"addChangeToHistory\",\"selAfter\",\"opId\",\"hist\",\"history\",\"historyEventDelay\",\"lastChangeEvent\",\"pushSelectionToHistory\",\"addSelectionToHistory\",\"selectionEventCanBeMerged\",\"clearRedo\",\"dest\",\"existing\",\"removeClearedSpans\",\"explicitlyCleared\",\"mergeOldSpans\",\"getOldSpans\",\"stretched\",\"oldCur\",\"stretchCur\",\"copyHistoryArray\",\"newGroup\",\"instantiateSel\",\"event\",\"newChanges\",\"extendRange\",\"posBefore\",\"extendSelection\",\"setSelection\",\"extendSelections\",\"heads\",\"replaceOneSelection\",\"setSimpleSelection\",\"setSelectionReplaceHistory\",\"setSelectionNoUndo\",\"NaN\",\"filterSelectionChange\",\"setSelectionInner\",\"skipAtomicInSelection\",\"reCheckSelection\",\"mayClear\",\"newAnchor\",\"skipAtomic\",\"newHead\",\"skipAtomicInner\",\"oldPos\",\"preventCursorLeft\",\"selectLeft\",\"preventCursorRight\",\"selectRight\",\"atomic\",\"near\",\"movePos\",\"far\",\"cantEdit\",\"selectAll\",\"filterChange\",\"canceled\",\"cancel\",\"makeChange\",\"ignoreReadOnly\",\"suppressEdits\",\"mark\",\"parts\",\"mk\",\"newParts\",\"dfrom\",\"dto\",\"removeReadOnlyRanges\",\"makeChangeInner\",\"makeChangeSingleDoc\",\"rebased\",\"rebaseHist\",\"makeChangeFromHistory\",\"allowSelectionOnly\",\"suppress\",\"antiChanges\",\"filter\",\"returned\",\"v\",\"shiftDoc\",\"distance\",\"removed\",\"recomputeMaxLength\",\"checkWidthStart\",\"retreatFrontier\",\"changesHandler\",\"changeHandler\",\"makeChangeSingleDocInEditor\",\"replaceRange\",\"assign\",\"splitLines\",\"rebaseHistSelSingle\",\"rebaseHistArray\",\"sub\",\"ok\",\"copied\",\"changeLine\",\"handle\",\"changeType\",\"LeafChunk\",\"BranchChunk\",\"removeInner\",\"insertInner\",\"iterN\",\"oldHeight\",\"remaining\",\"leaf\",\"maybeSpill\",\"me\",\"sibling\",\"myIndex\",\"used\",\"LineWidget\",\"opt\",\"adjustScrollWhenAboveVisible\",\"this$1\",\"oldH\",\"nextMarkerId\",\"TextMarker\",\"markText\",\"cloneNode\",\"isParent\",\"SharedTextMarker\",\"markTextShared\",\"replacedWith\",\"addToHistory\",\"curLine\",\"addMarkedSpan\",\"clearOnEnter\",\"clearHistory\",\"withOp\",\"visual\",\"dHeight\",\"findSharedMarkers\",\"findMarks\",\"detachSharedMarkers\",\"subMarker\",\"nextDocId\",\"Doc\",\"lineSep\",\"cleanGeneration\",\"constructor\",\"getValue\",\"join\",\"lineSeparator\",\"setValue\",\"getRange\",\"getLineHandle\",\"getLineNumber\",\"getLineHandleVisualStart\",\"lineCount\",\"listSelections\",\"setCursor\",\"extendSelectionsBy\",\"setSelections\",\"addSelection\",\"getSelections\",\"replaceSelection\",\"dup\",\"replaceSelections\",\"newSel\",\"hint\",\"oldPrev\",\"newPrev\",\"computeReplacedSel\",\"undo\",\"redo\",\"undoSelection\",\"redoSelection\",\"setExtending\",\"getExtending\",\"historySize\",\"markClean\",\"changeGeneration\",\"forceSplit\",\"isClean\",\"gen\",\"getHistory\",\"setHistory\",\"histData\",\"setGutterMarker\",\"gutterID\",\"clearGutter\",\"lineInfo\",\"addLineClass\",\"where\",\"removeLineClass\",\"addLineWidget\",\"insertAt\",\"aboveVisible\",\"removeLineWidget\",\"setBookmark\",\"realOpts\",\"findMarksAt\",\"getAllMarks\",\"posFromIndex\",\"sepSize\",\"indexFromPos\",\"copyHistory\",\"linkedDoc\",\"mFrom\",\"mTo\",\"subMark\",\"copySharedMarkers\",\"unlinkDoc\",\"CodeMirror\",\"splitIds\",\"iterLinkedDocs\",\"getEditor\",\"setDirection\",\"eachLine\",\"lastDrop\",\"onDrop\",\"clearDragCursor\",\"files\",\"dataTransfer\",\"isReadOnly\",\"FileReader\",\"File\",\"read\",\"loadFile\",\"file\",\"allowDropFileTypes\",\"reader\",\"onload\",\"readAsText\",\"draggingText\",\"text$1\",\"getData\",\"selected\",\"dragCursor\",\"forEachCodeMirror\",\"getElementsByClassName\",\"byClass\",\"editors\",\"globalsRegistered\",\"ensureGlobalHandlers\",\"resizeTimer\",\"onResize\",\"setSize\",\"keyNames\",\"3\",\"8\",\"9\",\"13\",\"16\",\"17\",\"18\",\"19\",\"20\",\"27\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"44\",\"45\",\"46\",\"59\",\"61\",\"91\",\"92\",\"93\",\"106\",\"107\",\"109\",\"110\",\"111\",\"145\",\"173\",\"186\",\"187\",\"188\",\"189\",\"190\",\"191\",\"192\",\"219\",\"220\",\"221\",\"222\",\"63232\",\"63233\",\"63234\",\"63235\",\"63272\",\"63273\",\"63275\",\"63276\",\"63277\",\"63302\",\"fromCharCode\",\"keyMap\",\"normalizeKeyName\",\"alt\",\"ctrl\",\"cmd\",\"mod\",\"normalizeKeyMap\",\"keymap\",\"keyname\",\"keys\",\"lookupKey\",\"getKeyMap\",\"fallthrough\",\"isModifierKey\",\"keyCode\",\"addModifierNames\",\"noShift\",\"altKey\",\"metaKey\",\"shiftKey\",\"keyName\",\"altGraphKey\",\"deleteNearSelection\",\"compute\",\"kill\",\"toKill\",\"replaced\",\"moveCharLogically\",\"moveLogically\",\"endOfLine\",\"visually\",\"prep\",\"targetTop\",\"basic\",\"Left\",\"Right\",\"Up\",\"Down\",\"End\",\"Home\",\"PageUp\",\"PageDown\",\"Delete\",\"Backspace\",\"Shift-Backspace\",\"Tab\",\"Shift-Tab\",\"Enter\",\"Insert\",\"Esc\",\"pcDefault\",\"Ctrl-A\",\"Ctrl-D\",\"Ctrl-Z\",\"Shift-Ctrl-Z\",\"Ctrl-Y\",\"Ctrl-Home\",\"Ctrl-End\",\"Ctrl-Up\",\"Ctrl-Down\",\"Ctrl-Left\",\"Ctrl-Right\",\"Alt-Left\",\"Alt-Right\",\"Ctrl-Backspace\",\"Ctrl-Delete\",\"Ctrl-S\",\"Ctrl-F\",\"Ctrl-G\",\"Shift-Ctrl-G\",\"Shift-Ctrl-F\",\"Shift-Ctrl-R\",\"Ctrl-[\",\"Ctrl-]\",\"Ctrl-U\",\"Shift-Ctrl-U\",\"Alt-U\",\"emacsy\",\"Ctrl-B\",\"Ctrl-P\",\"Ctrl-N\",\"Alt-F\",\"Alt-B\",\"Ctrl-E\",\"Ctrl-V\",\"Shift-Ctrl-V\",\"Ctrl-H\",\"Alt-D\",\"Alt-Backspace\",\"Ctrl-K\",\"Ctrl-T\",\"Ctrl-O\",\"macDefault\",\"Cmd-A\",\"Cmd-D\",\"Cmd-Z\",\"Shift-Cmd-Z\",\"Cmd-Y\",\"Cmd-Home\",\"Cmd-Up\",\"Cmd-End\",\"Cmd-Down\",\"Cmd-Left\",\"Cmd-Right\",\"Ctrl-Alt-Backspace\",\"Alt-Delete\",\"Cmd-S\",\"Cmd-F\",\"Cmd-G\",\"Shift-Cmd-G\",\"Cmd-Alt-F\",\"Shift-Cmd-Alt-F\",\"Cmd-[\",\"Cmd-]\",\"Cmd-Backspace\",\"Cmd-Delete\",\"Cmd-U\",\"Shift-Cmd-U\",\"commands\",\"singleSelection\",\"killLine\",\"deleteLine\",\"delLineLeft\",\"delWrappedLineLeft\",\"delWrappedLineRight\",\"rightPos\",\"goDocStart\",\"goDocEnd\",\"goLineStart\",\"goLineStartSmart\",\"lineStartSmart\",\"goLineEnd\",\"visualLineEnd\",\"lineEnd\",\"goLineRight\",\"goLineLeft\",\"goLineLeftSmart\",\"goLineUp\",\"moveV\",\"goLineDown\",\"goPageUp\",\"goPageDown\",\"goCharLeft\",\"moveH\",\"goCharRight\",\"goColumnLeft\",\"goColumnRight\",\"goWordLeft\",\"goGroupRight\",\"goGroupLeft\",\"goWordRight\",\"delCharBefore\",\"deleteH\",\"delCharAfter\",\"delWordBefore\",\"delWordAfter\",\"delGroupBefore\",\"delGroupAfter\",\"indentAuto\",\"indentSelection\",\"indentMore\",\"indentLess\",\"insertTab\",\"insertSoftTab\",\"spaces\",\"defaultTab\",\"execCommand\",\"transposeChars\",\"newlineAndIndent\",\"sels\",\"indentLine\",\"openLine\",\"toggleOverwrite\",\"firstNonWS\",\"inWS\",\"doHandleBinding\",\"bound\",\"dropShift\",\"ensurePolled\",\"prevShift\",\"stopSeq\",\"dispatchKey\",\"seq\",\"keySeq\",\"dispatchKeyInner\",\"keyMaps\",\"extraKeys\",\"lookupKeyForEditor\",\"handleKeyBinding\",\"motion\",\"lastStoppedKey\",\"onKeyDown\",\"handled\",\"up\",\"showCrossHair\",\"onKeyUp\",\"onKeyPress\",\"charCode\",\"handleCharBinding\",\"lastClick\",\"lastDoubleClick\",\"PastClick\",\"onMouseDown\",\"supportsTouch\",\"clickInGutter\",\"repeat\",\"now\",\"compare\",\"clickRepeat\",\"selectingText\",\"handleMappedButton\",\"contained\",\"behavior\",\"option\",\"unit\",\"addNew\",\"moveOnDrag\",\"configureMouse\",\"dragDrop\",\"moved\",\"dragEnd\",\"mouseMove\",\"dragStart\",\"e2\",\"leftButtonStartDrag\",\"ourRange\",\"ourIndex\",\"startSel\",\"rangeForUnit\",\"lastPos\",\"extendTo\",\"startCol\",\"posCol\",\"leftPos\",\"oldRange\",\"ranges$1\",\"anchorLine\",\"boundary\",\"headIndex\",\"usePart\",\"bidiSimplify\",\"editorSize\",\"counter\",\"move\",\"buttons\",\"curCount\",\"leftButtonSelect\",\"leftButtonDown\",\"onContextMenu\",\"findWordAt\",\"gutterEvent\",\"prevent\",\"mX\",\"mY\",\"touches\",\"lineBox\",\"g\",\"contextMenuInGutter\",\"themeChanged\",\"theme\",\"Init\",\"defaults\",\"optionHandlers\",\"dragDropChanged\",\"funcs\",\"dragFunctions\",\"toggle\",\"enter\",\"over\",\"leave\",\"drop\",\"wrappingChanged\",\"inputStyles\",\"inputStyle\",\"pasteIncoming\",\"cutIncoming\",\"autofocus\",\"word\",\"touchFinished\",\"prevTouch\",\"finishTouch\",\"farAway\",\"touch\",\"radiusX\",\"radiusY\",\"isMouseLikeTouchEvent\",\"pageX\",\"pageY\",\"frag\",\"onDragOver\",\"setData\",\"effectAllowed\",\"setDragImage\",\"img\",\"src\",\"_top\",\"onDragStart\",\"inp\",\"getField\",\"registerEventHandlers\",\"finishInit\",\"initHooks\",\"textRendering\",\"how\",\"aggressive\",\"indent\",\"curSpace\",\"curSpaceString\",\"indentUnit\",\"indentString\",\"indentWithTabs\",\"pos$1\",\"defineInitHook\",\"lastCopied\",\"setLastCopied\",\"newLastCopied\",\"applyTextInput\",\"inserted\",\"deleted\",\"recent\",\"paste\",\"textLines\",\"multiPaste\",\"pasteLinesPerSelection\",\"lineWise\",\"changeEvent\",\"triggerElectric\",\"handlePaste\",\"pasted\",\"clipboardData\",\"disableInput\",\"electricChars\",\"smartIndent\",\"getModeAt\",\"electricInput\",\"copyableRanges\",\"lineRange\",\"disableBrowserMagic\",\"field\",\"spellcheck\",\"autocorrect\",\"autocapitalize\",\"hiddenTextarea\",\"border\",\"findPosH\",\"origDir\",\"moveOnce\",\"boundToLine\",\"bidi\",\"mv\",\"getWrappedLineExtent\",\"moveInStorageOrder\",\"searchInVisualLine\",\"getRes\",\"res\",\"nextCh\",\"moveVisually\",\"sawType\",\"getHelper\",\"hitSide\",\"findPosV\",\"pageSize\",\"moveAmount\",\"ContentEditableInput\",\"lastAnchorNode\",\"lastAnchorOffset\",\"lastFocusNode\",\"lastFocusOffset\",\"polling\",\"composing\",\"gracePeriod\",\"readDOMTimeout\",\"posToDOM\",\"badPos\",\"bad\",\"domToPos\",\"lineNode\",\"locateNodeInLineView\",\"textNode\",\"topNode\",\"nodeValue\",\"curNode\",\"textContent\",\"previousSibling\",\"dist$1\",\"onCopyCut\",\"lineWiseCopyCut\",\"clearData\",\"kludge\",\"hadFocus\",\"showPrimarySelection\",\"updateFromDOM\",\"readFromDOMSoon\",\"forceCompositionEnd\",\"showMultipleSelections\",\"curAnchor\",\"curFocus\",\"rng\",\"rangeCount\",\"getRangeAt\",\"startGracePeriod\",\"rememberSelection\",\"selectionInEditor\",\"commonAncestorContainer\",\"blur\",\"pollSelection\",\"pollInterval\",\"poll\",\"scan\",\"isInGutter\",\"triggerOnKeyDown\",\"pollContent\",\"fromIndex\",\"fromNode\",\"toNode\",\"toIndex\",\"newText\",\"closing\",\"extraLinebreak\",\"close\",\"addText\",\"walk\",\"cmText\",\"markerID\",\"isBlock\",\"nodeName\",\"domTextBetween\",\"oldText\",\"cutFront\",\"cutEnd\",\"oldTop\",\"maxCutFront\",\"newBot\",\"oldBot\",\"maxCutEnd\",\"chFrom\",\"chTo\",\"contentEditable\",\"readOnlyChanged\",\"resetPosition\",\"TextareaInput\",\"prevInput\",\"pollingFast\",\"createField\",\"textarea\",\"prepareCopyCut\",\"fastPoll\",\"dispatchEvent\",\"Event\",\"_display\",\"moveInputWithCursor\",\"headPos\",\"wrapOff\",\"lineOff\",\"teTop\",\"teLeft\",\"drawn\",\"contextMenuPending\",\"slowPoll\",\"missed\",\"same\",\"resetSelectionOnContextMenu\",\"oldScrollY\",\"oldCSS\",\"oldWrapperCSS\",\"wrapperBox\",\"offsetParent\",\"scrollY\",\"scrollTo\",\"rehide\",\"detectingSelectAll\",\"prepareSelectAllHack\",\"mouseup\",\"extval\",\"disabled\",\"deflt\",\"notOnInit\",\"defineOption\",\"newBreaks\",\"refresh\",\"getInputField\",\"detach\",\"attach\",\"integer\",\"defineOptions\",\"helpers\",\"setOption\",\"getDoc\",\"addKeyMap\",\"removeKeyMap\",\"addOverlay\",\"score\",\"priority\",\"insertSorted\",\"modeSpec\",\"removeOverlay\",\"newRanges\",\"getTokenAt\",\"getLineTokens\",\"getTokenTypeAt\",\"getHelpers\",\"help\",\"_global\",\"getStateAfter\",\"_typeof\",\"defaultTextHeight\",\"defaultCharWidth\",\"getViewport\",\"addWidget\",\"vspace\",\"hspace\",\"triggerOnKeyPress\",\"triggerOnKeyUp\",\"triggerOnMouseDown\",\"amount\",\"rtlMoveVisually\",\"goalColumn\",\"goals\",\"startChar\",\"check\",\"getScrollInfo\",\"scrollToRange\",\"interpret\",\"swapDoc\",\"phrase\",\"phraseText\",\"phrases\",\"getWrapperElement\",\"getScrollerElement\",\"getGutterElement\",\"registerHelper\",\"registerGlobalHelper\",\"predicate\",\"addEditorMethods\",\"dontDelegate\",\"method\",\"contenteditable\",\"defineMode\",\"dependencies\",\"defineMIME\",\"mime\",\"defineExtension\",\"func\",\"defineDocExtension\",\"fromTextArea\",\"tabindex\",\"placeholder\",\"realSubmit\",\"form\",\"leaveSubmitMethodAlone\",\"submit\",\"wrappedSubmit\",\"getTextArea\",\"toTextArea\",\"cmpPos\",\"addLegacyProps\",\"version\",\"__WEBPACK_AMD_DEFINE_RESULT__\",\"define\",\"__WEBPACK_AMD_DEFINE_FACTORY__\",\"__webpack_require__\",\"__webpack_exports__\",\"keywordRegex\",\"esc\",\"escaped\",\"literal\",\"keyCol\",\"pair\",\"pairStart\",\"inlinePairs\",\"inlineList\",\"lineComment\",\"fold\",\"require\",\"__WEBPACK_AMD_DEFINE_ARRAY__\",\"keywords\",\"operator\",\"sign\",\"atom\",\"number\",\"tokenBase\",\"incomment\",\"intag\",\"instring\",\"tokenize\",\"blockCommentStart\",\"blockCommentEnd\"],\"mappings\":\"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\",\"sourcesContent\":[\"module.exports = function(module) {\\n\\tif (!module.webpackPolyfill) {\\n\\t\\tmodule.deprecate = function() {};\\n\\t\\tmodule.paths = [];\\n\\t\\t// module.parent = undefined by default\\n\\t\\tif (!module.children) module.children = [];\\n\\t\\tObject.defineProperty(module, \\\"loaded\\\", {\\n\\t\\t\\tenumerable: true,\\n\\t\\t\\tget: function() {\\n\\t\\t\\t\\treturn module.l;\\n\\t\\t\\t}\\n\\t\\t});\\n\\t\\tObject.defineProperty(module, \\\"id\\\", {\\n\\t\\t\\tenumerable: true,\\n\\t\\t\\tget: function() {\\n\\t\\t\\t\\treturn module.i;\\n\\t\\t\\t}\\n\\t\\t});\\n\\t\\tmodule.webpackPolyfill = 1;\\n\\t}\\n\\treturn module;\\n};\\n\",\"// CodeMirror, copyright (c) by Marijn Haverbeke and others\\n// Distributed under an MIT license: https://codemirror.net/LICENSE\\n\\n// This is CodeMirror (https://codemirror.net), a code editor\\n// implemented in JavaScript on top of the browser's DOM.\\n//\\n// You can find some technical background for some of the code below\\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\\n\\n(function (global, factory) {\\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\\n  typeof define === 'function' && define.amd ? define(factory) :\\n  (global.CodeMirror = factory());\\n}(this, (function () { 'use strict';\\n\\n  // Kludges for bugs and behavior differences that can't be feature\\n  // detected are enabled based on userAgent etc sniffing.\\n  var userAgent = navigator.userAgent;\\n  var platform = navigator.platform;\\n\\n  var gecko = /gecko\\\\/\\\\d/i.test(userAgent);\\n  var ie_upto10 = /MSIE \\\\d/.test(userAgent);\\n  var ie_11up = /Trident\\\\/(?:[7-9]|\\\\d{2,})\\\\..*rv:(\\\\d+)/.exec(userAgent);\\n  var edge = /Edge\\\\/(\\\\d+)/.exec(userAgent);\\n  var ie = ie_upto10 || ie_11up || edge;\\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\\n  var webkit = !edge && /WebKit\\\\//.test(userAgent);\\n  var qtwebkit = webkit && /Qt\\\\/\\\\d+\\\\.\\\\d+/.test(userAgent);\\n  var chrome = !edge && /Chrome\\\\//.test(userAgent);\\n  var presto = /Opera\\\\//.test(userAgent);\\n  var safari = /Apple Computer/.test(navigator.vendor);\\n  var mac_geMountainLion = /Mac OS X 1\\\\d\\\\D([8-9]|\\\\d\\\\d)\\\\D/.test(userAgent);\\n  var phantom = /PhantomJS/.test(userAgent);\\n\\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\\\/\\\\w+/.test(userAgent);\\n  var android = /Android/.test(userAgent);\\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\\n  var mac = ios || /Mac/.test(platform);\\n  var chromeOS = /\\\\bCrOS\\\\b/.test(userAgent);\\n  var windows = /win/i.test(platform);\\n\\n  var presto_version = presto && userAgent.match(/Version\\\\/(\\\\d*\\\\.\\\\d*)/);\\n  if (presto_version) { presto_version = Number(presto_version[1]); }\\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\\n  var captureRightClick = gecko || (ie && ie_version >= 9);\\n\\n  function classTest(cls) { return new RegExp(\\\"(^|\\\\\\\\s)\\\" + cls + \\\"(?:$|\\\\\\\\s)\\\\\\\\s*\\\") }\\n\\n  var rmClass = function(node, cls) {\\n    var current = node.className;\\n    var match = classTest(cls).exec(current);\\n    if (match) {\\n      var after = current.slice(match.index + match[0].length);\\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \\\"\\\");\\n    }\\n  };\\n\\n  function removeChildren(e) {\\n    for (var count = e.childNodes.length; count > 0; --count)\\n      { e.removeChild(e.firstChild); }\\n    return e\\n  }\\n\\n  function removeChildrenAndAdd(parent, e) {\\n    return removeChildren(parent).appendChild(e)\\n  }\\n\\n  function elt(tag, content, className, style) {\\n    var e = document.createElement(tag);\\n    if (className) { e.className = className; }\\n    if (style) { e.style.cssText = style; }\\n    if (typeof content == \\\"string\\\") { e.appendChild(document.createTextNode(content)); }\\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\\n    return e\\n  }\\n  // wrapper for elt, which removes the elt from the accessibility tree\\n  function eltP(tag, content, className, style) {\\n    var e = elt(tag, content, className, style);\\n    e.setAttribute(\\\"role\\\", \\\"presentation\\\");\\n    return e\\n  }\\n\\n  var range;\\n  if (document.createRange) { range = function(node, start, end, endNode) {\\n    var r = document.createRange();\\n    r.setEnd(endNode || node, end);\\n    r.setStart(node, start);\\n    return r\\n  }; }\\n  else { range = function(node, start, end) {\\n    var r = document.body.createTextRange();\\n    try { r.moveToElementText(node.parentNode); }\\n    catch(e) { return r }\\n    r.collapse(true);\\n    r.moveEnd(\\\"character\\\", end);\\n    r.moveStart(\\\"character\\\", start);\\n    return r\\n  }; }\\n\\n  function contains(parent, child) {\\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\\n      { child = child.parentNode; }\\n    if (parent.contains)\\n      { return parent.contains(child) }\\n    do {\\n      if (child.nodeType == 11) { child = child.host; }\\n      if (child == parent) { return true }\\n    } while (child = child.parentNode)\\n  }\\n\\n  function activeElt() {\\n    // IE and Edge may throw an \\\"Unspecified Error\\\" when accessing document.activeElement.\\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\\n    var activeElement;\\n    try {\\n      activeElement = document.activeElement;\\n    } catch(e) {\\n      activeElement = document.body || null;\\n    }\\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\\n      { activeElement = activeElement.shadowRoot.activeElement; }\\n    return activeElement\\n  }\\n\\n  function addClass(node, cls) {\\n    var current = node.className;\\n    if (!classTest(cls).test(current)) { node.className += (current ? \\\" \\\" : \\\"\\\") + cls; }\\n  }\\n  function joinClasses(a, b) {\\n    var as = a.split(\\\" \\\");\\n    for (var i = 0; i < as.length; i++)\\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \\\" \\\" + as[i]; } }\\n    return b\\n  }\\n\\n  var selectInput = function(node) { node.select(); };\\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\\n  else if (ie) // Suppress mysterious IE10 errors\\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\\n\\n  function bind(f) {\\n    var args = Array.prototype.slice.call(arguments, 1);\\n    return function(){return f.apply(null, args)}\\n  }\\n\\n  function copyObj(obj, target, overwrite) {\\n    if (!target) { target = {}; }\\n    for (var prop in obj)\\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\\n        { target[prop] = obj[prop]; } }\\n    return target\\n  }\\n\\n  // Counts the column offset in a string, taking tabs into account.\\n  // Used mostly to find indentation.\\n  function countColumn(string, end, tabSize, startIndex, startValue) {\\n    if (end == null) {\\n      end = string.search(/[^\\\\s\\\\u00a0]/);\\n      if (end == -1) { end = string.length; }\\n    }\\n    for (var i = startIndex || 0, n = startValue || 0;;) {\\n      var nextTab = string.indexOf(\\\"\\\\t\\\", i);\\n      if (nextTab < 0 || nextTab >= end)\\n        { return n + (end - i) }\\n      n += nextTab - i;\\n      n += tabSize - (n % tabSize);\\n      i = nextTab + 1;\\n    }\\n  }\\n\\n  var Delayed = function() {this.id = null;};\\n  Delayed.prototype.set = function (ms, f) {\\n    clearTimeout(this.id);\\n    this.id = setTimeout(f, ms);\\n  };\\n\\n  function indexOf(array, elt) {\\n    for (var i = 0; i < array.length; ++i)\\n      { if (array[i] == elt) { return i } }\\n    return -1\\n  }\\n\\n  // Number of pixels added to scroller and sizer to hide scrollbar\\n  var scrollerGap = 30;\\n\\n  // Returned or thrown by various protocols to signal 'I'm not\\n  // handling this'.\\n  var Pass = {toString: function(){return \\\"CodeMirror.Pass\\\"}};\\n\\n  // Reused option objects for setSelection & friends\\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \\\"*mouse\\\"}, sel_move = {origin: \\\"+move\\\"};\\n\\n  // The inverse of countColumn -- find the offset that corresponds to\\n  // a particular column.\\n  function findColumn(string, goal, tabSize) {\\n    for (var pos = 0, col = 0;;) {\\n      var nextTab = string.indexOf(\\\"\\\\t\\\", pos);\\n      if (nextTab == -1) { nextTab = string.length; }\\n      var skipped = nextTab - pos;\\n      if (nextTab == string.length || col + skipped >= goal)\\n        { return pos + Math.min(skipped, goal - col) }\\n      col += nextTab - pos;\\n      col += tabSize - (col % tabSize);\\n      pos = nextTab + 1;\\n      if (col >= goal) { return pos }\\n    }\\n  }\\n\\n  var spaceStrs = [\\\"\\\"];\\n  function spaceStr(n) {\\n    while (spaceStrs.length <= n)\\n      { spaceStrs.push(lst(spaceStrs) + \\\" \\\"); }\\n    return spaceStrs[n]\\n  }\\n\\n  function lst(arr) { return arr[arr.length-1] }\\n\\n  function map(array, f) {\\n    var out = [];\\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\\n    return out\\n  }\\n\\n  function insertSorted(array, value, score) {\\n    var pos = 0, priority = score(value);\\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\\n    array.splice(pos, 0, value);\\n  }\\n\\n  function nothing() {}\\n\\n  function createObj(base, props) {\\n    var inst;\\n    if (Object.create) {\\n      inst = Object.create(base);\\n    } else {\\n      nothing.prototype = base;\\n      inst = new nothing();\\n    }\\n    if (props) { copyObj(props, inst); }\\n    return inst\\n  }\\n\\n  var nonASCIISingleCaseWordChar = /[\\\\u00df\\\\u0587\\\\u0590-\\\\u05f4\\\\u0600-\\\\u06ff\\\\u3040-\\\\u309f\\\\u30a0-\\\\u30ff\\\\u3400-\\\\u4db5\\\\u4e00-\\\\u9fcc\\\\uac00-\\\\ud7af]/;\\n  function isWordCharBasic(ch) {\\n    return /\\\\w/.test(ch) || ch > \\\"\\\\x80\\\" &&\\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\\n  }\\n  function isWordChar(ch, helper) {\\n    if (!helper) { return isWordCharBasic(ch) }\\n    if (helper.source.indexOf(\\\"\\\\\\\\w\\\") > -1 && isWordCharBasic(ch)) { return true }\\n    return helper.test(ch)\\n  }\\n\\n  function isEmpty(obj) {\\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\\n    return true\\n  }\\n\\n  // Extending unicode characters. A series of a non-extending char +\\n  // any number of extending chars is treated as a single unit as far\\n  // as editing and measuring is concerned. This is not fully correct,\\n  // since some scripts/fonts/browsers also treat other configurations\\n  // of code points as a group.\\n  var extendingChars = /[\\\\u0300-\\\\u036f\\\\u0483-\\\\u0489\\\\u0591-\\\\u05bd\\\\u05bf\\\\u05c1\\\\u05c2\\\\u05c4\\\\u05c5\\\\u05c7\\\\u0610-\\\\u061a\\\\u064b-\\\\u065e\\\\u0670\\\\u06d6-\\\\u06dc\\\\u06de-\\\\u06e4\\\\u06e7\\\\u06e8\\\\u06ea-\\\\u06ed\\\\u0711\\\\u0730-\\\\u074a\\\\u07a6-\\\\u07b0\\\\u07eb-\\\\u07f3\\\\u0816-\\\\u0819\\\\u081b-\\\\u0823\\\\u0825-\\\\u0827\\\\u0829-\\\\u082d\\\\u0900-\\\\u0902\\\\u093c\\\\u0941-\\\\u0948\\\\u094d\\\\u0951-\\\\u0955\\\\u0962\\\\u0963\\\\u0981\\\\u09bc\\\\u09be\\\\u09c1-\\\\u09c4\\\\u09cd\\\\u09d7\\\\u09e2\\\\u09e3\\\\u0a01\\\\u0a02\\\\u0a3c\\\\u0a41\\\\u0a42\\\\u0a47\\\\u0a48\\\\u0a4b-\\\\u0a4d\\\\u0a51\\\\u0a70\\\\u0a71\\\\u0a75\\\\u0a81\\\\u0a82\\\\u0abc\\\\u0ac1-\\\\u0ac5\\\\u0ac7\\\\u0ac8\\\\u0acd\\\\u0ae2\\\\u0ae3\\\\u0b01\\\\u0b3c\\\\u0b3e\\\\u0b3f\\\\u0b41-\\\\u0b44\\\\u0b4d\\\\u0b56\\\\u0b57\\\\u0b62\\\\u0b63\\\\u0b82\\\\u0bbe\\\\u0bc0\\\\u0bcd\\\\u0bd7\\\\u0c3e-\\\\u0c40\\\\u0c46-\\\\u0c48\\\\u0c4a-\\\\u0c4d\\\\u0c55\\\\u0c56\\\\u0c62\\\\u0c63\\\\u0cbc\\\\u0cbf\\\\u0cc2\\\\u0cc6\\\\u0ccc\\\\u0ccd\\\\u0cd5\\\\u0cd6\\\\u0ce2\\\\u0ce3\\\\u0d3e\\\\u0d41-\\\\u0d44\\\\u0d4d\\\\u0d57\\\\u0d62\\\\u0d63\\\\u0dca\\\\u0dcf\\\\u0dd2-\\\\u0dd4\\\\u0dd6\\\\u0ddf\\\\u0e31\\\\u0e34-\\\\u0e3a\\\\u0e47-\\\\u0e4e\\\\u0eb1\\\\u0eb4-\\\\u0eb9\\\\u0ebb\\\\u0ebc\\\\u0ec8-\\\\u0ecd\\\\u0f18\\\\u0f19\\\\u0f35\\\\u0f37\\\\u0f39\\\\u0f71-\\\\u0f7e\\\\u0f80-\\\\u0f84\\\\u0f86\\\\u0f87\\\\u0f90-\\\\u0f97\\\\u0f99-\\\\u0fbc\\\\u0fc6\\\\u102d-\\\\u1030\\\\u1032-\\\\u1037\\\\u1039\\\\u103a\\\\u103d\\\\u103e\\\\u1058\\\\u1059\\\\u105e-\\\\u1060\\\\u1071-\\\\u1074\\\\u1082\\\\u1085\\\\u1086\\\\u108d\\\\u109d\\\\u135f\\\\u1712-\\\\u1714\\\\u1732-\\\\u1734\\\\u1752\\\\u1753\\\\u1772\\\\u1773\\\\u17b7-\\\\u17bd\\\\u17c6\\\\u17c9-\\\\u17d3\\\\u17dd\\\\u180b-\\\\u180d\\\\u18a9\\\\u1920-\\\\u1922\\\\u1927\\\\u1928\\\\u1932\\\\u1939-\\\\u193b\\\\u1a17\\\\u1a18\\\\u1a56\\\\u1a58-\\\\u1a5e\\\\u1a60\\\\u1a62\\\\u1a65-\\\\u1a6c\\\\u1a73-\\\\u1a7c\\\\u1a7f\\\\u1b00-\\\\u1b03\\\\u1b34\\\\u1b36-\\\\u1b3a\\\\u1b3c\\\\u1b42\\\\u1b6b-\\\\u1b73\\\\u1b80\\\\u1b81\\\\u1ba2-\\\\u1ba5\\\\u1ba8\\\\u1ba9\\\\u1c2c-\\\\u1c33\\\\u1c36\\\\u1c37\\\\u1cd0-\\\\u1cd2\\\\u1cd4-\\\\u1ce0\\\\u1ce2-\\\\u1ce8\\\\u1ced\\\\u1dc0-\\\\u1de6\\\\u1dfd-\\\\u1dff\\\\u200c\\\\u200d\\\\u20d0-\\\\u20f0\\\\u2cef-\\\\u2cf1\\\\u2de0-\\\\u2dff\\\\u302a-\\\\u302f\\\\u3099\\\\u309a\\\\ua66f-\\\\ua672\\\\ua67c\\\\ua67d\\\\ua6f0\\\\ua6f1\\\\ua802\\\\ua806\\\\ua80b\\\\ua825\\\\ua826\\\\ua8c4\\\\ua8e0-\\\\ua8f1\\\\ua926-\\\\ua92d\\\\ua947-\\\\ua951\\\\ua980-\\\\ua982\\\\ua9b3\\\\ua9b6-\\\\ua9b9\\\\ua9bc\\\\uaa29-\\\\uaa2e\\\\uaa31\\\\uaa32\\\\uaa35\\\\uaa36\\\\uaa43\\\\uaa4c\\\\uaab0\\\\uaab2-\\\\uaab4\\\\uaab7\\\\uaab8\\\\uaabe\\\\uaabf\\\\uaac1\\\\uabe5\\\\uabe8\\\\uabed\\\\udc00-\\\\udfff\\\\ufb1e\\\\ufe00-\\\\ufe0f\\\\ufe20-\\\\ufe26\\\\uff9e\\\\uff9f]/;\\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\\n\\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\\n  function skipExtendingChars(str, pos, dir) {\\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\\n    return pos\\n  }\\n\\n  // Returns the value from the range [`from`; `to`] that satisfies\\n  // `pred` and is closest to `from`. Assumes that at least `to`\\n  // satisfies `pred`. Supports `from` being greater than `to`.\\n  function findFirst(pred, from, to) {\\n    // At any point we are certain `to` satisfies `pred`, don't know\\n    // whether `from` does.\\n    var dir = from > to ? -1 : 1;\\n    for (;;) {\\n      if (from == to) { return from }\\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\\n      if (mid == from) { return pred(mid) ? from : to }\\n      if (pred(mid)) { to = mid; }\\n      else { from = mid + dir; }\\n    }\\n  }\\n\\n  // BIDI HELPERS\\n\\n  function iterateBidiSections(order, from, to, f) {\\n    if (!order) { return f(from, to, \\\"ltr\\\", 0) }\\n    var found = false;\\n    for (var i = 0; i < order.length; ++i) {\\n      var part = order[i];\\n      if (part.from < to && part.to > from || from == to && part.to == from) {\\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \\\"rtl\\\" : \\\"ltr\\\", i);\\n        found = true;\\n      }\\n    }\\n    if (!found) { f(from, to, \\\"ltr\\\"); }\\n  }\\n\\n  var bidiOther = null;\\n  function getBidiPartAt(order, ch, sticky) {\\n    var found;\\n    bidiOther = null;\\n    for (var i = 0; i < order.length; ++i) {\\n      var cur = order[i];\\n      if (cur.from < ch && cur.to > ch) { return i }\\n      if (cur.to == ch) {\\n        if (cur.from != cur.to && sticky == \\\"before\\\") { found = i; }\\n        else { bidiOther = i; }\\n      }\\n      if (cur.from == ch) {\\n        if (cur.from != cur.to && sticky != \\\"before\\\") { found = i; }\\n        else { bidiOther = i; }\\n      }\\n    }\\n    return found != null ? found : bidiOther\\n  }\\n\\n  // Bidirectional ordering algorithm\\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\\n  // that this (partially) implements.\\n\\n  // One-char codes used for character types:\\n  // L (L):   Left-to-Right\\n  // R (R):   Right-to-Left\\n  // r (AL):  Right-to-Left Arabic\\n  // 1 (EN):  European Number\\n  // + (ES):  European Number Separator\\n  // % (ET):  European Number Terminator\\n  // n (AN):  Arabic Number\\n  // , (CS):  Common Number Separator\\n  // m (NSM): Non-Spacing Mark\\n  // b (BN):  Boundary Neutral\\n  // s (B):   Paragraph Separator\\n  // t (S):   Segment Separator\\n  // w (WS):  Whitespace\\n  // N (ON):  Other Neutrals\\n\\n  // Returns null if characters are ordered as they appear\\n  // (left-to-right), or an array of sections ({from, to, level}\\n  // objects) in the order in which they occur visually.\\n  var bidiOrdering = (function() {\\n    // Character types for codepoints 0 to 0xff\\n    var lowTypes = \\\"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\\\";\\n    // Character types for codepoints 0x600 to 0x6f9\\n    var arabicTypes = \\\"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\\\";\\n    function charType(code) {\\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\\n      else if (0x590 <= code && code <= 0x5f4) { return \\\"R\\\" }\\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\\n      else if (0x6ee <= code && code <= 0x8ac) { return \\\"r\\\" }\\n      else if (0x2000 <= code && code <= 0x200b) { return \\\"w\\\" }\\n      else if (code == 0x200c) { return \\\"b\\\" }\\n      else { return \\\"L\\\" }\\n    }\\n\\n    var bidiRE = /[\\\\u0590-\\\\u05f4\\\\u0600-\\\\u06ff\\\\u0700-\\\\u08ac]/;\\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\\n\\n    function BidiSpan(level, from, to) {\\n      this.level = level;\\n      this.from = from; this.to = to;\\n    }\\n\\n    return function(str, direction) {\\n      var outerType = direction == \\\"ltr\\\" ? \\\"L\\\" : \\\"R\\\";\\n\\n      if (str.length == 0 || direction == \\\"ltr\\\" && !bidiRE.test(str)) { return false }\\n      var len = str.length, types = [];\\n      for (var i = 0; i < len; ++i)\\n        { types.push(charType(str.charCodeAt(i))); }\\n\\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\\n      // change the type of the NSM to the type of the previous\\n      // character. If the NSM is at the start of the level run, it will\\n      // get the type of sor.\\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\\n        var type = types[i$1];\\n        if (type == \\\"m\\\") { types[i$1] = prev; }\\n        else { prev = type; }\\n      }\\n\\n      // W2. Search backwards from each instance of a European number\\n      // until the first strong type (R, L, AL, or sor) is found. If an\\n      // AL is found, change the type of the European number to Arabic\\n      // number.\\n      // W3. Change all ALs to R.\\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\\n        var type$1 = types[i$2];\\n        if (type$1 == \\\"1\\\" && cur == \\\"r\\\") { types[i$2] = \\\"n\\\"; }\\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \\\"r\\\") { types[i$2] = \\\"R\\\"; } }\\n      }\\n\\n      // W4. A single European separator between two European numbers\\n      // changes to a European number. A single common separator between\\n      // two numbers of the same type changes to that type.\\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\\n        var type$2 = types[i$3];\\n        if (type$2 == \\\"+\\\" && prev$1 == \\\"1\\\" && types[i$3+1] == \\\"1\\\") { types[i$3] = \\\"1\\\"; }\\n        else if (type$2 == \\\",\\\" && prev$1 == types[i$3+1] &&\\n                 (prev$1 == \\\"1\\\" || prev$1 == \\\"n\\\")) { types[i$3] = prev$1; }\\n        prev$1 = type$2;\\n      }\\n\\n      // W5. A sequence of European terminators adjacent to European\\n      // numbers changes to all European numbers.\\n      // W6. Otherwise, separators and terminators change to Other\\n      // Neutral.\\n      for (var i$4 = 0; i$4 < len; ++i$4) {\\n        var type$3 = types[i$4];\\n        if (type$3 == \\\",\\\") { types[i$4] = \\\"N\\\"; }\\n        else if (type$3 == \\\"%\\\") {\\n          var end = (void 0);\\n          for (end = i$4 + 1; end < len && types[end] == \\\"%\\\"; ++end) {}\\n          var replace = (i$4 && types[i$4-1] == \\\"!\\\") || (end < len && types[end] == \\\"1\\\") ? \\\"1\\\" : \\\"N\\\";\\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\\n          i$4 = end - 1;\\n        }\\n      }\\n\\n      // W7. Search backwards from each instance of a European number\\n      // until the first strong type (R, L, or sor) is found. If an L is\\n      // found, then change the type of the European number to L.\\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\\n        var type$4 = types[i$5];\\n        if (cur$1 == \\\"L\\\" && type$4 == \\\"1\\\") { types[i$5] = \\\"L\\\"; }\\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\\n      }\\n\\n      // N1. A sequence of neutrals takes the direction of the\\n      // surrounding strong text if the text on both sides has the same\\n      // direction. European and Arabic numbers act as if they were R in\\n      // terms of their influence on neutrals. Start-of-level-run (sor)\\n      // and end-of-level-run (eor) are used at level run boundaries.\\n      // N2. Any remaining neutrals take the embedding direction.\\n      for (var i$6 = 0; i$6 < len; ++i$6) {\\n        if (isNeutral.test(types[i$6])) {\\n          var end$1 = (void 0);\\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\\n          var before = (i$6 ? types[i$6-1] : outerType) == \\\"L\\\";\\n          var after = (end$1 < len ? types[end$1] : outerType) == \\\"L\\\";\\n          var replace$1 = before == after ? (before ? \\\"L\\\" : \\\"R\\\") : outerType;\\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\\n          i$6 = end$1 - 1;\\n        }\\n      }\\n\\n      // Here we depart from the documented algorithm, in order to avoid\\n      // building up an actual levels array. Since there are only three\\n      // levels (0, 1, 2) in an implementation that doesn't take\\n      // explicit embedding into account, we can build up the order on\\n      // the fly, without following the level-based algorithm.\\n      var order = [], m;\\n      for (var i$7 = 0; i$7 < len;) {\\n        if (countsAsLeft.test(types[i$7])) {\\n          var start = i$7;\\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\\n          order.push(new BidiSpan(0, start, i$7));\\n        } else {\\n          var pos = i$7, at = order.length;\\n          for (++i$7; i$7 < len && types[i$7] != \\\"L\\\"; ++i$7) {}\\n          for (var j$2 = pos; j$2 < i$7;) {\\n            if (countsAsNum.test(types[j$2])) {\\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); }\\n              var nstart = j$2;\\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\\n              pos = j$2;\\n            } else { ++j$2; }\\n          }\\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\\n        }\\n      }\\n      if (direction == \\\"ltr\\\") {\\n        if (order[0].level == 1 && (m = str.match(/^\\\\s+/))) {\\n          order[0].from = m[0].length;\\n          order.unshift(new BidiSpan(0, 0, m[0].length));\\n        }\\n        if (lst(order).level == 1 && (m = str.match(/\\\\s+$/))) {\\n          lst(order).to -= m[0].length;\\n          order.push(new BidiSpan(0, len - m[0].length, len));\\n        }\\n      }\\n\\n      return direction == \\\"rtl\\\" ? order.reverse() : order\\n    }\\n  })();\\n\\n  // Get the bidi ordering for the given line (and cache it). Returns\\n  // false for lines that are fully left-to-right, and an array of\\n  // BidiSpan objects otherwise.\\n  function getOrder(line, direction) {\\n    var order = line.order;\\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\\n    return order\\n  }\\n\\n  // EVENT HANDLING\\n\\n  // Lightweight event framework. on/off also work on DOM nodes,\\n  // registering native DOM handlers.\\n\\n  var noHandlers = [];\\n\\n  var on = function(emitter, type, f) {\\n    if (emitter.addEventListener) {\\n      emitter.addEventListener(type, f, false);\\n    } else if (emitter.attachEvent) {\\n      emitter.attachEvent(\\\"on\\\" + type, f);\\n    } else {\\n      var map$$1 = emitter._handlers || (emitter._handlers = {});\\n      map$$1[type] = (map$$1[type] || noHandlers).concat(f);\\n    }\\n  };\\n\\n  function getHandlers(emitter, type) {\\n    return emitter._handlers && emitter._handlers[type] || noHandlers\\n  }\\n\\n  function off(emitter, type, f) {\\n    if (emitter.removeEventListener) {\\n      emitter.removeEventListener(type, f, false);\\n    } else if (emitter.detachEvent) {\\n      emitter.detachEvent(\\\"on\\\" + type, f);\\n    } else {\\n      var map$$1 = emitter._handlers, arr = map$$1 && map$$1[type];\\n      if (arr) {\\n        var index = indexOf(arr, f);\\n        if (index > -1)\\n          { map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\\n      }\\n    }\\n  }\\n\\n  function signal(emitter, type /*, values...*/) {\\n    var handlers = getHandlers(emitter, type);\\n    if (!handlers.length) { return }\\n    var args = Array.prototype.slice.call(arguments, 2);\\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\\n  }\\n\\n  // The DOM events that CodeMirror handles can be overridden by\\n  // registering a (non-DOM) handler on the editor for the event name,\\n  // and preventDefault-ing the event in that handler.\\n  function signalDOMEvent(cm, e, override) {\\n    if (typeof e == \\\"string\\\")\\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\\n    signal(cm, override || e.type, cm, e);\\n    return e_defaultPrevented(e) || e.codemirrorIgnore\\n  }\\n\\n  function signalCursorActivity(cm) {\\n    var arr = cm._handlers && cm._handlers.cursorActivity;\\n    if (!arr) { return }\\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\\n      { set.push(arr[i]); } }\\n  }\\n\\n  function hasHandler(emitter, type) {\\n    return getHandlers(emitter, type).length > 0\\n  }\\n\\n  // Add on and off methods to a constructor's prototype, to make\\n  // registering events on such objects more convenient.\\n  function eventMixin(ctor) {\\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\\n  }\\n\\n  // Due to the fact that we still support jurassic IE versions, some\\n  // compatibility wrappers are needed.\\n\\n  function e_preventDefault(e) {\\n    if (e.preventDefault) { e.preventDefault(); }\\n    else { e.returnValue = false; }\\n  }\\n  function e_stopPropagation(e) {\\n    if (e.stopPropagation) { e.stopPropagation(); }\\n    else { e.cancelBubble = true; }\\n  }\\n  function e_defaultPrevented(e) {\\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\\n  }\\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\\n\\n  function e_target(e) {return e.target || e.srcElement}\\n  function e_button(e) {\\n    var b = e.which;\\n    if (b == null) {\\n      if (e.button & 1) { b = 1; }\\n      else if (e.button & 2) { b = 3; }\\n      else if (e.button & 4) { b = 2; }\\n    }\\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\\n    return b\\n  }\\n\\n  // Detect drag-and-drop\\n  var dragAndDrop = function() {\\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\\n    // couldn't get it to work yet.\\n    if (ie && ie_version < 9) { return false }\\n    var div = elt('div');\\n    return \\\"draggable\\\" in div || \\\"dragDrop\\\" in div\\n  }();\\n\\n  var zwspSupported;\\n  function zeroWidthElement(measure) {\\n    if (zwspSupported == null) {\\n      var test = elt(\\\"span\\\", \\\"\\\\u200b\\\");\\n      removeChildrenAndAdd(measure, elt(\\\"span\\\", [test, document.createTextNode(\\\"x\\\")]));\\n      if (measure.firstChild.offsetHeight != 0)\\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\\n    }\\n    var node = zwspSupported ? elt(\\\"span\\\", \\\"\\\\u200b\\\") :\\n      elt(\\\"span\\\", \\\"\\\\u00a0\\\", null, \\\"display: inline-block; width: 1px; margin-right: -1px\\\");\\n    node.setAttribute(\\\"cm-text\\\", \\\"\\\");\\n    return node\\n  }\\n\\n  // Feature-detect IE's crummy client rect reporting for bidi text\\n  var badBidiRects;\\n  function hasBadBidiRects(measure) {\\n    if (badBidiRects != null) { return badBidiRects }\\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\\\"A\\\\u062eA\\\"));\\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\\n    removeChildren(measure);\\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\\n    return badBidiRects = (r1.right - r0.right < 3)\\n  }\\n\\n  // See if \\\"\\\".split is the broken IE version, if so, provide an\\n  // alternative way to split lines.\\n  var splitLinesAuto = \\\"\\\\n\\\\nb\\\".split(/\\\\n/).length != 3 ? function (string) {\\n    var pos = 0, result = [], l = string.length;\\n    while (pos <= l) {\\n      var nl = string.indexOf(\\\"\\\\n\\\", pos);\\n      if (nl == -1) { nl = string.length; }\\n      var line = string.slice(pos, string.charAt(nl - 1) == \\\"\\\\r\\\" ? nl - 1 : nl);\\n      var rt = line.indexOf(\\\"\\\\r\\\");\\n      if (rt != -1) {\\n        result.push(line.slice(0, rt));\\n        pos += rt + 1;\\n      } else {\\n        result.push(line);\\n        pos = nl + 1;\\n      }\\n    }\\n    return result\\n  } : function (string) { return string.split(/\\\\r\\\\n?|\\\\n/); };\\n\\n  var hasSelection = window.getSelection ? function (te) {\\n    try { return te.selectionStart != te.selectionEnd }\\n    catch(e) { return false }\\n  } : function (te) {\\n    var range$$1;\\n    try {range$$1 = te.ownerDocument.selection.createRange();}\\n    catch(e) {}\\n    if (!range$$1 || range$$1.parentElement() != te) { return false }\\n    return range$$1.compareEndPoints(\\\"StartToEnd\\\", range$$1) != 0\\n  };\\n\\n  var hasCopyEvent = (function () {\\n    var e = elt(\\\"div\\\");\\n    if (\\\"oncopy\\\" in e) { return true }\\n    e.setAttribute(\\\"oncopy\\\", \\\"return;\\\");\\n    return typeof e.oncopy == \\\"function\\\"\\n  })();\\n\\n  var badZoomedRects = null;\\n  function hasBadZoomedRects(measure) {\\n    if (badZoomedRects != null) { return badZoomedRects }\\n    var node = removeChildrenAndAdd(measure, elt(\\\"span\\\", \\\"x\\\"));\\n    var normal = node.getBoundingClientRect();\\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\\n  }\\n\\n  // Known modes, by name and by MIME\\n  var modes = {}, mimeModes = {};\\n\\n  // Extra arguments are stored as the mode's dependencies, which is\\n  // used by (legacy) mechanisms like loadmode.js to automatically\\n  // load a mode. (Preferred mechanism is the require/define calls.)\\n  function defineMode(name, mode) {\\n    if (arguments.length > 2)\\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\\n    modes[name] = mode;\\n  }\\n\\n  function defineMIME(mime, spec) {\\n    mimeModes[mime] = spec;\\n  }\\n\\n  // Given a MIME type, a {name, ...options} config object, or a name\\n  // string, return a mode config object.\\n  function resolveMode(spec) {\\n    if (typeof spec == \\\"string\\\" && mimeModes.hasOwnProperty(spec)) {\\n      spec = mimeModes[spec];\\n    } else if (spec && typeof spec.name == \\\"string\\\" && mimeModes.hasOwnProperty(spec.name)) {\\n      var found = mimeModes[spec.name];\\n      if (typeof found == \\\"string\\\") { found = {name: found}; }\\n      spec = createObj(found, spec);\\n      spec.name = found.name;\\n    } else if (typeof spec == \\\"string\\\" && /^[\\\\w\\\\-]+\\\\/[\\\\w\\\\-]+\\\\+xml$/.test(spec)) {\\n      return resolveMode(\\\"application/xml\\\")\\n    } else if (typeof spec == \\\"string\\\" && /^[\\\\w\\\\-]+\\\\/[\\\\w\\\\-]+\\\\+json$/.test(spec)) {\\n      return resolveMode(\\\"application/json\\\")\\n    }\\n    if (typeof spec == \\\"string\\\") { return {name: spec} }\\n    else { return spec || {name: \\\"null\\\"} }\\n  }\\n\\n  // Given a mode spec (anything that resolveMode accepts), find and\\n  // initialize an actual mode object.\\n  function getMode(options, spec) {\\n    spec = resolveMode(spec);\\n    var mfactory = modes[spec.name];\\n    if (!mfactory) { return getMode(options, \\\"text/plain\\\") }\\n    var modeObj = mfactory(options, spec);\\n    if (modeExtensions.hasOwnProperty(spec.name)) {\\n      var exts = modeExtensions[spec.name];\\n      for (var prop in exts) {\\n        if (!exts.hasOwnProperty(prop)) { continue }\\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\\\"_\\\" + prop] = modeObj[prop]; }\\n        modeObj[prop] = exts[prop];\\n      }\\n    }\\n    modeObj.name = spec.name;\\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\\n\\n    return modeObj\\n  }\\n\\n  // This can be used to attach properties to mode objects from\\n  // outside the actual mode definition.\\n  var modeExtensions = {};\\n  function extendMode(mode, properties) {\\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\\n    copyObj(properties, exts);\\n  }\\n\\n  function copyState(mode, state) {\\n    if (state === true) { return state }\\n    if (mode.copyState) { return mode.copyState(state) }\\n    var nstate = {};\\n    for (var n in state) {\\n      var val = state[n];\\n      if (val instanceof Array) { val = val.concat([]); }\\n      nstate[n] = val;\\n    }\\n    return nstate\\n  }\\n\\n  // Given a mode and a state (for that mode), find the inner mode and\\n  // state at the position that the state refers to.\\n  function innerMode(mode, state) {\\n    var info;\\n    while (mode.innerMode) {\\n      info = mode.innerMode(state);\\n      if (!info || info.mode == mode) { break }\\n      state = info.state;\\n      mode = info.mode;\\n    }\\n    return info || {mode: mode, state: state}\\n  }\\n\\n  function startState(mode, a1, a2) {\\n    return mode.startState ? mode.startState(a1, a2) : true\\n  }\\n\\n  // STRING STREAM\\n\\n  // Fed to the mode parsers, provides helper functions to make\\n  // parsers more succinct.\\n\\n  var StringStream = function(string, tabSize, lineOracle) {\\n    this.pos = this.start = 0;\\n    this.string = string;\\n    this.tabSize = tabSize || 8;\\n    this.lastColumnPos = this.lastColumnValue = 0;\\n    this.lineStart = 0;\\n    this.lineOracle = lineOracle;\\n  };\\n\\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\\n  StringStream.prototype.next = function () {\\n    if (this.pos < this.string.length)\\n      { return this.string.charAt(this.pos++) }\\n  };\\n  StringStream.prototype.eat = function (match) {\\n    var ch = this.string.charAt(this.pos);\\n    var ok;\\n    if (typeof match == \\\"string\\\") { ok = ch == match; }\\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\\n    if (ok) {++this.pos; return ch}\\n  };\\n  StringStream.prototype.eatWhile = function (match) {\\n    var start = this.pos;\\n    while (this.eat(match)){}\\n    return this.pos > start\\n  };\\n  StringStream.prototype.eatSpace = function () {\\n      var this$1 = this;\\n\\n    var start = this.pos;\\n    while (/[\\\\s\\\\u00a0]/.test(this.string.charAt(this.pos))) { ++this$1.pos; }\\n    return this.pos > start\\n  };\\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\\n  StringStream.prototype.skipTo = function (ch) {\\n    var found = this.string.indexOf(ch, this.pos);\\n    if (found > -1) {this.pos = found; return true}\\n  };\\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\\n  StringStream.prototype.column = function () {\\n    if (this.lastColumnPos < this.start) {\\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\\n      this.lastColumnPos = this.start;\\n    }\\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\\n  };\\n  StringStream.prototype.indentation = function () {\\n    return countColumn(this.string, null, this.tabSize) -\\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\\n  };\\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\\n    if (typeof pattern == \\\"string\\\") {\\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\\n      var substr = this.string.substr(this.pos, pattern.length);\\n      if (cased(substr) == cased(pattern)) {\\n        if (consume !== false) { this.pos += pattern.length; }\\n        return true\\n      }\\n    } else {\\n      var match = this.string.slice(this.pos).match(pattern);\\n      if (match && match.index > 0) { return null }\\n      if (match && consume !== false) { this.pos += match[0].length; }\\n      return match\\n    }\\n  };\\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\\n  StringStream.prototype.hideFirstChars = function (n, inner) {\\n    this.lineStart += n;\\n    try { return inner() }\\n    finally { this.lineStart -= n; }\\n  };\\n  StringStream.prototype.lookAhead = function (n) {\\n    var oracle = this.lineOracle;\\n    return oracle && oracle.lookAhead(n)\\n  };\\n  StringStream.prototype.baseToken = function () {\\n    var oracle = this.lineOracle;\\n    return oracle && oracle.baseToken(this.pos)\\n  };\\n\\n  // Find the line object corresponding to the given line number.\\n  function getLine(doc, n) {\\n    n -= doc.first;\\n    if (n < 0 || n >= doc.size) { throw new Error(\\\"There is no line \\\" + (n + doc.first) + \\\" in the document.\\\") }\\n    var chunk = doc;\\n    while (!chunk.lines) {\\n      for (var i = 0;; ++i) {\\n        var child = chunk.children[i], sz = child.chunkSize();\\n        if (n < sz) { chunk = child; break }\\n        n -= sz;\\n      }\\n    }\\n    return chunk.lines[n]\\n  }\\n\\n  // Get the part of a document between two positions, as an array of\\n  // strings.\\n  function getBetween(doc, start, end) {\\n    var out = [], n = start.line;\\n    doc.iter(start.line, end.line + 1, function (line) {\\n      var text = line.text;\\n      if (n == end.line) { text = text.slice(0, end.ch); }\\n      if (n == start.line) { text = text.slice(start.ch); }\\n      out.push(text);\\n      ++n;\\n    });\\n    return out\\n  }\\n  // Get the lines between from and to, as array of strings.\\n  function getLines(doc, from, to) {\\n    var out = [];\\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\\n    return out\\n  }\\n\\n  // Update the height of a line, propagating the height change\\n  // upwards to parent nodes.\\n  function updateLineHeight(line, height) {\\n    var diff = height - line.height;\\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\\n  }\\n\\n  // Given a line object, find its line number by walking up through\\n  // its parent links.\\n  function lineNo(line) {\\n    if (line.parent == null) { return null }\\n    var cur = line.parent, no = indexOf(cur.lines, line);\\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\\n      for (var i = 0;; ++i) {\\n        if (chunk.children[i] == cur) { break }\\n        no += chunk.children[i].chunkSize();\\n      }\\n    }\\n    return no + cur.first\\n  }\\n\\n  // Find the line at the given vertical position, using the height\\n  // information in the document tree.\\n  function lineAtHeight(chunk, h) {\\n    var n = chunk.first;\\n    outer: do {\\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\\n        var child = chunk.children[i$1], ch = child.height;\\n        if (h < ch) { chunk = child; continue outer }\\n        h -= ch;\\n        n += child.chunkSize();\\n      }\\n      return n\\n    } while (!chunk.lines)\\n    var i = 0;\\n    for (; i < chunk.lines.length; ++i) {\\n      var line = chunk.lines[i], lh = line.height;\\n      if (h < lh) { break }\\n      h -= lh;\\n    }\\n    return n + i\\n  }\\n\\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\\n\\n  function lineNumberFor(options, i) {\\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\\n  }\\n\\n  // A Pos instance represents a position within the text.\\n  function Pos(line, ch, sticky) {\\n    if ( sticky === void 0 ) sticky = null;\\n\\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\\n    this.line = line;\\n    this.ch = ch;\\n    this.sticky = sticky;\\n  }\\n\\n  // Compare two positions, return 0 if they are the same, a negative\\n  // number when a is less, and a positive number otherwise.\\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\\n\\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\\n\\n  function copyPos(x) {return Pos(x.line, x.ch)}\\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\\n\\n  // Most of the external API clips given positions to make sure they\\n  // actually exist within the document.\\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\\n  function clipPos(doc, pos) {\\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\\n    var last = doc.first + doc.size - 1;\\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\\n  }\\n  function clipToLen(pos, linelen) {\\n    var ch = pos.ch;\\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\\n    else if (ch < 0) { return Pos(pos.line, 0) }\\n    else { return pos }\\n  }\\n  function clipPosArray(doc, array) {\\n    var out = [];\\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\\n    return out\\n  }\\n\\n  var SavedContext = function(state, lookAhead) {\\n    this.state = state;\\n    this.lookAhead = lookAhead;\\n  };\\n\\n  var Context = function(doc, state, line, lookAhead) {\\n    this.state = state;\\n    this.doc = doc;\\n    this.line = line;\\n    this.maxLookAhead = lookAhead || 0;\\n    this.baseTokens = null;\\n    this.baseTokenPos = 1;\\n  };\\n\\n  Context.prototype.lookAhead = function (n) {\\n    var line = this.doc.getLine(this.line + n);\\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\\n    return line\\n  };\\n\\n  Context.prototype.baseToken = function (n) {\\n      var this$1 = this;\\n\\n    if (!this.baseTokens) { return null }\\n    while (this.baseTokens[this.baseTokenPos] <= n)\\n      { this$1.baseTokenPos += 2; }\\n    var type = this.baseTokens[this.baseTokenPos + 1];\\n    return {type: type && type.replace(/( |^)overlay .*/, \\\"\\\"),\\n            size: this.baseTokens[this.baseTokenPos] - n}\\n  };\\n\\n  Context.prototype.nextLine = function () {\\n    this.line++;\\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\\n  };\\n\\n  Context.fromSaved = function (doc, saved, line) {\\n    if (saved instanceof SavedContext)\\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\\n    else\\n      { return new Context(doc, copyState(doc.mode, saved), line) }\\n  };\\n\\n  Context.prototype.save = function (copy) {\\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\\n  };\\n\\n\\n  // Compute a style array (an array starting with a mode generation\\n  // -- for invalidation -- followed by pairs of end positions and\\n  // style strings), which is used to highlight the tokens on the\\n  // line.\\n  function highlightLine(cm, line, context, forceToEnd) {\\n    // A styles array always starts with a number identifying the\\n    // mode/overlays that it is based on (for easy invalidation).\\n    var st = [cm.state.modeGen], lineClasses = {};\\n    // Compute the base array of styles\\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\\n            lineClasses, forceToEnd);\\n    var state = context.state;\\n\\n    // Run overlays, adjust style array.\\n    var loop = function ( o ) {\\n      context.baseTokens = st;\\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\\n      context.state = true;\\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\\n        var start = i;\\n        // Ensure there's a token end at the current position, and that i points at it\\n        while (at < end) {\\n          var i_end = st[i];\\n          if (i_end > end)\\n            { st.splice(i, 1, end, st[i+1], i_end); }\\n          i += 2;\\n          at = Math.min(end, i_end);\\n        }\\n        if (!style) { return }\\n        if (overlay.opaque) {\\n          st.splice(start, i - start, end, \\\"overlay \\\" + style);\\n          i = start + 2;\\n        } else {\\n          for (; start < i; start += 2) {\\n            var cur = st[start+1];\\n            st[start+1] = (cur ? cur + \\\" \\\" : \\\"\\\") + \\\"overlay \\\" + style;\\n          }\\n        }\\n      }, lineClasses);\\n      context.state = state;\\n      context.baseTokens = null;\\n      context.baseTokenPos = 1;\\n    };\\n\\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\\n\\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\\n  }\\n\\n  function getLineStyles(cm, line, updateFrontier) {\\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\\n      var context = getContextBefore(cm, lineNo(line));\\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\\n      var result = highlightLine(cm, line, context);\\n      if (resetState) { context.state = resetState; }\\n      line.stateAfter = context.save(!resetState);\\n      line.styles = result.styles;\\n      if (result.classes) { line.styleClasses = result.classes; }\\n      else if (line.styleClasses) { line.styleClasses = null; }\\n      if (updateFrontier === cm.doc.highlightFrontier)\\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\\n    }\\n    return line.styles\\n  }\\n\\n  function getContextBefore(cm, n, precise) {\\n    var doc = cm.doc, display = cm.display;\\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\\n    var start = findStartLine(cm, n, precise);\\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\\n\\n    doc.iter(start, n, function (line) {\\n      processLine(cm, line.text, context);\\n      var pos = context.line;\\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\\n      context.nextLine();\\n    });\\n    if (precise) { doc.modeFrontier = context.line; }\\n    return context\\n  }\\n\\n  // Lightweight form of highlight -- proceed over this line and\\n  // update state, but don't save a style array. Used for lines that\\n  // aren't currently visible.\\n  function processLine(cm, text, context, startAt) {\\n    var mode = cm.doc.mode;\\n    var stream = new StringStream(text, cm.options.tabSize, context);\\n    stream.start = stream.pos = startAt || 0;\\n    if (text == \\\"\\\") { callBlankLine(mode, context.state); }\\n    while (!stream.eol()) {\\n      readToken(mode, stream, context.state);\\n      stream.start = stream.pos;\\n    }\\n  }\\n\\n  function callBlankLine(mode, state) {\\n    if (mode.blankLine) { return mode.blankLine(state) }\\n    if (!mode.innerMode) { return }\\n    var inner = innerMode(mode, state);\\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\\n  }\\n\\n  function readToken(mode, stream, state, inner) {\\n    for (var i = 0; i < 10; i++) {\\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\\n      var style = mode.token(stream, state);\\n      if (stream.pos > stream.start) { return style }\\n    }\\n    throw new Error(\\\"Mode \\\" + mode.name + \\\" failed to advance stream.\\\")\\n  }\\n\\n  var Token = function(stream, type, state) {\\n    this.start = stream.start; this.end = stream.pos;\\n    this.string = stream.current();\\n    this.type = type || null;\\n    this.state = state;\\n  };\\n\\n  // Utility for getTokenAt and getLineTokens\\n  function takeToken(cm, pos, precise, asArray) {\\n    var doc = cm.doc, mode = doc.mode, style;\\n    pos = clipPos(doc, pos);\\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\\n    if (asArray) { tokens = []; }\\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\\n      stream.start = stream.pos;\\n      style = readToken(mode, stream, context.state);\\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\\n    }\\n    return asArray ? tokens : new Token(stream, style, context.state)\\n  }\\n\\n  function extractLineClasses(type, output) {\\n    if (type) { for (;;) {\\n      var lineClass = type.match(/(?:^|\\\\s+)line-(background-)?(\\\\S+)/);\\n      if (!lineClass) { break }\\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\\n      var prop = lineClass[1] ? \\\"bgClass\\\" : \\\"textClass\\\";\\n      if (output[prop] == null)\\n        { output[prop] = lineClass[2]; }\\n      else if (!(new RegExp(\\\"(?:^|\\\\s)\\\" + lineClass[2] + \\\"(?:$|\\\\s)\\\")).test(output[prop]))\\n        { output[prop] += \\\" \\\" + lineClass[2]; }\\n    } }\\n    return type\\n  }\\n\\n  // Run the given mode's parser over a line, calling f for each token.\\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\\n    var flattenSpans = mode.flattenSpans;\\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\\n    var curStart = 0, curStyle = null;\\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\\n    var inner = cm.options.addModeClass && [null];\\n    if (text == \\\"\\\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\\n    while (!stream.eol()) {\\n      if (stream.pos > cm.options.maxHighlightLength) {\\n        flattenSpans = false;\\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\\n        stream.pos = text.length;\\n        style = null;\\n      } else {\\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\\n      }\\n      if (inner) {\\n        var mName = inner[0].name;\\n        if (mName) { style = \\\"m-\\\" + (style ? mName + \\\" \\\" + style : mName); }\\n      }\\n      if (!flattenSpans || curStyle != style) {\\n        while (curStart < stream.start) {\\n          curStart = Math.min(stream.start, curStart + 5000);\\n          f(curStart, curStyle);\\n        }\\n        curStyle = style;\\n      }\\n      stream.start = stream.pos;\\n    }\\n    while (curStart < stream.pos) {\\n      // Webkit seems to refuse to render text nodes longer than 57444\\n      // characters, and returns inaccurate measurements in nodes\\n      // starting around 5000 chars.\\n      var pos = Math.min(stream.pos, curStart + 5000);\\n      f(pos, curStyle);\\n      curStart = pos;\\n    }\\n  }\\n\\n  // Finds the line to start with when starting a parse. Tries to\\n  // find a line with a stateAfter, so that it can start with a\\n  // valid state. If that fails, it returns the line with the\\n  // smallest indentation, which tends to need the least context to\\n  // parse correctly.\\n  function findStartLine(cm, n, precise) {\\n    var minindent, minline, doc = cm.doc;\\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\\n    for (var search = n; search > lim; --search) {\\n      if (search <= doc.first) { return doc.first }\\n      var line = getLine(doc, search - 1), after = line.stateAfter;\\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\\n        { return search }\\n      var indented = countColumn(line.text, null, cm.options.tabSize);\\n      if (minline == null || minindent > indented) {\\n        minline = search - 1;\\n        minindent = indented;\\n      }\\n    }\\n    return minline\\n  }\\n\\n  function retreatFrontier(doc, n) {\\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\\n    if (doc.highlightFrontier < n - 10) { return }\\n    var start = doc.first;\\n    for (var line = n - 1; line > start; line--) {\\n      var saved = getLine(doc, line).stateAfter;\\n      // change is on 3\\n      // state on line 1 looked ahead 2 -- so saw 3\\n      // test 1 + 2 < 3 should cover this\\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\\n        start = line + 1;\\n        break\\n      }\\n    }\\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\\n  }\\n\\n  // Optimize some code when these features are not used.\\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\\n\\n  function seeReadOnlySpans() {\\n    sawReadOnlySpans = true;\\n  }\\n\\n  function seeCollapsedSpans() {\\n    sawCollapsedSpans = true;\\n  }\\n\\n  // TEXTMARKER SPANS\\n\\n  function MarkedSpan(marker, from, to) {\\n    this.marker = marker;\\n    this.from = from; this.to = to;\\n  }\\n\\n  // Search an array of spans for a span matching the given marker.\\n  function getMarkedSpanFor(spans, marker) {\\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\\n      var span = spans[i];\\n      if (span.marker == marker) { return span }\\n    } }\\n  }\\n  // Remove a span from an array, returning undefined if no spans are\\n  // left (we don't store arrays for lines without spans).\\n  function removeMarkedSpan(spans, span) {\\n    var r;\\n    for (var i = 0; i < spans.length; ++i)\\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\\n    return r\\n  }\\n  // Add a span to a line.\\n  function addMarkedSpan(line, span) {\\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\\n    span.marker.attachLine(line);\\n  }\\n\\n  // Used for the algorithm that adjusts markers for a change in the\\n  // document. These functions cut an array of spans at a given\\n  // character position, returning an array of remaining chunks (or\\n  // undefined if nothing remains).\\n  function markedSpansBefore(old, startCh, isInsert) {\\n    var nw;\\n    if (old) { for (var i = 0; i < old.length; ++i) {\\n      var span = old[i], marker = span.marker;\\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\\n      if (startsBefore || span.from == startCh && marker.type == \\\"bookmark\\\" && (!isInsert || !span.marker.insertLeft)) {\\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\\n      }\\n    } }\\n    return nw\\n  }\\n  function markedSpansAfter(old, endCh, isInsert) {\\n    var nw;\\n    if (old) { for (var i = 0; i < old.length; ++i) {\\n      var span = old[i], marker = span.marker;\\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\\n      if (endsAfter || span.from == endCh && marker.type == \\\"bookmark\\\" && (!isInsert || span.marker.insertLeft)) {\\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\\n                                              span.to == null ? null : span.to - endCh));\\n      }\\n    } }\\n    return nw\\n  }\\n\\n  // Given a change object, compute the new set of marker spans that\\n  // cover the line in which the change took place. Removes spans\\n  // entirely within the change, reconnects spans belonging to the\\n  // same marker that appear on both sides of the change, and cuts off\\n  // spans partially within the change. Returns an array of span\\n  // arrays with one element for each line in (after) the change.\\n  function stretchSpansOverChange(doc, change) {\\n    if (change.full) { return null }\\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\\n    if (!oldFirst && !oldLast) { return null }\\n\\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\\n    // Get the spans that 'stick out' on both sides\\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\\n\\n    // Next, merge those two ends\\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\\n    if (first) {\\n      // Fix up .to properties of first\\n      for (var i = 0; i < first.length; ++i) {\\n        var span = first[i];\\n        if (span.to == null) {\\n          var found = getMarkedSpanFor(last, span.marker);\\n          if (!found) { span.to = startCh; }\\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\\n        }\\n      }\\n    }\\n    if (last) {\\n      // Fix up .from in last (or move them into first in case of sameLine)\\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\\n        var span$1 = last[i$1];\\n        if (span$1.to != null) { span$1.to += offset; }\\n        if (span$1.from == null) {\\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\\n          if (!found$1) {\\n            span$1.from = offset;\\n            if (sameLine) { (first || (first = [])).push(span$1); }\\n          }\\n        } else {\\n          span$1.from += offset;\\n          if (sameLine) { (first || (first = [])).push(span$1); }\\n        }\\n      }\\n    }\\n    // Make sure we didn't create any zero-length spans\\n    if (first) { first = clearEmptySpans(first); }\\n    if (last && last != first) { last = clearEmptySpans(last); }\\n\\n    var newMarkers = [first];\\n    if (!sameLine) {\\n      // Fill gap with whole-line-spans\\n      var gap = change.text.length - 2, gapMarkers;\\n      if (gap > 0 && first)\\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\\n          { if (first[i$2].to == null)\\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\\n      for (var i$3 = 0; i$3 < gap; ++i$3)\\n        { newMarkers.push(gapMarkers); }\\n      newMarkers.push(last);\\n    }\\n    return newMarkers\\n  }\\n\\n  // Remove spans that are empty and don't have a clearWhenEmpty\\n  // option of false.\\n  function clearEmptySpans(spans) {\\n    for (var i = 0; i < spans.length; ++i) {\\n      var span = spans[i];\\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\\n        { spans.splice(i--, 1); }\\n    }\\n    if (!spans.length) { return null }\\n    return spans\\n  }\\n\\n  // Used to 'clip' out readOnly ranges when making a change.\\n  function removeReadOnlyRanges(doc, from, to) {\\n    var markers = null;\\n    doc.iter(from.line, to.line + 1, function (line) {\\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\\n        var mark = line.markedSpans[i].marker;\\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\\n          { (markers || (markers = [])).push(mark); }\\n      } }\\n    });\\n    if (!markers) { return null }\\n    var parts = [{from: from, to: to}];\\n    for (var i = 0; i < markers.length; ++i) {\\n      var mk = markers[i], m = mk.find(0);\\n      for (var j = 0; j < parts.length; ++j) {\\n        var p = parts[j];\\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\\n          { newParts.push({from: p.from, to: m.from}); }\\n        if (dto > 0 || !mk.inclusiveRight && !dto)\\n          { newParts.push({from: m.to, to: p.to}); }\\n        parts.splice.apply(parts, newParts);\\n        j += newParts.length - 3;\\n      }\\n    }\\n    return parts\\n  }\\n\\n  // Connect or disconnect spans from a line.\\n  function detachMarkedSpans(line) {\\n    var spans = line.markedSpans;\\n    if (!spans) { return }\\n    for (var i = 0; i < spans.length; ++i)\\n      { spans[i].marker.detachLine(line); }\\n    line.markedSpans = null;\\n  }\\n  function attachMarkedSpans(line, spans) {\\n    if (!spans) { return }\\n    for (var i = 0; i < spans.length; ++i)\\n      { spans[i].marker.attachLine(line); }\\n    line.markedSpans = spans;\\n  }\\n\\n  // Helpers used when computing which overlapping collapsed span\\n  // counts as the larger one.\\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\\n\\n  // Returns a number indicating which of two overlapping collapsed\\n  // spans is larger (and thus includes the other). Falls back to\\n  // comparing ids when the spans cover exactly the same range.\\n  function compareCollapsedMarkers(a, b) {\\n    var lenDiff = a.lines.length - b.lines.length;\\n    if (lenDiff != 0) { return lenDiff }\\n    var aPos = a.find(), bPos = b.find();\\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\\n    if (fromCmp) { return -fromCmp }\\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\\n    if (toCmp) { return toCmp }\\n    return b.id - a.id\\n  }\\n\\n  // Find out whether a line ends or starts in a collapsed span. If\\n  // so, return the marker for that span.\\n  function collapsedSpanAtSide(line, start) {\\n    var sps = sawCollapsedSpans && line.markedSpans, found;\\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\\n      sp = sps[i];\\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\\n        { found = sp.marker; }\\n    } }\\n    return found\\n  }\\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\\n\\n  function collapsedSpanAround(line, ch) {\\n    var sps = sawCollapsedSpans && line.markedSpans, found;\\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\\n      var sp = sps[i];\\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\\n    } }\\n    return found\\n  }\\n\\n  // Test whether there exists a collapsed span that partially\\n  // overlaps (covers the start or end, but not both) of a new span.\\n  // Such overlap is not allowed.\\n  function conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\\n    var line = getLine(doc, lineNo$$1);\\n    var sps = sawCollapsedSpans && line.markedSpans;\\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\\n      var sp = sps[i];\\n      if (!sp.marker.collapsed) { continue }\\n      var found = sp.marker.find(0);\\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\\n        { return true }\\n    } }\\n  }\\n\\n  // A visual line is a line as drawn on the screen. Folding, for\\n  // example, can cause multiple logical lines to appear on the same\\n  // visual line. This finds the start of the visual line that the\\n  // given line is part of (usually that is the line itself).\\n  function visualLine(line) {\\n    var merged;\\n    while (merged = collapsedSpanAtStart(line))\\n      { line = merged.find(-1, true).line; }\\n    return line\\n  }\\n\\n  function visualLineEnd(line) {\\n    var merged;\\n    while (merged = collapsedSpanAtEnd(line))\\n      { line = merged.find(1, true).line; }\\n    return line\\n  }\\n\\n  // Returns an array of logical lines that continue the visual line\\n  // started by the argument, or undefined if there are no such lines.\\n  function visualLineContinued(line) {\\n    var merged, lines;\\n    while (merged = collapsedSpanAtEnd(line)) {\\n      line = merged.find(1, true).line\\n      ;(lines || (lines = [])).push(line);\\n    }\\n    return lines\\n  }\\n\\n  // Get the line number of the start of the visual line that the\\n  // given line number is part of.\\n  function visualLineNo(doc, lineN) {\\n    var line = getLine(doc, lineN), vis = visualLine(line);\\n    if (line == vis) { return lineN }\\n    return lineNo(vis)\\n  }\\n\\n  // Get the line number of the start of the next visual line after\\n  // the given line.\\n  function visualLineEndNo(doc, lineN) {\\n    if (lineN > doc.lastLine()) { return lineN }\\n    var line = getLine(doc, lineN), merged;\\n    if (!lineIsHidden(doc, line)) { return lineN }\\n    while (merged = collapsedSpanAtEnd(line))\\n      { line = merged.find(1, true).line; }\\n    return lineNo(line) + 1\\n  }\\n\\n  // Compute whether a line is hidden. Lines count as hidden when they\\n  // are part of a visual line that starts with another line, or when\\n  // they are entirely covered by collapsed, non-widget span.\\n  function lineIsHidden(doc, line) {\\n    var sps = sawCollapsedSpans && line.markedSpans;\\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\\n      sp = sps[i];\\n      if (!sp.marker.collapsed) { continue }\\n      if (sp.from == null) { return true }\\n      if (sp.marker.widgetNode) { continue }\\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\\n        { return true }\\n    } }\\n  }\\n  function lineIsHiddenInner(doc, line, span) {\\n    if (span.to == null) {\\n      var end = span.marker.find(1, true);\\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\\n    }\\n    if (span.marker.inclusiveRight && span.to == line.text.length)\\n      { return true }\\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\\n      sp = line.markedSpans[i];\\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\\n          (sp.to == null || sp.to != span.from) &&\\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\\n          lineIsHiddenInner(doc, line, sp)) { return true }\\n    }\\n  }\\n\\n  // Find the height above the given line.\\n  function heightAtLine(lineObj) {\\n    lineObj = visualLine(lineObj);\\n\\n    var h = 0, chunk = lineObj.parent;\\n    for (var i = 0; i < chunk.lines.length; ++i) {\\n      var line = chunk.lines[i];\\n      if (line == lineObj) { break }\\n      else { h += line.height; }\\n    }\\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\\n        var cur = p.children[i$1];\\n        if (cur == chunk) { break }\\n        else { h += cur.height; }\\n      }\\n    }\\n    return h\\n  }\\n\\n  // Compute the character length of a line, taking into account\\n  // collapsed ranges (see markText) that might hide parts, and join\\n  // other lines onto it.\\n  function lineLength(line) {\\n    if (line.height == 0) { return 0 }\\n    var len = line.text.length, merged, cur = line;\\n    while (merged = collapsedSpanAtStart(cur)) {\\n      var found = merged.find(0, true);\\n      cur = found.from.line;\\n      len += found.from.ch - found.to.ch;\\n    }\\n    cur = line;\\n    while (merged = collapsedSpanAtEnd(cur)) {\\n      var found$1 = merged.find(0, true);\\n      len -= cur.text.length - found$1.from.ch;\\n      cur = found$1.to.line;\\n      len += cur.text.length - found$1.to.ch;\\n    }\\n    return len\\n  }\\n\\n  // Find the longest line in the document.\\n  function findMaxLine(cm) {\\n    var d = cm.display, doc = cm.doc;\\n    d.maxLine = getLine(doc, doc.first);\\n    d.maxLineLength = lineLength(d.maxLine);\\n    d.maxLineChanged = true;\\n    doc.iter(function (line) {\\n      var len = lineLength(line);\\n      if (len > d.maxLineLength) {\\n        d.maxLineLength = len;\\n        d.maxLine = line;\\n      }\\n    });\\n  }\\n\\n  // LINE DATA STRUCTURE\\n\\n  // Line objects. These hold state related to a line, including\\n  // highlighting info (the styles array).\\n  var Line = function(text, markedSpans, estimateHeight) {\\n    this.text = text;\\n    attachMarkedSpans(this, markedSpans);\\n    this.height = estimateHeight ? estimateHeight(this) : 1;\\n  };\\n\\n  Line.prototype.lineNo = function () { return lineNo(this) };\\n  eventMixin(Line);\\n\\n  // Change the content (text, markers) of a line. Automatically\\n  // invalidates cached information and tries to re-estimate the\\n  // line's height.\\n  function updateLine(line, text, markedSpans, estimateHeight) {\\n    line.text = text;\\n    if (line.stateAfter) { line.stateAfter = null; }\\n    if (line.styles) { line.styles = null; }\\n    if (line.order != null) { line.order = null; }\\n    detachMarkedSpans(line);\\n    attachMarkedSpans(line, markedSpans);\\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\\n  }\\n\\n  // Detach a line from the document tree and its markers.\\n  function cleanUpLine(line) {\\n    line.parent = null;\\n    detachMarkedSpans(line);\\n  }\\n\\n  // Convert a style as returned by a mode (either null, or a string\\n  // containing one or more styles) to a CSS style. This is cached,\\n  // and also looks for line-wide styles.\\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\\n  function interpretTokenStyle(style, options) {\\n    if (!style || /^\\\\s*$/.test(style)) { return null }\\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\\n    return cache[style] ||\\n      (cache[style] = style.replace(/\\\\S+/g, \\\"cm-$&\\\"))\\n  }\\n\\n  // Render the DOM representation of the text of a line. Also builds\\n  // up a 'line map', which points at the DOM nodes that represent\\n  // specific stretches of text, and is used by the measuring code.\\n  // The returned object contains the DOM node, this map, and\\n  // information about line-wide styles that were set by the mode.\\n  function buildLineContent(cm, lineView) {\\n    // The padding-right forces the element to have a 'border', which\\n    // is needed on Webkit to be able to get line-level bounding\\n    // rectangles for it (in measureChar).\\n    var content = eltP(\\\"span\\\", null, null, webkit ? \\\"padding-right: .1px\\\" : null);\\n    var builder = {pre: eltP(\\\"pre\\\", [content], \\\"CodeMirror-line\\\"), content: content,\\n                   col: 0, pos: 0, cm: cm,\\n                   trailingSpace: false,\\n                   splitSpaces: cm.getOption(\\\"lineWrapping\\\")};\\n    lineView.measure = {};\\n\\n    // Iterate over the logical lines that make up this visual line.\\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\\n      builder.pos = 0;\\n      builder.addToken = buildToken;\\n      // Optionally wire in some hacks into the token-rendering\\n      // algorithm, to deal with browser quirks.\\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\\n      builder.map = [];\\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\\n      if (line.styleClasses) {\\n        if (line.styleClasses.bgClass)\\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \\\"\\\"); }\\n        if (line.styleClasses.textClass)\\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \\\"\\\"); }\\n      }\\n\\n      // Ensure at least a single node is present, for measuring.\\n      if (builder.map.length == 0)\\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\\n\\n      // Store the map and a cache object for the current logical line\\n      if (i == 0) {\\n        lineView.measure.map = builder.map;\\n        lineView.measure.cache = {};\\n      } else {\\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\\n      }\\n    }\\n\\n    // See issue #2901\\n    if (webkit) {\\n      var last = builder.content.lastChild;\\n      if (/\\\\bcm-tab\\\\b/.test(last.className) || (last.querySelector && last.querySelector(\\\".cm-tab\\\")))\\n        { builder.content.className = \\\"cm-tab-wrap-hack\\\"; }\\n    }\\n\\n    signal(cm, \\\"renderLine\\\", cm, lineView.line, builder.pre);\\n    if (builder.pre.className)\\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \\\"\\\"); }\\n\\n    return builder\\n  }\\n\\n  function defaultSpecialCharPlaceholder(ch) {\\n    var token = elt(\\\"span\\\", \\\"\\\\u2022\\\", \\\"cm-invalidchar\\\");\\n    token.title = \\\"\\\\\\\\u\\\" + ch.charCodeAt(0).toString(16);\\n    token.setAttribute(\\\"aria-label\\\", token.title);\\n    return token\\n  }\\n\\n  // Build up the DOM representation for a single token, and add it to\\n  // the line map. Takes care to render special characters separately.\\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\\n    if (!text) { return }\\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\\n    var special = builder.cm.state.specialChars, mustWrap = false;\\n    var content;\\n    if (!special.test(text)) {\\n      builder.col += text.length;\\n      content = document.createTextNode(displayText);\\n      builder.map.push(builder.pos, builder.pos + text.length, content);\\n      if (ie && ie_version < 9) { mustWrap = true; }\\n      builder.pos += text.length;\\n    } else {\\n      content = document.createDocumentFragment();\\n      var pos = 0;\\n      while (true) {\\n        special.lastIndex = pos;\\n        var m = special.exec(text);\\n        var skipped = m ? m.index - pos : text.length - pos;\\n        if (skipped) {\\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\\n          if (ie && ie_version < 9) { content.appendChild(elt(\\\"span\\\", [txt])); }\\n          else { content.appendChild(txt); }\\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\\n          builder.col += skipped;\\n          builder.pos += skipped;\\n        }\\n        if (!m) { break }\\n        pos += skipped + 1;\\n        var txt$1 = (void 0);\\n        if (m[0] == \\\"\\\\t\\\") {\\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\\n          txt$1 = content.appendChild(elt(\\\"span\\\", spaceStr(tabWidth), \\\"cm-tab\\\"));\\n          txt$1.setAttribute(\\\"role\\\", \\\"presentation\\\");\\n          txt$1.setAttribute(\\\"cm-text\\\", \\\"\\\\t\\\");\\n          builder.col += tabWidth;\\n        } else if (m[0] == \\\"\\\\r\\\" || m[0] == \\\"\\\\n\\\") {\\n          txt$1 = content.appendChild(elt(\\\"span\\\", m[0] == \\\"\\\\r\\\" ? \\\"\\\\u240d\\\" : \\\"\\\\u2424\\\", \\\"cm-invalidchar\\\"));\\n          txt$1.setAttribute(\\\"cm-text\\\", m[0]);\\n          builder.col += 1;\\n        } else {\\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\\n          txt$1.setAttribute(\\\"cm-text\\\", m[0]);\\n          if (ie && ie_version < 9) { content.appendChild(elt(\\\"span\\\", [txt$1])); }\\n          else { content.appendChild(txt$1); }\\n          builder.col += 1;\\n        }\\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\\n        builder.pos++;\\n      }\\n    }\\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\\n    if (style || startStyle || endStyle || mustWrap || css) {\\n      var fullStyle = style || \\\"\\\";\\n      if (startStyle) { fullStyle += startStyle; }\\n      if (endStyle) { fullStyle += endStyle; }\\n      var token = elt(\\\"span\\\", [content], fullStyle, css);\\n      if (attributes) {\\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \\\"style\\\" && attr != \\\"class\\\")\\n          { token.setAttribute(attr, attributes[attr]); } }\\n      }\\n      return builder.content.appendChild(token)\\n    }\\n    builder.content.appendChild(content);\\n  }\\n\\n  // Change some spaces to NBSP to prevent the browser from collapsing\\n  // trailing spaces at the end of a line when rendering text (issue #1362).\\n  function splitSpaces(text, trailingBefore) {\\n    if (text.length > 1 && !/  /.test(text)) { return text }\\n    var spaceBefore = trailingBefore, result = \\\"\\\";\\n    for (var i = 0; i < text.length; i++) {\\n      var ch = text.charAt(i);\\n      if (ch == \\\" \\\" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\\n        { ch = \\\"\\\\u00a0\\\"; }\\n      result += ch;\\n      spaceBefore = ch == \\\" \\\";\\n    }\\n    return result\\n  }\\n\\n  // Work around nonsense dimensions being reported for stretches of\\n  // right-to-left text.\\n  function buildTokenBadBidi(inner, order) {\\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\\n      style = style ? style + \\\" cm-force-border\\\" : \\\"cm-force-border\\\";\\n      var start = builder.pos, end = start + text.length;\\n      for (;;) {\\n        // Find the part that overlaps with the start of this text\\n        var part = (void 0);\\n        for (var i = 0; i < order.length; i++) {\\n          part = order[i];\\n          if (part.to > start && part.from <= start) { break }\\n        }\\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\\n        startStyle = null;\\n        text = text.slice(part.to - start);\\n        start = part.to;\\n      }\\n    }\\n  }\\n\\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\\n    var widget = !ignoreWidget && marker.widgetNode;\\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\\n      if (!widget)\\n        { widget = builder.content.appendChild(document.createElement(\\\"span\\\")); }\\n      widget.setAttribute(\\\"cm-marker\\\", marker.id);\\n    }\\n    if (widget) {\\n      builder.cm.display.input.setUneditable(widget);\\n      builder.content.appendChild(widget);\\n    }\\n    builder.pos += size;\\n    builder.trailingSpace = false;\\n  }\\n\\n  // Outputs a number of spans to make up a line, taking highlighting\\n  // and marked text into account.\\n  function insertLineContent(line, builder, styles) {\\n    var spans = line.markedSpans, allText = line.text, at = 0;\\n    if (!spans) {\\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\\n      return\\n    }\\n\\n    var len = allText.length, pos = 0, i = 1, text = \\\"\\\", style, css;\\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\\n    for (;;) {\\n      if (nextChange == pos) { // Update current marker set\\n        spanStyle = spanEndStyle = spanStartStyle = css = \\\"\\\";\\n        attributes = null;\\n        collapsed = null; nextChange = Infinity;\\n        var foundBookmarks = [], endStyles = (void 0);\\n        for (var j = 0; j < spans.length; ++j) {\\n          var sp = spans[j], m = sp.marker;\\n          if (m.type == \\\"bookmark\\\" && sp.from == pos && m.widgetNode) {\\n            foundBookmarks.push(m);\\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\\n              nextChange = sp.to;\\n              spanEndStyle = \\\"\\\";\\n            }\\n            if (m.className) { spanStyle += \\\" \\\" + m.className; }\\n            if (m.css) { css = (css ? css + \\\";\\\" : \\\"\\\") + m.css; }\\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \\\" \\\" + m.startStyle; }\\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\\n            // support for the old title property\\n            // https://github.com/codemirror/CodeMirror/pull/5673\\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\\n            if (m.attributes) {\\n              for (var attr in m.attributes)\\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\\n            }\\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\\n              { collapsed = sp; }\\n          } else if (sp.from > pos && nextChange > sp.from) {\\n            nextChange = sp.from;\\n          }\\n        }\\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \\\" \\\" + endStyles[j$1]; } } }\\n\\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\\n        if (collapsed && (collapsed.from || 0) == pos) {\\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\\n                             collapsed.marker, collapsed.from == null);\\n          if (collapsed.to == null) { return }\\n          if (collapsed.to == pos) { collapsed = false; }\\n        }\\n      }\\n      if (pos >= len) { break }\\n\\n      var upto = Math.min(len, nextChange);\\n      while (true) {\\n        if (text) {\\n          var end = pos + text.length;\\n          if (!collapsed) {\\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \\\"\\\", css, attributes);\\n          }\\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\\n          pos = end;\\n          spanStartStyle = \\\"\\\";\\n        }\\n        text = allText.slice(at, at = styles[i++]);\\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\\n      }\\n    }\\n  }\\n\\n\\n  // These objects are used to represent the visible (currently drawn)\\n  // part of the document. A LineView may correspond to multiple\\n  // logical lines, if those are connected by collapsed ranges.\\n  function LineView(doc, line, lineN) {\\n    // The starting line\\n    this.line = line;\\n    // Continuing lines, if any\\n    this.rest = visualLineContinued(line);\\n    // Number of logical lines in this visual line\\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\\n    this.node = this.text = null;\\n    this.hidden = lineIsHidden(doc, line);\\n  }\\n\\n  // Create a range of LineView objects for the given lines.\\n  function buildViewArray(cm, from, to) {\\n    var array = [], nextPos;\\n    for (var pos = from; pos < to; pos = nextPos) {\\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\\n      nextPos = pos + view.size;\\n      array.push(view);\\n    }\\n    return array\\n  }\\n\\n  var operationGroup = null;\\n\\n  function pushOperation(op) {\\n    if (operationGroup) {\\n      operationGroup.ops.push(op);\\n    } else {\\n      op.ownsGroup = operationGroup = {\\n        ops: [op],\\n        delayedCallbacks: []\\n      };\\n    }\\n  }\\n\\n  function fireCallbacksForOps(group) {\\n    // Calls delayed callbacks and cursorActivity handlers until no\\n    // new ones appear\\n    var callbacks = group.delayedCallbacks, i = 0;\\n    do {\\n      for (; i < callbacks.length; i++)\\n        { callbacks[i].call(null); }\\n      for (var j = 0; j < group.ops.length; j++) {\\n        var op = group.ops[j];\\n        if (op.cursorActivityHandlers)\\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\\n      }\\n    } while (i < callbacks.length)\\n  }\\n\\n  function finishOperation(op, endCb) {\\n    var group = op.ownsGroup;\\n    if (!group) { return }\\n\\n    try { fireCallbacksForOps(group); }\\n    finally {\\n      operationGroup = null;\\n      endCb(group);\\n    }\\n  }\\n\\n  var orphanDelayedCallbacks = null;\\n\\n  // Often, we want to signal events at a point where we are in the\\n  // middle of some work, but don't want the handler to start calling\\n  // other methods on the editor, which might be in an inconsistent\\n  // state or simply not expect any other events to happen.\\n  // signalLater looks whether there are any handlers, and schedules\\n  // them to be executed when the last operation ends, or, if no\\n  // operation is active, when a timeout fires.\\n  function signalLater(emitter, type /*, values...*/) {\\n    var arr = getHandlers(emitter, type);\\n    if (!arr.length) { return }\\n    var args = Array.prototype.slice.call(arguments, 2), list;\\n    if (operationGroup) {\\n      list = operationGroup.delayedCallbacks;\\n    } else if (orphanDelayedCallbacks) {\\n      list = orphanDelayedCallbacks;\\n    } else {\\n      list = orphanDelayedCallbacks = [];\\n      setTimeout(fireOrphanDelayed, 0);\\n    }\\n    var loop = function ( i ) {\\n      list.push(function () { return arr[i].apply(null, args); });\\n    };\\n\\n    for (var i = 0; i < arr.length; ++i)\\n      loop( i );\\n  }\\n\\n  function fireOrphanDelayed() {\\n    var delayed = orphanDelayedCallbacks;\\n    orphanDelayedCallbacks = null;\\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\\n  }\\n\\n  // When an aspect of a line changes, a string is added to\\n  // lineView.changes. This updates the relevant part of the line's\\n  // DOM structure.\\n  function updateLineForChanges(cm, lineView, lineN, dims) {\\n    for (var j = 0; j < lineView.changes.length; j++) {\\n      var type = lineView.changes[j];\\n      if (type == \\\"text\\\") { updateLineText(cm, lineView); }\\n      else if (type == \\\"gutter\\\") { updateLineGutter(cm, lineView, lineN, dims); }\\n      else if (type == \\\"class\\\") { updateLineClasses(cm, lineView); }\\n      else if (type == \\\"widget\\\") { updateLineWidgets(cm, lineView, dims); }\\n    }\\n    lineView.changes = null;\\n  }\\n\\n  // Lines with gutter elements, widgets or a background class need to\\n  // be wrapped, and have the extra elements added to the wrapper div\\n  function ensureLineWrapped(lineView) {\\n    if (lineView.node == lineView.text) {\\n      lineView.node = elt(\\\"div\\\", null, null, \\\"position: relative\\\");\\n      if (lineView.text.parentNode)\\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\\n      lineView.node.appendChild(lineView.text);\\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\\n    }\\n    return lineView.node\\n  }\\n\\n  function updateLineBackground(cm, lineView) {\\n    var cls = lineView.bgClass ? lineView.bgClass + \\\" \\\" + (lineView.line.bgClass || \\\"\\\") : lineView.line.bgClass;\\n    if (cls) { cls += \\\" CodeMirror-linebackground\\\"; }\\n    if (lineView.background) {\\n      if (cls) { lineView.background.className = cls; }\\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\\n    } else if (cls) {\\n      var wrap = ensureLineWrapped(lineView);\\n      lineView.background = wrap.insertBefore(elt(\\\"div\\\", null, cls), wrap.firstChild);\\n      cm.display.input.setUneditable(lineView.background);\\n    }\\n  }\\n\\n  // Wrapper around buildLineContent which will reuse the structure\\n  // in display.externalMeasured when possible.\\n  function getLineContent(cm, lineView) {\\n    var ext = cm.display.externalMeasured;\\n    if (ext && ext.line == lineView.line) {\\n      cm.display.externalMeasured = null;\\n      lineView.measure = ext.measure;\\n      return ext.built\\n    }\\n    return buildLineContent(cm, lineView)\\n  }\\n\\n  // Redraw the line's text. Interacts with the background and text\\n  // classes because the mode may output tokens that influence these\\n  // classes.\\n  function updateLineText(cm, lineView) {\\n    var cls = lineView.text.className;\\n    var built = getLineContent(cm, lineView);\\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\\n    lineView.text = built.pre;\\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\\n      lineView.bgClass = built.bgClass;\\n      lineView.textClass = built.textClass;\\n      updateLineClasses(cm, lineView);\\n    } else if (cls) {\\n      lineView.text.className = cls;\\n    }\\n  }\\n\\n  function updateLineClasses(cm, lineView) {\\n    updateLineBackground(cm, lineView);\\n    if (lineView.line.wrapClass)\\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\\n    else if (lineView.node != lineView.text)\\n      { lineView.node.className = \\\"\\\"; }\\n    var textClass = lineView.textClass ? lineView.textClass + \\\" \\\" + (lineView.line.textClass || \\\"\\\") : lineView.line.textClass;\\n    lineView.text.className = textClass || \\\"\\\";\\n  }\\n\\n  function updateLineGutter(cm, lineView, lineN, dims) {\\n    if (lineView.gutter) {\\n      lineView.node.removeChild(lineView.gutter);\\n      lineView.gutter = null;\\n    }\\n    if (lineView.gutterBackground) {\\n      lineView.node.removeChild(lineView.gutterBackground);\\n      lineView.gutterBackground = null;\\n    }\\n    if (lineView.line.gutterClass) {\\n      var wrap = ensureLineWrapped(lineView);\\n      lineView.gutterBackground = elt(\\\"div\\\", null, \\\"CodeMirror-gutter-background \\\" + lineView.line.gutterClass,\\n                                      (\\\"left: \\\" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \\\"px; width: \\\" + (dims.gutterTotalWidth) + \\\"px\\\"));\\n      cm.display.input.setUneditable(lineView.gutterBackground);\\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\\n    }\\n    var markers = lineView.line.gutterMarkers;\\n    if (cm.options.lineNumbers || markers) {\\n      var wrap$1 = ensureLineWrapped(lineView);\\n      var gutterWrap = lineView.gutter = elt(\\\"div\\\", null, \\\"CodeMirror-gutter-wrapper\\\", (\\\"left: \\\" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \\\"px\\\"));\\n      cm.display.input.setUneditable(gutterWrap);\\n      wrap$1.insertBefore(gutterWrap, lineView.text);\\n      if (lineView.line.gutterClass)\\n        { gutterWrap.className += \\\" \\\" + lineView.line.gutterClass; }\\n      if (cm.options.lineNumbers && (!markers || !markers[\\\"CodeMirror-linenumbers\\\"]))\\n        { lineView.lineNumber = gutterWrap.appendChild(\\n          elt(\\\"div\\\", lineNumberFor(cm.options, lineN),\\n              \\\"CodeMirror-linenumber CodeMirror-gutter-elt\\\",\\n              (\\\"left: \\\" + (dims.gutterLeft[\\\"CodeMirror-linenumbers\\\"]) + \\\"px; width: \\\" + (cm.display.lineNumInnerWidth) + \\\"px\\\"))); }\\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\\n        if (found)\\n          { gutterWrap.appendChild(elt(\\\"div\\\", [found], \\\"CodeMirror-gutter-elt\\\",\\n                                     (\\\"left: \\\" + (dims.gutterLeft[id]) + \\\"px; width: \\\" + (dims.gutterWidth[id]) + \\\"px\\\"))); }\\n      } }\\n    }\\n  }\\n\\n  function updateLineWidgets(cm, lineView, dims) {\\n    if (lineView.alignable) { lineView.alignable = null; }\\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\\n      next = node.nextSibling;\\n      if (node.className == \\\"CodeMirror-linewidget\\\")\\n        { lineView.node.removeChild(node); }\\n    }\\n    insertLineWidgets(cm, lineView, dims);\\n  }\\n\\n  // Build a line's DOM representation from scratch\\n  function buildLineElement(cm, lineView, lineN, dims) {\\n    var built = getLineContent(cm, lineView);\\n    lineView.text = lineView.node = built.pre;\\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\\n    if (built.textClass) { lineView.textClass = built.textClass; }\\n\\n    updateLineClasses(cm, lineView);\\n    updateLineGutter(cm, lineView, lineN, dims);\\n    insertLineWidgets(cm, lineView, dims);\\n    return lineView.node\\n  }\\n\\n  // A lineView may contain multiple logical lines (when merged by\\n  // collapsed spans). The widgets for all of them need to be drawn.\\n  function insertLineWidgets(cm, lineView, dims) {\\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\\n  }\\n\\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\\n    if (!line.widgets) { return }\\n    var wrap = ensureLineWrapped(lineView);\\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\\n      var widget = ws[i], node = elt(\\\"div\\\", [widget.node], \\\"CodeMirror-linewidget\\\");\\n      if (!widget.handleMouseEvents) { node.setAttribute(\\\"cm-ignore-events\\\", \\\"true\\\"); }\\n      positionLineWidget(widget, node, lineView, dims);\\n      cm.display.input.setUneditable(node);\\n      if (allowAbove && widget.above)\\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\\n      else\\n        { wrap.appendChild(node); }\\n      signalLater(widget, \\\"redraw\\\");\\n    }\\n  }\\n\\n  function positionLineWidget(widget, node, lineView, dims) {\\n    if (widget.noHScroll) {\\n  (lineView.alignable || (lineView.alignable = [])).push(node);\\n      var width = dims.wrapperWidth;\\n      node.style.left = dims.fixedPos + \\\"px\\\";\\n      if (!widget.coverGutter) {\\n        width -= dims.gutterTotalWidth;\\n        node.style.paddingLeft = dims.gutterTotalWidth + \\\"px\\\";\\n      }\\n      node.style.width = width + \\\"px\\\";\\n    }\\n    if (widget.coverGutter) {\\n      node.style.zIndex = 5;\\n      node.style.position = \\\"relative\\\";\\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \\\"px\\\"; }\\n    }\\n  }\\n\\n  function widgetHeight(widget) {\\n    if (widget.height != null) { return widget.height }\\n    var cm = widget.doc.cm;\\n    if (!cm) { return 0 }\\n    if (!contains(document.body, widget.node)) {\\n      var parentStyle = \\\"position: relative;\\\";\\n      if (widget.coverGutter)\\n        { parentStyle += \\\"margin-left: -\\\" + cm.display.gutters.offsetWidth + \\\"px;\\\"; }\\n      if (widget.noHScroll)\\n        { parentStyle += \\\"width: \\\" + cm.display.wrapper.clientWidth + \\\"px;\\\"; }\\n      removeChildrenAndAdd(cm.display.measure, elt(\\\"div\\\", [widget.node], null, parentStyle));\\n    }\\n    return widget.height = widget.node.parentNode.offsetHeight\\n  }\\n\\n  // Return true when the given mouse event happened in a widget\\n  function eventInWidget(display, e) {\\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\\n      if (!n || (n.nodeType == 1 && n.getAttribute(\\\"cm-ignore-events\\\") == \\\"true\\\") ||\\n          (n.parentNode == display.sizer && n != display.mover))\\n        { return true }\\n    }\\n  }\\n\\n  // POSITION MEASUREMENT\\n\\n  function paddingTop(display) {return display.lineSpace.offsetTop}\\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\\n  function paddingH(display) {\\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\\n    var e = removeChildrenAndAdd(display.measure, elt(\\\"pre\\\", \\\"x\\\", \\\"CodeMirror-line-like\\\"));\\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\\n    return data\\n  }\\n\\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\\n  function displayWidth(cm) {\\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\\n  }\\n  function displayHeight(cm) {\\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\\n  }\\n\\n  // Ensure the lineView.wrapping.heights array is populated. This is\\n  // an array of bottom offsets for the lines that make up a drawn\\n  // line. When lineWrapping is on, there might be more than one\\n  // height.\\n  function ensureLineHeights(cm, lineView, rect) {\\n    var wrapping = cm.options.lineWrapping;\\n    var curWidth = wrapping && displayWidth(cm);\\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\\n      var heights = lineView.measure.heights = [];\\n      if (wrapping) {\\n        lineView.measure.width = curWidth;\\n        var rects = lineView.text.firstChild.getClientRects();\\n        for (var i = 0; i < rects.length - 1; i++) {\\n          var cur = rects[i], next = rects[i + 1];\\n          if (Math.abs(cur.bottom - next.bottom) > 2)\\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\\n        }\\n      }\\n      heights.push(rect.bottom - rect.top);\\n    }\\n  }\\n\\n  // Find a line map (mapping character offsets to text nodes) and a\\n  // measurement cache for the given line number. (A line view might\\n  // contain multiple lines when collapsed ranges are present.)\\n  function mapFromLineView(lineView, line, lineN) {\\n    if (lineView.line == line)\\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\\n    for (var i = 0; i < lineView.rest.length; i++)\\n      { if (lineView.rest[i] == line)\\n        { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\\n      { if (lineNo(lineView.rest[i$1]) > lineN)\\n        { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\\n  }\\n\\n  // Render a line into the hidden node display.externalMeasured. Used\\n  // when measurement is needed for a line that's not in the viewport.\\n  function updateExternalMeasurement(cm, line) {\\n    line = visualLine(line);\\n    var lineN = lineNo(line);\\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\\n    view.lineN = lineN;\\n    var built = view.built = buildLineContent(cm, view);\\n    view.text = built.pre;\\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\\n    return view\\n  }\\n\\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\\n  // for a given character.\\n  function measureChar(cm, line, ch, bias) {\\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\\n  }\\n\\n  // Find a line view that corresponds to the given line number.\\n  function findViewForLine(cm, lineN) {\\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\\n      { return cm.display.view[findViewIndex(cm, lineN)] }\\n    var ext = cm.display.externalMeasured;\\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\\n      { return ext }\\n  }\\n\\n  // Measurement can be split in two steps, the set-up work that\\n  // applies to the whole line, and the measurement of the actual\\n  // character. Functions like coordsChar, that need to do a lot of\\n  // measurements in a row, can thus ensure that the set-up work is\\n  // only done once.\\n  function prepareMeasureForLine(cm, line) {\\n    var lineN = lineNo(line);\\n    var view = findViewForLine(cm, lineN);\\n    if (view && !view.text) {\\n      view = null;\\n    } else if (view && view.changes) {\\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\\n      cm.curOp.forceUpdate = true;\\n    }\\n    if (!view)\\n      { view = updateExternalMeasurement(cm, line); }\\n\\n    var info = mapFromLineView(view, line, lineN);\\n    return {\\n      line: line, view: view, rect: null,\\n      map: info.map, cache: info.cache, before: info.before,\\n      hasHeights: false\\n    }\\n  }\\n\\n  // Given a prepared measurement object, measures the position of an\\n  // actual character (or fetches it from the cache).\\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\\n    if (prepared.before) { ch = -1; }\\n    var key = ch + (bias || \\\"\\\"), found;\\n    if (prepared.cache.hasOwnProperty(key)) {\\n      found = prepared.cache[key];\\n    } else {\\n      if (!prepared.rect)\\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\\n      if (!prepared.hasHeights) {\\n        ensureLineHeights(cm, prepared.view, prepared.rect);\\n        prepared.hasHeights = true;\\n      }\\n      found = measureCharInner(cm, prepared, ch, bias);\\n      if (!found.bogus) { prepared.cache[key] = found; }\\n    }\\n    return {left: found.left, right: found.right,\\n            top: varHeight ? found.rtop : found.top,\\n            bottom: varHeight ? found.rbottom : found.bottom}\\n  }\\n\\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\\n\\n  function nodeAndOffsetInLineMap(map$$1, ch, bias) {\\n    var node, start, end, collapse, mStart, mEnd;\\n    // First, search the line map for the text node corresponding to,\\n    // or closest to, the target character.\\n    for (var i = 0; i < map$$1.length; i += 3) {\\n      mStart = map$$1[i];\\n      mEnd = map$$1[i + 1];\\n      if (ch < mStart) {\\n        start = 0; end = 1;\\n        collapse = \\\"left\\\";\\n      } else if (ch < mEnd) {\\n        start = ch - mStart;\\n        end = start + 1;\\n      } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\\n        end = mEnd - mStart;\\n        start = end - 1;\\n        if (ch >= mEnd) { collapse = \\\"right\\\"; }\\n      }\\n      if (start != null) {\\n        node = map$$1[i + 2];\\n        if (mStart == mEnd && bias == (node.insertLeft ? \\\"left\\\" : \\\"right\\\"))\\n          { collapse = bias; }\\n        if (bias == \\\"left\\\" && start == 0)\\n          { while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\\n            node = map$$1[(i -= 3) + 2];\\n            collapse = \\\"left\\\";\\n          } }\\n        if (bias == \\\"right\\\" && start == mEnd - mStart)\\n          { while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\\n            node = map$$1[(i += 3) + 2];\\n            collapse = \\\"right\\\";\\n          } }\\n        break\\n      }\\n    }\\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\\n  }\\n\\n  function getUsefulRect(rects, bias) {\\n    var rect = nullRect;\\n    if (bias == \\\"left\\\") { for (var i = 0; i < rects.length; i++) {\\n      if ((rect = rects[i]).left != rect.right) { break }\\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\\n      if ((rect = rects[i$1]).left != rect.right) { break }\\n    } }\\n    return rect\\n  }\\n\\n  function measureCharInner(cm, prepared, ch, bias) {\\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\\n\\n    var rect;\\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\\n          { rect = node.parentNode.getBoundingClientRect(); }\\n        else\\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\\n        if (rect.left || rect.right || start == 0) { break }\\n        end = start;\\n        start = start - 1;\\n        collapse = \\\"right\\\";\\n      }\\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\\n    } else { // If it is a widget, simply get the box for the whole widget.\\n      if (start > 0) { collapse = bias = \\\"right\\\"; }\\n      var rects;\\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\\n        { rect = rects[bias == \\\"right\\\" ? rects.length - 1 : 0]; }\\n      else\\n        { rect = node.getBoundingClientRect(); }\\n    }\\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\\n      var rSpan = node.parentNode.getClientRects()[0];\\n      if (rSpan)\\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\\n      else\\n        { rect = nullRect; }\\n    }\\n\\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\\n    var mid = (rtop + rbot) / 2;\\n    var heights = prepared.view.measure.heights;\\n    var i = 0;\\n    for (; i < heights.length - 1; i++)\\n      { if (mid < heights[i]) { break } }\\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\\n    var result = {left: (collapse == \\\"right\\\" ? rect.right : rect.left) - prepared.rect.left,\\n                  right: (collapse == \\\"left\\\" ? rect.left : rect.right) - prepared.rect.left,\\n                  top: top, bottom: bot};\\n    if (!rect.left && !rect.right) { result.bogus = true; }\\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\\n\\n    return result\\n  }\\n\\n  // Work around problem with bounding client rects on ranges being\\n  // returned incorrectly when zoomed on IE10 and below.\\n  function maybeUpdateRectForZooming(measure, rect) {\\n    if (!window.screen || screen.logicalXDPI == null ||\\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\\n      { return rect }\\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\\n  }\\n\\n  function clearLineMeasurementCacheFor(lineView) {\\n    if (lineView.measure) {\\n      lineView.measure.cache = {};\\n      lineView.measure.heights = null;\\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\\n        { lineView.measure.caches[i] = {}; } }\\n    }\\n  }\\n\\n  function clearLineMeasurementCache(cm) {\\n    cm.display.externalMeasure = null;\\n    removeChildren(cm.display.lineMeasure);\\n    for (var i = 0; i < cm.display.view.length; i++)\\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\\n  }\\n\\n  function clearCaches(cm) {\\n    clearLineMeasurementCache(cm);\\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\\n    cm.display.lineNumChars = null;\\n  }\\n\\n  function pageScrollX() {\\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\\n    // which causes page_Offset and bounding client rects to use\\n    // different reference viewports and invalidate our calculations.\\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\\n  }\\n  function pageScrollY() {\\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\\n  }\\n\\n  function widgetTopHeight(lineObj) {\\n    var height = 0;\\n    if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\\n      { height += widgetHeight(lineObj.widgets[i]); } } }\\n    return height\\n  }\\n\\n  // Converts a {top, bottom, left, right} box from line-local\\n  // coordinates into another coordinate system. Context may be one of\\n  // \\\"line\\\", \\\"div\\\" (display.lineDiv), \\\"local\\\"./null (editor), \\\"window\\\",\\n  // or \\\"page\\\".\\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\\n    if (!includeWidgets) {\\n      var height = widgetTopHeight(lineObj);\\n      rect.top += height; rect.bottom += height;\\n    }\\n    if (context == \\\"line\\\") { return rect }\\n    if (!context) { context = \\\"local\\\"; }\\n    var yOff = heightAtLine(lineObj);\\n    if (context == \\\"local\\\") { yOff += paddingTop(cm.display); }\\n    else { yOff -= cm.display.viewOffset; }\\n    if (context == \\\"page\\\" || context == \\\"window\\\") {\\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\\n      yOff += lOff.top + (context == \\\"window\\\" ? 0 : pageScrollY());\\n      var xOff = lOff.left + (context == \\\"window\\\" ? 0 : pageScrollX());\\n      rect.left += xOff; rect.right += xOff;\\n    }\\n    rect.top += yOff; rect.bottom += yOff;\\n    return rect\\n  }\\n\\n  // Coverts a box from \\\"div\\\" coords to another coordinate system.\\n  // Context may be \\\"window\\\", \\\"page\\\", \\\"div\\\", or \\\"local\\\"./null.\\n  function fromCoordSystem(cm, coords, context) {\\n    if (context == \\\"div\\\") { return coords }\\n    var left = coords.left, top = coords.top;\\n    // First move into \\\"page\\\" coordinate system\\n    if (context == \\\"page\\\") {\\n      left -= pageScrollX();\\n      top -= pageScrollY();\\n    } else if (context == \\\"local\\\" || !context) {\\n      var localBox = cm.display.sizer.getBoundingClientRect();\\n      left += localBox.left;\\n      top += localBox.top;\\n    }\\n\\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\\n  }\\n\\n  function charCoords(cm, pos, context, lineObj, bias) {\\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\\n  }\\n\\n  // Returns a box for a given cursor position, which may have an\\n  // 'other' property containing the position of the secondary cursor\\n  // on a bidi boundary.\\n  // A cursor Pos(line, char, \\\"before\\\") is on the same visual line as `char - 1`\\n  // and after `char - 1` in writing order of `char - 1`\\n  // A cursor Pos(line, char, \\\"after\\\") is on the same visual line as `char`\\n  // and before `char` in writing order of `char`\\n  // Examples (upper-case letters are RTL, lower-case are LTR):\\n  //     Pos(0, 1, ...)\\n  //     before   after\\n  // ab     a|b     a|b\\n  // aB     a|B     aB|\\n  // Ab     |Ab     A|b\\n  // AB     B|A     B|A\\n  // Every position after the last character on a line is considered to stick\\n  // to the last character on the line.\\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\\n    lineObj = lineObj || getLine(cm.doc, pos.line);\\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\\n    function get(ch, right) {\\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \\\"right\\\" : \\\"left\\\", varHeight);\\n      if (right) { m.left = m.right; } else { m.right = m.left; }\\n      return intoCoordSystem(cm, lineObj, m, context)\\n    }\\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\\n    if (ch >= lineObj.text.length) {\\n      ch = lineObj.text.length;\\n      sticky = \\\"before\\\";\\n    } else if (ch <= 0) {\\n      ch = 0;\\n      sticky = \\\"after\\\";\\n    }\\n    if (!order) { return get(sticky == \\\"before\\\" ? ch - 1 : ch, sticky == \\\"before\\\") }\\n\\n    function getBidi(ch, partPos, invert) {\\n      var part = order[partPos], right = part.level == 1;\\n      return get(invert ? ch - 1 : ch, right != invert)\\n    }\\n    var partPos = getBidiPartAt(order, ch, sticky);\\n    var other = bidiOther;\\n    var val = getBidi(ch, partPos, sticky == \\\"before\\\");\\n    if (other != null) { val.other = getBidi(ch, other, sticky != \\\"before\\\"); }\\n    return val\\n  }\\n\\n  // Used to cheaply estimate the coordinates for a position. Used for\\n  // intermediate scroll updates.\\n  function estimateCoords(cm, pos) {\\n    var left = 0;\\n    pos = clipPos(cm.doc, pos);\\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\\n    var lineObj = getLine(cm.doc, pos.line);\\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\\n  }\\n\\n  // Positions returned by coordsChar contain some extra information.\\n  // xRel is the relative x position of the input coordinates compared\\n  // to the found position (so xRel > 0 means the coordinates are to\\n  // the right of the character position, for example). When outside\\n  // is true, that means the coordinates lie outside the line's\\n  // vertical range.\\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\\n    var pos = Pos(line, ch, sticky);\\n    pos.xRel = xRel;\\n    if (outside) { pos.outside = outside; }\\n    return pos\\n  }\\n\\n  // Compute the character position closest to the given coordinates.\\n  // Input must be lineSpace-local (\\\"div\\\" coordinate system).\\n  function coordsChar(cm, x, y) {\\n    var doc = cm.doc;\\n    y += cm.display.viewOffset;\\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\\n    if (lineN > last)\\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\\n    if (x < 0) { x = 0; }\\n\\n    var lineObj = getLine(doc, lineN);\\n    for (;;) {\\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\\n      if (!collapsed) { return found }\\n      var rangeEnd = collapsed.find(1);\\n      if (rangeEnd.line == lineN) { return rangeEnd }\\n      lineObj = getLine(doc, lineN = rangeEnd.line);\\n    }\\n  }\\n\\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\\n    y -= widgetTopHeight(lineObj);\\n    var end = lineObj.text.length;\\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\\n    return {begin: begin, end: end}\\n  }\\n\\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \\\"line\\\").top;\\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\\n  }\\n\\n  // Returns true if the given side of a box is after the given\\n  // coordinates, in top-to-bottom, left-to-right order.\\n  function boxIsAfter(box, x, y, left) {\\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\\n  }\\n\\n  function coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\\n    // Move y into line-local coordinate space\\n    y -= heightAtLine(lineObj);\\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\\n    // When directly calling `measureCharPrepared`, we have to adjust\\n    // for the widgets at this line.\\n    var widgetHeight$$1 = widgetTopHeight(lineObj);\\n    var begin = 0, end = lineObj.text.length, ltr = true;\\n\\n    var order = getOrder(lineObj, cm.doc.direction);\\n    // If the line isn't plain left-to-right text, first figure out\\n    // which bidi section the coordinates fall into.\\n    if (order) {\\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\\n                   (cm, lineObj, lineNo$$1, preparedMeasure, order, x, y);\\n      ltr = part.level != 1;\\n      // The awkward -1 offsets are needed because findFirst (called\\n      // on these below) will treat its first bound as inclusive,\\n      // second as exclusive, but we want to actually address the\\n      // characters in the part's range\\n      begin = ltr ? part.from : part.to - 1;\\n      end = ltr ? part.to : part.from - 1;\\n    }\\n\\n    // A binary search to find the first character whose bounding box\\n    // starts after the coordinates. If we run across any whose box wrap\\n    // the coordinates, store that.\\n    var chAround = null, boxAround = null;\\n    var ch = findFirst(function (ch) {\\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\\n      box.top += widgetHeight$$1; box.bottom += widgetHeight$$1;\\n      if (!boxIsAfter(box, x, y, false)) { return false }\\n      if (box.top <= y && box.left <= x) {\\n        chAround = ch;\\n        boxAround = box;\\n      }\\n      return true\\n    }, begin, end);\\n\\n    var baseX, sticky, outside = false;\\n    // If a box around the coordinates was found, use that\\n    if (boxAround) {\\n      // Distinguish coordinates nearer to the left or right side of the box\\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\\n      ch = chAround + (atStart ? 0 : 1);\\n      sticky = atStart ? \\\"after\\\" : \\\"before\\\";\\n      baseX = atLeft ? boxAround.left : boxAround.right;\\n    } else {\\n      // (Adjust for extended bound, if necessary.)\\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\\n      // To determine which side to associate with, get the box to the\\n      // left of the character and compare it's vertical position to the\\n      // coordinates\\n      sticky = ch == 0 ? \\\"after\\\" : ch == lineObj.text.length ? \\\"before\\\" :\\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight$$1 <= y) == ltr ?\\n        \\\"after\\\" : \\\"before\\\";\\n      // Now get accurate coordinates for this place, in order to get a\\n      // base X position\\n      var coords = cursorCoords(cm, Pos(lineNo$$1, ch, sticky), \\\"line\\\", lineObj, preparedMeasure);\\n      baseX = coords.left;\\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\\n    }\\n\\n    ch = skipExtendingChars(lineObj.text, ch, 1);\\n    return PosWithInfo(lineNo$$1, ch, sticky, outside, x - baseX)\\n  }\\n\\n  function coordsBidiPart(cm, lineObj, lineNo$$1, preparedMeasure, order, x, y) {\\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\\n    // situation, we can take this ordering to correspond to the visual\\n    // ordering. This finds the first part whose end is after the given\\n    // coordinates.\\n    var index = findFirst(function (i) {\\n      var part = order[i], ltr = part.level != 1;\\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo$$1, ltr ? part.to : part.from, ltr ? \\\"before\\\" : \\\"after\\\"),\\n                                     \\\"line\\\", lineObj, preparedMeasure), x, y, true)\\n    }, 0, order.length - 1);\\n    var part = order[index];\\n    // If this isn't the first part, the part's start is also after\\n    // the coordinates, and the coordinates aren't on the same line as\\n    // that start, move one part back.\\n    if (index > 0) {\\n      var ltr = part.level != 1;\\n      var start = cursorCoords(cm, Pos(lineNo$$1, ltr ? part.from : part.to, ltr ? \\\"after\\\" : \\\"before\\\"),\\n                               \\\"line\\\", lineObj, preparedMeasure);\\n      if (boxIsAfter(start, x, y, true) && start.top > y)\\n        { part = order[index - 1]; }\\n    }\\n    return part\\n  }\\n\\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\\n    // In a wrapped line, rtl text on wrapping boundaries can do things\\n    // that don't correspond to the ordering in our `order` array at\\n    // all, so a binary search doesn't work, and we want to return a\\n    // part that only spans one line so that the binary search in\\n    // coordsCharInner is safe. As such, we first find the extent of the\\n    // wrapped line, and then do a flat search in which we discard any\\n    // spans that aren't on the line.\\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\\n    var begin = ref.begin;\\n    var end = ref.end;\\n    if (/\\\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\\n    var part = null, closestDist = null;\\n    for (var i = 0; i < order.length; i++) {\\n      var p = order[i];\\n      if (p.from >= end || p.to <= begin) { continue }\\n      var ltr = p.level != 1;\\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\\n      // Weigh against spans ending before this, so that they are only\\n      // picked if nothing ends after\\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\\n      if (!part || closestDist > dist) {\\n        part = p;\\n        closestDist = dist;\\n      }\\n    }\\n    if (!part) { part = order[order.length - 1]; }\\n    // Clip the part to the wrapped line.\\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\\n    return part\\n  }\\n\\n  var measureText;\\n  // Compute the default text height.\\n  function textHeight(display) {\\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\\n    if (measureText == null) {\\n      measureText = elt(\\\"pre\\\", null, \\\"CodeMirror-line-like\\\");\\n      // Measure a bunch of lines, for browsers that compute\\n      // fractional heights.\\n      for (var i = 0; i < 49; ++i) {\\n        measureText.appendChild(document.createTextNode(\\\"x\\\"));\\n        measureText.appendChild(elt(\\\"br\\\"));\\n      }\\n      measureText.appendChild(document.createTextNode(\\\"x\\\"));\\n    }\\n    removeChildrenAndAdd(display.measure, measureText);\\n    var height = measureText.offsetHeight / 50;\\n    if (height > 3) { display.cachedTextHeight = height; }\\n    removeChildren(display.measure);\\n    return height || 1\\n  }\\n\\n  // Compute the default character width.\\n  function charWidth(display) {\\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\\n    var anchor = elt(\\\"span\\\", \\\"xxxxxxxxxx\\\");\\n    var pre = elt(\\\"pre\\\", [anchor], \\\"CodeMirror-line-like\\\");\\n    removeChildrenAndAdd(display.measure, pre);\\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\\n    if (width > 2) { display.cachedCharWidth = width; }\\n    return width || 10\\n  }\\n\\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\\n  // view, so that we don't interleave reading and writing to the DOM.\\n  function getDimensions(cm) {\\n    var d = cm.display, left = {}, width = {};\\n    var gutterLeft = d.gutters.clientLeft;\\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\\n      var id = cm.display.gutterSpecs[i].className;\\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\\n      width[id] = n.clientWidth;\\n    }\\n    return {fixedPos: compensateForHScroll(d),\\n            gutterTotalWidth: d.gutters.offsetWidth,\\n            gutterLeft: left,\\n            gutterWidth: width,\\n            wrapperWidth: d.wrapper.clientWidth}\\n  }\\n\\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\\n  // but using getBoundingClientRect to get a sub-pixel-accurate\\n  // result.\\n  function compensateForHScroll(display) {\\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\\n  }\\n\\n  // Returns a function that estimates the height of a line, to use as\\n  // first approximation until the line becomes visible (and is thus\\n  // properly measurable).\\n  function estimateHeight(cm) {\\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\\n    return function (line) {\\n      if (lineIsHidden(cm.doc, line)) { return 0 }\\n\\n      var widgetsHeight = 0;\\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\\n      } }\\n\\n      if (wrapping)\\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\\n      else\\n        { return widgetsHeight + th }\\n    }\\n  }\\n\\n  function estimateLineHeights(cm) {\\n    var doc = cm.doc, est = estimateHeight(cm);\\n    doc.iter(function (line) {\\n      var estHeight = est(line);\\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\\n    });\\n  }\\n\\n  // Given a mouse event, find the corresponding position. If liberal\\n  // is false, it checks whether a gutter or scrollbar was clicked,\\n  // and returns null if it was. forRect is used by rectangular\\n  // selections, and tries to estimate a character position even for\\n  // coordinates beyond the right of the text.\\n  function posFromMouse(cm, e, liberal, forRect) {\\n    var display = cm.display;\\n    if (!liberal && e_target(e).getAttribute(\\\"cm-not-content\\\") == \\\"true\\\") { return null }\\n\\n    var x, y, space = display.lineSpace.getBoundingClientRect();\\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\\n    catch (e) { return null }\\n    var coords = coordsChar(cm, x, y), line;\\n    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\\n    }\\n    return coords\\n  }\\n\\n  // Find the view element corresponding to a given line. Return null\\n  // when the line isn't visible.\\n  function findViewIndex(cm, n) {\\n    if (n >= cm.display.viewTo) { return null }\\n    n -= cm.display.viewFrom;\\n    if (n < 0) { return null }\\n    var view = cm.display.view;\\n    for (var i = 0; i < view.length; i++) {\\n      n -= view[i].size;\\n      if (n < 0) { return i }\\n    }\\n  }\\n\\n  // Updates the display.view data structure for a given change to the\\n  // document. From and to are in pre-change coordinates. Lendiff is\\n  // the amount of lines added or subtracted by the change. This is\\n  // used for changes that span multiple lines, or change the way\\n  // lines are divided into visual lines. regLineChange (below)\\n  // registers single-line changes.\\n  function regChange(cm, from, to, lendiff) {\\n    if (from == null) { from = cm.doc.first; }\\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\\n    if (!lendiff) { lendiff = 0; }\\n\\n    var display = cm.display;\\n    if (lendiff && to < display.viewTo &&\\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\\n      { display.updateLineNumbers = from; }\\n\\n    cm.curOp.viewChanged = true;\\n\\n    if (from >= display.viewTo) { // Change after\\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\\n        { resetView(cm); }\\n    } else if (to <= display.viewFrom) { // Change before\\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\\n        resetView(cm);\\n      } else {\\n        display.viewFrom += lendiff;\\n        display.viewTo += lendiff;\\n      }\\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\\n      resetView(cm);\\n    } else if (from <= display.viewFrom) { // Top overlap\\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\\n      if (cut) {\\n        display.view = display.view.slice(cut.index);\\n        display.viewFrom = cut.lineN;\\n        display.viewTo += lendiff;\\n      } else {\\n        resetView(cm);\\n      }\\n    } else if (to >= display.viewTo) { // Bottom overlap\\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\\n      if (cut$1) {\\n        display.view = display.view.slice(0, cut$1.index);\\n        display.viewTo = cut$1.lineN;\\n      } else {\\n        resetView(cm);\\n      }\\n    } else { // Gap in the middle\\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\\n      if (cutTop && cutBot) {\\n        display.view = display.view.slice(0, cutTop.index)\\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\\n          .concat(display.view.slice(cutBot.index));\\n        display.viewTo += lendiff;\\n      } else {\\n        resetView(cm);\\n      }\\n    }\\n\\n    var ext = display.externalMeasured;\\n    if (ext) {\\n      if (to < ext.lineN)\\n        { ext.lineN += lendiff; }\\n      else if (from < ext.lineN + ext.size)\\n        { display.externalMeasured = null; }\\n    }\\n  }\\n\\n  // Register a change to a single line. Type must be one of \\\"text\\\",\\n  // \\\"gutter\\\", \\\"class\\\", \\\"widget\\\"\\n  function regLineChange(cm, line, type) {\\n    cm.curOp.viewChanged = true;\\n    var display = cm.display, ext = cm.display.externalMeasured;\\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\\n      { display.externalMeasured = null; }\\n\\n    if (line < display.viewFrom || line >= display.viewTo) { return }\\n    var lineView = display.view[findViewIndex(cm, line)];\\n    if (lineView.node == null) { return }\\n    var arr = lineView.changes || (lineView.changes = []);\\n    if (indexOf(arr, type) == -1) { arr.push(type); }\\n  }\\n\\n  // Clear the view.\\n  function resetView(cm) {\\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\\n    cm.display.view = [];\\n    cm.display.viewOffset = 0;\\n  }\\n\\n  function viewCuttingPoint(cm, oldN, newN, dir) {\\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\\n      { return {index: index, lineN: newN} }\\n    var n = cm.display.viewFrom;\\n    for (var i = 0; i < index; i++)\\n      { n += view[i].size; }\\n    if (n != oldN) {\\n      if (dir > 0) {\\n        if (index == view.length - 1) { return null }\\n        diff = (n + view[index].size) - oldN;\\n        index++;\\n      } else {\\n        diff = n - oldN;\\n      }\\n      oldN += diff; newN += diff;\\n    }\\n    while (visualLineNo(cm.doc, newN) != newN) {\\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\\n      index += dir;\\n    }\\n    return {index: index, lineN: newN}\\n  }\\n\\n  // Force the view to cover a given range, adding empty view element\\n  // or clipping off existing ones as needed.\\n  function adjustView(cm, from, to) {\\n    var display = cm.display, view = display.view;\\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\\n      display.view = buildViewArray(cm, from, to);\\n      display.viewFrom = from;\\n    } else {\\n      if (display.viewFrom > from)\\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\\n      else if (display.viewFrom < from)\\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\\n      display.viewFrom = from;\\n      if (display.viewTo < to)\\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\\n      else if (display.viewTo > to)\\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\\n    }\\n    display.viewTo = to;\\n  }\\n\\n  // Count the number of lines in the view whose DOM representation is\\n  // out of date (or nonexistent).\\n  function countDirtyView(cm) {\\n    var view = cm.display.view, dirty = 0;\\n    for (var i = 0; i < view.length; i++) {\\n      var lineView = view[i];\\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\\n    }\\n    return dirty\\n  }\\n\\n  function updateSelection(cm) {\\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\\n  }\\n\\n  function prepareSelection(cm, primary) {\\n    if ( primary === void 0 ) primary = true;\\n\\n    var doc = cm.doc, result = {};\\n    var curFragment = result.cursors = document.createDocumentFragment();\\n    var selFragment = result.selection = document.createDocumentFragment();\\n\\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\\n      if (!primary && i == doc.sel.primIndex) { continue }\\n      var range$$1 = doc.sel.ranges[i];\\n      if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) { continue }\\n      var collapsed = range$$1.empty();\\n      if (collapsed || cm.options.showCursorWhenSelecting)\\n        { drawSelectionCursor(cm, range$$1.head, curFragment); }\\n      if (!collapsed)\\n        { drawSelectionRange(cm, range$$1, selFragment); }\\n    }\\n    return result\\n  }\\n\\n  // Draws a cursor for the given range\\n  function drawSelectionCursor(cm, head, output) {\\n    var pos = cursorCoords(cm, head, \\\"div\\\", null, null, !cm.options.singleCursorHeightPerLine);\\n\\n    var cursor = output.appendChild(elt(\\\"div\\\", \\\"\\\\u00a0\\\", \\\"CodeMirror-cursor\\\"));\\n    cursor.style.left = pos.left + \\\"px\\\";\\n    cursor.style.top = pos.top + \\\"px\\\";\\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \\\"px\\\";\\n\\n    if (pos.other) {\\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\\n      var otherCursor = output.appendChild(elt(\\\"div\\\", \\\"\\\\u00a0\\\", \\\"CodeMirror-cursor CodeMirror-secondarycursor\\\"));\\n      otherCursor.style.display = \\\"\\\";\\n      otherCursor.style.left = pos.other.left + \\\"px\\\";\\n      otherCursor.style.top = pos.other.top + \\\"px\\\";\\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \\\"px\\\";\\n    }\\n  }\\n\\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\\n\\n  // Draws the given range as a highlighted selection\\n  function drawSelectionRange(cm, range$$1, output) {\\n    var display = cm.display, doc = cm.doc;\\n    var fragment = document.createDocumentFragment();\\n    var padding = paddingH(cm.display), leftSide = padding.left;\\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\\n    var docLTR = doc.direction == \\\"ltr\\\";\\n\\n    function add(left, top, width, bottom) {\\n      if (top < 0) { top = 0; }\\n      top = Math.round(top);\\n      bottom = Math.round(bottom);\\n      fragment.appendChild(elt(\\\"div\\\", null, \\\"CodeMirror-selected\\\", (\\\"position: absolute; left: \\\" + left + \\\"px;\\\\n                             top: \\\" + top + \\\"px; width: \\\" + (width == null ? rightSide - left : width) + \\\"px;\\\\n                             height: \\\" + (bottom - top) + \\\"px\\\")));\\n    }\\n\\n    function drawForLine(line, fromArg, toArg) {\\n      var lineObj = getLine(doc, line);\\n      var lineLen = lineObj.text.length;\\n      var start, end;\\n      function coords(ch, bias) {\\n        return charCoords(cm, Pos(line, ch), \\\"div\\\", lineObj, bias)\\n      }\\n\\n      function wrapX(pos, dir, side) {\\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\\n        var prop = (dir == \\\"ltr\\\") == (side == \\\"after\\\") ? \\\"left\\\" : \\\"right\\\";\\n        var ch = side == \\\"after\\\" ? extent.begin : extent.end - (/\\\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\\n        return coords(ch, prop)[prop]\\n      }\\n\\n      var order = getOrder(lineObj, doc.direction);\\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\\n        var ltr = dir == \\\"ltr\\\";\\n        var fromPos = coords(from, ltr ? \\\"left\\\" : \\\"right\\\");\\n        var toPos = coords(to - 1, ltr ? \\\"right\\\" : \\\"left\\\");\\n\\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\\n        var first = i == 0, last = !order || i == order.length - 1;\\n        if (toPos.top - fromPos.top <= 3) { // Single line\\n          var openLeft = (docLTR ? openStart : openEnd) && first;\\n          var openRight = (docLTR ? openEnd : openStart) && last;\\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\\n          add(left, fromPos.top, right - left, fromPos.bottom);\\n        } else { // Multiple lines\\n          var topLeft, topRight, botLeft, botRight;\\n          if (ltr) {\\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\\n            topRight = docLTR ? rightSide : wrapX(from, dir, \\\"before\\\");\\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \\\"after\\\");\\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\\n          } else {\\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \\\"before\\\");\\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \\\"after\\\");\\n          }\\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\\n        }\\n\\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\\n      });\\n      return {start: start, end: end}\\n    }\\n\\n    var sFrom = range$$1.from(), sTo = range$$1.to();\\n    if (sFrom.line == sTo.line) {\\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\\n    } else {\\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\\n      if (singleVLine) {\\n        if (leftEnd.top < rightStart.top - 2) {\\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\\n        } else {\\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\\n        }\\n      }\\n      if (leftEnd.bottom < rightStart.top)\\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\\n    }\\n\\n    output.appendChild(fragment);\\n  }\\n\\n  // Cursor-blinking\\n  function restartBlink(cm) {\\n    if (!cm.state.focused) { return }\\n    var display = cm.display;\\n    clearInterval(display.blinker);\\n    var on = true;\\n    display.cursorDiv.style.visibility = \\\"\\\";\\n    if (cm.options.cursorBlinkRate > 0)\\n      { display.blinker = setInterval(function () { return display.cursorDiv.style.visibility = (on = !on) ? \\\"\\\" : \\\"hidden\\\"; },\\n        cm.options.cursorBlinkRate); }\\n    else if (cm.options.cursorBlinkRate < 0)\\n      { display.cursorDiv.style.visibility = \\\"hidden\\\"; }\\n  }\\n\\n  function ensureFocus(cm) {\\n    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\\n  }\\n\\n  function delayBlurEvent(cm) {\\n    cm.state.delayingBlurEvent = true;\\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\\n      cm.state.delayingBlurEvent = false;\\n      onBlur(cm);\\n    } }, 100);\\n  }\\n\\n  function onFocus(cm, e) {\\n    if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\\n\\n    if (cm.options.readOnly == \\\"nocursor\\\") { return }\\n    if (!cm.state.focused) {\\n      signal(cm, \\\"focus\\\", cm, e);\\n      cm.state.focused = true;\\n      addClass(cm.display.wrapper, \\\"CodeMirror-focused\\\");\\n      // This test prevents this from firing when a context\\n      // menu is closed (since the input reset would kill the\\n      // select-all detection hack)\\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\\n        cm.display.input.reset();\\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\\n      }\\n      cm.display.input.receivedFocus();\\n    }\\n    restartBlink(cm);\\n  }\\n  function onBlur(cm, e) {\\n    if (cm.state.delayingBlurEvent) { return }\\n\\n    if (cm.state.focused) {\\n      signal(cm, \\\"blur\\\", cm, e);\\n      cm.state.focused = false;\\n      rmClass(cm.display.wrapper, \\\"CodeMirror-focused\\\");\\n    }\\n    clearInterval(cm.display.blinker);\\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\\n  }\\n\\n  // Read the actual heights of the rendered lines, and update their\\n  // stored heights to match.\\n  function updateHeightsInViewport(cm) {\\n    var display = cm.display;\\n    var prevBottom = display.lineDiv.offsetTop;\\n    for (var i = 0; i < display.view.length; i++) {\\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\\n      var height = (void 0), width = 0;\\n      if (cur.hidden) { continue }\\n      if (ie && ie_version < 8) {\\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\\n        height = bot - prevBottom;\\n        prevBottom = bot;\\n      } else {\\n        var box = cur.node.getBoundingClientRect();\\n        height = box.bottom - box.top;\\n        // Check that lines don't extend past the right of the current\\n        // editor width\\n        if (!wrapping && cur.text.firstChild)\\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\\n      }\\n      var diff = cur.line.height - height;\\n      if (diff > .005 || diff < -.005) {\\n        updateLineHeight(cur.line, height);\\n        updateWidgetHeight(cur.line);\\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\\n          { updateWidgetHeight(cur.rest[j]); } }\\n      }\\n      if (width > cm.display.sizerWidth) {\\n        var chWidth = Math.ceil(width / charWidth(cm.display));\\n        if (chWidth > cm.display.maxLineLength) {\\n          cm.display.maxLineLength = chWidth;\\n          cm.display.maxLine = cur.line;\\n          cm.display.maxLineChanged = true;\\n        }\\n      }\\n    }\\n  }\\n\\n  // Read and store the height of line widgets associated with the\\n  // given line.\\n  function updateWidgetHeight(line) {\\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\\n      var w = line.widgets[i], parent = w.node.parentNode;\\n      if (parent) { w.height = parent.offsetHeight; }\\n    } }\\n  }\\n\\n  // Compute the lines that are visible in a given viewport (defaults\\n  // the the current scroll position). viewport may contain top,\\n  // height, and ensure (see op.scrollToPos) properties.\\n  function visibleLines(display, doc, viewport) {\\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\\n    top = Math.floor(top - paddingTop(display));\\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\\n\\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\\n    // forces those lines into the viewport (if possible).\\n    if (viewport && viewport.ensure) {\\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\\n      if (ensureFrom < from) {\\n        from = ensureFrom;\\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\\n        to = ensureTo;\\n      }\\n    }\\n    return {from: from, to: Math.max(to, from + 1)}\\n  }\\n\\n  // SCROLLING THINGS INTO VIEW\\n\\n  // If an editor sits on the top or bottom of the window, partially\\n  // scrolled out of view, this ensures that the cursor is visible.\\n  function maybeScrollWindow(cm, rect) {\\n    if (signalDOMEvent(cm, \\\"scrollCursorIntoView\\\")) { return }\\n\\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\\n    if (rect.top + box.top < 0) { doScroll = true; }\\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\\n    if (doScroll != null && !phantom) {\\n      var scrollNode = elt(\\\"div\\\", \\\"\\\\u200b\\\", null, (\\\"position: absolute;\\\\n                         top: \\\" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \\\"px;\\\\n                         height: \\\" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \\\"px;\\\\n                         left: \\\" + (rect.left) + \\\"px; width: \\\" + (Math.max(2, rect.right - rect.left)) + \\\"px;\\\"));\\n      cm.display.lineSpace.appendChild(scrollNode);\\n      scrollNode.scrollIntoView(doScroll);\\n      cm.display.lineSpace.removeChild(scrollNode);\\n    }\\n  }\\n\\n  // Scroll a given position into view (immediately), verifying that\\n  // it actually became visible (as line heights are accurately\\n  // measured, the position of something may 'drift' during drawing).\\n  function scrollPosIntoView(cm, pos, end, margin) {\\n    if (margin == null) { margin = 0; }\\n    var rect;\\n    if (!cm.options.lineWrapping && pos == end) {\\n      // Set pos and end to the cursor positions around the character pos sticks to\\n      // If pos.sticky == \\\"before\\\", that is around pos.ch - 1, otherwise around pos.ch\\n      // If pos == Pos(_, 0, \\\"before\\\"), pos and end are unchanged\\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \\\"before\\\" ? pos.ch - 1 : pos.ch, \\\"after\\\") : pos;\\n      end = pos.sticky == \\\"before\\\" ? Pos(pos.line, pos.ch + 1, \\\"before\\\") : pos;\\n    }\\n    for (var limit = 0; limit < 5; limit++) {\\n      var changed = false;\\n      var coords = cursorCoords(cm, pos);\\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\\n      rect = {left: Math.min(coords.left, endCoords.left),\\n              top: Math.min(coords.top, endCoords.top) - margin,\\n              right: Math.max(coords.left, endCoords.left),\\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\\n      var scrollPos = calculateScrollPos(cm, rect);\\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\\n      if (scrollPos.scrollTop != null) {\\n        updateScrollTop(cm, scrollPos.scrollTop);\\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\\n      }\\n      if (scrollPos.scrollLeft != null) {\\n        setScrollLeft(cm, scrollPos.scrollLeft);\\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\\n      }\\n      if (!changed) { break }\\n    }\\n    return rect\\n  }\\n\\n  // Scroll a given set of coordinates into view (immediately).\\n  function scrollIntoView(cm, rect) {\\n    var scrollPos = calculateScrollPos(cm, rect);\\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\\n  }\\n\\n  // Calculate a new scroll position needed to scroll the given\\n  // rectangle into view. Returns an object with scrollTop and\\n  // scrollLeft properties. When these are undefined, the\\n  // vertical/horizontal position does not need to be adjusted.\\n  function calculateScrollPos(cm, rect) {\\n    var display = cm.display, snapMargin = textHeight(cm.display);\\n    if (rect.top < 0) { rect.top = 0; }\\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\\n    var screen = displayHeight(cm), result = {};\\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\\n    var docBottom = cm.doc.height + paddingVert(display);\\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\\n    if (rect.top < screentop) {\\n      result.scrollTop = atTop ? 0 : rect.top;\\n    } else if (rect.bottom > screentop + screen) {\\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\\n      if (newTop != screentop) { result.scrollTop = newTop; }\\n    }\\n\\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\\n    var tooWide = rect.right - rect.left > screenw;\\n    if (tooWide) { rect.right = rect.left + screenw; }\\n    if (rect.left < 10)\\n      { result.scrollLeft = 0; }\\n    else if (rect.left < screenleft)\\n      { result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10)); }\\n    else if (rect.right > screenw + screenleft - 3)\\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\\n    return result\\n  }\\n\\n  // Store a relative adjustment to the scroll position in the current\\n  // operation (to be applied when the operation finishes).\\n  function addToScrollTop(cm, top) {\\n    if (top == null) { return }\\n    resolveScrollToPos(cm);\\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\\n  }\\n\\n  // Make sure that at the end of the operation the current cursor is\\n  // shown.\\n  function ensureCursorVisible(cm) {\\n    resolveScrollToPos(cm);\\n    var cur = cm.getCursor();\\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\\n  }\\n\\n  function scrollToCoords(cm, x, y) {\\n    if (x != null || y != null) { resolveScrollToPos(cm); }\\n    if (x != null) { cm.curOp.scrollLeft = x; }\\n    if (y != null) { cm.curOp.scrollTop = y; }\\n  }\\n\\n  function scrollToRange(cm, range$$1) {\\n    resolveScrollToPos(cm);\\n    cm.curOp.scrollToPos = range$$1;\\n  }\\n\\n  // When an operation has its scrollToPos property set, and another\\n  // scroll action is applied before the end of the operation, this\\n  // 'simulates' scrolling that position into view in a cheap way, so\\n  // that the effect of intermediate scroll commands is not ignored.\\n  function resolveScrollToPos(cm) {\\n    var range$$1 = cm.curOp.scrollToPos;\\n    if (range$$1) {\\n      cm.curOp.scrollToPos = null;\\n      var from = estimateCoords(cm, range$$1.from), to = estimateCoords(cm, range$$1.to);\\n      scrollToCoordsRange(cm, from, to, range$$1.margin);\\n    }\\n  }\\n\\n  function scrollToCoordsRange(cm, from, to, margin) {\\n    var sPos = calculateScrollPos(cm, {\\n      left: Math.min(from.left, to.left),\\n      top: Math.min(from.top, to.top) - margin,\\n      right: Math.max(from.right, to.right),\\n      bottom: Math.max(from.bottom, to.bottom) + margin\\n    });\\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\\n  }\\n\\n  // Sync the scrollable area and scrollbars, ensure the viewport\\n  // covers the visible area.\\n  function updateScrollTop(cm, val) {\\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\\n    setScrollTop(cm, val, true);\\n    if (gecko) { updateDisplaySimple(cm); }\\n    startWorker(cm, 100);\\n  }\\n\\n  function setScrollTop(cm, val, forceScroll) {\\n    val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\\n    cm.doc.scrollTop = val;\\n    cm.display.scrollbars.setScrollTop(val);\\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\\n  }\\n\\n  // Sync scroller and scrollbar, ensure the gutter elements are\\n  // aligned.\\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\\n    cm.doc.scrollLeft = val;\\n    alignHorizontally(cm);\\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\\n    cm.display.scrollbars.setScrollLeft(val);\\n  }\\n\\n  // SCROLLBARS\\n\\n  // Prepare DOM reads needed to update the scrollbars. Done in one\\n  // shot to minimize update/measure roundtrips.\\n  function measureForScrollbars(cm) {\\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\\n    return {\\n      clientHeight: d.scroller.clientHeight,\\n      viewHeight: d.wrapper.clientHeight,\\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\\n      viewWidth: d.wrapper.clientWidth,\\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\\n      docHeight: docH,\\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\\n      nativeBarWidth: d.nativeBarWidth,\\n      gutterWidth: gutterW\\n    }\\n  }\\n\\n  var NativeScrollbars = function(place, scroll, cm) {\\n    this.cm = cm;\\n    var vert = this.vert = elt(\\\"div\\\", [elt(\\\"div\\\", null, null, \\\"min-width: 1px\\\")], \\\"CodeMirror-vscrollbar\\\");\\n    var horiz = this.horiz = elt(\\\"div\\\", [elt(\\\"div\\\", null, null, \\\"height: 100%; min-height: 1px\\\")], \\\"CodeMirror-hscrollbar\\\");\\n    vert.tabIndex = horiz.tabIndex = -1;\\n    place(vert); place(horiz);\\n\\n    on(vert, \\\"scroll\\\", function () {\\n      if (vert.clientHeight) { scroll(vert.scrollTop, \\\"vertical\\\"); }\\n    });\\n    on(horiz, \\\"scroll\\\", function () {\\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \\\"horizontal\\\"); }\\n    });\\n\\n    this.checkedZeroWidth = false;\\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \\\"18px\\\"; }\\n  };\\n\\n  NativeScrollbars.prototype.update = function (measure) {\\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\\n    var sWidth = measure.nativeBarWidth;\\n\\n    if (needsV) {\\n      this.vert.style.display = \\\"block\\\";\\n      this.vert.style.bottom = needsH ? sWidth + \\\"px\\\" : \\\"0\\\";\\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\\n      // A bug in IE8 can cause this value to be negative, so guard it.\\n      this.vert.firstChild.style.height =\\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \\\"px\\\";\\n    } else {\\n      this.vert.style.display = \\\"\\\";\\n      this.vert.firstChild.style.height = \\\"0\\\";\\n    }\\n\\n    if (needsH) {\\n      this.horiz.style.display = \\\"block\\\";\\n      this.horiz.style.right = needsV ? sWidth + \\\"px\\\" : \\\"0\\\";\\n      this.horiz.style.left = measure.barLeft + \\\"px\\\";\\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\\n      this.horiz.firstChild.style.width =\\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \\\"px\\\";\\n    } else {\\n      this.horiz.style.display = \\\"\\\";\\n      this.horiz.firstChild.style.width = \\\"0\\\";\\n    }\\n\\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\\n      if (sWidth == 0) { this.zeroWidthHack(); }\\n      this.checkedZeroWidth = true;\\n    }\\n\\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\\n  };\\n\\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \\\"horiz\\\"); }\\n  };\\n\\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \\\"vert\\\"); }\\n  };\\n\\n  NativeScrollbars.prototype.zeroWidthHack = function () {\\n    var w = mac && !mac_geMountainLion ? \\\"12px\\\" : \\\"18px\\\";\\n    this.horiz.style.height = this.vert.style.width = w;\\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \\\"none\\\";\\n    this.disableHoriz = new Delayed;\\n    this.disableVert = new Delayed;\\n  };\\n\\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\\n    bar.style.pointerEvents = \\\"auto\\\";\\n    function maybeDisable() {\\n      // To find out whether the scrollbar is still visible, we\\n      // check whether the element under the pixel in the bottom\\n      // right corner of the scrollbar box is the scrollbar box\\n      // itself (when the bar is still visible) or its filler child\\n      // (when the bar is hidden). If it is still visible, we keep\\n      // it enabled, if it's hidden, we disable pointer events.\\n      var box = bar.getBoundingClientRect();\\n      var elt$$1 = type == \\\"vert\\\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\\n      if (elt$$1 != bar) { bar.style.pointerEvents = \\\"none\\\"; }\\n      else { delay.set(1000, maybeDisable); }\\n    }\\n    delay.set(1000, maybeDisable);\\n  };\\n\\n  NativeScrollbars.prototype.clear = function () {\\n    var parent = this.horiz.parentNode;\\n    parent.removeChild(this.horiz);\\n    parent.removeChild(this.vert);\\n  };\\n\\n  var NullScrollbars = function () {};\\n\\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\\n  NullScrollbars.prototype.setScrollLeft = function () {};\\n  NullScrollbars.prototype.setScrollTop = function () {};\\n  NullScrollbars.prototype.clear = function () {};\\n\\n  function updateScrollbars(cm, measure) {\\n    if (!measure) { measure = measureForScrollbars(cm); }\\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\\n    updateScrollbarsInner(cm, measure);\\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\\n        { updateHeightsInViewport(cm); }\\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\\n    }\\n  }\\n\\n  // Re-synchronize the fake scrollbars with the actual size of the\\n  // content.\\n  function updateScrollbarsInner(cm, measure) {\\n    var d = cm.display;\\n    var sizes = d.scrollbars.update(measure);\\n\\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \\\"px\\\";\\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \\\"px\\\";\\n    d.heightForcer.style.borderBottom = sizes.bottom + \\\"px solid transparent\\\";\\n\\n    if (sizes.right && sizes.bottom) {\\n      d.scrollbarFiller.style.display = \\\"block\\\";\\n      d.scrollbarFiller.style.height = sizes.bottom + \\\"px\\\";\\n      d.scrollbarFiller.style.width = sizes.right + \\\"px\\\";\\n    } else { d.scrollbarFiller.style.display = \\\"\\\"; }\\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\\n      d.gutterFiller.style.display = \\\"block\\\";\\n      d.gutterFiller.style.height = sizes.bottom + \\\"px\\\";\\n      d.gutterFiller.style.width = measure.gutterWidth + \\\"px\\\";\\n    } else { d.gutterFiller.style.display = \\\"\\\"; }\\n  }\\n\\n  var scrollbarModel = {\\\"native\\\": NativeScrollbars, \\\"null\\\": NullScrollbars};\\n\\n  function initScrollbars(cm) {\\n    if (cm.display.scrollbars) {\\n      cm.display.scrollbars.clear();\\n      if (cm.display.scrollbars.addClass)\\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\\n    }\\n\\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\\n      // Prevent clicks in the scrollbars from killing focus\\n      on(node, \\\"mousedown\\\", function () {\\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\\n      });\\n      node.setAttribute(\\\"cm-not-content\\\", \\\"true\\\");\\n    }, function (pos, axis) {\\n      if (axis == \\\"horizontal\\\") { setScrollLeft(cm, pos); }\\n      else { updateScrollTop(cm, pos); }\\n    }, cm);\\n    if (cm.display.scrollbars.addClass)\\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\\n  }\\n\\n  // Operations are used to wrap a series of changes to the editor\\n  // state in such a way that each change won't have to update the\\n  // cursor and display (which would be awkward, slow, and\\n  // error-prone). Instead, display updates are batched and then all\\n  // combined and executed at once.\\n\\n  var nextOpId = 0;\\n  // Start a new operation.\\n  function startOperation(cm) {\\n    cm.curOp = {\\n      cm: cm,\\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\\n      forceUpdate: false,      // Used to force a redraw\\n      updateInput: 0,       // Whether to reset the input textarea\\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\\n      changeObjs: null,        // Accumulated changes, for firing change events\\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\\n      selectionChanged: false, // Whether the selection needs to be redrawn\\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\\n      scrollToPos: null,       // Used to scroll to a specific position\\n      focus: false,\\n      id: ++nextOpId           // Unique ID\\n    };\\n    pushOperation(cm.curOp);\\n  }\\n\\n  // Finish an operation, updating the display and signalling delayed events\\n  function endOperation(cm) {\\n    var op = cm.curOp;\\n    if (op) { finishOperation(op, function (group) {\\n      for (var i = 0; i < group.ops.length; i++)\\n        { group.ops[i].cm.curOp = null; }\\n      endOperations(group);\\n    }); }\\n  }\\n\\n  // The DOM updates done when an operation finishes are batched so\\n  // that the minimum number of relayouts are required.\\n  function endOperations(group) {\\n    var ops = group.ops;\\n    for (var i = 0; i < ops.length; i++) // Read DOM\\n      { endOperation_R1(ops[i]); }\\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\\n      { endOperation_W1(ops[i$1]); }\\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\\n      { endOperation_R2(ops[i$2]); }\\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\\n      { endOperation_W2(ops[i$3]); }\\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\\n      { endOperation_finish(ops[i$4]); }\\n  }\\n\\n  function endOperation_R1(op) {\\n    var cm = op.cm, display = cm.display;\\n    maybeClipScrollbars(cm);\\n    if (op.updateMaxLine) { findMaxLine(cm); }\\n\\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\\n                         op.scrollToPos.to.line >= display.viewTo) ||\\n      display.maxLineChanged && cm.options.lineWrapping;\\n    op.update = op.mustUpdate &&\\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\\n  }\\n\\n  function endOperation_W1(op) {\\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\\n  }\\n\\n  function endOperation_R2(op) {\\n    var cm = op.cm, display = cm.display;\\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\\n\\n    op.barMeasure = measureForScrollbars(cm);\\n\\n    // If the max line changed since it was last measured, measure it,\\n    // and ensure the document's width matches it.\\n    // updateDisplay_W2 will use these properties to do the actual resizing\\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\\n      cm.display.sizerWidth = op.adjustWidthTo;\\n      op.barMeasure.scrollWidth =\\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\\n    }\\n\\n    if (op.updatedDisplay || op.selectionChanged)\\n      { op.preparedSelection = display.input.prepareSelection(); }\\n  }\\n\\n  function endOperation_W2(op) {\\n    var cm = op.cm;\\n\\n    if (op.adjustWidthTo != null) {\\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \\\"px\\\";\\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\\n      cm.display.maxLineChanged = false;\\n    }\\n\\n    var takeFocus = op.focus && op.focus == activeElt();\\n    if (op.preparedSelection)\\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\\n      { updateScrollbars(cm, op.barMeasure); }\\n    if (op.updatedDisplay)\\n      { setDocumentHeight(cm, op.barMeasure); }\\n\\n    if (op.selectionChanged) { restartBlink(cm); }\\n\\n    if (cm.state.focused && op.updateInput)\\n      { cm.display.input.reset(op.typing); }\\n    if (takeFocus) { ensureFocus(op.cm); }\\n  }\\n\\n  function endOperation_finish(op) {\\n    var cm = op.cm, display = cm.display, doc = cm.doc;\\n\\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\\n\\n    // Abort mouse wheel delta measurement, when scrolling explicitly\\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\\n      { display.wheelStartX = display.wheelStartY = null; }\\n\\n    // Propagate the scroll position to the actual DOM scroller\\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\\n\\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\\n    // If we need to scroll a specific position into view, do so.\\n    if (op.scrollToPos) {\\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\\n      maybeScrollWindow(cm, rect);\\n    }\\n\\n    // Fire events for markers that are hidden/unidden by editing or\\n    // undoing\\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\\n      { if (!hidden[i].lines.length) { signal(hidden[i], \\\"hide\\\"); } } }\\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \\\"unhide\\\"); } } }\\n\\n    if (display.wrapper.offsetHeight)\\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\\n\\n    // Fire change events, and delayed event handlers\\n    if (op.changeObjs)\\n      { signal(cm, \\\"changes\\\", cm, op.changeObjs); }\\n    if (op.update)\\n      { op.update.finish(); }\\n  }\\n\\n  // Run the given function in an operation\\n  function runInOp(cm, f) {\\n    if (cm.curOp) { return f() }\\n    startOperation(cm);\\n    try { return f() }\\n    finally { endOperation(cm); }\\n  }\\n  // Wraps a function in an operation. Returns the wrapped function.\\n  function operation(cm, f) {\\n    return function() {\\n      if (cm.curOp) { return f.apply(cm, arguments) }\\n      startOperation(cm);\\n      try { return f.apply(cm, arguments) }\\n      finally { endOperation(cm); }\\n    }\\n  }\\n  // Used to add methods to editor and doc instances, wrapping them in\\n  // operations.\\n  function methodOp(f) {\\n    return function() {\\n      if (this.curOp) { return f.apply(this, arguments) }\\n      startOperation(this);\\n      try { return f.apply(this, arguments) }\\n      finally { endOperation(this); }\\n    }\\n  }\\n  function docMethodOp(f) {\\n    return function() {\\n      var cm = this.cm;\\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\\n      startOperation(cm);\\n      try { return f.apply(this, arguments) }\\n      finally { endOperation(cm); }\\n    }\\n  }\\n\\n  // HIGHLIGHT WORKER\\n\\n  function startWorker(cm, time) {\\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\\n  }\\n\\n  function highlightWorker(cm) {\\n    var doc = cm.doc;\\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\\n    var end = +new Date + cm.options.workTime;\\n    var context = getContextBefore(cm, doc.highlightFrontier);\\n    var changedLines = [];\\n\\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\\n      if (context.line >= cm.display.viewFrom) { // Visible\\n        var oldStyles = line.styles;\\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\\n        var highlighted = highlightLine(cm, line, context, true);\\n        if (resetState) { context.state = resetState; }\\n        line.styles = highlighted.styles;\\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\\n        if (newCls) { line.styleClasses = newCls; }\\n        else if (oldCls) { line.styleClasses = null; }\\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\\n        if (ischange) { changedLines.push(context.line); }\\n        line.stateAfter = context.save();\\n        context.nextLine();\\n      } else {\\n        if (line.text.length <= cm.options.maxHighlightLength)\\n          { processLine(cm, line.text, context); }\\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\\n        context.nextLine();\\n      }\\n      if (+new Date > end) {\\n        startWorker(cm, cm.options.workDelay);\\n        return true\\n      }\\n    });\\n    doc.highlightFrontier = context.line;\\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\\n    if (changedLines.length) { runInOp(cm, function () {\\n      for (var i = 0; i < changedLines.length; i++)\\n        { regLineChange(cm, changedLines[i], \\\"text\\\"); }\\n    }); }\\n  }\\n\\n  // DISPLAY DRAWING\\n\\n  var DisplayUpdate = function(cm, viewport, force) {\\n    var display = cm.display;\\n\\n    this.viewport = viewport;\\n    // Store some values that we'll need later (but don't want to force a relayout for)\\n    this.visible = visibleLines(display, cm.doc, viewport);\\n    this.editorIsHidden = !display.wrapper.offsetWidth;\\n    this.wrapperHeight = display.wrapper.clientHeight;\\n    this.wrapperWidth = display.wrapper.clientWidth;\\n    this.oldDisplayWidth = displayWidth(cm);\\n    this.force = force;\\n    this.dims = getDimensions(cm);\\n    this.events = [];\\n  };\\n\\n  DisplayUpdate.prototype.signal = function (emitter, type) {\\n    if (hasHandler(emitter, type))\\n      { this.events.push(arguments); }\\n  };\\n  DisplayUpdate.prototype.finish = function () {\\n      var this$1 = this;\\n\\n    for (var i = 0; i < this.events.length; i++)\\n      { signal.apply(null, this$1.events[i]); }\\n  };\\n\\n  function maybeClipScrollbars(cm) {\\n    var display = cm.display;\\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\\n      display.heightForcer.style.height = scrollGap(cm) + \\\"px\\\";\\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \\\"px\\\";\\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \\\"px\\\";\\n      display.scrollbarsClipped = true;\\n    }\\n  }\\n\\n  function selectionSnapshot(cm) {\\n    if (cm.hasFocus()) { return null }\\n    var active = activeElt();\\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\\n    var result = {activeElt: active};\\n    if (window.getSelection) {\\n      var sel = window.getSelection();\\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\\n        result.anchorNode = sel.anchorNode;\\n        result.anchorOffset = sel.anchorOffset;\\n        result.focusNode = sel.focusNode;\\n        result.focusOffset = sel.focusOffset;\\n      }\\n    }\\n    return result\\n  }\\n\\n  function restoreSelection(snapshot) {\\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\\n    snapshot.activeElt.focus();\\n    if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\\n      var sel = window.getSelection(), range$$1 = document.createRange();\\n      range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\\n      range$$1.collapse(false);\\n      sel.removeAllRanges();\\n      sel.addRange(range$$1);\\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\\n    }\\n  }\\n\\n  // Does the actual updating of the line display. Bails out\\n  // (returning false) when there is nothing to be done and forced is\\n  // false.\\n  function updateDisplayIfNeeded(cm, update) {\\n    var display = cm.display, doc = cm.doc;\\n\\n    if (update.editorIsHidden) {\\n      resetView(cm);\\n      return false\\n    }\\n\\n    // Bail out if the visible area is already rendered and nothing changed.\\n    if (!update.force &&\\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\\n        display.renderedView == display.view && countDirtyView(cm) == 0)\\n      { return false }\\n\\n    if (maybeUpdateLineNumberWidth(cm)) {\\n      resetView(cm);\\n      update.dims = getDimensions(cm);\\n    }\\n\\n    // Compute a suitable new viewport (from & to)\\n    var end = doc.first + doc.size;\\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\\n    if (sawCollapsedSpans) {\\n      from = visualLineNo(cm.doc, from);\\n      to = visualLineEndNo(cm.doc, to);\\n    }\\n\\n    var different = from != display.viewFrom || to != display.viewTo ||\\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\\n    adjustView(cm, from, to);\\n\\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\\n    // Position the mover div to align with the current scroll position\\n    cm.display.mover.style.top = display.viewOffset + \\\"px\\\";\\n\\n    var toUpdate = countDirtyView(cm);\\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\\n      { return false }\\n\\n    // For big changes, we hide the enclosing element during the\\n    // update, since that speeds up the operations on most browsers.\\n    var selSnapshot = selectionSnapshot(cm);\\n    if (toUpdate > 4) { display.lineDiv.style.display = \\\"none\\\"; }\\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\\n    if (toUpdate > 4) { display.lineDiv.style.display = \\\"\\\"; }\\n    display.renderedView = display.view;\\n    // There might have been a widget with a focused element that got\\n    // hidden or updated, if so re-focus it.\\n    restoreSelection(selSnapshot);\\n\\n    // Prevent selection and cursors from interfering with the scroll\\n    // width and height.\\n    removeChildren(display.cursorDiv);\\n    removeChildren(display.selectionDiv);\\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\\n\\n    if (different) {\\n      display.lastWrapHeight = update.wrapperHeight;\\n      display.lastWrapWidth = update.wrapperWidth;\\n      startWorker(cm, 400);\\n    }\\n\\n    display.updateLineNumbers = null;\\n\\n    return true\\n  }\\n\\n  function postUpdateDisplay(cm, update) {\\n    var viewport = update.viewport;\\n\\n    for (var first = true;; first = false) {\\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\\n        // Clip forced viewport to actual scrollable area.\\n        if (viewport && viewport.top != null)\\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\\n        // Updated line heights might result in the drawn area not\\n        // actually covering the viewport. Keep looping until it does.\\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\\n          { break }\\n      }\\n      if (!updateDisplayIfNeeded(cm, update)) { break }\\n      updateHeightsInViewport(cm);\\n      var barMeasure = measureForScrollbars(cm);\\n      updateSelection(cm);\\n      updateScrollbars(cm, barMeasure);\\n      setDocumentHeight(cm, barMeasure);\\n      update.force = false;\\n    }\\n\\n    update.signal(cm, \\\"update\\\", cm);\\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\\n      update.signal(cm, \\\"viewportChange\\\", cm, cm.display.viewFrom, cm.display.viewTo);\\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\\n    }\\n  }\\n\\n  function updateDisplaySimple(cm, viewport) {\\n    var update = new DisplayUpdate(cm, viewport);\\n    if (updateDisplayIfNeeded(cm, update)) {\\n      updateHeightsInViewport(cm);\\n      postUpdateDisplay(cm, update);\\n      var barMeasure = measureForScrollbars(cm);\\n      updateSelection(cm);\\n      updateScrollbars(cm, barMeasure);\\n      setDocumentHeight(cm, barMeasure);\\n      update.finish();\\n    }\\n  }\\n\\n  // Sync the actual display DOM structure with display.view, removing\\n  // nodes for lines that are no longer in view, and creating the ones\\n  // that are not there yet, and updating the ones that are out of\\n  // date.\\n  function patchDisplay(cm, updateNumbersFrom, dims) {\\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\\n    var container = display.lineDiv, cur = container.firstChild;\\n\\n    function rm(node) {\\n      var next = node.nextSibling;\\n      // Works around a throw-scroll bug in OS X Webkit\\n      if (webkit && mac && cm.display.currentWheelTarget == node)\\n        { node.style.display = \\\"none\\\"; }\\n      else\\n        { node.parentNode.removeChild(node); }\\n      return next\\n    }\\n\\n    var view = display.view, lineN = display.viewFrom;\\n    // Loop over the elements in the view, syncing cur (the DOM nodes\\n    // in display.lineDiv) with the view as we go.\\n    for (var i = 0; i < view.length; i++) {\\n      var lineView = view[i];\\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\\n        var node = buildLineElement(cm, lineView, lineN, dims);\\n        container.insertBefore(node, cur);\\n      } else { // Already drawn\\n        while (cur != lineView.node) { cur = rm(cur); }\\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\\n          updateNumbersFrom <= lineN && lineView.lineNumber;\\n        if (lineView.changes) {\\n          if (indexOf(lineView.changes, \\\"gutter\\\") > -1) { updateNumber = false; }\\n          updateLineForChanges(cm, lineView, lineN, dims);\\n        }\\n        if (updateNumber) {\\n          removeChildren(lineView.lineNumber);\\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\\n        }\\n        cur = lineView.node.nextSibling;\\n      }\\n      lineN += lineView.size;\\n    }\\n    while (cur) { cur = rm(cur); }\\n  }\\n\\n  function updateGutterSpace(display) {\\n    var width = display.gutters.offsetWidth;\\n    display.sizer.style.marginLeft = width + \\\"px\\\";\\n  }\\n\\n  function setDocumentHeight(cm, measure) {\\n    cm.display.sizer.style.minHeight = measure.docHeight + \\\"px\\\";\\n    cm.display.heightForcer.style.top = measure.docHeight + \\\"px\\\";\\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \\\"px\\\";\\n  }\\n\\n  // Re-align line numbers and gutter marks to compensate for\\n  // horizontal scrolling.\\n  function alignHorizontally(cm) {\\n    var display = cm.display, view = display.view;\\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\\n    var gutterW = display.gutters.offsetWidth, left = comp + \\\"px\\\";\\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\\n      if (cm.options.fixedGutter) {\\n        if (view[i].gutter)\\n          { view[i].gutter.style.left = left; }\\n        if (view[i].gutterBackground)\\n          { view[i].gutterBackground.style.left = left; }\\n      }\\n      var align = view[i].alignable;\\n      if (align) { for (var j = 0; j < align.length; j++)\\n        { align[j].style.left = left; } }\\n    } }\\n    if (cm.options.fixedGutter)\\n      { display.gutters.style.left = (comp + gutterW) + \\\"px\\\"; }\\n  }\\n\\n  // Used to ensure that the line number gutter is still the right\\n  // size for the current document size. Returns true when an update\\n  // is needed.\\n  function maybeUpdateLineNumberWidth(cm) {\\n    if (!cm.options.lineNumbers) { return false }\\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\\n    if (last.length != display.lineNumChars) {\\n      var test = display.measure.appendChild(elt(\\\"div\\\", [elt(\\\"div\\\", last)],\\n                                                 \\\"CodeMirror-linenumber CodeMirror-gutter-elt\\\"));\\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\\n      display.lineGutter.style.width = \\\"\\\";\\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\\n      display.lineGutter.style.width = display.lineNumWidth + \\\"px\\\";\\n      updateGutterSpace(cm.display);\\n      return true\\n    }\\n    return false\\n  }\\n\\n  function getGutters(gutters, lineNumbers) {\\n    var result = [], sawLineNumbers = false;\\n    for (var i = 0; i < gutters.length; i++) {\\n      var name = gutters[i], style = null;\\n      if (typeof name != \\\"string\\\") { style = name.style; name = name.className; }\\n      if (name == \\\"CodeMirror-linenumbers\\\") {\\n        if (!lineNumbers) { continue }\\n        else { sawLineNumbers = true; }\\n      }\\n      result.push({className: name, style: style});\\n    }\\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \\\"CodeMirror-linenumbers\\\", style: null}); }\\n    return result\\n  }\\n\\n  // Rebuild the gutter elements, ensure the margin to the left of the\\n  // code matches their width.\\n  function renderGutters(display) {\\n    var gutters = display.gutters, specs = display.gutterSpecs;\\n    removeChildren(gutters);\\n    display.lineGutter = null;\\n    for (var i = 0; i < specs.length; ++i) {\\n      var ref = specs[i];\\n      var className = ref.className;\\n      var style = ref.style;\\n      var gElt = gutters.appendChild(elt(\\\"div\\\", null, \\\"CodeMirror-gutter \\\" + className));\\n      if (style) { gElt.style.cssText = style; }\\n      if (className == \\\"CodeMirror-linenumbers\\\") {\\n        display.lineGutter = gElt;\\n        gElt.style.width = (display.lineNumWidth || 1) + \\\"px\\\";\\n      }\\n    }\\n    gutters.style.display = specs.length ? \\\"\\\" : \\\"none\\\";\\n    updateGutterSpace(display);\\n  }\\n\\n  function updateGutters(cm) {\\n    renderGutters(cm.display);\\n    regChange(cm);\\n    alignHorizontally(cm);\\n  }\\n\\n  // The display handles the DOM integration, both for input reading\\n  // and content drawing. It holds references to DOM nodes and\\n  // display-related state.\\n\\n  function Display(place, doc, input, options) {\\n    var d = this;\\n    this.input = input;\\n\\n    // Covers bottom-right square when both scrollbars are present.\\n    d.scrollbarFiller = elt(\\\"div\\\", null, \\\"CodeMirror-scrollbar-filler\\\");\\n    d.scrollbarFiller.setAttribute(\\\"cm-not-content\\\", \\\"true\\\");\\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\\n    // and h scrollbar is present.\\n    d.gutterFiller = elt(\\\"div\\\", null, \\\"CodeMirror-gutter-filler\\\");\\n    d.gutterFiller.setAttribute(\\\"cm-not-content\\\", \\\"true\\\");\\n    // Will contain the actual code, positioned to cover the viewport.\\n    d.lineDiv = eltP(\\\"div\\\", null, \\\"CodeMirror-code\\\");\\n    // Elements are added to these to represent selection and cursors.\\n    d.selectionDiv = elt(\\\"div\\\", null, null, \\\"position: relative; z-index: 1\\\");\\n    d.cursorDiv = elt(\\\"div\\\", null, \\\"CodeMirror-cursors\\\");\\n    // A visibility: hidden element used to find the size of things.\\n    d.measure = elt(\\\"div\\\", null, \\\"CodeMirror-measure\\\");\\n    // When lines outside of the viewport are measured, they are drawn in this.\\n    d.lineMeasure = elt(\\\"div\\\", null, \\\"CodeMirror-measure\\\");\\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\\n    d.lineSpace = eltP(\\\"div\\\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\\n                      null, \\\"position: relative; outline: none\\\");\\n    var lines = eltP(\\\"div\\\", [d.lineSpace], \\\"CodeMirror-lines\\\");\\n    // Moved around its parent to cover visible view.\\n    d.mover = elt(\\\"div\\\", [lines], null, \\\"position: relative\\\");\\n    // Set to the height of the document, allowing scrolling.\\n    d.sizer = elt(\\\"div\\\", [d.mover], \\\"CodeMirror-sizer\\\");\\n    d.sizerWidth = null;\\n    // Behavior of elts with overflow: auto and padding is\\n    // inconsistent across browsers. This is used to ensure the\\n    // scrollable area is big enough.\\n    d.heightForcer = elt(\\\"div\\\", null, null, \\\"position: absolute; height: \\\" + scrollerGap + \\\"px; width: 1px;\\\");\\n    // Will contain the gutters, if any.\\n    d.gutters = elt(\\\"div\\\", null, \\\"CodeMirror-gutters\\\");\\n    d.lineGutter = null;\\n    // Actual scrollable element.\\n    d.scroller = elt(\\\"div\\\", [d.sizer, d.heightForcer, d.gutters], \\\"CodeMirror-scroll\\\");\\n    d.scroller.setAttribute(\\\"tabIndex\\\", \\\"-1\\\");\\n    // The element in which the editor lives.\\n    d.wrapper = elt(\\\"div\\\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \\\"CodeMirror\\\");\\n\\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\\n\\n    if (place) {\\n      if (place.appendChild) { place.appendChild(d.wrapper); }\\n      else { place(d.wrapper); }\\n    }\\n\\n    // Current rendered range (may be bigger than the view window).\\n    d.viewFrom = d.viewTo = doc.first;\\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\\n    // Information about the rendered lines.\\n    d.view = [];\\n    d.renderedView = null;\\n    // Holds info about a single rendered line when it was rendered\\n    // for measurement, while not in view.\\n    d.externalMeasured = null;\\n    // Empty space (in pixels) above the view\\n    d.viewOffset = 0;\\n    d.lastWrapHeight = d.lastWrapWidth = 0;\\n    d.updateLineNumbers = null;\\n\\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\\n    d.scrollbarsClipped = false;\\n\\n    // Used to only resize the line number gutter when necessary (when\\n    // the amount of lines crosses a boundary that makes its width change)\\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\\n    // Set to true when a non-horizontal-scrolling line widget is\\n    // added. As an optimization, line widget aligning is skipped when\\n    // this is false.\\n    d.alignWidgets = false;\\n\\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\\n\\n    // Tracks the maximum line length so that the horizontal scrollbar\\n    // can be kept static when scrolling.\\n    d.maxLine = null;\\n    d.maxLineLength = 0;\\n    d.maxLineChanged = false;\\n\\n    // Used for measuring wheel scrolling granularity\\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\\n\\n    // True when shift is held down.\\n    d.shift = false;\\n\\n    // Used to track whether anything happened since the context menu\\n    // was opened.\\n    d.selForContextMenu = null;\\n\\n    d.activeTouch = null;\\n\\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\\n    renderGutters(d);\\n\\n    input.init(d);\\n  }\\n\\n  // Since the delta values reported on mouse wheel events are\\n  // unstandardized between browsers and even browser versions, and\\n  // generally horribly unpredictable, this code starts by measuring\\n  // the scroll effect that the first few mouse wheel events have,\\n  // and, from that, detects the way it can convert deltas to pixel\\n  // offsets afterwards.\\n  //\\n  // The reason we want to know the amount a wheel event will scroll\\n  // is that it gives us a chance to update the display before the\\n  // actual scrolling happens, reducing flickering.\\n\\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\\n  // Fill in a browser-detected starting value on browsers where we\\n  // know one. These don't have to be accurate -- the result of them\\n  // being wrong would just be a slight flicker on the first wheel\\n  // scroll (if it is large enough).\\n  if (ie) { wheelPixelsPerUnit = -.53; }\\n  else if (gecko) { wheelPixelsPerUnit = 15; }\\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\\n\\n  function wheelEventDelta(e) {\\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\\n    else if (dy == null) { dy = e.wheelDelta; }\\n    return {x: dx, y: dy}\\n  }\\n  function wheelEventPixels(e) {\\n    var delta = wheelEventDelta(e);\\n    delta.x *= wheelPixelsPerUnit;\\n    delta.y *= wheelPixelsPerUnit;\\n    return delta\\n  }\\n\\n  function onScrollWheel(cm, e) {\\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\\n\\n    var display = cm.display, scroll = display.scroller;\\n    // Quit if there's nothing to scroll here\\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\\n\\n    // Webkit browsers on OS X abort momentum scrolls when the target\\n    // of the scroll event is removed from the scrollable element.\\n    // This hack (see related code in patchDisplay) makes sure the\\n    // element is kept around.\\n    if (dy && mac && webkit) {\\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\\n        for (var i = 0; i < view.length; i++) {\\n          if (view[i].node == cur) {\\n            cm.display.currentWheelTarget = cur;\\n            break outer\\n          }\\n        }\\n      }\\n    }\\n\\n    // On some browsers, horizontal scrolling will cause redraws to\\n    // happen before the gutter has been realigned, causing it to\\n    // wriggle around in a most unseemly way. When we have an\\n    // estimated pixels/delta value, we just handle horizontal\\n    // scrolling entirely here. It'll be slightly off from native, but\\n    // better than glitching out.\\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\\n      if (dy && canScrollY)\\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\\n      // Only prevent default scrolling if vertical scrolling is\\n      // actually possible. Otherwise, it causes vertical scroll\\n      // jitter on OSX trackpads when deltaX is small and deltaY\\n      // is large (issue #3579)\\n      if (!dy || (dy && canScrollY))\\n        { e_preventDefault(e); }\\n      display.wheelStartX = null; // Abort measurement, if in progress\\n      return\\n    }\\n\\n    // 'Project' the visible viewport to cover the area that is being\\n    // scrolled into view (if we know enough to estimate it).\\n    if (dy && wheelPixelsPerUnit != null) {\\n      var pixels = dy * wheelPixelsPerUnit;\\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\\n      updateDisplaySimple(cm, {top: top, bottom: bot});\\n    }\\n\\n    if (wheelSamples < 20) {\\n      if (display.wheelStartX == null) {\\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\\n        display.wheelDX = dx; display.wheelDY = dy;\\n        setTimeout(function () {\\n          if (display.wheelStartX == null) { return }\\n          var movedX = scroll.scrollLeft - display.wheelStartX;\\n          var movedY = scroll.scrollTop - display.wheelStartY;\\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\\n            (movedX && display.wheelDX && movedX / display.wheelDX);\\n          display.wheelStartX = display.wheelStartY = null;\\n          if (!sample) { return }\\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\\n          ++wheelSamples;\\n        }, 200);\\n      } else {\\n        display.wheelDX += dx; display.wheelDY += dy;\\n      }\\n    }\\n  }\\n\\n  // Selection objects are immutable. A new one is created every time\\n  // the selection changes. A selection is one or more non-overlapping\\n  // (and non-touching) ranges, sorted, and an integer that indicates\\n  // which one is the primary selection (the one that's scrolled into\\n  // view, that getCursor returns, etc).\\n  var Selection = function(ranges, primIndex) {\\n    this.ranges = ranges;\\n    this.primIndex = primIndex;\\n  };\\n\\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\\n\\n  Selection.prototype.equals = function (other) {\\n      var this$1 = this;\\n\\n    if (other == this) { return true }\\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\\n    for (var i = 0; i < this.ranges.length; i++) {\\n      var here = this$1.ranges[i], there = other.ranges[i];\\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\\n    }\\n    return true\\n  };\\n\\n  Selection.prototype.deepCopy = function () {\\n      var this$1 = this;\\n\\n    var out = [];\\n    for (var i = 0; i < this.ranges.length; i++)\\n      { out[i] = new Range(copyPos(this$1.ranges[i].anchor), copyPos(this$1.ranges[i].head)); }\\n    return new Selection(out, this.primIndex)\\n  };\\n\\n  Selection.prototype.somethingSelected = function () {\\n      var this$1 = this;\\n\\n    for (var i = 0; i < this.ranges.length; i++)\\n      { if (!this$1.ranges[i].empty()) { return true } }\\n    return false\\n  };\\n\\n  Selection.prototype.contains = function (pos, end) {\\n      var this$1 = this;\\n\\n    if (!end) { end = pos; }\\n    for (var i = 0; i < this.ranges.length; i++) {\\n      var range = this$1.ranges[i];\\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\\n        { return i }\\n    }\\n    return -1\\n  };\\n\\n  var Range = function(anchor, head) {\\n    this.anchor = anchor; this.head = head;\\n  };\\n\\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\\n\\n  // Take an unsorted, potentially overlapping set of ranges, and\\n  // build a selection out of it. 'Consumes' ranges array (modifying\\n  // it).\\n  function normalizeSelection(cm, ranges, primIndex) {\\n    var mayTouch = cm && cm.options.selectionsMayTouch;\\n    var prim = ranges[primIndex];\\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\\n    primIndex = indexOf(ranges, prim);\\n    for (var i = 1; i < ranges.length; i++) {\\n      var cur = ranges[i], prev = ranges[i - 1];\\n      var diff = cmp(prev.to(), cur.from());\\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\\n        if (i <= primIndex) { --primIndex; }\\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\\n      }\\n    }\\n    return new Selection(ranges, primIndex)\\n  }\\n\\n  function simpleSelection(anchor, head) {\\n    return new Selection([new Range(anchor, head || anchor)], 0)\\n  }\\n\\n  // Compute the position of the end of a change (its 'to' property\\n  // refers to the pre-change end).\\n  function changeEnd(change) {\\n    if (!change.text) { return change.to }\\n    return Pos(change.from.line + change.text.length - 1,\\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\\n  }\\n\\n  // Adjust a position to refer to the post-change position of the\\n  // same text, or the end of the change if the change covers it.\\n  function adjustForChange(pos, change) {\\n    if (cmp(pos, change.from) < 0) { return pos }\\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\\n\\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\\n    return Pos(line, ch)\\n  }\\n\\n  function computeSelAfterChange(doc, change) {\\n    var out = [];\\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\\n      var range = doc.sel.ranges[i];\\n      out.push(new Range(adjustForChange(range.anchor, change),\\n                         adjustForChange(range.head, change)));\\n    }\\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\\n  }\\n\\n  function offsetPos(pos, old, nw) {\\n    if (pos.line == old.line)\\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\\n    else\\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\\n  }\\n\\n  // Used by replaceSelections to allow moving the selection to the\\n  // start or around the replaced test. Hint may be \\\"start\\\" or \\\"around\\\".\\n  function computeReplacedSel(doc, changes, hint) {\\n    var out = [];\\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\\n    for (var i = 0; i < changes.length; i++) {\\n      var change = changes[i];\\n      var from = offsetPos(change.from, oldPrev, newPrev);\\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\\n      oldPrev = change.to;\\n      newPrev = to;\\n      if (hint == \\\"around\\\") {\\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\\n        out[i] = new Range(inv ? to : from, inv ? from : to);\\n      } else {\\n        out[i] = new Range(from, from);\\n      }\\n    }\\n    return new Selection(out, doc.sel.primIndex)\\n  }\\n\\n  // Used to get the editor into a consistent state again when options change.\\n\\n  function loadMode(cm) {\\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\\n    resetModeState(cm);\\n  }\\n\\n  function resetModeState(cm) {\\n    cm.doc.iter(function (line) {\\n      if (line.stateAfter) { line.stateAfter = null; }\\n      if (line.styles) { line.styles = null; }\\n    });\\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\\n    startWorker(cm, 100);\\n    cm.state.modeGen++;\\n    if (cm.curOp) { regChange(cm); }\\n  }\\n\\n  // DOCUMENT DATA STRUCTURE\\n\\n  // By default, updates that start and end at the beginning of a line\\n  // are treated specially, in order to make the association of line\\n  // widgets and marker elements with the text behave more intuitive.\\n  function isWholeLineUpdate(doc, change) {\\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \\\"\\\" &&\\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\\n  }\\n\\n  // Perform a change on the document data structure.\\n  function updateDoc(doc, change, markedSpans, estimateHeight$$1) {\\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\\n    function update(line, text, spans) {\\n      updateLine(line, text, spans, estimateHeight$$1);\\n      signalLater(line, \\\"change\\\", line, change);\\n    }\\n    function linesFor(start, end) {\\n      var result = [];\\n      for (var i = start; i < end; ++i)\\n        { result.push(new Line(text[i], spansFor(i), estimateHeight$$1)); }\\n      return result\\n    }\\n\\n    var from = change.from, to = change.to, text = change.text;\\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\\n\\n    // Adjust the line structure\\n    if (change.full) {\\n      doc.insert(0, linesFor(0, text.length));\\n      doc.remove(text.length, doc.size - text.length);\\n    } else if (isWholeLineUpdate(doc, change)) {\\n      // This is a whole-line replace. Treated specially to make\\n      // sure line objects move the way they are supposed to.\\n      var added = linesFor(0, text.length - 1);\\n      update(lastLine, lastLine.text, lastSpans);\\n      if (nlines) { doc.remove(from.line, nlines); }\\n      if (added.length) { doc.insert(from.line, added); }\\n    } else if (firstLine == lastLine) {\\n      if (text.length == 1) {\\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\\n      } else {\\n        var added$1 = linesFor(1, text.length - 1);\\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\\n        doc.insert(from.line + 1, added$1);\\n      }\\n    } else if (text.length == 1) {\\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\\n      doc.remove(from.line + 1, nlines);\\n    } else {\\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\\n      var added$2 = linesFor(1, text.length - 1);\\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\\n      doc.insert(from.line + 1, added$2);\\n    }\\n\\n    signalLater(doc, \\\"change\\\", doc, change);\\n  }\\n\\n  // Call f for all linked documents.\\n  function linkedDocs(doc, f, sharedHistOnly) {\\n    function propagate(doc, skip, sharedHist) {\\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\\n        var rel = doc.linked[i];\\n        if (rel.doc == skip) { continue }\\n        var shared = sharedHist && rel.sharedHist;\\n        if (sharedHistOnly && !shared) { continue }\\n        f(rel.doc, shared);\\n        propagate(rel.doc, doc, shared);\\n      } }\\n    }\\n    propagate(doc, null, true);\\n  }\\n\\n  // Attach a document to an editor.\\n  function attachDoc(cm, doc) {\\n    if (doc.cm) { throw new Error(\\\"This document is already in use.\\\") }\\n    cm.doc = doc;\\n    doc.cm = cm;\\n    estimateLineHeights(cm);\\n    loadMode(cm);\\n    setDirectionClass(cm);\\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\\n    cm.options.mode = doc.modeOption;\\n    regChange(cm);\\n  }\\n\\n  function setDirectionClass(cm) {\\n  (cm.doc.direction == \\\"rtl\\\" ? addClass : rmClass)(cm.display.lineDiv, \\\"CodeMirror-rtl\\\");\\n  }\\n\\n  function directionChanged(cm) {\\n    runInOp(cm, function () {\\n      setDirectionClass(cm);\\n      regChange(cm);\\n    });\\n  }\\n\\n  function History(startGen) {\\n    // Arrays of change events and selections. Doing something adds an\\n    // event to done and clears undo. Undoing moves events from done\\n    // to undone, redoing moves them in the other direction.\\n    this.done = []; this.undone = [];\\n    this.undoDepth = Infinity;\\n    // Used to track when changes can be merged into a single undo\\n    // event\\n    this.lastModTime = this.lastSelTime = 0;\\n    this.lastOp = this.lastSelOp = null;\\n    this.lastOrigin = this.lastSelOrigin = null;\\n    // Used by the isClean() method\\n    this.generation = this.maxGeneration = startGen || 1;\\n  }\\n\\n  // Create a history change event from an updateDoc-style change\\n  // object.\\n  function historyChangeFromChange(doc, change) {\\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\\n    return histChange\\n  }\\n\\n  // Pop all selection events off the end of a history array. Stop at\\n  // a change event.\\n  function clearSelectionEvents(array) {\\n    while (array.length) {\\n      var last = lst(array);\\n      if (last.ranges) { array.pop(); }\\n      else { break }\\n    }\\n  }\\n\\n  // Find the top change event in the history. Pop off selection\\n  // events that are in the way.\\n  function lastChangeEvent(hist, force) {\\n    if (force) {\\n      clearSelectionEvents(hist.done);\\n      return lst(hist.done)\\n    } else if (hist.done.length && !lst(hist.done).ranges) {\\n      return lst(hist.done)\\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\\n      hist.done.pop();\\n      return lst(hist.done)\\n    }\\n  }\\n\\n  // Register a change in the history. Merges changes that are within\\n  // a single operation, or are close together with an origin that\\n  // allows merging (starting with \\\"+\\\") into a single event.\\n  function addChangeToHistory(doc, change, selAfter, opId) {\\n    var hist = doc.history;\\n    hist.undone.length = 0;\\n    var time = +new Date, cur;\\n    var last;\\n\\n    if ((hist.lastOp == opId ||\\n         hist.lastOrigin == change.origin && change.origin &&\\n         ((change.origin.charAt(0) == \\\"+\\\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\\n          change.origin.charAt(0) == \\\"*\\\")) &&\\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\\n      // Merge this change into the last event\\n      last = lst(cur.changes);\\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\\n        // Optimized case for simple insertion -- don't want to add\\n        // new changesets for every character typed\\n        last.to = changeEnd(change);\\n      } else {\\n        // Add new sub-event\\n        cur.changes.push(historyChangeFromChange(doc, change));\\n      }\\n    } else {\\n      // Can not be merged, start a new event.\\n      var before = lst(hist.done);\\n      if (!before || !before.ranges)\\n        { pushSelectionToHistory(doc.sel, hist.done); }\\n      cur = {changes: [historyChangeFromChange(doc, change)],\\n             generation: hist.generation};\\n      hist.done.push(cur);\\n      while (hist.done.length > hist.undoDepth) {\\n        hist.done.shift();\\n        if (!hist.done[0].ranges) { hist.done.shift(); }\\n      }\\n    }\\n    hist.done.push(selAfter);\\n    hist.generation = ++hist.maxGeneration;\\n    hist.lastModTime = hist.lastSelTime = time;\\n    hist.lastOp = hist.lastSelOp = opId;\\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\\n\\n    if (!last) { signal(doc, \\\"historyAdded\\\"); }\\n  }\\n\\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\\n    var ch = origin.charAt(0);\\n    return ch == \\\"*\\\" ||\\n      ch == \\\"+\\\" &&\\n      prev.ranges.length == sel.ranges.length &&\\n      prev.somethingSelected() == sel.somethingSelected() &&\\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\\n  }\\n\\n  // Called whenever the selection changes, sets the new selection as\\n  // the pending selection in the history, and pushes the old pending\\n  // selection into the 'done' array when it was significantly\\n  // different (in number of selected ranges, emptiness, or time).\\n  function addSelectionToHistory(doc, sel, opId, options) {\\n    var hist = doc.history, origin = options && options.origin;\\n\\n    // A new event is started when the previous origin does not match\\n    // the current, or the origins don't allow matching. Origins\\n    // starting with * are always merged, those starting with + are\\n    // merged when similar and close together in time.\\n    if (opId == hist.lastSelOp ||\\n        (origin && hist.lastSelOrigin == origin &&\\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\\n      { hist.done[hist.done.length - 1] = sel; }\\n    else\\n      { pushSelectionToHistory(sel, hist.done); }\\n\\n    hist.lastSelTime = +new Date;\\n    hist.lastSelOrigin = origin;\\n    hist.lastSelOp = opId;\\n    if (options && options.clearRedo !== false)\\n      { clearSelectionEvents(hist.undone); }\\n  }\\n\\n  function pushSelectionToHistory(sel, dest) {\\n    var top = lst(dest);\\n    if (!(top && top.ranges && top.equals(sel)))\\n      { dest.push(sel); }\\n  }\\n\\n  // Used to store marked span information in the history.\\n  function attachLocalSpans(doc, change, from, to) {\\n    var existing = change[\\\"spans_\\\" + doc.id], n = 0;\\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\\n      if (line.markedSpans)\\n        { (existing || (existing = change[\\\"spans_\\\" + doc.id] = {}))[n] = line.markedSpans; }\\n      ++n;\\n    });\\n  }\\n\\n  // When un/re-doing restores text containing marked spans, those\\n  // that have been explicitly cleared should not be restored.\\n  function removeClearedSpans(spans) {\\n    if (!spans) { return null }\\n    var out;\\n    for (var i = 0; i < spans.length; ++i) {\\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\\n      else if (out) { out.push(spans[i]); }\\n    }\\n    return !out ? spans : out.length ? out : null\\n  }\\n\\n  // Retrieve and filter the old marked spans stored in a change event.\\n  function getOldSpans(doc, change) {\\n    var found = change[\\\"spans_\\\" + doc.id];\\n    if (!found) { return null }\\n    var nw = [];\\n    for (var i = 0; i < change.text.length; ++i)\\n      { nw.push(removeClearedSpans(found[i])); }\\n    return nw\\n  }\\n\\n  // Used for un/re-doing changes from the history. Combines the\\n  // result of computing the existing spans with the set of spans that\\n  // existed in the history (so that deleting around a span and then\\n  // undoing brings back the span).\\n  function mergeOldSpans(doc, change) {\\n    var old = getOldSpans(doc, change);\\n    var stretched = stretchSpansOverChange(doc, change);\\n    if (!old) { return stretched }\\n    if (!stretched) { return old }\\n\\n    for (var i = 0; i < old.length; ++i) {\\n      var oldCur = old[i], stretchCur = stretched[i];\\n      if (oldCur && stretchCur) {\\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\\n          var span = stretchCur[j];\\n          for (var k = 0; k < oldCur.length; ++k)\\n            { if (oldCur[k].marker == span.marker) { continue spans } }\\n          oldCur.push(span);\\n        }\\n      } else if (stretchCur) {\\n        old[i] = stretchCur;\\n      }\\n    }\\n    return old\\n  }\\n\\n  // Used both to provide a JSON-safe object in .getHistory, and, when\\n  // detaching a document, to split the history in two\\n  function copyHistoryArray(events, newGroup, instantiateSel) {\\n    var copy = [];\\n    for (var i = 0; i < events.length; ++i) {\\n      var event = events[i];\\n      if (event.ranges) {\\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\\n        continue\\n      }\\n      var changes = event.changes, newChanges = [];\\n      copy.push({changes: newChanges});\\n      for (var j = 0; j < changes.length; ++j) {\\n        var change = changes[j], m = (void 0);\\n        newChanges.push({from: change.from, to: change.to, text: change.text});\\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\\\d+)$/)) {\\n          if (indexOf(newGroup, Number(m[1])) > -1) {\\n            lst(newChanges)[prop] = change[prop];\\n            delete change[prop];\\n          }\\n        } } }\\n      }\\n    }\\n    return copy\\n  }\\n\\n  // The 'scroll' parameter given to many of these indicated whether\\n  // the new cursor position should be scrolled into view after\\n  // modifying the selection.\\n\\n  // If shift is held or the extend flag is set, extends a range to\\n  // include a given position (and optionally a second position).\\n  // Otherwise, simply returns the range between the given positions.\\n  // Used for cursor motion and such.\\n  function extendRange(range, head, other, extend) {\\n    if (extend) {\\n      var anchor = range.anchor;\\n      if (other) {\\n        var posBefore = cmp(head, anchor) < 0;\\n        if (posBefore != (cmp(other, anchor) < 0)) {\\n          anchor = head;\\n          head = other;\\n        } else if (posBefore != (cmp(head, other) < 0)) {\\n          head = other;\\n        }\\n      }\\n      return new Range(anchor, head)\\n    } else {\\n      return new Range(other || head, head)\\n    }\\n  }\\n\\n  // Extend the primary selection range, discard the rest.\\n  function extendSelection(doc, head, other, options, extend) {\\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\\n  }\\n\\n  // Extend all selections (pos is an array of selections with length\\n  // equal the number of selections)\\n  function extendSelections(doc, heads, options) {\\n    var out = [];\\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\\n    for (var i = 0; i < doc.sel.ranges.length; i++)\\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\\n    setSelection(doc, newSel, options);\\n  }\\n\\n  // Updates a single range in the selection.\\n  function replaceOneSelection(doc, i, range, options) {\\n    var ranges = doc.sel.ranges.slice(0);\\n    ranges[i] = range;\\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\\n  }\\n\\n  // Reset the selection to a single range.\\n  function setSimpleSelection(doc, anchor, head, options) {\\n    setSelection(doc, simpleSelection(anchor, head), options);\\n  }\\n\\n  // Give beforeSelectionChange handlers a change to influence a\\n  // selection update.\\n  function filterSelectionChange(doc, sel, options) {\\n    var obj = {\\n      ranges: sel.ranges,\\n      update: function(ranges) {\\n        var this$1 = this;\\n\\n        this.ranges = [];\\n        for (var i = 0; i < ranges.length; i++)\\n          { this$1.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\\n                                     clipPos(doc, ranges[i].head)); }\\n      },\\n      origin: options && options.origin\\n    };\\n    signal(doc, \\\"beforeSelectionChange\\\", doc, obj);\\n    if (doc.cm) { signal(doc.cm, \\\"beforeSelectionChange\\\", doc.cm, obj); }\\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\\n    else { return sel }\\n  }\\n\\n  function setSelectionReplaceHistory(doc, sel, options) {\\n    var done = doc.history.done, last = lst(done);\\n    if (last && last.ranges) {\\n      done[done.length - 1] = sel;\\n      setSelectionNoUndo(doc, sel, options);\\n    } else {\\n      setSelection(doc, sel, options);\\n    }\\n  }\\n\\n  // Set a new selection.\\n  function setSelection(doc, sel, options) {\\n    setSelectionNoUndo(doc, sel, options);\\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\\n  }\\n\\n  function setSelectionNoUndo(doc, sel, options) {\\n    if (hasHandler(doc, \\\"beforeSelectionChange\\\") || doc.cm && hasHandler(doc.cm, \\\"beforeSelectionChange\\\"))\\n      { sel = filterSelectionChange(doc, sel, options); }\\n\\n    var bias = options && options.bias ||\\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\\n\\n    if (!(options && options.scroll === false) && doc.cm)\\n      { ensureCursorVisible(doc.cm); }\\n  }\\n\\n  function setSelectionInner(doc, sel) {\\n    if (sel.equals(doc.sel)) { return }\\n\\n    doc.sel = sel;\\n\\n    if (doc.cm) {\\n      doc.cm.curOp.updateInput = 1;\\n      doc.cm.curOp.selectionChanged = true;\\n      signalCursorActivity(doc.cm);\\n    }\\n    signalLater(doc, \\\"cursorActivity\\\", doc);\\n  }\\n\\n  // Verify that the selection does not partially select any atomic\\n  // marked ranges.\\n  function reCheckSelection(doc) {\\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\\n  }\\n\\n  // Return a selection that does not partially select any atomic\\n  // ranges.\\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\\n    var out;\\n    for (var i = 0; i < sel.ranges.length; i++) {\\n      var range = sel.ranges[i];\\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\\n      if (out || newAnchor != range.anchor || newHead != range.head) {\\n        if (!out) { out = sel.ranges.slice(0, i); }\\n        out[i] = new Range(newAnchor, newHead);\\n      }\\n    }\\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\\n  }\\n\\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\\n    var line = getLine(doc, pos.line);\\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\\n      var sp = line.markedSpans[i], m = sp.marker;\\n\\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\\n      // is with selectLeft/Right\\n      var preventCursorLeft = (\\\"selectLeft\\\" in m) ? !m.selectLeft : m.inclusiveLeft;\\n      var preventCursorRight = (\\\"selectRight\\\" in m) ? !m.selectRight : m.inclusiveRight;\\n\\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\\n        if (mayClear) {\\n          signal(m, \\\"beforeCursorEnter\\\");\\n          if (m.explicitlyCleared) {\\n            if (!line.markedSpans) { break }\\n            else {--i; continue}\\n          }\\n        }\\n        if (!m.atomic) { continue }\\n\\n        if (oldPos) {\\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\\n        }\\n\\n        var far = m.find(dir < 0 ? -1 : 1);\\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\\n      }\\n    } }\\n    return pos\\n  }\\n\\n  // Ensure a given position is not inside an atomic range.\\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\\n    var dir = bias || 1;\\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\\n    if (!found) {\\n      doc.cantEdit = true;\\n      return Pos(doc.first, 0)\\n    }\\n    return found\\n  }\\n\\n  function movePos(doc, pos, dir, line) {\\n    if (dir < 0 && pos.ch == 0) {\\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\\n      else { return null }\\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\\n      else { return null }\\n    } else {\\n      return new Pos(pos.line, pos.ch + dir)\\n    }\\n  }\\n\\n  function selectAll(cm) {\\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\\n  }\\n\\n  // UPDATING\\n\\n  // Allow \\\"beforeChange\\\" event handlers to influence a change\\n  function filterChange(doc, change, update) {\\n    var obj = {\\n      canceled: false,\\n      from: change.from,\\n      to: change.to,\\n      text: change.text,\\n      origin: change.origin,\\n      cancel: function () { return obj.canceled = true; }\\n    };\\n    if (update) { obj.update = function (from, to, text, origin) {\\n      if (from) { obj.from = clipPos(doc, from); }\\n      if (to) { obj.to = clipPos(doc, to); }\\n      if (text) { obj.text = text; }\\n      if (origin !== undefined) { obj.origin = origin; }\\n    }; }\\n    signal(doc, \\\"beforeChange\\\", doc, obj);\\n    if (doc.cm) { signal(doc.cm, \\\"beforeChange\\\", doc.cm, obj); }\\n\\n    if (obj.canceled) {\\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\\n      return null\\n    }\\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\\n  }\\n\\n  // Apply a change to a document, and add it to the document's\\n  // history, and propagating it to all linked documents.\\n  function makeChange(doc, change, ignoreReadOnly) {\\n    if (doc.cm) {\\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\\n      if (doc.cm.state.suppressEdits) { return }\\n    }\\n\\n    if (hasHandler(doc, \\\"beforeChange\\\") || doc.cm && hasHandler(doc.cm, \\\"beforeChange\\\")) {\\n      change = filterChange(doc, change, true);\\n      if (!change) { return }\\n    }\\n\\n    // Possibly split or suppress the update based on the presence\\n    // of read-only spans in its range.\\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\\n    if (split) {\\n      for (var i = split.length - 1; i >= 0; --i)\\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\\\"\\\"] : change.text, origin: change.origin}); }\\n    } else {\\n      makeChangeInner(doc, change);\\n    }\\n  }\\n\\n  function makeChangeInner(doc, change) {\\n    if (change.text.length == 1 && change.text[0] == \\\"\\\" && cmp(change.from, change.to) == 0) { return }\\n    var selAfter = computeSelAfterChange(doc, change);\\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\\n\\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\\n    var rebased = [];\\n\\n    linkedDocs(doc, function (doc, sharedHist) {\\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\\n        rebaseHist(doc.history, change);\\n        rebased.push(doc.history);\\n      }\\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\\n    });\\n  }\\n\\n  // Revert a change stored in a document's history.\\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\\n    if (suppress && !allowSelectionOnly) { return }\\n\\n    var hist = doc.history, event, selAfter = doc.sel;\\n    var source = type == \\\"undo\\\" ? hist.done : hist.undone, dest = type == \\\"undo\\\" ? hist.undone : hist.done;\\n\\n    // Verify that there is a useable event (so that ctrl-z won't\\n    // needlessly clear selection events)\\n    var i = 0;\\n    for (; i < source.length; i++) {\\n      event = source[i];\\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\\n        { break }\\n    }\\n    if (i == source.length) { return }\\n    hist.lastOrigin = hist.lastSelOrigin = null;\\n\\n    for (;;) {\\n      event = source.pop();\\n      if (event.ranges) {\\n        pushSelectionToHistory(event, dest);\\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\\n          setSelection(doc, event, {clearRedo: false});\\n          return\\n        }\\n        selAfter = event;\\n      } else if (suppress) {\\n        source.push(event);\\n        return\\n      } else { break }\\n    }\\n\\n    // Build up a reverse change object to add to the opposite history\\n    // stack (redo when undoing, and vice versa).\\n    var antiChanges = [];\\n    pushSelectionToHistory(selAfter, dest);\\n    dest.push({changes: antiChanges, generation: hist.generation});\\n    hist.generation = event.generation || ++hist.maxGeneration;\\n\\n    var filter = hasHandler(doc, \\\"beforeChange\\\") || doc.cm && hasHandler(doc.cm, \\\"beforeChange\\\");\\n\\n    var loop = function ( i ) {\\n      var change = event.changes[i];\\n      change.origin = type;\\n      if (filter && !filterChange(doc, change, false)) {\\n        source.length = 0;\\n        return {}\\n      }\\n\\n      antiChanges.push(historyChangeFromChange(doc, change));\\n\\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\\n      var rebased = [];\\n\\n      // Propagate to the linked documents\\n      linkedDocs(doc, function (doc, sharedHist) {\\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\\n          rebaseHist(doc.history, change);\\n          rebased.push(doc.history);\\n        }\\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\\n      });\\n    };\\n\\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\\n      var returned = loop( i$1 );\\n\\n      if ( returned ) return returned.v;\\n    }\\n  }\\n\\n  // Sub-views need their line numbers shifted when text is added\\n  // above or below them in the parent document.\\n  function shiftDoc(doc, distance) {\\n    if (distance == 0) { return }\\n    doc.first += distance;\\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\\n      Pos(range.anchor.line + distance, range.anchor.ch),\\n      Pos(range.head.line + distance, range.head.ch)\\n    ); }), doc.sel.primIndex);\\n    if (doc.cm) {\\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\\n        { regLineChange(doc.cm, l, \\\"gutter\\\"); }\\n    }\\n  }\\n\\n  // More lower-level change function, handling only a single document\\n  // (not linked ones).\\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\\n    if (doc.cm && !doc.cm.curOp)\\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\\n\\n    if (change.to.line < doc.first) {\\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\\n      return\\n    }\\n    if (change.from.line > doc.lastLine()) { return }\\n\\n    // Clip the change to the size of this doc\\n    if (change.from.line < doc.first) {\\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\\n      shiftDoc(doc, shift);\\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\\n                text: [lst(change.text)], origin: change.origin};\\n    }\\n    var last = doc.lastLine();\\n    if (change.to.line > last) {\\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\\n                text: [change.text[0]], origin: change.origin};\\n    }\\n\\n    change.removed = getBetween(doc, change.from, change.to);\\n\\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\\n    else { updateDoc(doc, change, spans); }\\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\\n\\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\\n      { doc.cantEdit = false; }\\n  }\\n\\n  // Handle the interaction of a change to a document with the editor\\n  // that this document is part of.\\n  function makeChangeSingleDocInEditor(cm, change, spans) {\\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\\n\\n    var recomputeMaxLength = false, checkWidthStart = from.line;\\n    if (!cm.options.lineWrapping) {\\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\\n        if (line == display.maxLine) {\\n          recomputeMaxLength = true;\\n          return true\\n        }\\n      });\\n    }\\n\\n    if (doc.sel.contains(change.from, change.to) > -1)\\n      { signalCursorActivity(cm); }\\n\\n    updateDoc(doc, change, spans, estimateHeight(cm));\\n\\n    if (!cm.options.lineWrapping) {\\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\\n        var len = lineLength(line);\\n        if (len > display.maxLineLength) {\\n          display.maxLine = line;\\n          display.maxLineLength = len;\\n          display.maxLineChanged = true;\\n          recomputeMaxLength = false;\\n        }\\n      });\\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\\n    }\\n\\n    retreatFrontier(doc, from.line);\\n    startWorker(cm, 400);\\n\\n    var lendiff = change.text.length - (to.line - from.line) - 1;\\n    // Remember that these lines changed, for updating the display\\n    if (change.full)\\n      { regChange(cm); }\\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\\n      { regLineChange(cm, from.line, \\\"text\\\"); }\\n    else\\n      { regChange(cm, from.line, to.line + 1, lendiff); }\\n\\n    var changesHandler = hasHandler(cm, \\\"changes\\\"), changeHandler = hasHandler(cm, \\\"change\\\");\\n    if (changeHandler || changesHandler) {\\n      var obj = {\\n        from: from, to: to,\\n        text: change.text,\\n        removed: change.removed,\\n        origin: change.origin\\n      };\\n      if (changeHandler) { signalLater(cm, \\\"change\\\", cm, obj); }\\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\\n    }\\n    cm.display.selForContextMenu = null;\\n  }\\n\\n  function replaceRange(doc, code, from, to, origin) {\\n    var assign;\\n\\n    if (!to) { to = from; }\\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\\n    if (typeof code == \\\"string\\\") { code = doc.splitLines(code); }\\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\\n  }\\n\\n  // Rebasing/resetting history to deal with externally-sourced changes\\n\\n  function rebaseHistSelSingle(pos, from, to, diff) {\\n    if (to < pos.line) {\\n      pos.line += diff;\\n    } else if (from < pos.line) {\\n      pos.line = from;\\n      pos.ch = 0;\\n    }\\n  }\\n\\n  // Tries to rebase an array of history events given a change in the\\n  // document. If the change touches the same lines as the event, the\\n  // event, and everything 'behind' it, is discarded. If the change is\\n  // before the event, the event's positions are updated. Uses a\\n  // copy-on-write scheme for the positions, to avoid having to\\n  // reallocate them all on every rebase, but also avoid problems with\\n  // shared position objects being unsafely updated.\\n  function rebaseHistArray(array, from, to, diff) {\\n    for (var i = 0; i < array.length; ++i) {\\n      var sub = array[i], ok = true;\\n      if (sub.ranges) {\\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\\n        for (var j = 0; j < sub.ranges.length; j++) {\\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\\n        }\\n        continue\\n      }\\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\\n        var cur = sub.changes[j$1];\\n        if (to < cur.from.line) {\\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\\n        } else if (from <= cur.to.line) {\\n          ok = false;\\n          break\\n        }\\n      }\\n      if (!ok) {\\n        array.splice(0, i + 1);\\n        i = 0;\\n      }\\n    }\\n  }\\n\\n  function rebaseHist(hist, change) {\\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\\n    rebaseHistArray(hist.done, from, to, diff);\\n    rebaseHistArray(hist.undone, from, to, diff);\\n  }\\n\\n  // Utility for applying a change to a line by handle or number,\\n  // returning the number and optionally registering the line as\\n  // changed.\\n  function changeLine(doc, handle, changeType, op) {\\n    var no = handle, line = handle;\\n    if (typeof handle == \\\"number\\\") { line = getLine(doc, clipLine(doc, handle)); }\\n    else { no = lineNo(handle); }\\n    if (no == null) { return null }\\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\\n    return line\\n  }\\n\\n  // The document is represented as a BTree consisting of leaves, with\\n  // chunk of lines in them, and branches, with up to ten leaves or\\n  // other branch nodes below them. The top node is always a branch\\n  // node, and is the document object itself (meaning it has\\n  // additional methods and properties).\\n  //\\n  // All nodes have parent links. The tree is used both to go from\\n  // line numbers to line objects, and to go from objects to numbers.\\n  // It also indexes by height, and is used to convert between height\\n  // and line object, and to find the total height of the document.\\n  //\\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\\n\\n  function LeafChunk(lines) {\\n    var this$1 = this;\\n\\n    this.lines = lines;\\n    this.parent = null;\\n    var height = 0;\\n    for (var i = 0; i < lines.length; ++i) {\\n      lines[i].parent = this$1;\\n      height += lines[i].height;\\n    }\\n    this.height = height;\\n  }\\n\\n  LeafChunk.prototype = {\\n    chunkSize: function() { return this.lines.length },\\n\\n    // Remove the n lines at offset 'at'.\\n    removeInner: function(at, n) {\\n      var this$1 = this;\\n\\n      for (var i = at, e = at + n; i < e; ++i) {\\n        var line = this$1.lines[i];\\n        this$1.height -= line.height;\\n        cleanUpLine(line);\\n        signalLater(line, \\\"delete\\\");\\n      }\\n      this.lines.splice(at, n);\\n    },\\n\\n    // Helper used to collapse a small branch into a single leaf.\\n    collapse: function(lines) {\\n      lines.push.apply(lines, this.lines);\\n    },\\n\\n    // Insert the given array of lines at offset 'at', count them as\\n    // having the given height.\\n    insertInner: function(at, lines, height) {\\n      var this$1 = this;\\n\\n      this.height += height;\\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this$1; }\\n    },\\n\\n    // Used to iterate over a part of the tree.\\n    iterN: function(at, n, op) {\\n      var this$1 = this;\\n\\n      for (var e = at + n; at < e; ++at)\\n        { if (op(this$1.lines[at])) { return true } }\\n    }\\n  };\\n\\n  function BranchChunk(children) {\\n    var this$1 = this;\\n\\n    this.children = children;\\n    var size = 0, height = 0;\\n    for (var i = 0; i < children.length; ++i) {\\n      var ch = children[i];\\n      size += ch.chunkSize(); height += ch.height;\\n      ch.parent = this$1;\\n    }\\n    this.size = size;\\n    this.height = height;\\n    this.parent = null;\\n  }\\n\\n  BranchChunk.prototype = {\\n    chunkSize: function() { return this.size },\\n\\n    removeInner: function(at, n) {\\n      var this$1 = this;\\n\\n      this.size -= n;\\n      for (var i = 0; i < this.children.length; ++i) {\\n        var child = this$1.children[i], sz = child.chunkSize();\\n        if (at < sz) {\\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\\n          child.removeInner(at, rm);\\n          this$1.height -= oldHeight - child.height;\\n          if (sz == rm) { this$1.children.splice(i--, 1); child.parent = null; }\\n          if ((n -= rm) == 0) { break }\\n          at = 0;\\n        } else { at -= sz; }\\n      }\\n      // If the result is smaller than 25 lines, ensure that it is a\\n      // single leaf node.\\n      if (this.size - n < 25 &&\\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\\n        var lines = [];\\n        this.collapse(lines);\\n        this.children = [new LeafChunk(lines)];\\n        this.children[0].parent = this;\\n      }\\n    },\\n\\n    collapse: function(lines) {\\n      var this$1 = this;\\n\\n      for (var i = 0; i < this.children.length; ++i) { this$1.children[i].collapse(lines); }\\n    },\\n\\n    insertInner: function(at, lines, height) {\\n      var this$1 = this;\\n\\n      this.size += lines.length;\\n      this.height += height;\\n      for (var i = 0; i < this.children.length; ++i) {\\n        var child = this$1.children[i], sz = child.chunkSize();\\n        if (at <= sz) {\\n          child.insertInner(at, lines, height);\\n          if (child.lines && child.lines.length > 50) {\\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\\n            var remaining = child.lines.length % 25 + 25;\\n            for (var pos = remaining; pos < child.lines.length;) {\\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\\n              child.height -= leaf.height;\\n              this$1.children.splice(++i, 0, leaf);\\n              leaf.parent = this$1;\\n            }\\n            child.lines = child.lines.slice(0, remaining);\\n            this$1.maybeSpill();\\n          }\\n          break\\n        }\\n        at -= sz;\\n      }\\n    },\\n\\n    // When a node has grown, check whether it should be split.\\n    maybeSpill: function() {\\n      if (this.children.length <= 10) { return }\\n      var me = this;\\n      do {\\n        var spilled = me.children.splice(me.children.length - 5, 5);\\n        var sibling = new BranchChunk(spilled);\\n        if (!me.parent) { // Become the parent node\\n          var copy = new BranchChunk(me.children);\\n          copy.parent = me;\\n          me.children = [copy, sibling];\\n          me = copy;\\n       } else {\\n          me.size -= sibling.size;\\n          me.height -= sibling.height;\\n          var myIndex = indexOf(me.parent.children, me);\\n          me.parent.children.splice(myIndex + 1, 0, sibling);\\n        }\\n        sibling.parent = me.parent;\\n      } while (me.children.length > 10)\\n      me.parent.maybeSpill();\\n    },\\n\\n    iterN: function(at, n, op) {\\n      var this$1 = this;\\n\\n      for (var i = 0; i < this.children.length; ++i) {\\n        var child = this$1.children[i], sz = child.chunkSize();\\n        if (at < sz) {\\n          var used = Math.min(n, sz - at);\\n          if (child.iterN(at, used, op)) { return true }\\n          if ((n -= used) == 0) { break }\\n          at = 0;\\n        } else { at -= sz; }\\n      }\\n    }\\n  };\\n\\n  // Line widgets are block elements displayed above or below a line.\\n\\n  var LineWidget = function(doc, node, options) {\\n    var this$1 = this;\\n\\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\\n      { this$1[opt] = options[opt]; } } }\\n    this.doc = doc;\\n    this.node = node;\\n  };\\n\\n  LineWidget.prototype.clear = function () {\\n      var this$1 = this;\\n\\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\\n    if (no == null || !ws) { return }\\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this$1) { ws.splice(i--, 1); } }\\n    if (!ws.length) { line.widgets = null; }\\n    var height = widgetHeight(this);\\n    updateLineHeight(line, Math.max(0, line.height - height));\\n    if (cm) {\\n      runInOp(cm, function () {\\n        adjustScrollWhenAboveVisible(cm, line, -height);\\n        regLineChange(cm, no, \\\"widget\\\");\\n      });\\n      signalLater(cm, \\\"lineWidgetCleared\\\", cm, this, no);\\n    }\\n  };\\n\\n  LineWidget.prototype.changed = function () {\\n      var this$1 = this;\\n\\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\\n    this.height = null;\\n    var diff = widgetHeight(this) - oldH;\\n    if (!diff) { return }\\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\\n    if (cm) {\\n      runInOp(cm, function () {\\n        cm.curOp.forceUpdate = true;\\n        adjustScrollWhenAboveVisible(cm, line, diff);\\n        signalLater(cm, \\\"lineWidgetChanged\\\", cm, this$1, lineNo(line));\\n      });\\n    }\\n  };\\n  eventMixin(LineWidget);\\n\\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\\n      { addToScrollTop(cm, diff); }\\n  }\\n\\n  function addLineWidget(doc, handle, node, options) {\\n    var widget = new LineWidget(doc, node, options);\\n    var cm = doc.cm;\\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\\n    changeLine(doc, handle, \\\"widget\\\", function (line) {\\n      var widgets = line.widgets || (line.widgets = []);\\n      if (widget.insertAt == null) { widgets.push(widget); }\\n      else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\\n      widget.line = line;\\n      if (cm && !lineIsHidden(doc, line)) {\\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\\n        updateLineHeight(line, line.height + widgetHeight(widget));\\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\\n        cm.curOp.forceUpdate = true;\\n      }\\n      return true\\n    });\\n    if (cm) { signalLater(cm, \\\"lineWidgetAdded\\\", cm, widget, typeof handle == \\\"number\\\" ? handle : lineNo(handle)); }\\n    return widget\\n  }\\n\\n  // TEXTMARKERS\\n\\n  // Created with markText and setBookmark methods. A TextMarker is a\\n  // handle that can be used to clear or find a marked position in the\\n  // document. Line objects hold arrays (markedSpans) containing\\n  // {from, to, marker} object pointing to such marker objects, and\\n  // indicating that such a marker is present on that line. Multiple\\n  // lines may point to the same marker when it spans across lines.\\n  // The spans will have null for their from/to properties when the\\n  // marker continues beyond the start/end of the line. Markers have\\n  // links back to the lines they currently touch.\\n\\n  // Collapsed markers have unique ids, in order to be able to order\\n  // them, which is needed for uniquely determining an outer marker\\n  // when they overlap (they may nest, but not partially overlap).\\n  var nextMarkerId = 0;\\n\\n  var TextMarker = function(doc, type) {\\n    this.lines = [];\\n    this.type = type;\\n    this.doc = doc;\\n    this.id = ++nextMarkerId;\\n  };\\n\\n  // Clear the marker.\\n  TextMarker.prototype.clear = function () {\\n      var this$1 = this;\\n\\n    if (this.explicitlyCleared) { return }\\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\\n    if (withOp) { startOperation(cm); }\\n    if (hasHandler(this, \\\"clear\\\")) {\\n      var found = this.find();\\n      if (found) { signalLater(this, \\\"clear\\\", found.from, found.to); }\\n    }\\n    var min = null, max = null;\\n    for (var i = 0; i < this.lines.length; ++i) {\\n      var line = this$1.lines[i];\\n      var span = getMarkedSpanFor(line.markedSpans, this$1);\\n      if (cm && !this$1.collapsed) { regLineChange(cm, lineNo(line), \\\"text\\\"); }\\n      else if (cm) {\\n        if (span.to != null) { max = lineNo(line); }\\n        if (span.from != null) { min = lineNo(line); }\\n      }\\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\\n      if (span.from == null && this$1.collapsed && !lineIsHidden(this$1.doc, line) && cm)\\n        { updateLineHeight(line, textHeight(cm.display)); }\\n    }\\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\\n      var visual = visualLine(this$1.lines[i$1]), len = lineLength(visual);\\n      if (len > cm.display.maxLineLength) {\\n        cm.display.maxLine = visual;\\n        cm.display.maxLineLength = len;\\n        cm.display.maxLineChanged = true;\\n      }\\n    } }\\n\\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\\n    this.lines.length = 0;\\n    this.explicitlyCleared = true;\\n    if (this.atomic && this.doc.cantEdit) {\\n      this.doc.cantEdit = false;\\n      if (cm) { reCheckSelection(cm.doc); }\\n    }\\n    if (cm) { signalLater(cm, \\\"markerCleared\\\", cm, this, min, max); }\\n    if (withOp) { endOperation(cm); }\\n    if (this.parent) { this.parent.clear(); }\\n  };\\n\\n  // Find the position of the marker in the document. Returns a {from,\\n  // to} object by default. Side can be passed to get a specific side\\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\\n  // Pos objects returned contain a line object, rather than a line\\n  // number (used to prevent looking up the same line twice).\\n  TextMarker.prototype.find = function (side, lineObj) {\\n      var this$1 = this;\\n\\n    if (side == null && this.type == \\\"bookmark\\\") { side = 1; }\\n    var from, to;\\n    for (var i = 0; i < this.lines.length; ++i) {\\n      var line = this$1.lines[i];\\n      var span = getMarkedSpanFor(line.markedSpans, this$1);\\n      if (span.from != null) {\\n        from = Pos(lineObj ? line : lineNo(line), span.from);\\n        if (side == -1) { return from }\\n      }\\n      if (span.to != null) {\\n        to = Pos(lineObj ? line : lineNo(line), span.to);\\n        if (side == 1) { return to }\\n      }\\n    }\\n    return from && {from: from, to: to}\\n  };\\n\\n  // Signals that the marker's widget changed, and surrounding layout\\n  // should be recomputed.\\n  TextMarker.prototype.changed = function () {\\n      var this$1 = this;\\n\\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\\n    if (!pos || !cm) { return }\\n    runInOp(cm, function () {\\n      var line = pos.line, lineN = lineNo(pos.line);\\n      var view = findViewForLine(cm, lineN);\\n      if (view) {\\n        clearLineMeasurementCacheFor(view);\\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\\n      }\\n      cm.curOp.updateMaxLine = true;\\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\\n        var oldHeight = widget.height;\\n        widget.height = null;\\n        var dHeight = widgetHeight(widget) - oldHeight;\\n        if (dHeight)\\n          { updateLineHeight(line, line.height + dHeight); }\\n      }\\n      signalLater(cm, \\\"markerChanged\\\", cm, this$1);\\n    });\\n  };\\n\\n  TextMarker.prototype.attachLine = function (line) {\\n    if (!this.lines.length && this.doc.cm) {\\n      var op = this.doc.cm.curOp;\\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\\n    }\\n    this.lines.push(line);\\n  };\\n\\n  TextMarker.prototype.detachLine = function (line) {\\n    this.lines.splice(indexOf(this.lines, line), 1);\\n    if (!this.lines.length && this.doc.cm) {\\n      var op = this.doc.cm.curOp\\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\\n    }\\n  };\\n  eventMixin(TextMarker);\\n\\n  // Create a marker, wire it up to the right lines, and\\n  function markText(doc, from, to, options, type) {\\n    // Shared markers (across linked documents) are handled separately\\n    // (markTextShared will call out to this again, once per\\n    // document).\\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\\n    // Ensure we are in an operation.\\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\\n\\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\\n    if (options) { copyObj(options, marker, false); }\\n    // Don't connect empty markers unless clearWhenEmpty is false\\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\\n      { return marker }\\n    if (marker.replacedWith) {\\n      // Showing up as a widget implies collapsed (widget replaces text)\\n      marker.collapsed = true;\\n      marker.widgetNode = eltP(\\\"span\\\", [marker.replacedWith], \\\"CodeMirror-widget\\\");\\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\\\"cm-ignore-events\\\", \\\"true\\\"); }\\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\\n    }\\n    if (marker.collapsed) {\\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\\n        { throw new Error(\\\"Inserting collapsed marker partially overlapping an existing one\\\") }\\n      seeCollapsedSpans();\\n    }\\n\\n    if (marker.addToHistory)\\n      { addChangeToHistory(doc, {from: from, to: to, origin: \\\"markText\\\"}, doc.sel, NaN); }\\n\\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\\n    doc.iter(curLine, to.line + 1, function (line) {\\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\\n        { updateMaxLine = true; }\\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\\n      addMarkedSpan(line, new MarkedSpan(marker,\\n                                         curLine == from.line ? from.ch : null,\\n                                         curLine == to.line ? to.ch : null));\\n      ++curLine;\\n    });\\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\\n    }); }\\n\\n    if (marker.clearOnEnter) { on(marker, \\\"beforeCursorEnter\\\", function () { return marker.clear(); }); }\\n\\n    if (marker.readOnly) {\\n      seeReadOnlySpans();\\n      if (doc.history.done.length || doc.history.undone.length)\\n        { doc.clearHistory(); }\\n    }\\n    if (marker.collapsed) {\\n      marker.id = ++nextMarkerId;\\n      marker.atomic = true;\\n    }\\n    if (cm) {\\n      // Sync editor state\\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\\n      if (marker.collapsed)\\n        { regChange(cm, from.line, to.line + 1); }\\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\\n               marker.attributes || marker.title)\\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \\\"text\\\"); } }\\n      if (marker.atomic) { reCheckSelection(cm.doc); }\\n      signalLater(cm, \\\"markerAdded\\\", cm, marker);\\n    }\\n    return marker\\n  }\\n\\n  // SHARED TEXTMARKERS\\n\\n  // A shared marker spans multiple linked documents. It is\\n  // implemented as a meta-marker-object controlling multiple normal\\n  // markers.\\n  var SharedTextMarker = function(markers, primary) {\\n    var this$1 = this;\\n\\n    this.markers = markers;\\n    this.primary = primary;\\n    for (var i = 0; i < markers.length; ++i)\\n      { markers[i].parent = this$1; }\\n  };\\n\\n  SharedTextMarker.prototype.clear = function () {\\n      var this$1 = this;\\n\\n    if (this.explicitlyCleared) { return }\\n    this.explicitlyCleared = true;\\n    for (var i = 0; i < this.markers.length; ++i)\\n      { this$1.markers[i].clear(); }\\n    signalLater(this, \\\"clear\\\");\\n  };\\n\\n  SharedTextMarker.prototype.find = function (side, lineObj) {\\n    return this.primary.find(side, lineObj)\\n  };\\n  eventMixin(SharedTextMarker);\\n\\n  function markTextShared(doc, from, to, options, type) {\\n    options = copyObj(options);\\n    options.shared = false;\\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\\n    var widget = options.widgetNode;\\n    linkedDocs(doc, function (doc) {\\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\\n      for (var i = 0; i < doc.linked.length; ++i)\\n        { if (doc.linked[i].isParent) { return } }\\n      primary = lst(markers);\\n    });\\n    return new SharedTextMarker(markers, primary)\\n  }\\n\\n  function findSharedMarkers(doc) {\\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\\n  }\\n\\n  function copySharedMarkers(doc, markers) {\\n    for (var i = 0; i < markers.length; i++) {\\n      var marker = markers[i], pos = marker.find();\\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\\n      if (cmp(mFrom, mTo)) {\\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\\n        marker.markers.push(subMark);\\n        subMark.parent = marker;\\n      }\\n    }\\n  }\\n\\n  function detachSharedMarkers(markers) {\\n    var loop = function ( i ) {\\n      var marker = markers[i], linked = [marker.primary.doc];\\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\\n      for (var j = 0; j < marker.markers.length; j++) {\\n        var subMarker = marker.markers[j];\\n        if (indexOf(linked, subMarker.doc) == -1) {\\n          subMarker.parent = null;\\n          marker.markers.splice(j--, 1);\\n        }\\n      }\\n    };\\n\\n    for (var i = 0; i < markers.length; i++) loop( i );\\n  }\\n\\n  var nextDocId = 0;\\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\\n    if (firstLine == null) { firstLine = 0; }\\n\\n    BranchChunk.call(this, [new LeafChunk([new Line(\\\"\\\", null)])]);\\n    this.first = firstLine;\\n    this.scrollTop = this.scrollLeft = 0;\\n    this.cantEdit = false;\\n    this.cleanGeneration = 1;\\n    this.modeFrontier = this.highlightFrontier = firstLine;\\n    var start = Pos(firstLine, 0);\\n    this.sel = simpleSelection(start);\\n    this.history = new History(null);\\n    this.id = ++nextDocId;\\n    this.modeOption = mode;\\n    this.lineSep = lineSep;\\n    this.direction = (direction == \\\"rtl\\\") ? \\\"rtl\\\" : \\\"ltr\\\";\\n    this.extend = false;\\n\\n    if (typeof text == \\\"string\\\") { text = this.splitLines(text); }\\n    updateDoc(this, {from: start, to: start, text: text});\\n    setSelection(this, simpleSelection(start), sel_dontScroll);\\n  };\\n\\n  Doc.prototype = createObj(BranchChunk.prototype, {\\n    constructor: Doc,\\n    // Iterate over the document. Supports two forms -- with only one\\n    // argument, it calls that for each line in the document. With\\n    // three, it iterates over the range given by the first two (with\\n    // the second being non-inclusive).\\n    iter: function(from, to, op) {\\n      if (op) { this.iterN(from - this.first, to - from, op); }\\n      else { this.iterN(this.first, this.first + this.size, from); }\\n    },\\n\\n    // Non-public interface for adding and removing lines.\\n    insert: function(at, lines) {\\n      var height = 0;\\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\\n      this.insertInner(at - this.first, lines, height);\\n    },\\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\\n\\n    // From here, the methods are part of the public interface. Most\\n    // are also available from CodeMirror (editor) instances.\\n\\n    getValue: function(lineSep) {\\n      var lines = getLines(this, this.first, this.first + this.size);\\n      if (lineSep === false) { return lines }\\n      return lines.join(lineSep || this.lineSeparator())\\n    },\\n    setValue: docMethodOp(function(code) {\\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\\n                        text: this.splitLines(code), origin: \\\"setValue\\\", full: true}, true);\\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\\n      setSelection(this, simpleSelection(top), sel_dontScroll);\\n    }),\\n    replaceRange: function(code, from, to, origin) {\\n      from = clipPos(this, from);\\n      to = to ? clipPos(this, to) : from;\\n      replaceRange(this, code, from, to, origin);\\n    },\\n    getRange: function(from, to, lineSep) {\\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\\n      if (lineSep === false) { return lines }\\n      return lines.join(lineSep || this.lineSeparator())\\n    },\\n\\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\\n\\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\\n    getLineNumber: function(line) {return lineNo(line)},\\n\\n    getLineHandleVisualStart: function(line) {\\n      if (typeof line == \\\"number\\\") { line = getLine(this, line); }\\n      return visualLine(line)\\n    },\\n\\n    lineCount: function() {return this.size},\\n    firstLine: function() {return this.first},\\n    lastLine: function() {return this.first + this.size - 1},\\n\\n    clipPos: function(pos) {return clipPos(this, pos)},\\n\\n    getCursor: function(start) {\\n      var range$$1 = this.sel.primary(), pos;\\n      if (start == null || start == \\\"head\\\") { pos = range$$1.head; }\\n      else if (start == \\\"anchor\\\") { pos = range$$1.anchor; }\\n      else if (start == \\\"end\\\" || start == \\\"to\\\" || start === false) { pos = range$$1.to(); }\\n      else { pos = range$$1.from(); }\\n      return pos\\n    },\\n    listSelections: function() { return this.sel.ranges },\\n    somethingSelected: function() {return this.sel.somethingSelected()},\\n\\n    setCursor: docMethodOp(function(line, ch, options) {\\n      setSimpleSelection(this, clipPos(this, typeof line == \\\"number\\\" ? Pos(line, ch || 0) : line), null, options);\\n    }),\\n    setSelection: docMethodOp(function(anchor, head, options) {\\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\\n    }),\\n    extendSelection: docMethodOp(function(head, other, options) {\\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\\n    }),\\n    extendSelections: docMethodOp(function(heads, options) {\\n      extendSelections(this, clipPosArray(this, heads), options);\\n    }),\\n    extendSelectionsBy: docMethodOp(function(f, options) {\\n      var heads = map(this.sel.ranges, f);\\n      extendSelections(this, clipPosArray(this, heads), options);\\n    }),\\n    setSelections: docMethodOp(function(ranges, primary, options) {\\n      var this$1 = this;\\n\\n      if (!ranges.length) { return }\\n      var out = [];\\n      for (var i = 0; i < ranges.length; i++)\\n        { out[i] = new Range(clipPos(this$1, ranges[i].anchor),\\n                           clipPos(this$1, ranges[i].head)); }\\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\\n    }),\\n    addSelection: docMethodOp(function(anchor, head, options) {\\n      var ranges = this.sel.ranges.slice(0);\\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\\n    }),\\n\\n    getSelection: function(lineSep) {\\n      var this$1 = this;\\n\\n      var ranges = this.sel.ranges, lines;\\n      for (var i = 0; i < ranges.length; i++) {\\n        var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\\n        lines = lines ? lines.concat(sel) : sel;\\n      }\\n      if (lineSep === false) { return lines }\\n      else { return lines.join(lineSep || this.lineSeparator()) }\\n    },\\n    getSelections: function(lineSep) {\\n      var this$1 = this;\\n\\n      var parts = [], ranges = this.sel.ranges;\\n      for (var i = 0; i < ranges.length; i++) {\\n        var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\\n        if (lineSep !== false) { sel = sel.join(lineSep || this$1.lineSeparator()); }\\n        parts[i] = sel;\\n      }\\n      return parts\\n    },\\n    replaceSelection: function(code, collapse, origin) {\\n      var dup = [];\\n      for (var i = 0; i < this.sel.ranges.length; i++)\\n        { dup[i] = code; }\\n      this.replaceSelections(dup, collapse, origin || \\\"+input\\\");\\n    },\\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\\n      var this$1 = this;\\n\\n      var changes = [], sel = this.sel;\\n      for (var i = 0; i < sel.ranges.length; i++) {\\n        var range$$1 = sel.ranges[i];\\n        changes[i] = {from: range$$1.from(), to: range$$1.to(), text: this$1.splitLines(code[i]), origin: origin};\\n      }\\n      var newSel = collapse && collapse != \\\"end\\\" && computeReplacedSel(this, changes, collapse);\\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\\n        { makeChange(this$1, changes[i$1]); }\\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\\n      else if (this.cm) { ensureCursorVisible(this.cm); }\\n    }),\\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \\\"undo\\\");}),\\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \\\"redo\\\");}),\\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \\\"undo\\\", true);}),\\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \\\"redo\\\", true);}),\\n\\n    setExtending: function(val) {this.extend = val;},\\n    getExtending: function() {return this.extend},\\n\\n    historySize: function() {\\n      var hist = this.history, done = 0, undone = 0;\\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\\n      return {undo: done, redo: undone}\\n    },\\n    clearHistory: function() {this.history = new History(this.history.maxGeneration);},\\n\\n    markClean: function() {\\n      this.cleanGeneration = this.changeGeneration(true);\\n    },\\n    changeGeneration: function(forceSplit) {\\n      if (forceSplit)\\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\\n      return this.history.generation\\n    },\\n    isClean: function (gen) {\\n      return this.history.generation == (gen || this.cleanGeneration)\\n    },\\n\\n    getHistory: function() {\\n      return {done: copyHistoryArray(this.history.done),\\n              undone: copyHistoryArray(this.history.undone)}\\n    },\\n    setHistory: function(histData) {\\n      var hist = this.history = new History(this.history.maxGeneration);\\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\\n    },\\n\\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\\n      return changeLine(this, line, \\\"gutter\\\", function (line) {\\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\\n        markers[gutterID] = value;\\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\\n        return true\\n      })\\n    }),\\n\\n    clearGutter: docMethodOp(function(gutterID) {\\n      var this$1 = this;\\n\\n      this.iter(function (line) {\\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\\n          changeLine(this$1, line, \\\"gutter\\\", function () {\\n            line.gutterMarkers[gutterID] = null;\\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\\n            return true\\n          });\\n        }\\n      });\\n    }),\\n\\n    lineInfo: function(line) {\\n      var n;\\n      if (typeof line == \\\"number\\\") {\\n        if (!isLine(this, line)) { return null }\\n        n = line;\\n        line = getLine(this, line);\\n        if (!line) { return null }\\n      } else {\\n        n = lineNo(line);\\n        if (n == null) { return null }\\n      }\\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\\n              widgets: line.widgets}\\n    },\\n\\n    addLineClass: docMethodOp(function(handle, where, cls) {\\n      return changeLine(this, handle, where == \\\"gutter\\\" ? \\\"gutter\\\" : \\\"class\\\", function (line) {\\n        var prop = where == \\\"text\\\" ? \\\"textClass\\\"\\n                 : where == \\\"background\\\" ? \\\"bgClass\\\"\\n                 : where == \\\"gutter\\\" ? \\\"gutterClass\\\" : \\\"wrapClass\\\";\\n        if (!line[prop]) { line[prop] = cls; }\\n        else if (classTest(cls).test(line[prop])) { return false }\\n        else { line[prop] += \\\" \\\" + cls; }\\n        return true\\n      })\\n    }),\\n    removeLineClass: docMethodOp(function(handle, where, cls) {\\n      return changeLine(this, handle, where == \\\"gutter\\\" ? \\\"gutter\\\" : \\\"class\\\", function (line) {\\n        var prop = where == \\\"text\\\" ? \\\"textClass\\\"\\n                 : where == \\\"background\\\" ? \\\"bgClass\\\"\\n                 : where == \\\"gutter\\\" ? \\\"gutterClass\\\" : \\\"wrapClass\\\";\\n        var cur = line[prop];\\n        if (!cur) { return false }\\n        else if (cls == null) { line[prop] = null; }\\n        else {\\n          var found = cur.match(classTest(cls));\\n          if (!found) { return false }\\n          var end = found.index + found[0].length;\\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \\\"\\\" : \\\" \\\") + cur.slice(end) || null;\\n        }\\n        return true\\n      })\\n    }),\\n\\n    addLineWidget: docMethodOp(function(handle, node, options) {\\n      return addLineWidget(this, handle, node, options)\\n    }),\\n    removeLineWidget: function(widget) { widget.clear(); },\\n\\n    markText: function(from, to, options) {\\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \\\"range\\\")\\n    },\\n    setBookmark: function(pos, options) {\\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\\n                      insertLeft: options && options.insertLeft,\\n                      clearWhenEmpty: false, shared: options && options.shared,\\n                      handleMouseEvents: options && options.handleMouseEvents};\\n      pos = clipPos(this, pos);\\n      return markText(this, pos, pos, realOpts, \\\"bookmark\\\")\\n    },\\n    findMarksAt: function(pos) {\\n      pos = clipPos(this, pos);\\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\\n        var span = spans[i];\\n        if ((span.from == null || span.from <= pos.ch) &&\\n            (span.to == null || span.to >= pos.ch))\\n          { markers.push(span.marker.parent || span.marker); }\\n      } }\\n      return markers\\n    },\\n    findMarks: function(from, to, filter) {\\n      from = clipPos(this, from); to = clipPos(this, to);\\n      var found = [], lineNo$$1 = from.line;\\n      this.iter(from.line, to.line + 1, function (line) {\\n        var spans = line.markedSpans;\\n        if (spans) { for (var i = 0; i < spans.length; i++) {\\n          var span = spans[i];\\n          if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to ||\\n                span.from == null && lineNo$$1 != from.line ||\\n                span.from != null && lineNo$$1 == to.line && span.from >= to.ch) &&\\n              (!filter || filter(span.marker)))\\n            { found.push(span.marker.parent || span.marker); }\\n        } }\\n        ++lineNo$$1;\\n      });\\n      return found\\n    },\\n    getAllMarks: function() {\\n      var markers = [];\\n      this.iter(function (line) {\\n        var sps = line.markedSpans;\\n        if (sps) { for (var i = 0; i < sps.length; ++i)\\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\\n      });\\n      return markers\\n    },\\n\\n    posFromIndex: function(off) {\\n      var ch, lineNo$$1 = this.first, sepSize = this.lineSeparator().length;\\n      this.iter(function (line) {\\n        var sz = line.text.length + sepSize;\\n        if (sz > off) { ch = off; return true }\\n        off -= sz;\\n        ++lineNo$$1;\\n      });\\n      return clipPos(this, Pos(lineNo$$1, ch))\\n    },\\n    indexFromPos: function (coords) {\\n      coords = clipPos(this, coords);\\n      var index = coords.ch;\\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\\n      var sepSize = this.lineSeparator().length;\\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\\n        index += line.text.length + sepSize;\\n      });\\n      return index\\n    },\\n\\n    copy: function(copyHistory) {\\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\\n                        this.modeOption, this.first, this.lineSep, this.direction);\\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\\n      doc.sel = this.sel;\\n      doc.extend = false;\\n      if (copyHistory) {\\n        doc.history.undoDepth = this.history.undoDepth;\\n        doc.setHistory(this.getHistory());\\n      }\\n      return doc\\n    },\\n\\n    linkedDoc: function(options) {\\n      if (!options) { options = {}; }\\n      var from = this.first, to = this.first + this.size;\\n      if (options.from != null && options.from > from) { from = options.from; }\\n      if (options.to != null && options.to < to) { to = options.to; }\\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\\n      if (options.sharedHist) { copy.history = this.history\\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\\n      copySharedMarkers(copy, findSharedMarkers(this));\\n      return copy\\n    },\\n    unlinkDoc: function(other) {\\n      var this$1 = this;\\n\\n      if (other instanceof CodeMirror) { other = other.doc; }\\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\\n        var link = this$1.linked[i];\\n        if (link.doc != other) { continue }\\n        this$1.linked.splice(i, 1);\\n        other.unlinkDoc(this$1);\\n        detachSharedMarkers(findSharedMarkers(this$1));\\n        break\\n      } }\\n      // If the histories were shared, split them again\\n      if (other.history == this.history) {\\n        var splitIds = [other.id];\\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\\n        other.history = new History(null);\\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\\n      }\\n    },\\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\\n\\n    getMode: function() {return this.mode},\\n    getEditor: function() {return this.cm},\\n\\n    splitLines: function(str) {\\n      if (this.lineSep) { return str.split(this.lineSep) }\\n      return splitLinesAuto(str)\\n    },\\n    lineSeparator: function() { return this.lineSep || \\\"\\\\n\\\" },\\n\\n    setDirection: docMethodOp(function (dir) {\\n      if (dir != \\\"rtl\\\") { dir = \\\"ltr\\\"; }\\n      if (dir == this.direction) { return }\\n      this.direction = dir;\\n      this.iter(function (line) { return line.order = null; });\\n      if (this.cm) { directionChanged(this.cm); }\\n    })\\n  });\\n\\n  // Public alias.\\n  Doc.prototype.eachLine = Doc.prototype.iter;\\n\\n  // Kludge to work around strange IE behavior where it'll sometimes\\n  // re-fire a series of drag-related events right after the drop (#1551)\\n  var lastDrop = 0;\\n\\n  function onDrop(e) {\\n    var cm = this;\\n    clearDragCursor(cm);\\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\\n      { return }\\n    e_preventDefault(e);\\n    if (ie) { lastDrop = +new Date; }\\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\\n    if (!pos || cm.isReadOnly()) { return }\\n    // Might be a file drop, in which case we simply extract the text\\n    // and insert it.\\n    if (files && files.length && window.FileReader && window.File) {\\n      var n = files.length, text = Array(n), read = 0;\\n      var loadFile = function (file, i) {\\n        if (cm.options.allowDropFileTypes &&\\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1)\\n          { return }\\n\\n        var reader = new FileReader;\\n        reader.onload = operation(cm, function () {\\n          var content = reader.result;\\n          if (/[\\\\x00-\\\\x08\\\\x0e-\\\\x1f]{2}/.test(content)) { content = \\\"\\\"; }\\n          text[i] = content;\\n          if (++read == n) {\\n            pos = clipPos(cm.doc, pos);\\n            var change = {from: pos, to: pos,\\n                          text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\\n                          origin: \\\"paste\\\"};\\n            makeChange(cm.doc, change);\\n            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\\n          }\\n        });\\n        reader.readAsText(file);\\n      };\\n      for (var i = 0; i < n; ++i) { loadFile(files[i], i); }\\n    } else { // Normal drop\\n      // Don't do a replace if the drop happened inside of the selected text.\\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\\n        cm.state.draggingText(e);\\n        // Ensure the editor is re-focused\\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\\n        return\\n      }\\n      try {\\n        var text$1 = e.dataTransfer.getData(\\\"Text\\\");\\n        if (text$1) {\\n          var selected;\\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\\n            { selected = cm.listSelections(); }\\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\\n            { replaceRange(cm.doc, \\\"\\\", selected[i$1].anchor, selected[i$1].head, \\\"drag\\\"); } }\\n          cm.replaceSelection(text$1, \\\"around\\\", \\\"paste\\\");\\n          cm.display.input.focus();\\n        }\\n      }\\n      catch(e){}\\n    }\\n  }\\n\\n  function onDragStart(cm, e) {\\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\\n\\n    e.dataTransfer.setData(\\\"Text\\\", cm.getSelection());\\n    e.dataTransfer.effectAllowed = \\\"copyMove\\\";\\n\\n    // Use dummy image instead of default browsers image.\\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\\n    if (e.dataTransfer.setDragImage && !safari) {\\n      var img = elt(\\\"img\\\", null, null, \\\"position: fixed; left: 0; top: 0;\\\");\\n      img.src = \\\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\\\";\\n      if (presto) {\\n        img.width = img.height = 1;\\n        cm.display.wrapper.appendChild(img);\\n        // Force a relayout, or Opera won't use our image for some obscure reason\\n        img._top = img.offsetTop;\\n      }\\n      e.dataTransfer.setDragImage(img, 0, 0);\\n      if (presto) { img.parentNode.removeChild(img); }\\n    }\\n  }\\n\\n  function onDragOver(cm, e) {\\n    var pos = posFromMouse(cm, e);\\n    if (!pos) { return }\\n    var frag = document.createDocumentFragment();\\n    drawSelectionCursor(cm, pos, frag);\\n    if (!cm.display.dragCursor) {\\n      cm.display.dragCursor = elt(\\\"div\\\", null, \\\"CodeMirror-cursors CodeMirror-dragcursors\\\");\\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\\n    }\\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\\n  }\\n\\n  function clearDragCursor(cm) {\\n    if (cm.display.dragCursor) {\\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\\n      cm.display.dragCursor = null;\\n    }\\n  }\\n\\n  // These must be handled carefully, because naively registering a\\n  // handler for each editor will cause the editors to never be\\n  // garbage collected.\\n\\n  function forEachCodeMirror(f) {\\n    if (!document.getElementsByClassName) { return }\\n    var byClass = document.getElementsByClassName(\\\"CodeMirror\\\"), editors = [];\\n    for (var i = 0; i < byClass.length; i++) {\\n      var cm = byClass[i].CodeMirror;\\n      if (cm) { editors.push(cm); }\\n    }\\n    if (editors.length) { editors[0].operation(function () {\\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\\n    }); }\\n  }\\n\\n  var globalsRegistered = false;\\n  function ensureGlobalHandlers() {\\n    if (globalsRegistered) { return }\\n    registerGlobalHandlers();\\n    globalsRegistered = true;\\n  }\\n  function registerGlobalHandlers() {\\n    // When the window resizes, we need to refresh active editors.\\n    var resizeTimer;\\n    on(window, \\\"resize\\\", function () {\\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\\n        resizeTimer = null;\\n        forEachCodeMirror(onResize);\\n      }, 100); }\\n    });\\n    // When the window loses focus, we want to show the editor as blurred\\n    on(window, \\\"blur\\\", function () { return forEachCodeMirror(onBlur); });\\n  }\\n  // Called when the window resizes\\n  function onResize(cm) {\\n    var d = cm.display;\\n    // Might be a text scaling operation, clear size caches.\\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\\n    d.scrollbarsClipped = false;\\n    cm.setSize();\\n  }\\n\\n  var keyNames = {\\n    3: \\\"Pause\\\", 8: \\\"Backspace\\\", 9: \\\"Tab\\\", 13: \\\"Enter\\\", 16: \\\"Shift\\\", 17: \\\"Ctrl\\\", 18: \\\"Alt\\\",\\n    19: \\\"Pause\\\", 20: \\\"CapsLock\\\", 27: \\\"Esc\\\", 32: \\\"Space\\\", 33: \\\"PageUp\\\", 34: \\\"PageDown\\\", 35: \\\"End\\\",\\n    36: \\\"Home\\\", 37: \\\"Left\\\", 38: \\\"Up\\\", 39: \\\"Right\\\", 40: \\\"Down\\\", 44: \\\"PrintScrn\\\", 45: \\\"Insert\\\",\\n    46: \\\"Delete\\\", 59: \\\";\\\", 61: \\\"=\\\", 91: \\\"Mod\\\", 92: \\\"Mod\\\", 93: \\\"Mod\\\",\\n    106: \\\"*\\\", 107: \\\"=\\\", 109: \\\"-\\\", 110: \\\".\\\", 111: \\\"/\\\", 145: \\\"ScrollLock\\\",\\n    173: \\\"-\\\", 186: \\\";\\\", 187: \\\"=\\\", 188: \\\",\\\", 189: \\\"-\\\", 190: \\\".\\\", 191: \\\"/\\\", 192: \\\"`\\\", 219: \\\"[\\\", 220: \\\"\\\\\\\\\\\",\\n    221: \\\"]\\\", 222: \\\"'\\\", 63232: \\\"Up\\\", 63233: \\\"Down\\\", 63234: \\\"Left\\\", 63235: \\\"Right\\\", 63272: \\\"Delete\\\",\\n    63273: \\\"Home\\\", 63275: \\\"End\\\", 63276: \\\"PageUp\\\", 63277: \\\"PageDown\\\", 63302: \\\"Insert\\\"\\n  };\\n\\n  // Number keys\\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\\n  // Alphabetic keys\\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\\n  // Function keys\\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \\\"F\\\" + i$2; }\\n\\n  var keyMap = {};\\n\\n  keyMap.basic = {\\n    \\\"Left\\\": \\\"goCharLeft\\\", \\\"Right\\\": \\\"goCharRight\\\", \\\"Up\\\": \\\"goLineUp\\\", \\\"Down\\\": \\\"goLineDown\\\",\\n    \\\"End\\\": \\\"goLineEnd\\\", \\\"Home\\\": \\\"goLineStartSmart\\\", \\\"PageUp\\\": \\\"goPageUp\\\", \\\"PageDown\\\": \\\"goPageDown\\\",\\n    \\\"Delete\\\": \\\"delCharAfter\\\", \\\"Backspace\\\": \\\"delCharBefore\\\", \\\"Shift-Backspace\\\": \\\"delCharBefore\\\",\\n    \\\"Tab\\\": \\\"defaultTab\\\", \\\"Shift-Tab\\\": \\\"indentAuto\\\",\\n    \\\"Enter\\\": \\\"newlineAndIndent\\\", \\\"Insert\\\": \\\"toggleOverwrite\\\",\\n    \\\"Esc\\\": \\\"singleSelection\\\"\\n  };\\n  // Note that the save and find-related commands aren't defined by\\n  // default. User code or addons can define them. Unknown commands\\n  // are simply ignored.\\n  keyMap.pcDefault = {\\n    \\\"Ctrl-A\\\": \\\"selectAll\\\", \\\"Ctrl-D\\\": \\\"deleteLine\\\", \\\"Ctrl-Z\\\": \\\"undo\\\", \\\"Shift-Ctrl-Z\\\": \\\"redo\\\", \\\"Ctrl-Y\\\": \\\"redo\\\",\\n    \\\"Ctrl-Home\\\": \\\"goDocStart\\\", \\\"Ctrl-End\\\": \\\"goDocEnd\\\", \\\"Ctrl-Up\\\": \\\"goLineUp\\\", \\\"Ctrl-Down\\\": \\\"goLineDown\\\",\\n    \\\"Ctrl-Left\\\": \\\"goGroupLeft\\\", \\\"Ctrl-Right\\\": \\\"goGroupRight\\\", \\\"Alt-Left\\\": \\\"goLineStart\\\", \\\"Alt-Right\\\": \\\"goLineEnd\\\",\\n    \\\"Ctrl-Backspace\\\": \\\"delGroupBefore\\\", \\\"Ctrl-Delete\\\": \\\"delGroupAfter\\\", \\\"Ctrl-S\\\": \\\"save\\\", \\\"Ctrl-F\\\": \\\"find\\\",\\n    \\\"Ctrl-G\\\": \\\"findNext\\\", \\\"Shift-Ctrl-G\\\": \\\"findPrev\\\", \\\"Shift-Ctrl-F\\\": \\\"replace\\\", \\\"Shift-Ctrl-R\\\": \\\"replaceAll\\\",\\n    \\\"Ctrl-[\\\": \\\"indentLess\\\", \\\"Ctrl-]\\\": \\\"indentMore\\\",\\n    \\\"Ctrl-U\\\": \\\"undoSelection\\\", \\\"Shift-Ctrl-U\\\": \\\"redoSelection\\\", \\\"Alt-U\\\": \\\"redoSelection\\\",\\n    \\\"fallthrough\\\": \\\"basic\\\"\\n  };\\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\\n  keyMap.emacsy = {\\n    \\\"Ctrl-F\\\": \\\"goCharRight\\\", \\\"Ctrl-B\\\": \\\"goCharLeft\\\", \\\"Ctrl-P\\\": \\\"goLineUp\\\", \\\"Ctrl-N\\\": \\\"goLineDown\\\",\\n    \\\"Alt-F\\\": \\\"goWordRight\\\", \\\"Alt-B\\\": \\\"goWordLeft\\\", \\\"Ctrl-A\\\": \\\"goLineStart\\\", \\\"Ctrl-E\\\": \\\"goLineEnd\\\",\\n    \\\"Ctrl-V\\\": \\\"goPageDown\\\", \\\"Shift-Ctrl-V\\\": \\\"goPageUp\\\", \\\"Ctrl-D\\\": \\\"delCharAfter\\\", \\\"Ctrl-H\\\": \\\"delCharBefore\\\",\\n    \\\"Alt-D\\\": \\\"delWordAfter\\\", \\\"Alt-Backspace\\\": \\\"delWordBefore\\\", \\\"Ctrl-K\\\": \\\"killLine\\\", \\\"Ctrl-T\\\": \\\"transposeChars\\\",\\n    \\\"Ctrl-O\\\": \\\"openLine\\\"\\n  };\\n  keyMap.macDefault = {\\n    \\\"Cmd-A\\\": \\\"selectAll\\\", \\\"Cmd-D\\\": \\\"deleteLine\\\", \\\"Cmd-Z\\\": \\\"undo\\\", \\\"Shift-Cmd-Z\\\": \\\"redo\\\", \\\"Cmd-Y\\\": \\\"redo\\\",\\n    \\\"Cmd-Home\\\": \\\"goDocStart\\\", \\\"Cmd-Up\\\": \\\"goDocStart\\\", \\\"Cmd-End\\\": \\\"goDocEnd\\\", \\\"Cmd-Down\\\": \\\"goDocEnd\\\", \\\"Alt-Left\\\": \\\"goGroupLeft\\\",\\n    \\\"Alt-Right\\\": \\\"goGroupRight\\\", \\\"Cmd-Left\\\": \\\"goLineLeft\\\", \\\"Cmd-Right\\\": \\\"goLineRight\\\", \\\"Alt-Backspace\\\": \\\"delGroupBefore\\\",\\n    \\\"Ctrl-Alt-Backspace\\\": \\\"delGroupAfter\\\", \\\"Alt-Delete\\\": \\\"delGroupAfter\\\", \\\"Cmd-S\\\": \\\"save\\\", \\\"Cmd-F\\\": \\\"find\\\",\\n    \\\"Cmd-G\\\": \\\"findNext\\\", \\\"Shift-Cmd-G\\\": \\\"findPrev\\\", \\\"Cmd-Alt-F\\\": \\\"replace\\\", \\\"Shift-Cmd-Alt-F\\\": \\\"replaceAll\\\",\\n    \\\"Cmd-[\\\": \\\"indentLess\\\", \\\"Cmd-]\\\": \\\"indentMore\\\", \\\"Cmd-Backspace\\\": \\\"delWrappedLineLeft\\\", \\\"Cmd-Delete\\\": \\\"delWrappedLineRight\\\",\\n    \\\"Cmd-U\\\": \\\"undoSelection\\\", \\\"Shift-Cmd-U\\\": \\\"redoSelection\\\", \\\"Ctrl-Up\\\": \\\"goDocStart\\\", \\\"Ctrl-Down\\\": \\\"goDocEnd\\\",\\n    \\\"fallthrough\\\": [\\\"basic\\\", \\\"emacsy\\\"]\\n  };\\n  keyMap[\\\"default\\\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\\n\\n  // KEYMAP DISPATCH\\n\\n  function normalizeKeyName(name) {\\n    var parts = name.split(/-(?!$)/);\\n    name = parts[parts.length - 1];\\n    var alt, ctrl, shift, cmd;\\n    for (var i = 0; i < parts.length - 1; i++) {\\n      var mod = parts[i];\\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\\n      else { throw new Error(\\\"Unrecognized modifier name: \\\" + mod) }\\n    }\\n    if (alt) { name = \\\"Alt-\\\" + name; }\\n    if (ctrl) { name = \\\"Ctrl-\\\" + name; }\\n    if (cmd) { name = \\\"Cmd-\\\" + name; }\\n    if (shift) { name = \\\"Shift-\\\" + name; }\\n    return name\\n  }\\n\\n  // This is a kludge to keep keymaps mostly working as raw objects\\n  // (backwards compatibility) while at the same time support features\\n  // like normalization and multi-stroke key bindings. It compiles a\\n  // new normalized keymap, and then updates the old object to reflect\\n  // this.\\n  function normalizeKeyMap(keymap) {\\n    var copy = {};\\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\\n      var value = keymap[keyname];\\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\\n      if (value == \\\"...\\\") { delete keymap[keyname]; continue }\\n\\n      var keys = map(keyname.split(\\\" \\\"), normalizeKeyName);\\n      for (var i = 0; i < keys.length; i++) {\\n        var val = (void 0), name = (void 0);\\n        if (i == keys.length - 1) {\\n          name = keys.join(\\\" \\\");\\n          val = value;\\n        } else {\\n          name = keys.slice(0, i + 1).join(\\\" \\\");\\n          val = \\\"...\\\";\\n        }\\n        var prev = copy[name];\\n        if (!prev) { copy[name] = val; }\\n        else if (prev != val) { throw new Error(\\\"Inconsistent bindings for \\\" + name) }\\n      }\\n      delete keymap[keyname];\\n    } }\\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\\n    return keymap\\n  }\\n\\n  function lookupKey(key, map$$1, handle, context) {\\n    map$$1 = getKeyMap(map$$1);\\n    var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\\n    if (found === false) { return \\\"nothing\\\" }\\n    if (found === \\\"...\\\") { return \\\"multi\\\" }\\n    if (found != null && handle(found)) { return \\\"handled\\\" }\\n\\n    if (map$$1.fallthrough) {\\n      if (Object.prototype.toString.call(map$$1.fallthrough) != \\\"[object Array]\\\")\\n        { return lookupKey(key, map$$1.fallthrough, handle, context) }\\n      for (var i = 0; i < map$$1.fallthrough.length; i++) {\\n        var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\\n        if (result) { return result }\\n      }\\n    }\\n  }\\n\\n  // Modifier key presses don't count as 'real' key presses for the\\n  // purpose of keymap fallthrough.\\n  function isModifierKey(value) {\\n    var name = typeof value == \\\"string\\\" ? value : keyNames[value.keyCode];\\n    return name == \\\"Ctrl\\\" || name == \\\"Alt\\\" || name == \\\"Shift\\\" || name == \\\"Mod\\\"\\n  }\\n\\n  function addModifierNames(name, event, noShift) {\\n    var base = name;\\n    if (event.altKey && base != \\\"Alt\\\") { name = \\\"Alt-\\\" + name; }\\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \\\"Ctrl\\\") { name = \\\"Ctrl-\\\" + name; }\\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \\\"Cmd\\\") { name = \\\"Cmd-\\\" + name; }\\n    if (!noShift && event.shiftKey && base != \\\"Shift\\\") { name = \\\"Shift-\\\" + name; }\\n    return name\\n  }\\n\\n  // Look up the name of a key as indicated by an event object.\\n  function keyName(event, noShift) {\\n    if (presto && event.keyCode == 34 && event[\\\"char\\\"]) { return false }\\n    var name = keyNames[event.keyCode];\\n    if (name == null || event.altGraphKey) { return false }\\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\\n    if (event.keyCode == 3 && event.code) { name = event.code; }\\n    return addModifierNames(name, event, noShift)\\n  }\\n\\n  function getKeyMap(val) {\\n    return typeof val == \\\"string\\\" ? keyMap[val] : val\\n  }\\n\\n  // Helper for deleting text near the selection(s), used to implement\\n  // backspace, delete, and similar functionality.\\n  function deleteNearSelection(cm, compute) {\\n    var ranges = cm.doc.sel.ranges, kill = [];\\n    // Build up a set of ranges to kill first, merging overlapping\\n    // ranges.\\n    for (var i = 0; i < ranges.length; i++) {\\n      var toKill = compute(ranges[i]);\\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\\n        var replaced = kill.pop();\\n        if (cmp(replaced.from, toKill.from) < 0) {\\n          toKill.from = replaced.from;\\n          break\\n        }\\n      }\\n      kill.push(toKill);\\n    }\\n    // Next, remove those actual ranges.\\n    runInOp(cm, function () {\\n      for (var i = kill.length - 1; i >= 0; i--)\\n        { replaceRange(cm.doc, \\\"\\\", kill[i].from, kill[i].to, \\\"+delete\\\"); }\\n      ensureCursorVisible(cm);\\n    });\\n  }\\n\\n  function moveCharLogically(line, ch, dir) {\\n    var target = skipExtendingChars(line.text, ch + dir, dir);\\n    return target < 0 || target > line.text.length ? null : target\\n  }\\n\\n  function moveLogically(line, start, dir) {\\n    var ch = moveCharLogically(line, start.ch, dir);\\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \\\"after\\\" : \\\"before\\\")\\n  }\\n\\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\\n    if (visually) {\\n      var order = getOrder(lineObj, cm.doc.direction);\\n      if (order) {\\n        var part = dir < 0 ? lst(order) : order[0];\\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\\n        var sticky = moveInStorageOrder ? \\\"after\\\" : \\\"before\\\";\\n        var ch;\\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\\n        // it could be that the last bidi part is not on the last visual line,\\n        // since visual lines contain content order-consecutive chunks.\\n        // Thus, in rtl, we are looking for the first (content-order) character\\n        // in the rtl chunk that is on the last line (that is, the same line\\n        // as the last (content-order) character).\\n        if (part.level > 0 || cm.doc.direction == \\\"rtl\\\") {\\n          var prep = prepareMeasureForLine(cm, lineObj);\\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\\n          if (sticky == \\\"before\\\") { ch = moveCharLogically(lineObj, ch, 1); }\\n        } else { ch = dir < 0 ? part.to : part.from; }\\n        return new Pos(lineNo, ch, sticky)\\n      }\\n    }\\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \\\"before\\\" : \\\"after\\\")\\n  }\\n\\n  function moveVisually(cm, line, start, dir) {\\n    var bidi = getOrder(line, cm.doc.direction);\\n    if (!bidi) { return moveLogically(line, start, dir) }\\n    if (start.ch >= line.text.length) {\\n      start.ch = line.text.length;\\n      start.sticky = \\\"before\\\";\\n    } else if (start.ch <= 0) {\\n      start.ch = 0;\\n      start.sticky = \\\"after\\\";\\n    }\\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\\n    if (cm.doc.direction == \\\"ltr\\\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\\n      // nothing interesting happens.\\n      return moveLogically(line, start, dir)\\n    }\\n\\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\\n    var prep;\\n    var getWrappedLineExtent = function (ch) {\\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\\n      prep = prep || prepareMeasureForLine(cm, line);\\n      return wrappedLineExtentChar(cm, line, prep, ch)\\n    };\\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \\\"before\\\" ? mv(start, -1) : start.ch);\\n\\n    if (cm.doc.direction == \\\"rtl\\\" || part.level == 1) {\\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\\n        var sticky = moveInStorageOrder ? \\\"before\\\" : \\\"after\\\";\\n        return new Pos(start.line, ch, sticky)\\n      }\\n    }\\n\\n    // Case 3: Could not move within this bidi part in this visual line, so leave\\n    // the current bidi part\\n\\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\\n        ? new Pos(start.line, mv(ch, 1), \\\"before\\\")\\n        : new Pos(start.line, ch, \\\"after\\\"); };\\n\\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\\n        var part = bidi[partPos];\\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\\n      }\\n    };\\n\\n    // Case 3a: Look for other bidi parts on the same visual line\\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\\n    if (res) { return res }\\n\\n    // Case 3b: Look for other bidi parts on the next visual line\\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\\n      if (res) { return res }\\n    }\\n\\n    // Case 4: Nowhere to move\\n    return null\\n  }\\n\\n  // Commands are parameter-less actions that can be performed on an\\n  // editor, mostly used for keybindings.\\n  var commands = {\\n    selectAll: selectAll,\\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\\\"anchor\\\"), cm.getCursor(\\\"head\\\"), sel_dontScroll); },\\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\\n      if (range.empty()) {\\n        var len = getLine(cm.doc, range.head.line).text.length;\\n        if (range.head.ch == len && range.head.line < cm.lastLine())\\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\\n        else\\n          { return {from: range.head, to: Pos(range.head.line, len)} }\\n      } else {\\n        return {from: range.from(), to: range.to()}\\n      }\\n    }); },\\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\\n      from: Pos(range.from().line, 0),\\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\\n    }); }); },\\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\\n      from: Pos(range.from().line, 0), to: range.from()\\n    }); }); },\\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\\n      var top = cm.charCoords(range.head, \\\"div\\\").top + 5;\\n      var leftPos = cm.coordsChar({left: 0, top: top}, \\\"div\\\");\\n      return {from: leftPos, to: range.from()}\\n    }); },\\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\\n      var top = cm.charCoords(range.head, \\\"div\\\").top + 5;\\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \\\"div\\\");\\n      return {from: range.from(), to: rightPos }\\n    }); },\\n    undo: function (cm) { return cm.undo(); },\\n    redo: function (cm) { return cm.redo(); },\\n    undoSelection: function (cm) { return cm.undoSelection(); },\\n    redoSelection: function (cm) { return cm.redoSelection(); },\\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\\n      {origin: \\\"+move\\\", bias: 1}\\n    ); },\\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\\n      {origin: \\\"+move\\\", bias: 1}\\n    ); },\\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\\n      {origin: \\\"+move\\\", bias: -1}\\n    ); },\\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\\n      var top = cm.cursorCoords(range.head, \\\"div\\\").top + 5;\\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \\\"div\\\")\\n    }, sel_move); },\\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\\n      var top = cm.cursorCoords(range.head, \\\"div\\\").top + 5;\\n      return cm.coordsChar({left: 0, top: top}, \\\"div\\\")\\n    }, sel_move); },\\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\\n      var top = cm.cursorCoords(range.head, \\\"div\\\").top + 5;\\n      var pos = cm.coordsChar({left: 0, top: top}, \\\"div\\\");\\n      if (pos.ch < cm.getLine(pos.line).search(/\\\\S/)) { return lineStartSmart(cm, range.head) }\\n      return pos\\n    }, sel_move); },\\n    goLineUp: function (cm) { return cm.moveV(-1, \\\"line\\\"); },\\n    goLineDown: function (cm) { return cm.moveV(1, \\\"line\\\"); },\\n    goPageUp: function (cm) { return cm.moveV(-1, \\\"page\\\"); },\\n    goPageDown: function (cm) { return cm.moveV(1, \\\"page\\\"); },\\n    goCharLeft: function (cm) { return cm.moveH(-1, \\\"char\\\"); },\\n    goCharRight: function (cm) { return cm.moveH(1, \\\"char\\\"); },\\n    goColumnLeft: function (cm) { return cm.moveH(-1, \\\"column\\\"); },\\n    goColumnRight: function (cm) { return cm.moveH(1, \\\"column\\\"); },\\n    goWordLeft: function (cm) { return cm.moveH(-1, \\\"word\\\"); },\\n    goGroupRight: function (cm) { return cm.moveH(1, \\\"group\\\"); },\\n    goGroupLeft: function (cm) { return cm.moveH(-1, \\\"group\\\"); },\\n    goWordRight: function (cm) { return cm.moveH(1, \\\"word\\\"); },\\n    delCharBefore: function (cm) { return cm.deleteH(-1, \\\"char\\\"); },\\n    delCharAfter: function (cm) { return cm.deleteH(1, \\\"char\\\"); },\\n    delWordBefore: function (cm) { return cm.deleteH(-1, \\\"word\\\"); },\\n    delWordAfter: function (cm) { return cm.deleteH(1, \\\"word\\\"); },\\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \\\"group\\\"); },\\n    delGroupAfter: function (cm) { return cm.deleteH(1, \\\"group\\\"); },\\n    indentAuto: function (cm) { return cm.indentSelection(\\\"smart\\\"); },\\n    indentMore: function (cm) { return cm.indentSelection(\\\"add\\\"); },\\n    indentLess: function (cm) { return cm.indentSelection(\\\"subtract\\\"); },\\n    insertTab: function (cm) { return cm.replaceSelection(\\\"\\\\t\\\"); },\\n    insertSoftTab: function (cm) {\\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\\n      for (var i = 0; i < ranges.length; i++) {\\n        var pos = ranges[i].from();\\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\\n        spaces.push(spaceStr(tabSize - col % tabSize));\\n      }\\n      cm.replaceSelections(spaces);\\n    },\\n    defaultTab: function (cm) {\\n      if (cm.somethingSelected()) { cm.indentSelection(\\\"add\\\"); }\\n      else { cm.execCommand(\\\"insertTab\\\"); }\\n    },\\n    // Swap the two chars left and right of each selection's head.\\n    // Move cursor behind the two swapped characters afterwards.\\n    //\\n    // Doesn't consider line feeds a character.\\n    // Doesn't scan more than one line above to find a character.\\n    // Doesn't do anything on an empty line.\\n    // Doesn't do anything with non-empty selections.\\n    transposeChars: function (cm) { return runInOp(cm, function () {\\n      var ranges = cm.listSelections(), newSel = [];\\n      for (var i = 0; i < ranges.length; i++) {\\n        if (!ranges[i].empty()) { continue }\\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\\n        if (line) {\\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\\n          if (cur.ch > 0) {\\n            cur = new Pos(cur.line, cur.ch + 1);\\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\\n                            Pos(cur.line, cur.ch - 2), cur, \\\"+transpose\\\");\\n          } else if (cur.line > cm.doc.first) {\\n            var prev = getLine(cm.doc, cur.line - 1).text;\\n            if (prev) {\\n              cur = new Pos(cur.line, 1);\\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\\n                              prev.charAt(prev.length - 1),\\n                              Pos(cur.line - 1, prev.length - 1), cur, \\\"+transpose\\\");\\n            }\\n          }\\n        }\\n        newSel.push(new Range(cur, cur));\\n      }\\n      cm.setSelections(newSel);\\n    }); },\\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\\n      var sels = cm.listSelections();\\n      for (var i = sels.length - 1; i >= 0; i--)\\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \\\"+input\\\"); }\\n      sels = cm.listSelections();\\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\\n        { cm.indentLine(sels[i$1].from().line, null, true); }\\n      ensureCursorVisible(cm);\\n    }); },\\n    openLine: function (cm) { return cm.replaceSelection(\\\"\\\\n\\\", \\\"start\\\"); },\\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\\n  };\\n\\n\\n  function lineStart(cm, lineN) {\\n    var line = getLine(cm.doc, lineN);\\n    var visual = visualLine(line);\\n    if (visual != line) { lineN = lineNo(visual); }\\n    return endOfLine(true, cm, visual, lineN, 1)\\n  }\\n  function lineEnd(cm, lineN) {\\n    var line = getLine(cm.doc, lineN);\\n    var visual = visualLineEnd(line);\\n    if (visual != line) { lineN = lineNo(visual); }\\n    return endOfLine(true, cm, line, lineN, -1)\\n  }\\n  function lineStartSmart(cm, pos) {\\n    var start = lineStart(cm, pos.line);\\n    var line = getLine(cm.doc, start.line);\\n    var order = getOrder(line, cm.doc.direction);\\n    if (!order || order[0].level == 0) {\\n      var firstNonWS = Math.max(0, line.text.search(/\\\\S/));\\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\\n    }\\n    return start\\n  }\\n\\n  // Run a handler that was bound to a key.\\n  function doHandleBinding(cm, bound, dropShift) {\\n    if (typeof bound == \\\"string\\\") {\\n      bound = commands[bound];\\n      if (!bound) { return false }\\n    }\\n    // Ensure previous input has been read, so that the handler sees a\\n    // consistent view of the document\\n    cm.display.input.ensurePolled();\\n    var prevShift = cm.display.shift, done = false;\\n    try {\\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\\n      if (dropShift) { cm.display.shift = false; }\\n      done = bound(cm) != Pass;\\n    } finally {\\n      cm.display.shift = prevShift;\\n      cm.state.suppressEdits = false;\\n    }\\n    return done\\n  }\\n\\n  function lookupKeyForEditor(cm, name, handle) {\\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\\n      if (result) { return result }\\n    }\\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\\n      || lookupKey(name, cm.options.keyMap, handle, cm)\\n  }\\n\\n  // Note that, despite the name, this function is also used to check\\n  // for bound mouse clicks.\\n\\n  var stopSeq = new Delayed;\\n\\n  function dispatchKey(cm, name, e, handle) {\\n    var seq = cm.state.keySeq;\\n    if (seq) {\\n      if (isModifierKey(name)) { return \\\"handled\\\" }\\n      if (/\\\\'$/.test(name))\\n        { cm.state.keySeq = null; }\\n      else\\n        { stopSeq.set(50, function () {\\n          if (cm.state.keySeq == seq) {\\n            cm.state.keySeq = null;\\n            cm.display.input.reset();\\n          }\\n        }); }\\n      if (dispatchKeyInner(cm, seq + \\\" \\\" + name, e, handle)) { return true }\\n    }\\n    return dispatchKeyInner(cm, name, e, handle)\\n  }\\n\\n  function dispatchKeyInner(cm, name, e, handle) {\\n    var result = lookupKeyForEditor(cm, name, handle);\\n\\n    if (result == \\\"multi\\\")\\n      { cm.state.keySeq = name; }\\n    if (result == \\\"handled\\\")\\n      { signalLater(cm, \\\"keyHandled\\\", cm, name, e); }\\n\\n    if (result == \\\"handled\\\" || result == \\\"multi\\\") {\\n      e_preventDefault(e);\\n      restartBlink(cm);\\n    }\\n\\n    return !!result\\n  }\\n\\n  // Handle a key from the keydown event.\\n  function handleKeyBinding(cm, e) {\\n    var name = keyName(e, true);\\n    if (!name) { return false }\\n\\n    if (e.shiftKey && !cm.state.keySeq) {\\n      // First try to resolve full name (including 'Shift-'). Failing\\n      // that, see if there is a cursor-motion command (starting with\\n      // 'go') bound to the keyname without 'Shift-'.\\n      return dispatchKey(cm, \\\"Shift-\\\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\\n          || dispatchKey(cm, name, e, function (b) {\\n               if (typeof b == \\\"string\\\" ? /^go[A-Z]/.test(b) : b.motion)\\n                 { return doHandleBinding(cm, b) }\\n             })\\n    } else {\\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\\n    }\\n  }\\n\\n  // Handle a key from the keypress event\\n  function handleCharBinding(cm, e, ch) {\\n    return dispatchKey(cm, \\\"'\\\" + ch + \\\"'\\\", e, function (b) { return doHandleBinding(cm, b, true); })\\n  }\\n\\n  var lastStoppedKey = null;\\n  function onKeyDown(e) {\\n    var cm = this;\\n    cm.curOp.focus = activeElt();\\n    if (signalDOMEvent(cm, e)) { return }\\n    // IE does strange things with escape.\\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\\n    var code = e.keyCode;\\n    cm.display.shift = code == 16 || e.shiftKey;\\n    var handled = handleKeyBinding(cm, e);\\n    if (presto) {\\n      lastStoppedKey = handled ? code : null;\\n      // Opera has no cut event... we try to at least catch the key combo\\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\\n        { cm.replaceSelection(\\\"\\\", null, \\\"cut\\\"); }\\n    }\\n\\n    // Turn mouse into crosshair when Alt is held on Mac.\\n    if (code == 18 && !/\\\\bCodeMirror-crosshair\\\\b/.test(cm.display.lineDiv.className))\\n      { showCrossHair(cm); }\\n  }\\n\\n  function showCrossHair(cm) {\\n    var lineDiv = cm.display.lineDiv;\\n    addClass(lineDiv, \\\"CodeMirror-crosshair\\\");\\n\\n    function up(e) {\\n      if (e.keyCode == 18 || !e.altKey) {\\n        rmClass(lineDiv, \\\"CodeMirror-crosshair\\\");\\n        off(document, \\\"keyup\\\", up);\\n        off(document, \\\"mouseover\\\", up);\\n      }\\n    }\\n    on(document, \\\"keyup\\\", up);\\n    on(document, \\\"mouseover\\\", up);\\n  }\\n\\n  function onKeyUp(e) {\\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\\n    signalDOMEvent(this, e);\\n  }\\n\\n  function onKeyPress(e) {\\n    var cm = this;\\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\\n    var keyCode = e.keyCode, charCode = e.charCode;\\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\\n    // Some browsers fire keypress events for backspace\\n    if (ch == \\\"\\\\x08\\\") { return }\\n    if (handleCharBinding(cm, e, ch)) { return }\\n    cm.display.input.onKeyPress(e);\\n  }\\n\\n  var DOUBLECLICK_DELAY = 400;\\n\\n  var PastClick = function(time, pos, button) {\\n    this.time = time;\\n    this.pos = pos;\\n    this.button = button;\\n  };\\n\\n  PastClick.prototype.compare = function (time, pos, button) {\\n    return this.time + DOUBLECLICK_DELAY > time &&\\n      cmp(pos, this.pos) == 0 && button == this.button\\n  };\\n\\n  var lastClick, lastDoubleClick;\\n  function clickRepeat(pos, button) {\\n    var now = +new Date;\\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\\n      lastClick = lastDoubleClick = null;\\n      return \\\"triple\\\"\\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\\n      lastDoubleClick = new PastClick(now, pos, button);\\n      lastClick = null;\\n      return \\\"double\\\"\\n    } else {\\n      lastClick = new PastClick(now, pos, button);\\n      lastDoubleClick = null;\\n      return \\\"single\\\"\\n    }\\n  }\\n\\n  // A mouse down can be a single click, double click, triple click,\\n  // start of selection drag, start of text drag, new cursor\\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\\n  // middle-click-paste. Or it might be a click on something we should\\n  // not interfere with, such as a scrollbar or widget.\\n  function onMouseDown(e) {\\n    var cm = this, display = cm.display;\\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\\n    display.input.ensurePolled();\\n    display.shift = e.shiftKey;\\n\\n    if (eventInWidget(display, e)) {\\n      if (!webkit) {\\n        // Briefly turn off draggability, to allow widgets to do\\n        // normal dragging things.\\n        display.scroller.draggable = false;\\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\\n      }\\n      return\\n    }\\n    if (clickInGutter(cm, e)) { return }\\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \\\"single\\\";\\n    window.focus();\\n\\n    // #3261: make sure, that we're not starting a second selection\\n    if (button == 1 && cm.state.selectingText)\\n      { cm.state.selectingText(e); }\\n\\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\\n\\n    if (button == 1) {\\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\\n    } else if (button == 2) {\\n      if (pos) { extendSelection(cm.doc, pos); }\\n      setTimeout(function () { return display.input.focus(); }, 20);\\n    } else if (button == 3) {\\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\\n      else { delayBlurEvent(cm); }\\n    }\\n  }\\n\\n  function handleMappedButton(cm, button, pos, repeat, event) {\\n    var name = \\\"Click\\\";\\n    if (repeat == \\\"double\\\") { name = \\\"Double\\\" + name; }\\n    else if (repeat == \\\"triple\\\") { name = \\\"Triple\\\" + name; }\\n    name = (button == 1 ? \\\"Left\\\" : button == 2 ? \\\"Middle\\\" : \\\"Right\\\") + name;\\n\\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\\n      if (typeof bound == \\\"string\\\") { bound = commands[bound]; }\\n      if (!bound) { return false }\\n      var done = false;\\n      try {\\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\\n        done = bound(cm, pos) != Pass;\\n      } finally {\\n        cm.state.suppressEdits = false;\\n      }\\n      return done\\n    })\\n  }\\n\\n  function configureMouse(cm, repeat, event) {\\n    var option = cm.getOption(\\\"configureMouse\\\");\\n    var value = option ? option(cm, repeat, event) : {};\\n    if (value.unit == null) {\\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\\n      value.unit = rect ? \\\"rectangle\\\" : repeat == \\\"single\\\" ? \\\"char\\\" : repeat == \\\"double\\\" ? \\\"word\\\" : \\\"line\\\";\\n    }\\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\\n    return value\\n  }\\n\\n  function leftButtonDown(cm, pos, repeat, event) {\\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\\n    else { cm.curOp.focus = activeElt(); }\\n\\n    var behavior = configureMouse(cm, repeat, event);\\n\\n    var sel = cm.doc.sel, contained;\\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\\n        repeat == \\\"single\\\" && (contained = sel.contains(pos)) > -1 &&\\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\\n      { leftButtonStartDrag(cm, event, pos, behavior); }\\n    else\\n      { leftButtonSelect(cm, event, pos, behavior); }\\n  }\\n\\n  // Start a text drag. When it ends, see if any dragging actually\\n  // happen, and treat as a click if it didn't.\\n  function leftButtonStartDrag(cm, event, pos, behavior) {\\n    var display = cm.display, moved = false;\\n    var dragEnd = operation(cm, function (e) {\\n      if (webkit) { display.scroller.draggable = false; }\\n      cm.state.draggingText = false;\\n      off(display.wrapper.ownerDocument, \\\"mouseup\\\", dragEnd);\\n      off(display.wrapper.ownerDocument, \\\"mousemove\\\", mouseMove);\\n      off(display.scroller, \\\"dragstart\\\", dragStart);\\n      off(display.scroller, \\\"drop\\\", dragEnd);\\n      if (!moved) {\\n        e_preventDefault(e);\\n        if (!behavior.addNew)\\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\\n        if (webkit || ie && ie_version == 9)\\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus(); display.input.focus();}, 20); }\\n        else\\n          { display.input.focus(); }\\n      }\\n    });\\n    var mouseMove = function(e2) {\\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\\n    };\\n    var dragStart = function () { return moved = true; };\\n    // Let the drag handler handle this.\\n    if (webkit) { display.scroller.draggable = true; }\\n    cm.state.draggingText = dragEnd;\\n    dragEnd.copy = !behavior.moveOnDrag;\\n    // IE's approach to draggable\\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\\n    on(display.wrapper.ownerDocument, \\\"mouseup\\\", dragEnd);\\n    on(display.wrapper.ownerDocument, \\\"mousemove\\\", mouseMove);\\n    on(display.scroller, \\\"dragstart\\\", dragStart);\\n    on(display.scroller, \\\"drop\\\", dragEnd);\\n\\n    delayBlurEvent(cm);\\n    setTimeout(function () { return display.input.focus(); }, 20);\\n  }\\n\\n  function rangeForUnit(cm, pos, unit) {\\n    if (unit == \\\"char\\\") { return new Range(pos, pos) }\\n    if (unit == \\\"word\\\") { return cm.findWordAt(pos) }\\n    if (unit == \\\"line\\\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\\n    var result = unit(cm, pos);\\n    return new Range(result.from, result.to)\\n  }\\n\\n  // Normal selection, as opposed to text dragging.\\n  function leftButtonSelect(cm, event, start, behavior) {\\n    var display = cm.display, doc = cm.doc;\\n    e_preventDefault(event);\\n\\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\\n    if (behavior.addNew && !behavior.extend) {\\n      ourIndex = doc.sel.contains(start);\\n      if (ourIndex > -1)\\n        { ourRange = ranges[ourIndex]; }\\n      else\\n        { ourRange = new Range(start, start); }\\n    } else {\\n      ourRange = doc.sel.primary();\\n      ourIndex = doc.sel.primIndex;\\n    }\\n\\n    if (behavior.unit == \\\"rectangle\\\") {\\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\\n      start = posFromMouse(cm, event, true, true);\\n      ourIndex = -1;\\n    } else {\\n      var range$$1 = rangeForUnit(cm, start, behavior.unit);\\n      if (behavior.extend)\\n        { ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend); }\\n      else\\n        { ourRange = range$$1; }\\n    }\\n\\n    if (!behavior.addNew) {\\n      ourIndex = 0;\\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\\n      startSel = doc.sel;\\n    } else if (ourIndex == -1) {\\n      ourIndex = ranges.length;\\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\\n                   {scroll: false, origin: \\\"*mouse\\\"});\\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \\\"char\\\" && !behavior.extend) {\\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\\n                   {scroll: false, origin: \\\"*mouse\\\"});\\n      startSel = doc.sel;\\n    } else {\\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\\n    }\\n\\n    var lastPos = start;\\n    function extendTo(pos) {\\n      if (cmp(lastPos, pos) == 0) { return }\\n      lastPos = pos;\\n\\n      if (behavior.unit == \\\"rectangle\\\") {\\n        var ranges = [], tabSize = cm.options.tabSize;\\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\\n             line <= end; line++) {\\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\\n          if (left == right)\\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\\n          else if (text.length > leftPos)\\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\\n        }\\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\\n                     {origin: \\\"*mouse\\\", scroll: false});\\n        cm.scrollIntoView(pos);\\n      } else {\\n        var oldRange = ourRange;\\n        var range$$1 = rangeForUnit(cm, pos, behavior.unit);\\n        var anchor = oldRange.anchor, head;\\n        if (cmp(range$$1.anchor, anchor) > 0) {\\n          head = range$$1.head;\\n          anchor = minPos(oldRange.from(), range$$1.anchor);\\n        } else {\\n          head = range$$1.anchor;\\n          anchor = maxPos(oldRange.to(), range$$1.head);\\n        }\\n        var ranges$1 = startSel.ranges.slice(0);\\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\\n      }\\n    }\\n\\n    var editorSize = display.wrapper.getBoundingClientRect();\\n    // Used to ensure timeout re-tries don't fire when another extend\\n    // happened in the meantime (clearTimeout isn't reliable -- at\\n    // least on Chrome, the timeouts still happen even when cleared,\\n    // if the clear happens after their scheduled firing time).\\n    var counter = 0;\\n\\n    function extend(e) {\\n      var curCount = ++counter;\\n      var cur = posFromMouse(cm, e, true, behavior.unit == \\\"rectangle\\\");\\n      if (!cur) { return }\\n      if (cmp(cur, lastPos) != 0) {\\n        cm.curOp.focus = activeElt();\\n        extendTo(cur);\\n        var visible = visibleLines(display, doc);\\n        if (cur.line >= visible.to || cur.line < visible.from)\\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\\n      } else {\\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\\n        if (outside) { setTimeout(operation(cm, function () {\\n          if (counter != curCount) { return }\\n          display.scroller.scrollTop += outside;\\n          extend(e);\\n        }), 50); }\\n      }\\n    }\\n\\n    function done(e) {\\n      cm.state.selectingText = false;\\n      counter = Infinity;\\n      // If e is null or undefined we interpret this as someone trying\\n      // to explicitly cancel the selection rather than the user\\n      // letting go of the mouse button.\\n      if (e) {\\n        e_preventDefault(e);\\n        display.input.focus();\\n      }\\n      off(display.wrapper.ownerDocument, \\\"mousemove\\\", move);\\n      off(display.wrapper.ownerDocument, \\\"mouseup\\\", up);\\n      doc.history.lastSelOrigin = null;\\n    }\\n\\n    var move = operation(cm, function (e) {\\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\\n      else { extend(e); }\\n    });\\n    var up = operation(cm, done);\\n    cm.state.selectingText = up;\\n    on(display.wrapper.ownerDocument, \\\"mousemove\\\", move);\\n    on(display.wrapper.ownerDocument, \\\"mouseup\\\", up);\\n  }\\n\\n  // Used when mouse-selecting to adjust the anchor to the proper side\\n  // of a bidi jump depending on the visual position of the head.\\n  function bidiSimplify(cm, range$$1) {\\n    var anchor = range$$1.anchor;\\n    var head = range$$1.head;\\n    var anchorLine = getLine(cm.doc, anchor.line);\\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range$$1 }\\n    var order = getOrder(anchorLine);\\n    if (!order) { return range$$1 }\\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range$$1 }\\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\\n    if (boundary == 0 || boundary == order.length) { return range$$1 }\\n\\n    // Compute the relative visual position of the head compared to the\\n    // anchor (<0 is to the left, >0 to the right)\\n    var leftSide;\\n    if (head.line != anchor.line) {\\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \\\"ltr\\\" ? 1 : -1) > 0;\\n    } else {\\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\\n      if (headIndex == boundary - 1 || headIndex == boundary)\\n        { leftSide = dir < 0; }\\n      else\\n        { leftSide = dir > 0; }\\n    }\\n\\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\\n    var from = leftSide == (usePart.level == 1);\\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \\\"after\\\" : \\\"before\\\";\\n    return anchor.ch == ch && anchor.sticky == sticky ? range$$1 : new Range(new Pos(anchor.line, ch, sticky), head)\\n  }\\n\\n\\n  // Determines whether an event happened in the gutter, and fires the\\n  // handlers for the corresponding event.\\n  function gutterEvent(cm, e, type, prevent) {\\n    var mX, mY;\\n    if (e.touches) {\\n      mX = e.touches[0].clientX;\\n      mY = e.touches[0].clientY;\\n    } else {\\n      try { mX = e.clientX; mY = e.clientY; }\\n      catch(e) { return false }\\n    }\\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\\n    if (prevent) { e_preventDefault(e); }\\n\\n    var display = cm.display;\\n    var lineBox = display.lineDiv.getBoundingClientRect();\\n\\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\\n    mY -= lineBox.top - display.viewOffset;\\n\\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\\n      var g = display.gutters.childNodes[i];\\n      if (g && g.getBoundingClientRect().right >= mX) {\\n        var line = lineAtHeight(cm.doc, mY);\\n        var gutter = cm.display.gutterSpecs[i];\\n        signal(cm, type, cm, line, gutter.className, e);\\n        return e_defaultPrevented(e)\\n      }\\n    }\\n  }\\n\\n  function clickInGutter(cm, e) {\\n    return gutterEvent(cm, e, \\\"gutterClick\\\", true)\\n  }\\n\\n  // CONTEXT MENU HANDLING\\n\\n  // To make the context menu work, we need to briefly unhide the\\n  // textarea (making it as unobtrusive as possible) to let the\\n  // right-click take effect on it.\\n  function onContextMenu(cm, e) {\\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\\n    if (signalDOMEvent(cm, e, \\\"contextmenu\\\")) { return }\\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\\n  }\\n\\n  function contextMenuInGutter(cm, e) {\\n    if (!hasHandler(cm, \\\"gutterContextMenu\\\")) { return false }\\n    return gutterEvent(cm, e, \\\"gutterContextMenu\\\", false)\\n  }\\n\\n  function themeChanged(cm) {\\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\\\s*cm-s-\\\\S+/g, \\\"\\\") +\\n      cm.options.theme.replace(/(^|\\\\s)\\\\s*/g, \\\" cm-s-\\\");\\n    clearCaches(cm);\\n  }\\n\\n  var Init = {toString: function(){return \\\"CodeMirror.Init\\\"}};\\n\\n  var defaults = {};\\n  var optionHandlers = {};\\n\\n  function defineOptions(CodeMirror) {\\n    var optionHandlers = CodeMirror.optionHandlers;\\n\\n    function option(name, deflt, handle, notOnInit) {\\n      CodeMirror.defaults[name] = deflt;\\n      if (handle) { optionHandlers[name] =\\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\\n    }\\n\\n    CodeMirror.defineOption = option;\\n\\n    // Passed to option handlers when there is no old value.\\n    CodeMirror.Init = Init;\\n\\n    // These two are, on init, called from the constructor because they\\n    // have to be initialized before the editor can start at all.\\n    option(\\\"value\\\", \\\"\\\", function (cm, val) { return cm.setValue(val); }, true);\\n    option(\\\"mode\\\", null, function (cm, val) {\\n      cm.doc.modeOption = val;\\n      loadMode(cm);\\n    }, true);\\n\\n    option(\\\"indentUnit\\\", 2, loadMode, true);\\n    option(\\\"indentWithTabs\\\", false);\\n    option(\\\"smartIndent\\\", true);\\n    option(\\\"tabSize\\\", 4, function (cm) {\\n      resetModeState(cm);\\n      clearCaches(cm);\\n      regChange(cm);\\n    }, true);\\n\\n    option(\\\"lineSeparator\\\", null, function (cm, val) {\\n      cm.doc.lineSep = val;\\n      if (!val) { return }\\n      var newBreaks = [], lineNo = cm.doc.first;\\n      cm.doc.iter(function (line) {\\n        for (var pos = 0;;) {\\n          var found = line.text.indexOf(val, pos);\\n          if (found == -1) { break }\\n          pos = found + val.length;\\n          newBreaks.push(Pos(lineNo, found));\\n        }\\n        lineNo++;\\n      });\\n      for (var i = newBreaks.length - 1; i >= 0; i--)\\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\\n    });\\n    option(\\\"specialChars\\\", /[\\\\u0000-\\\\u001f\\\\u007f-\\\\u009f\\\\u00ad\\\\u061c\\\\u200b-\\\\u200f\\\\u2028\\\\u2029\\\\ufeff\\\\ufff9-\\\\ufffc]/g, function (cm, val, old) {\\n      cm.state.specialChars = new RegExp(val.source + (val.test(\\\"\\\\t\\\") ? \\\"\\\" : \\\"|\\\\t\\\"), \\\"g\\\");\\n      if (old != Init) { cm.refresh(); }\\n    });\\n    option(\\\"specialCharPlaceholder\\\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\\n    option(\\\"electricChars\\\", true);\\n    option(\\\"inputStyle\\\", mobile ? \\\"contenteditable\\\" : \\\"textarea\\\", function () {\\n      throw new Error(\\\"inputStyle can not (yet) be changed in a running editor\\\") // FIXME\\n    }, true);\\n    option(\\\"spellcheck\\\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\\n    option(\\\"autocorrect\\\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\\n    option(\\\"autocapitalize\\\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\\n    option(\\\"rtlMoveVisually\\\", !windows);\\n    option(\\\"wholeLineUpdateBefore\\\", true);\\n\\n    option(\\\"theme\\\", \\\"default\\\", function (cm) {\\n      themeChanged(cm);\\n      updateGutters(cm);\\n    }, true);\\n    option(\\\"keyMap\\\", \\\"default\\\", function (cm, val, old) {\\n      var next = getKeyMap(val);\\n      var prev = old != Init && getKeyMap(old);\\n      if (prev && prev.detach) { prev.detach(cm, next); }\\n      if (next.attach) { next.attach(cm, prev || null); }\\n    });\\n    option(\\\"extraKeys\\\", null);\\n    option(\\\"configureMouse\\\", null);\\n\\n    option(\\\"lineWrapping\\\", false, wrappingChanged, true);\\n    option(\\\"gutters\\\", [], function (cm, val) {\\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\\n      updateGutters(cm);\\n    }, true);\\n    option(\\\"fixedGutter\\\", true, function (cm, val) {\\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \\\"px\\\" : \\\"0\\\";\\n      cm.refresh();\\n    }, true);\\n    option(\\\"coverGutterNextToScrollbar\\\", false, function (cm) { return updateScrollbars(cm); }, true);\\n    option(\\\"scrollbarStyle\\\", \\\"native\\\", function (cm) {\\n      initScrollbars(cm);\\n      updateScrollbars(cm);\\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\\n    }, true);\\n    option(\\\"lineNumbers\\\", false, function (cm, val) {\\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\\n      updateGutters(cm);\\n    }, true);\\n    option(\\\"firstLineNumber\\\", 1, updateGutters, true);\\n    option(\\\"lineNumberFormatter\\\", function (integer) { return integer; }, updateGutters, true);\\n    option(\\\"showCursorWhenSelecting\\\", false, updateSelection, true);\\n\\n    option(\\\"resetSelectionOnContextMenu\\\", true);\\n    option(\\\"lineWiseCopyCut\\\", true);\\n    option(\\\"pasteLinesPerSelection\\\", true);\\n    option(\\\"selectionsMayTouch\\\", false);\\n\\n    option(\\\"readOnly\\\", false, function (cm, val) {\\n      if (val == \\\"nocursor\\\") {\\n        onBlur(cm);\\n        cm.display.input.blur();\\n      }\\n      cm.display.input.readOnlyChanged(val);\\n    });\\n    option(\\\"disableInput\\\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\\n    option(\\\"dragDrop\\\", true, dragDropChanged);\\n    option(\\\"allowDropFileTypes\\\", null);\\n\\n    option(\\\"cursorBlinkRate\\\", 530);\\n    option(\\\"cursorScrollMargin\\\", 0);\\n    option(\\\"cursorHeight\\\", 1, updateSelection, true);\\n    option(\\\"singleCursorHeightPerLine\\\", true, updateSelection, true);\\n    option(\\\"workTime\\\", 100);\\n    option(\\\"workDelay\\\", 100);\\n    option(\\\"flattenSpans\\\", true, resetModeState, true);\\n    option(\\\"addModeClass\\\", false, resetModeState, true);\\n    option(\\\"pollInterval\\\", 100);\\n    option(\\\"undoDepth\\\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\\n    option(\\\"historyEventDelay\\\", 1250);\\n    option(\\\"viewportMargin\\\", 10, function (cm) { return cm.refresh(); }, true);\\n    option(\\\"maxHighlightLength\\\", 10000, resetModeState, true);\\n    option(\\\"moveInputWithCursor\\\", true, function (cm, val) {\\n      if (!val) { cm.display.input.resetPosition(); }\\n    });\\n\\n    option(\\\"tabindex\\\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \\\"\\\"; });\\n    option(\\\"autofocus\\\", null);\\n    option(\\\"direction\\\", \\\"ltr\\\", function (cm, val) { return cm.doc.setDirection(val); }, true);\\n    option(\\\"phrases\\\", null);\\n  }\\n\\n  function dragDropChanged(cm, value, old) {\\n    var wasOn = old && old != Init;\\n    if (!value != !wasOn) {\\n      var funcs = cm.display.dragFunctions;\\n      var toggle = value ? on : off;\\n      toggle(cm.display.scroller, \\\"dragstart\\\", funcs.start);\\n      toggle(cm.display.scroller, \\\"dragenter\\\", funcs.enter);\\n      toggle(cm.display.scroller, \\\"dragover\\\", funcs.over);\\n      toggle(cm.display.scroller, \\\"dragleave\\\", funcs.leave);\\n      toggle(cm.display.scroller, \\\"drop\\\", funcs.drop);\\n    }\\n  }\\n\\n  function wrappingChanged(cm) {\\n    if (cm.options.lineWrapping) {\\n      addClass(cm.display.wrapper, \\\"CodeMirror-wrap\\\");\\n      cm.display.sizer.style.minWidth = \\\"\\\";\\n      cm.display.sizerWidth = null;\\n    } else {\\n      rmClass(cm.display.wrapper, \\\"CodeMirror-wrap\\\");\\n      findMaxLine(cm);\\n    }\\n    estimateLineHeights(cm);\\n    regChange(cm);\\n    clearCaches(cm);\\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\\n  }\\n\\n  // A CodeMirror instance represents an editor. This is the object\\n  // that user code is usually dealing with.\\n\\n  function CodeMirror(place, options) {\\n    var this$1 = this;\\n\\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\\n\\n    this.options = options = options ? copyObj(options) : {};\\n    // Determine effective options based on given values and defaults.\\n    copyObj(defaults, options, false);\\n\\n    var doc = options.value;\\n    if (typeof doc == \\\"string\\\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\\n    else if (options.mode) { doc.modeOption = options.mode; }\\n    this.doc = doc;\\n\\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\\n    var display = this.display = new Display(place, doc, input, options);\\n    display.wrapper.CodeMirror = this;\\n    themeChanged(this);\\n    if (options.lineWrapping)\\n      { this.display.wrapper.className += \\\" CodeMirror-wrap\\\"; }\\n    initScrollbars(this);\\n\\n    this.state = {\\n      keyMaps: [],  // stores maps added by addKeyMap\\n      overlays: [], // highlighting overlays, as added by addOverlay\\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\\n      overwrite: false,\\n      delayingBlurEvent: false,\\n      focused: false,\\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\\n      selectingText: false,\\n      draggingText: false,\\n      highlight: new Delayed(), // stores highlight worker timeout\\n      keySeq: null,  // Unfinished key sequence\\n      specialChars: null\\n    };\\n\\n    if (options.autofocus && !mobile) { display.input.focus(); }\\n\\n    // Override magic textarea content restore that IE sometimes does\\n    // on our hidden textarea on reload\\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\\n\\n    registerEventHandlers(this);\\n    ensureGlobalHandlers();\\n\\n    startOperation(this);\\n    this.curOp.forceUpdate = true;\\n    attachDoc(this, doc);\\n\\n    if ((options.autofocus && !mobile) || this.hasFocus())\\n      { setTimeout(bind(onFocus, this), 20); }\\n    else\\n      { onBlur(this); }\\n\\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\\n      { optionHandlers[opt](this$1, options[opt], Init); } }\\n    maybeUpdateLineNumberWidth(this);\\n    if (options.finishInit) { options.finishInit(this); }\\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this$1); }\\n    endOperation(this);\\n    // Suppress optimizelegibility in Webkit, since it breaks text\\n    // measuring on line wrapping boundaries.\\n    if (webkit && options.lineWrapping &&\\n        getComputedStyle(display.lineDiv).textRendering == \\\"optimizelegibility\\\")\\n      { display.lineDiv.style.textRendering = \\\"auto\\\"; }\\n  }\\n\\n  // The default configuration options.\\n  CodeMirror.defaults = defaults;\\n  // Functions to run when options are changed.\\n  CodeMirror.optionHandlers = optionHandlers;\\n\\n  // Attach the necessary event handlers when initializing the editor\\n  function registerEventHandlers(cm) {\\n    var d = cm.display;\\n    on(d.scroller, \\\"mousedown\\\", operation(cm, onMouseDown));\\n    // Older IE's will not fire a second mousedown for a double click\\n    if (ie && ie_version < 11)\\n      { on(d.scroller, \\\"dblclick\\\", operation(cm, function (e) {\\n        if (signalDOMEvent(cm, e)) { return }\\n        var pos = posFromMouse(cm, e);\\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\\n        e_preventDefault(e);\\n        var word = cm.findWordAt(pos);\\n        extendSelection(cm.doc, word.anchor, word.head);\\n      })); }\\n    else\\n      { on(d.scroller, \\\"dblclick\\\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\\n    // Some browsers fire contextmenu *after* opening the menu, at\\n    // which point we can't mess with it anymore. Context menu is\\n    // handled in onMouseDown for these browsers.\\n    on(d.scroller, \\\"contextmenu\\\", function (e) { return onContextMenu(cm, e); });\\n\\n    // Used to suppress mouse event handling when a touch happens\\n    var touchFinished, prevTouch = {end: 0};\\n    function finishTouch() {\\n      if (d.activeTouch) {\\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\\n        prevTouch = d.activeTouch;\\n        prevTouch.end = +new Date;\\n      }\\n    }\\n    function isMouseLikeTouchEvent(e) {\\n      if (e.touches.length != 1) { return false }\\n      var touch = e.touches[0];\\n      return touch.radiusX <= 1 && touch.radiusY <= 1\\n    }\\n    function farAway(touch, other) {\\n      if (other.left == null) { return true }\\n      var dx = other.left - touch.left, dy = other.top - touch.top;\\n      return dx * dx + dy * dy > 20 * 20\\n    }\\n    on(d.scroller, \\\"touchstart\\\", function (e) {\\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\\n        d.input.ensurePolled();\\n        clearTimeout(touchFinished);\\n        var now = +new Date;\\n        d.activeTouch = {start: now, moved: false,\\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\\n        if (e.touches.length == 1) {\\n          d.activeTouch.left = e.touches[0].pageX;\\n          d.activeTouch.top = e.touches[0].pageY;\\n        }\\n      }\\n    });\\n    on(d.scroller, \\\"touchmove\\\", function () {\\n      if (d.activeTouch) { d.activeTouch.moved = true; }\\n    });\\n    on(d.scroller, \\\"touchend\\\", function (e) {\\n      var touch = d.activeTouch;\\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\\n          !touch.moved && new Date - touch.start < 300) {\\n        var pos = cm.coordsChar(d.activeTouch, \\\"page\\\"), range;\\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\\n          { range = new Range(pos, pos); }\\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\\n          { range = cm.findWordAt(pos); }\\n        else // Triple tap\\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\\n        cm.setSelection(range.anchor, range.head);\\n        cm.focus();\\n        e_preventDefault(e);\\n      }\\n      finishTouch();\\n    });\\n    on(d.scroller, \\\"touchcancel\\\", finishTouch);\\n\\n    // Sync scrolling between fake scrollbars and real scrollable\\n    // area, ensure viewport is updated when scrolling.\\n    on(d.scroller, \\\"scroll\\\", function () {\\n      if (d.scroller.clientHeight) {\\n        updateScrollTop(cm, d.scroller.scrollTop);\\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\\n        signal(cm, \\\"scroll\\\", cm);\\n      }\\n    });\\n\\n    // Listen to wheel events in order to try and update the viewport on time.\\n    on(d.scroller, \\\"mousewheel\\\", function (e) { return onScrollWheel(cm, e); });\\n    on(d.scroller, \\\"DOMMouseScroll\\\", function (e) { return onScrollWheel(cm, e); });\\n\\n    // Prevent wrapper from ever scrolling\\n    on(d.wrapper, \\\"scroll\\\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\\n\\n    d.dragFunctions = {\\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\\n      start: function (e) { return onDragStart(cm, e); },\\n      drop: operation(cm, onDrop),\\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\\n    };\\n\\n    var inp = d.input.getField();\\n    on(inp, \\\"keyup\\\", function (e) { return onKeyUp.call(cm, e); });\\n    on(inp, \\\"keydown\\\", operation(cm, onKeyDown));\\n    on(inp, \\\"keypress\\\", operation(cm, onKeyPress));\\n    on(inp, \\\"focus\\\", function (e) { return onFocus(cm, e); });\\n    on(inp, \\\"blur\\\", function (e) { return onBlur(cm, e); });\\n  }\\n\\n  var initHooks = [];\\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\\n\\n  // Indent the given line. The how parameter can be \\\"smart\\\",\\n  // \\\"add\\\"/null, \\\"subtract\\\", or \\\"prev\\\". When aggressive is false\\n  // (typically set to true for forced single-line indents), empty\\n  // lines are not indented, and places where the mode returns Pass\\n  // are left alone.\\n  function indentLine(cm, n, how, aggressive) {\\n    var doc = cm.doc, state;\\n    if (how == null) { how = \\\"add\\\"; }\\n    if (how == \\\"smart\\\") {\\n      // Fall back to \\\"prev\\\" when the mode doesn't have an indentation\\n      // method.\\n      if (!doc.mode.indent) { how = \\\"prev\\\"; }\\n      else { state = getContextBefore(cm, n).state; }\\n    }\\n\\n    var tabSize = cm.options.tabSize;\\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\\n    if (line.stateAfter) { line.stateAfter = null; }\\n    var curSpaceString = line.text.match(/^\\\\s*/)[0], indentation;\\n    if (!aggressive && !/\\\\S/.test(line.text)) {\\n      indentation = 0;\\n      how = \\\"not\\\";\\n    } else if (how == \\\"smart\\\") {\\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\\n      if (indentation == Pass || indentation > 150) {\\n        if (!aggressive) { return }\\n        how = \\\"prev\\\";\\n      }\\n    }\\n    if (how == \\\"prev\\\") {\\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\\n      else { indentation = 0; }\\n    } else if (how == \\\"add\\\") {\\n      indentation = curSpace + cm.options.indentUnit;\\n    } else if (how == \\\"subtract\\\") {\\n      indentation = curSpace - cm.options.indentUnit;\\n    } else if (typeof how == \\\"number\\\") {\\n      indentation = curSpace + how;\\n    }\\n    indentation = Math.max(0, indentation);\\n\\n    var indentString = \\\"\\\", pos = 0;\\n    if (cm.options.indentWithTabs)\\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \\\"\\\\t\\\";} }\\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\\n\\n    if (indentString != curSpaceString) {\\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \\\"+input\\\");\\n      line.stateAfter = null;\\n      return true\\n    } else {\\n      // Ensure that, if the cursor was in the whitespace at the start\\n      // of the line, it is moved to the end of that space.\\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\\n        var range = doc.sel.ranges[i$1];\\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\\n          var pos$1 = Pos(n, curSpaceString.length);\\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\\n          break\\n        }\\n      }\\n    }\\n  }\\n\\n  // This will be set to a {lineWise: bool, text: [string]} object, so\\n  // that, when pasting, we know what kind of selections the copied\\n  // text was made out of.\\n  var lastCopied = null;\\n\\n  function setLastCopied(newLastCopied) {\\n    lastCopied = newLastCopied;\\n  }\\n\\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\\n    var doc = cm.doc;\\n    cm.display.shift = false;\\n    if (!sel) { sel = doc.sel; }\\n\\n    var recent = +new Date - 200;\\n    var paste = origin == \\\"paste\\\" || cm.state.pasteIncoming > recent;\\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\\n    // When pasting N lines into N selections, insert one line per selection\\n    if (paste && sel.ranges.length > 1) {\\n      if (lastCopied && lastCopied.text.join(\\\"\\\\n\\\") == inserted) {\\n        if (sel.ranges.length % lastCopied.text.length == 0) {\\n          multiPaste = [];\\n          for (var i = 0; i < lastCopied.text.length; i++)\\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\\n        }\\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\\n        multiPaste = map(textLines, function (l) { return [l]; });\\n      }\\n    }\\n\\n    var updateInput = cm.curOp.updateInput;\\n    // Normal behavior is to insert the new text into every selection\\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\\n      var range$$1 = sel.ranges[i$1];\\n      var from = range$$1.from(), to = range$$1.to();\\n      if (range$$1.empty()) {\\n        if (deleted && deleted > 0) // Handle deletion\\n          { from = Pos(from.line, from.ch - deleted); }\\n        else if (cm.state.overwrite && !paste) // Handle overwrite\\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\\\"\\\\n\\\") == inserted)\\n          { from = to = Pos(from.line, 0); }\\n      }\\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\\n                         origin: origin || (paste ? \\\"paste\\\" : cm.state.cutIncoming > recent ? \\\"cut\\\" : \\\"+input\\\")};\\n      makeChange(cm.doc, changeEvent);\\n      signalLater(cm, \\\"inputRead\\\", cm, changeEvent);\\n    }\\n    if (inserted && !paste)\\n      { triggerElectric(cm, inserted); }\\n\\n    ensureCursorVisible(cm);\\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\\n    cm.curOp.typing = true;\\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\\n  }\\n\\n  function handlePaste(e, cm) {\\n    var pasted = e.clipboardData && e.clipboardData.getData(\\\"Text\\\");\\n    if (pasted) {\\n      e.preventDefault();\\n      if (!cm.isReadOnly() && !cm.options.disableInput)\\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \\\"paste\\\"); }); }\\n      return true\\n    }\\n  }\\n\\n  function triggerElectric(cm, inserted) {\\n    // When an 'electric' character is inserted, immediately trigger a reindent\\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\\n    var sel = cm.doc.sel;\\n\\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\\n      var range$$1 = sel.ranges[i];\\n      if (range$$1.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range$$1.head.line)) { continue }\\n      var mode = cm.getModeAt(range$$1.head);\\n      var indented = false;\\n      if (mode.electricChars) {\\n        for (var j = 0; j < mode.electricChars.length; j++)\\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\\n            indented = indentLine(cm, range$$1.head.line, \\\"smart\\\");\\n            break\\n          } }\\n      } else if (mode.electricInput) {\\n        if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch)))\\n          { indented = indentLine(cm, range$$1.head.line, \\\"smart\\\"); }\\n      }\\n      if (indented) { signalLater(cm, \\\"electricInput\\\", cm, range$$1.head.line); }\\n    }\\n  }\\n\\n  function copyableRanges(cm) {\\n    var text = [], ranges = [];\\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\\n      var line = cm.doc.sel.ranges[i].head.line;\\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\\n      ranges.push(lineRange);\\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\\n    }\\n    return {text: text, ranges: ranges}\\n  }\\n\\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\\n    field.setAttribute(\\\"autocorrect\\\", autocorrect ? \\\"\\\" : \\\"off\\\");\\n    field.setAttribute(\\\"autocapitalize\\\", autocapitalize ? \\\"\\\" : \\\"off\\\");\\n    field.setAttribute(\\\"spellcheck\\\", !!spellcheck);\\n  }\\n\\n  function hiddenTextarea() {\\n    var te = elt(\\\"textarea\\\", null, null, \\\"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\\\");\\n    var div = elt(\\\"div\\\", [te], null, \\\"overflow: hidden; position: relative; width: 3px; height: 0px;\\\");\\n    // The textarea is kept positioned near the cursor to prevent the\\n    // fact that it'll be scrolled into view on input from scrolling\\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\\n    // very slow. So make the area wide instead.\\n    if (webkit) { te.style.width = \\\"1000px\\\"; }\\n    else { te.setAttribute(\\\"wrap\\\", \\\"off\\\"); }\\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\\n    if (ios) { te.style.border = \\\"1px solid black\\\"; }\\n    disableBrowserMagic(te);\\n    return div\\n  }\\n\\n  // The publicly visible API. Note that methodOp(f) means\\n  // 'wrap f in an operation, performed on its `this` parameter'.\\n\\n  // This is not the complete set of editor methods. Most of the\\n  // methods defined on the Doc type are also injected into\\n  // CodeMirror.prototype, for backwards compatibility and\\n  // convenience.\\n\\n  function addEditorMethods(CodeMirror) {\\n    var optionHandlers = CodeMirror.optionHandlers;\\n\\n    var helpers = CodeMirror.helpers = {};\\n\\n    CodeMirror.prototype = {\\n      constructor: CodeMirror,\\n      focus: function(){window.focus(); this.display.input.focus();},\\n\\n      setOption: function(option, value) {\\n        var options = this.options, old = options[option];\\n        if (options[option] == value && option != \\\"mode\\\") { return }\\n        options[option] = value;\\n        if (optionHandlers.hasOwnProperty(option))\\n          { operation(this, optionHandlers[option])(this, value, old); }\\n        signal(this, \\\"optionChange\\\", this, option);\\n      },\\n\\n      getOption: function(option) {return this.options[option]},\\n      getDoc: function() {return this.doc},\\n\\n      addKeyMap: function(map$$1, bottom) {\\n        this.state.keyMaps[bottom ? \\\"push\\\" : \\\"unshift\\\"](getKeyMap(map$$1));\\n      },\\n      removeKeyMap: function(map$$1) {\\n        var maps = this.state.keyMaps;\\n        for (var i = 0; i < maps.length; ++i)\\n          { if (maps[i] == map$$1 || maps[i].name == map$$1) {\\n            maps.splice(i, 1);\\n            return true\\n          } }\\n      },\\n\\n      addOverlay: methodOp(function(spec, options) {\\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\\n        if (mode.startState) { throw new Error(\\\"Overlays may not be stateful.\\\") }\\n        insertSorted(this.state.overlays,\\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\\n                      priority: (options && options.priority) || 0},\\n                     function (overlay) { return overlay.priority; });\\n        this.state.modeGen++;\\n        regChange(this);\\n      }),\\n      removeOverlay: methodOp(function(spec) {\\n        var this$1 = this;\\n\\n        var overlays = this.state.overlays;\\n        for (var i = 0; i < overlays.length; ++i) {\\n          var cur = overlays[i].modeSpec;\\n          if (cur == spec || typeof spec == \\\"string\\\" && cur.name == spec) {\\n            overlays.splice(i, 1);\\n            this$1.state.modeGen++;\\n            regChange(this$1);\\n            return\\n          }\\n        }\\n      }),\\n\\n      indentLine: methodOp(function(n, dir, aggressive) {\\n        if (typeof dir != \\\"string\\\" && typeof dir != \\\"number\\\") {\\n          if (dir == null) { dir = this.options.smartIndent ? \\\"smart\\\" : \\\"prev\\\"; }\\n          else { dir = dir ? \\\"add\\\" : \\\"subtract\\\"; }\\n        }\\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\\n      }),\\n      indentSelection: methodOp(function(how) {\\n        var this$1 = this;\\n\\n        var ranges = this.doc.sel.ranges, end = -1;\\n        for (var i = 0; i < ranges.length; i++) {\\n          var range$$1 = ranges[i];\\n          if (!range$$1.empty()) {\\n            var from = range$$1.from(), to = range$$1.to();\\n            var start = Math.max(end, from.line);\\n            end = Math.min(this$1.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\\n            for (var j = start; j < end; ++j)\\n              { indentLine(this$1, j, how); }\\n            var newRanges = this$1.doc.sel.ranges;\\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\\n              { replaceOneSelection(this$1.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\\n          } else if (range$$1.head.line > end) {\\n            indentLine(this$1, range$$1.head.line, how, true);\\n            end = range$$1.head.line;\\n            if (i == this$1.doc.sel.primIndex) { ensureCursorVisible(this$1); }\\n          }\\n        }\\n      }),\\n\\n      // Fetch the parser token for a given character. Useful for hacks\\n      // that want to inspect the mode state (say, for completion).\\n      getTokenAt: function(pos, precise) {\\n        return takeToken(this, pos, precise)\\n      },\\n\\n      getLineTokens: function(line, precise) {\\n        return takeToken(this, Pos(line), precise, true)\\n      },\\n\\n      getTokenTypeAt: function(pos) {\\n        pos = clipPos(this.doc, pos);\\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\\n        var type;\\n        if (ch == 0) { type = styles[2]; }\\n        else { for (;;) {\\n          var mid = (before + after) >> 1;\\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\\n          else { type = styles[mid * 2 + 2]; break }\\n        } }\\n        var cut = type ? type.indexOf(\\\"overlay \\\") : -1;\\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\\n      },\\n\\n      getModeAt: function(pos) {\\n        var mode = this.doc.mode;\\n        if (!mode.innerMode) { return mode }\\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\\n      },\\n\\n      getHelper: function(pos, type) {\\n        return this.getHelpers(pos, type)[0]\\n      },\\n\\n      getHelpers: function(pos, type) {\\n        var this$1 = this;\\n\\n        var found = [];\\n        if (!helpers.hasOwnProperty(type)) { return found }\\n        var help = helpers[type], mode = this.getModeAt(pos);\\n        if (typeof mode[type] == \\\"string\\\") {\\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\\n        } else if (mode[type]) {\\n          for (var i = 0; i < mode[type].length; i++) {\\n            var val = help[mode[type][i]];\\n            if (val) { found.push(val); }\\n          }\\n        } else if (mode.helperType && help[mode.helperType]) {\\n          found.push(help[mode.helperType]);\\n        } else if (help[mode.name]) {\\n          found.push(help[mode.name]);\\n        }\\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\\n          var cur = help._global[i$1];\\n          if (cur.pred(mode, this$1) && indexOf(found, cur.val) == -1)\\n            { found.push(cur.val); }\\n        }\\n        return found\\n      },\\n\\n      getStateAfter: function(line, precise) {\\n        var doc = this.doc;\\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\\n        return getContextBefore(this, line + 1, precise).state\\n      },\\n\\n      cursorCoords: function(start, mode) {\\n        var pos, range$$1 = this.doc.sel.primary();\\n        if (start == null) { pos = range$$1.head; }\\n        else if (typeof start == \\\"object\\\") { pos = clipPos(this.doc, start); }\\n        else { pos = start ? range$$1.from() : range$$1.to(); }\\n        return cursorCoords(this, pos, mode || \\\"page\\\")\\n      },\\n\\n      charCoords: function(pos, mode) {\\n        return charCoords(this, clipPos(this.doc, pos), mode || \\\"page\\\")\\n      },\\n\\n      coordsChar: function(coords, mode) {\\n        coords = fromCoordSystem(this, coords, mode || \\\"page\\\");\\n        return coordsChar(this, coords.left, coords.top)\\n      },\\n\\n      lineAtHeight: function(height, mode) {\\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \\\"page\\\").top;\\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\\n      },\\n      heightAtLine: function(line, mode, includeWidgets) {\\n        var end = false, lineObj;\\n        if (typeof line == \\\"number\\\") {\\n          var last = this.doc.first + this.doc.size - 1;\\n          if (line < this.doc.first) { line = this.doc.first; }\\n          else if (line > last) { line = last; end = true; }\\n          lineObj = getLine(this.doc, line);\\n        } else {\\n          lineObj = line;\\n        }\\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \\\"page\\\", includeWidgets || end).top +\\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\\n      },\\n\\n      defaultTextHeight: function() { return textHeight(this.display) },\\n      defaultCharWidth: function() { return charWidth(this.display) },\\n\\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\\n\\n      addWidget: function(pos, node, scroll, vert, horiz) {\\n        var display = this.display;\\n        pos = cursorCoords(this, clipPos(this.doc, pos));\\n        var top = pos.bottom, left = pos.left;\\n        node.style.position = \\\"absolute\\\";\\n        node.setAttribute(\\\"cm-ignore-events\\\", \\\"true\\\");\\n        this.display.input.setUneditable(node);\\n        display.sizer.appendChild(node);\\n        if (vert == \\\"over\\\") {\\n          top = pos.top;\\n        } else if (vert == \\\"above\\\" || vert == \\\"near\\\") {\\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\\n            { top = pos.top - node.offsetHeight; }\\n          else if (pos.bottom + node.offsetHeight <= vspace)\\n            { top = pos.bottom; }\\n          if (left + node.offsetWidth > hspace)\\n            { left = hspace - node.offsetWidth; }\\n        }\\n        node.style.top = top + \\\"px\\\";\\n        node.style.left = node.style.right = \\\"\\\";\\n        if (horiz == \\\"right\\\") {\\n          left = display.sizer.clientWidth - node.offsetWidth;\\n          node.style.right = \\\"0px\\\";\\n        } else {\\n          if (horiz == \\\"left\\\") { left = 0; }\\n          else if (horiz == \\\"middle\\\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\\n          node.style.left = left + \\\"px\\\";\\n        }\\n        if (scroll)\\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\\n      },\\n\\n      triggerOnKeyDown: methodOp(onKeyDown),\\n      triggerOnKeyPress: methodOp(onKeyPress),\\n      triggerOnKeyUp: onKeyUp,\\n      triggerOnMouseDown: methodOp(onMouseDown),\\n\\n      execCommand: function(cmd) {\\n        if (commands.hasOwnProperty(cmd))\\n          { return commands[cmd].call(null, this) }\\n      },\\n\\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\\n\\n      findPosH: function(from, amount, unit, visually) {\\n        var this$1 = this;\\n\\n        var dir = 1;\\n        if (amount < 0) { dir = -1; amount = -amount; }\\n        var cur = clipPos(this.doc, from);\\n        for (var i = 0; i < amount; ++i) {\\n          cur = findPosH(this$1.doc, cur, dir, unit, visually);\\n          if (cur.hitSide) { break }\\n        }\\n        return cur\\n      },\\n\\n      moveH: methodOp(function(dir, unit) {\\n        var this$1 = this;\\n\\n        this.extendSelectionsBy(function (range$$1) {\\n          if (this$1.display.shift || this$1.doc.extend || range$$1.empty())\\n            { return findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually) }\\n          else\\n            { return dir < 0 ? range$$1.from() : range$$1.to() }\\n        }, sel_move);\\n      }),\\n\\n      deleteH: methodOp(function(dir, unit) {\\n        var sel = this.doc.sel, doc = this.doc;\\n        if (sel.somethingSelected())\\n          { doc.replaceSelection(\\\"\\\", null, \\\"+delete\\\"); }\\n        else\\n          { deleteNearSelection(this, function (range$$1) {\\n            var other = findPosH(doc, range$$1.head, dir, unit, false);\\n            return dir < 0 ? {from: other, to: range$$1.head} : {from: range$$1.head, to: other}\\n          }); }\\n      }),\\n\\n      findPosV: function(from, amount, unit, goalColumn) {\\n        var this$1 = this;\\n\\n        var dir = 1, x = goalColumn;\\n        if (amount < 0) { dir = -1; amount = -amount; }\\n        var cur = clipPos(this.doc, from);\\n        for (var i = 0; i < amount; ++i) {\\n          var coords = cursorCoords(this$1, cur, \\\"div\\\");\\n          if (x == null) { x = coords.left; }\\n          else { coords.left = x; }\\n          cur = findPosV(this$1, coords, dir, unit);\\n          if (cur.hitSide) { break }\\n        }\\n        return cur\\n      },\\n\\n      moveV: methodOp(function(dir, unit) {\\n        var this$1 = this;\\n\\n        var doc = this.doc, goals = [];\\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\\n        doc.extendSelectionsBy(function (range$$1) {\\n          if (collapse)\\n            { return dir < 0 ? range$$1.from() : range$$1.to() }\\n          var headPos = cursorCoords(this$1, range$$1.head, \\\"div\\\");\\n          if (range$$1.goalColumn != null) { headPos.left = range$$1.goalColumn; }\\n          goals.push(headPos.left);\\n          var pos = findPosV(this$1, headPos, dir, unit);\\n          if (unit == \\\"page\\\" && range$$1 == doc.sel.primary())\\n            { addToScrollTop(this$1, charCoords(this$1, pos, \\\"div\\\").top - headPos.top); }\\n          return pos\\n        }, sel_move);\\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\\n      }),\\n\\n      // Find the word at the given position (as returned by coordsChar).\\n      findWordAt: function(pos) {\\n        var doc = this.doc, line = getLine(doc, pos.line).text;\\n        var start = pos.ch, end = pos.ch;\\n        if (line) {\\n          var helper = this.getHelper(pos, \\\"wordChars\\\");\\n          if ((pos.sticky == \\\"before\\\" || end == line.length) && start) { --start; } else { ++end; }\\n          var startChar = line.charAt(start);\\n          var check = isWordChar(startChar, helper)\\n            ? function (ch) { return isWordChar(ch, helper); }\\n            : /\\\\s/.test(startChar) ? function (ch) { return /\\\\s/.test(ch); }\\n            : function (ch) { return (!/\\\\s/.test(ch) && !isWordChar(ch)); };\\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\\n          while (end < line.length && check(line.charAt(end))) { ++end; }\\n        }\\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\\n      },\\n\\n      toggleOverwrite: function(value) {\\n        if (value != null && value == this.state.overwrite) { return }\\n        if (this.state.overwrite = !this.state.overwrite)\\n          { addClass(this.display.cursorDiv, \\\"CodeMirror-overwrite\\\"); }\\n        else\\n          { rmClass(this.display.cursorDiv, \\\"CodeMirror-overwrite\\\"); }\\n\\n        signal(this, \\\"overwriteToggle\\\", this, this.state.overwrite);\\n      },\\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\\n\\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\\n      getScrollInfo: function() {\\n        var scroller = this.display.scroller;\\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\\n      },\\n\\n      scrollIntoView: methodOp(function(range$$1, margin) {\\n        if (range$$1 == null) {\\n          range$$1 = {from: this.doc.sel.primary().head, to: null};\\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\\n        } else if (typeof range$$1 == \\\"number\\\") {\\n          range$$1 = {from: Pos(range$$1, 0), to: null};\\n        } else if (range$$1.from == null) {\\n          range$$1 = {from: range$$1, to: null};\\n        }\\n        if (!range$$1.to) { range$$1.to = range$$1.from; }\\n        range$$1.margin = margin || 0;\\n\\n        if (range$$1.from.line != null) {\\n          scrollToRange(this, range$$1);\\n        } else {\\n          scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\\n        }\\n      }),\\n\\n      setSize: methodOp(function(width, height) {\\n        var this$1 = this;\\n\\n        var interpret = function (val) { return typeof val == \\\"number\\\" || /^\\\\d+$/.test(String(val)) ? val + \\\"px\\\" : val; };\\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\\n        var lineNo$$1 = this.display.viewFrom;\\n        this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo$$1, \\\"widget\\\"); break } } }\\n          ++lineNo$$1;\\n        });\\n        this.curOp.forceUpdate = true;\\n        signal(this, \\\"refresh\\\", this);\\n      }),\\n\\n      operation: function(f){return runInOp(this, f)},\\n      startOperation: function(){return startOperation(this)},\\n      endOperation: function(){return endOperation(this)},\\n\\n      refresh: methodOp(function() {\\n        var oldHeight = this.display.cachedTextHeight;\\n        regChange(this);\\n        this.curOp.forceUpdate = true;\\n        clearCaches(this);\\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\\n        updateGutterSpace(this.display);\\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\\n          { estimateLineHeights(this); }\\n        signal(this, \\\"refresh\\\", this);\\n      }),\\n\\n      swapDoc: methodOp(function(doc) {\\n        var old = this.doc;\\n        old.cm = null;\\n        // Cancel the current text selection if any (#5821)\\n        if (this.state.selectingText) { this.state.selectingText(); }\\n        attachDoc(this, doc);\\n        clearCaches(this);\\n        this.display.input.reset();\\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\\n        this.curOp.forceScroll = true;\\n        signalLater(this, \\\"swapDoc\\\", this, old);\\n        return old\\n      }),\\n\\n      phrase: function(phraseText) {\\n        var phrases = this.options.phrases;\\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\\n      },\\n\\n      getInputField: function(){return this.display.input.getField()},\\n      getWrapperElement: function(){return this.display.wrapper},\\n      getScrollerElement: function(){return this.display.scroller},\\n      getGutterElement: function(){return this.display.gutters}\\n    };\\n    eventMixin(CodeMirror);\\n\\n    CodeMirror.registerHelper = function(type, name, value) {\\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\\n      helpers[type][name] = value;\\n    };\\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\\n      CodeMirror.registerHelper(type, name, value);\\n      helpers[type]._global.push({pred: predicate, val: value});\\n    };\\n  }\\n\\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\\n  // right), unit can be \\\"char\\\", \\\"column\\\" (like char, but doesn't\\n  // cross line boundaries), \\\"word\\\" (across next word), or \\\"group\\\" (to\\n  // the start of next group of word or non-word-non-whitespace\\n  // chars). The visually param controls whether, in right-to-left\\n  // text, direction 1 means to move towards the next index in the\\n  // string, or towards the character to the right of the current\\n  // position. The resulting position will have a hitSide=true\\n  // property if it reached the end of the document.\\n  function findPosH(doc, pos, dir, unit, visually) {\\n    var oldPos = pos;\\n    var origDir = dir;\\n    var lineObj = getLine(doc, pos.line);\\n    function findNextLine() {\\n      var l = pos.line + dir;\\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\\n      pos = new Pos(l, pos.ch, pos.sticky);\\n      return lineObj = getLine(doc, l)\\n    }\\n    function moveOnce(boundToLine) {\\n      var next;\\n      if (visually) {\\n        next = moveVisually(doc.cm, lineObj, pos, dir);\\n      } else {\\n        next = moveLogically(lineObj, pos, dir);\\n      }\\n      if (next == null) {\\n        if (!boundToLine && findNextLine())\\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir); }\\n        else\\n          { return false }\\n      } else {\\n        pos = next;\\n      }\\n      return true\\n    }\\n\\n    if (unit == \\\"char\\\") {\\n      moveOnce();\\n    } else if (unit == \\\"column\\\") {\\n      moveOnce(true);\\n    } else if (unit == \\\"word\\\" || unit == \\\"group\\\") {\\n      var sawType = null, group = unit == \\\"group\\\";\\n      var helper = doc.cm && doc.cm.getHelper(pos, \\\"wordChars\\\");\\n      for (var first = true;; first = false) {\\n        if (dir < 0 && !moveOnce(!first)) { break }\\n        var cur = lineObj.text.charAt(pos.ch) || \\\"\\\\n\\\";\\n        var type = isWordChar(cur, helper) ? \\\"w\\\"\\n          : group && cur == \\\"\\\\n\\\" ? \\\"n\\\"\\n          : !group || /\\\\s/.test(cur) ? null\\n          : \\\"p\\\";\\n        if (group && !first && !type) { type = \\\"s\\\"; }\\n        if (sawType && sawType != type) {\\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \\\"after\\\";}\\n          break\\n        }\\n\\n        if (type) { sawType = type; }\\n        if (dir > 0 && !moveOnce(!first)) { break }\\n      }\\n    }\\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\\n    return result\\n  }\\n\\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\\n  // \\\"page\\\" or \\\"line\\\". The resulting position will have a hitSide=true\\n  // property if it reached the end of the document.\\n  function findPosV(cm, pos, dir, unit) {\\n    var doc = cm.doc, x = pos.left, y;\\n    if (unit == \\\"page\\\") {\\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\\n\\n    } else if (unit == \\\"line\\\") {\\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\\n    }\\n    var target;\\n    for (;;) {\\n      target = coordsChar(cm, x, y);\\n      if (!target.outside) { break }\\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\\n      y += dir * 5;\\n    }\\n    return target\\n  }\\n\\n  // CONTENTEDITABLE INPUT STYLE\\n\\n  var ContentEditableInput = function(cm) {\\n    this.cm = cm;\\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\\n    this.polling = new Delayed();\\n    this.composing = null;\\n    this.gracePeriod = false;\\n    this.readDOMTimeout = null;\\n  };\\n\\n  ContentEditableInput.prototype.init = function (display) {\\n      var this$1 = this;\\n\\n    var input = this, cm = input.cm;\\n    var div = input.div = display.lineDiv;\\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\\n\\n    on(div, \\\"paste\\\", function (e) {\\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\\n    });\\n\\n    on(div, \\\"compositionstart\\\", function (e) {\\n      this$1.composing = {data: e.data, done: false};\\n    });\\n    on(div, \\\"compositionupdate\\\", function (e) {\\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\\n    });\\n    on(div, \\\"compositionend\\\", function (e) {\\n      if (this$1.composing) {\\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\\n        this$1.composing.done = true;\\n      }\\n    });\\n\\n    on(div, \\\"touchstart\\\", function () { return input.forceCompositionEnd(); });\\n\\n    on(div, \\\"input\\\", function () {\\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\\n    });\\n\\n    function onCopyCut(e) {\\n      if (signalDOMEvent(cm, e)) { return }\\n      if (cm.somethingSelected()) {\\n        setLastCopied({lineWise: false, text: cm.getSelections()});\\n        if (e.type == \\\"cut\\\") { cm.replaceSelection(\\\"\\\", null, \\\"cut\\\"); }\\n      } else if (!cm.options.lineWiseCopyCut) {\\n        return\\n      } else {\\n        var ranges = copyableRanges(cm);\\n        setLastCopied({lineWise: true, text: ranges.text});\\n        if (e.type == \\\"cut\\\") {\\n          cm.operation(function () {\\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\\n            cm.replaceSelection(\\\"\\\", null, \\\"cut\\\");\\n          });\\n        }\\n      }\\n      if (e.clipboardData) {\\n        e.clipboardData.clearData();\\n        var content = lastCopied.text.join(\\\"\\\\n\\\");\\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\\n        e.clipboardData.setData(\\\"Text\\\", content);\\n        if (e.clipboardData.getData(\\\"Text\\\") == content) {\\n          e.preventDefault();\\n          return\\n        }\\n      }\\n      // Old-fashioned briefly-focus-a-textarea hack\\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\\n      te.value = lastCopied.text.join(\\\"\\\\n\\\");\\n      var hadFocus = document.activeElement;\\n      selectInput(te);\\n      setTimeout(function () {\\n        cm.display.lineSpace.removeChild(kludge);\\n        hadFocus.focus();\\n        if (hadFocus == div) { input.showPrimarySelection(); }\\n      }, 50);\\n    }\\n    on(div, \\\"copy\\\", onCopyCut);\\n    on(div, \\\"cut\\\", onCopyCut);\\n  };\\n\\n  ContentEditableInput.prototype.prepareSelection = function () {\\n    var result = prepareSelection(this.cm, false);\\n    result.focus = this.cm.state.focused;\\n    return result\\n  };\\n\\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\\n    if (!info || !this.cm.display.view.length) { return }\\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\\n    this.showMultipleSelections(info);\\n  };\\n\\n  ContentEditableInput.prototype.getSelection = function () {\\n    return this.cm.display.wrapper.ownerDocument.getSelection()\\n  };\\n\\n  ContentEditableInput.prototype.showPrimarySelection = function () {\\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\\n    var from = prim.from(), to = prim.to();\\n\\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\\n      sel.removeAllRanges();\\n      return\\n    }\\n\\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\\n      { return }\\n\\n    var view = cm.display.view;\\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\\n        {node: view[0].measure.map[2], offset: 0};\\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\\n    if (!end) {\\n      var measure = view[view.length - 1].measure;\\n      var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\\n      end = {node: map$$1[map$$1.length - 1], offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3]};\\n    }\\n\\n    if (!start || !end) {\\n      sel.removeAllRanges();\\n      return\\n    }\\n\\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\\n    if (rng) {\\n      if (!gecko && cm.state.focused) {\\n        sel.collapse(start.node, start.offset);\\n        if (!rng.collapsed) {\\n          sel.removeAllRanges();\\n          sel.addRange(rng);\\n        }\\n      } else {\\n        sel.removeAllRanges();\\n        sel.addRange(rng);\\n      }\\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\\n      else if (gecko) { this.startGracePeriod(); }\\n    }\\n    this.rememberSelection();\\n  };\\n\\n  ContentEditableInput.prototype.startGracePeriod = function () {\\n      var this$1 = this;\\n\\n    clearTimeout(this.gracePeriod);\\n    this.gracePeriod = setTimeout(function () {\\n      this$1.gracePeriod = false;\\n      if (this$1.selectionChanged())\\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\\n    }, 20);\\n  };\\n\\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\\n  };\\n\\n  ContentEditableInput.prototype.rememberSelection = function () {\\n    var sel = this.getSelection();\\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\\n  };\\n\\n  ContentEditableInput.prototype.selectionInEditor = function () {\\n    var sel = this.getSelection();\\n    if (!sel.rangeCount) { return false }\\n    var node = sel.getRangeAt(0).commonAncestorContainer;\\n    return contains(this.div, node)\\n  };\\n\\n  ContentEditableInput.prototype.focus = function () {\\n    if (this.cm.options.readOnly != \\\"nocursor\\\") {\\n      if (!this.selectionInEditor())\\n        { this.showSelection(this.prepareSelection(), true); }\\n      this.div.focus();\\n    }\\n  };\\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\\n  ContentEditableInput.prototype.getField = function () { return this.div };\\n\\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\\n\\n  ContentEditableInput.prototype.receivedFocus = function () {\\n    var input = this;\\n    if (this.selectionInEditor())\\n      { this.pollSelection(); }\\n    else\\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\\n\\n    function poll() {\\n      if (input.cm.state.focused) {\\n        input.pollSelection();\\n        input.polling.set(input.cm.options.pollInterval, poll);\\n      }\\n    }\\n    this.polling.set(this.cm.options.pollInterval, poll);\\n  };\\n\\n  ContentEditableInput.prototype.selectionChanged = function () {\\n    var sel = this.getSelection();\\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\\n  };\\n\\n  ContentEditableInput.prototype.pollSelection = function () {\\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\\n    var sel = this.getSelection(), cm = this.cm;\\n    // On Android Chrome (version 56, at least), backspacing into an\\n    // uneditable block element will put the cursor in that element,\\n    // and then, because it's not editable, hide the virtual keyboard.\\n    // Because Android doesn't allow us to actually detect backspace\\n    // presses in a sane way, this code checks for when that happens\\n    // and simulates a backspace press in this case.\\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\\n      this.cm.triggerOnKeyDown({type: \\\"keydown\\\", keyCode: 8, preventDefault: Math.abs});\\n      this.blur();\\n      this.focus();\\n      return\\n    }\\n    if (this.composing) { return }\\n    this.rememberSelection();\\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\\n    if (anchor && head) { runInOp(cm, function () {\\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\\n    }); }\\n  };\\n\\n  ContentEditableInput.prototype.pollContent = function () {\\n    if (this.readDOMTimeout != null) {\\n      clearTimeout(this.readDOMTimeout);\\n      this.readDOMTimeout = null;\\n    }\\n\\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\\n    var from = sel.from(), to = sel.to();\\n    if (from.ch == 0 && from.line > cm.firstLine())\\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\\n      { to = Pos(to.line + 1, 0); }\\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\\n\\n    var fromIndex, fromLine, fromNode;\\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\\n      fromLine = lineNo(display.view[0].line);\\n      fromNode = display.view[0].node;\\n    } else {\\n      fromLine = lineNo(display.view[fromIndex].line);\\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\\n    }\\n    var toIndex = findViewIndex(cm, to.line);\\n    var toLine, toNode;\\n    if (toIndex == display.view.length - 1) {\\n      toLine = display.viewTo - 1;\\n      toNode = display.lineDiv.lastChild;\\n    } else {\\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\\n      toNode = display.view[toIndex + 1].node.previousSibling;\\n    }\\n\\n    if (!fromNode) { return false }\\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\\n    while (newText.length > 1 && oldText.length > 1) {\\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\\n      else { break }\\n    }\\n\\n    var cutFront = 0, cutEnd = 0;\\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\\n      { ++cutFront; }\\n    var newBot = lst(newText), oldBot = lst(oldText);\\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\\n    while (cutEnd < maxCutEnd &&\\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\\n      { ++cutEnd; }\\n    // Try to move start of change to start of selection if ambiguous\\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\\n      while (cutFront && cutFront > from.ch &&\\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\\n        cutFront--;\\n        cutEnd++;\\n      }\\n    }\\n\\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\\\u200b+/, \\\"\\\");\\n    newText[0] = newText[0].slice(cutFront).replace(/\\\\u200b+$/, \\\"\\\");\\n\\n    var chFrom = Pos(fromLine, cutFront);\\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\\n      replaceRange(cm.doc, newText, chFrom, chTo, \\\"+input\\\");\\n      return true\\n    }\\n  };\\n\\n  ContentEditableInput.prototype.ensurePolled = function () {\\n    this.forceCompositionEnd();\\n  };\\n  ContentEditableInput.prototype.reset = function () {\\n    this.forceCompositionEnd();\\n  };\\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\\n    if (!this.composing) { return }\\n    clearTimeout(this.readDOMTimeout);\\n    this.composing = null;\\n    this.updateFromDOM();\\n    this.div.blur();\\n    this.div.focus();\\n  };\\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\\n      var this$1 = this;\\n\\n    if (this.readDOMTimeout != null) { return }\\n    this.readDOMTimeout = setTimeout(function () {\\n      this$1.readDOMTimeout = null;\\n      if (this$1.composing) {\\n        if (this$1.composing.done) { this$1.composing = null; }\\n        else { return }\\n      }\\n      this$1.updateFromDOM();\\n    }, 80);\\n  };\\n\\n  ContentEditableInput.prototype.updateFromDOM = function () {\\n      var this$1 = this;\\n\\n    if (this.cm.isReadOnly() || !this.pollContent())\\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\\n  };\\n\\n  ContentEditableInput.prototype.setUneditable = function (node) {\\n    node.contentEditable = \\\"false\\\";\\n  };\\n\\n  ContentEditableInput.prototype.onKeyPress = function (e) {\\n    if (e.charCode == 0 || this.composing) { return }\\n    e.preventDefault();\\n    if (!this.cm.isReadOnly())\\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\\n  };\\n\\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\\n    this.div.contentEditable = String(val != \\\"nocursor\\\");\\n  };\\n\\n  ContentEditableInput.prototype.onContextMenu = function () {};\\n  ContentEditableInput.prototype.resetPosition = function () {};\\n\\n  ContentEditableInput.prototype.needsContentAttribute = true;\\n\\n  function posToDOM(cm, pos) {\\n    var view = findViewForLine(cm, pos.line);\\n    if (!view || view.hidden) { return null }\\n    var line = getLine(cm.doc, pos.line);\\n    var info = mapFromLineView(view, line, pos.line);\\n\\n    var order = getOrder(line, cm.doc.direction), side = \\\"left\\\";\\n    if (order) {\\n      var partPos = getBidiPartAt(order, pos.ch);\\n      side = partPos % 2 ? \\\"right\\\" : \\\"left\\\";\\n    }\\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\\n    result.offset = result.collapse == \\\"right\\\" ? result.end : result.start;\\n    return result\\n  }\\n\\n  function isInGutter(node) {\\n    for (var scan = node; scan; scan = scan.parentNode)\\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\\n    return false\\n  }\\n\\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\\n\\n  function domTextBetween(cm, from, to, fromLine, toLine) {\\n    var text = \\\"\\\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\\n    function close() {\\n      if (closing) {\\n        text += lineSep;\\n        if (extraLinebreak) { text += lineSep; }\\n        closing = extraLinebreak = false;\\n      }\\n    }\\n    function addText(str) {\\n      if (str) {\\n        close();\\n        text += str;\\n      }\\n    }\\n    function walk(node) {\\n      if (node.nodeType == 1) {\\n        var cmText = node.getAttribute(\\\"cm-text\\\");\\n        if (cmText) {\\n          addText(cmText);\\n          return\\n        }\\n        var markerID = node.getAttribute(\\\"cm-marker\\\"), range$$1;\\n        if (markerID) {\\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\\n          if (found.length && (range$$1 = found[0].find(0)))\\n            { addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep)); }\\n          return\\n        }\\n        if (node.getAttribute(\\\"contenteditable\\\") == \\\"false\\\") { return }\\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\\n\\n        if (isBlock) { close(); }\\n        for (var i = 0; i < node.childNodes.length; i++)\\n          { walk(node.childNodes[i]); }\\n\\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\\n        if (isBlock) { closing = true; }\\n      } else if (node.nodeType == 3) {\\n        addText(node.nodeValue.replace(/\\\\u200b/g, \\\"\\\").replace(/\\\\u00a0/g, \\\" \\\"));\\n      }\\n    }\\n    for (;;) {\\n      walk(from);\\n      if (from == to) { break }\\n      from = from.nextSibling;\\n      extraLinebreak = false;\\n    }\\n    return text\\n  }\\n\\n  function domToPos(cm, node, offset) {\\n    var lineNode;\\n    if (node == cm.display.lineDiv) {\\n      lineNode = cm.display.lineDiv.childNodes[offset];\\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\\n      node = null; offset = 0;\\n    } else {\\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\\n      }\\n    }\\n    for (var i = 0; i < cm.display.view.length; i++) {\\n      var lineView = cm.display.view[i];\\n      if (lineView.node == lineNode)\\n        { return locateNodeInLineView(lineView, node, offset) }\\n    }\\n  }\\n\\n  function locateNodeInLineView(lineView, node, offset) {\\n    var wrapper = lineView.text.firstChild, bad = false;\\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\\n    if (node == wrapper) {\\n      bad = true;\\n      node = wrapper.childNodes[offset];\\n      offset = 0;\\n      if (!node) {\\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\\n        return badPos(Pos(lineNo(line), line.text.length), bad)\\n      }\\n    }\\n\\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\\n      textNode = node.firstChild;\\n      if (offset) { offset = textNode.nodeValue.length; }\\n    }\\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\\n    var measure = lineView.measure, maps = measure.maps;\\n\\n    function find(textNode, topNode, offset) {\\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\\n        var map$$1 = i < 0 ? measure.map : maps[i];\\n        for (var j = 0; j < map$$1.length; j += 3) {\\n          var curNode = map$$1[j + 2];\\n          if (curNode == textNode || curNode == topNode) {\\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\\n            var ch = map$$1[j] + offset;\\n            if (offset < 0 || curNode != textNode) { ch = map$$1[j + (offset ? 1 : 0)]; }\\n            return Pos(line, ch)\\n          }\\n        }\\n      }\\n    }\\n    var found = find(textNode, topNode, offset);\\n    if (found) { return badPos(found, bad) }\\n\\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\\n      found = find(after, after.firstChild, 0);\\n      if (found)\\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\\n      else\\n        { dist += after.textContent.length; }\\n    }\\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\\n      found = find(before, before.firstChild, -1);\\n      if (found)\\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\\n      else\\n        { dist$1 += before.textContent.length; }\\n    }\\n  }\\n\\n  // TEXTAREA INPUT STYLE\\n\\n  var TextareaInput = function(cm) {\\n    this.cm = cm;\\n    // See input.poll and input.reset\\n    this.prevInput = \\\"\\\";\\n\\n    // Flag that indicates whether we expect input to appear real soon\\n    // now (after some event like 'keypress' or 'input') and are\\n    // polling intensively.\\n    this.pollingFast = false;\\n    // Self-resetting timeout for the poller\\n    this.polling = new Delayed();\\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\\n    this.hasSelection = false;\\n    this.composing = null;\\n  };\\n\\n  TextareaInput.prototype.init = function (display) {\\n      var this$1 = this;\\n\\n    var input = this, cm = this.cm;\\n    this.createField(display);\\n    var te = this.textarea;\\n\\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\\n\\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\\n    if (ios) { te.style.width = \\\"0px\\\"; }\\n\\n    on(te, \\\"input\\\", function () {\\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\\n      input.poll();\\n    });\\n\\n    on(te, \\\"paste\\\", function (e) {\\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\\n\\n      cm.state.pasteIncoming = +new Date;\\n      input.fastPoll();\\n    });\\n\\n    function prepareCopyCut(e) {\\n      if (signalDOMEvent(cm, e)) { return }\\n      if (cm.somethingSelected()) {\\n        setLastCopied({lineWise: false, text: cm.getSelections()});\\n      } else if (!cm.options.lineWiseCopyCut) {\\n        return\\n      } else {\\n        var ranges = copyableRanges(cm);\\n        setLastCopied({lineWise: true, text: ranges.text});\\n        if (e.type == \\\"cut\\\") {\\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\\n        } else {\\n          input.prevInput = \\\"\\\";\\n          te.value = ranges.text.join(\\\"\\\\n\\\");\\n          selectInput(te);\\n        }\\n      }\\n      if (e.type == \\\"cut\\\") { cm.state.cutIncoming = +new Date; }\\n    }\\n    on(te, \\\"cut\\\", prepareCopyCut);\\n    on(te, \\\"copy\\\", prepareCopyCut);\\n\\n    on(display.scroller, \\\"paste\\\", function (e) {\\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\\n      if (!te.dispatchEvent) {\\n        cm.state.pasteIncoming = +new Date;\\n        input.focus();\\n        return\\n      }\\n\\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\\n      var event = new Event(\\\"paste\\\");\\n      event.clipboardData = e.clipboardData;\\n      te.dispatchEvent(event);\\n    });\\n\\n    // Prevent normal selection in the editor (we handle our own)\\n    on(display.lineSpace, \\\"selectstart\\\", function (e) {\\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\\n    });\\n\\n    on(te, \\\"compositionstart\\\", function () {\\n      var start = cm.getCursor(\\\"from\\\");\\n      if (input.composing) { input.composing.range.clear(); }\\n      input.composing = {\\n        start: start,\\n        range: cm.markText(start, cm.getCursor(\\\"to\\\"), {className: \\\"CodeMirror-composing\\\"})\\n      };\\n    });\\n    on(te, \\\"compositionend\\\", function () {\\n      if (input.composing) {\\n        input.poll();\\n        input.composing.range.clear();\\n        input.composing = null;\\n      }\\n    });\\n  };\\n\\n  TextareaInput.prototype.createField = function (_display) {\\n    // Wraps and hides input textarea\\n    this.wrapper = hiddenTextarea();\\n    // The semihidden textarea that is focused when the editor is\\n    // focused, and receives input.\\n    this.textarea = this.wrapper.firstChild;\\n  };\\n\\n  TextareaInput.prototype.prepareSelection = function () {\\n    // Redraw the selection and/or cursor\\n    var cm = this.cm, display = cm.display, doc = cm.doc;\\n    var result = prepareSelection(cm);\\n\\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\\n    if (cm.options.moveInputWithCursor) {\\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \\\"div\\\");\\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\\n                                          headPos.top + lineOff.top - wrapOff.top));\\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\\n                                           headPos.left + lineOff.left - wrapOff.left));\\n    }\\n\\n    return result\\n  };\\n\\n  TextareaInput.prototype.showSelection = function (drawn) {\\n    var cm = this.cm, display = cm.display;\\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\\n    if (drawn.teTop != null) {\\n      this.wrapper.style.top = drawn.teTop + \\\"px\\\";\\n      this.wrapper.style.left = drawn.teLeft + \\\"px\\\";\\n    }\\n  };\\n\\n  // Reset the input to correspond to the selection (or to be empty,\\n  // when not typing and nothing is selected)\\n  TextareaInput.prototype.reset = function (typing) {\\n    if (this.contextMenuPending || this.composing) { return }\\n    var cm = this.cm;\\n    if (cm.somethingSelected()) {\\n      this.prevInput = \\\"\\\";\\n      var content = cm.getSelection();\\n      this.textarea.value = content;\\n      if (cm.state.focused) { selectInput(this.textarea); }\\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\\n    } else if (!typing) {\\n      this.prevInput = this.textarea.value = \\\"\\\";\\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\\n    }\\n  };\\n\\n  TextareaInput.prototype.getField = function () { return this.textarea };\\n\\n  TextareaInput.prototype.supportsTouch = function () { return false };\\n\\n  TextareaInput.prototype.focus = function () {\\n    if (this.cm.options.readOnly != \\\"nocursor\\\" && (!mobile || activeElt() != this.textarea)) {\\n      try { this.textarea.focus(); }\\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\\n    }\\n  };\\n\\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\\n\\n  TextareaInput.prototype.resetPosition = function () {\\n    this.wrapper.style.top = this.wrapper.style.left = 0;\\n  };\\n\\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\\n\\n  // Poll for input changes, using the normal rate of polling. This\\n  // runs as long as the editor is focused.\\n  TextareaInput.prototype.slowPoll = function () {\\n      var this$1 = this;\\n\\n    if (this.pollingFast) { return }\\n    this.polling.set(this.cm.options.pollInterval, function () {\\n      this$1.poll();\\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\\n    });\\n  };\\n\\n  // When an event has just come in that is likely to add or change\\n  // something in the input textarea, we poll faster, to ensure that\\n  // the change appears on the screen quickly.\\n  TextareaInput.prototype.fastPoll = function () {\\n    var missed = false, input = this;\\n    input.pollingFast = true;\\n    function p() {\\n      var changed = input.poll();\\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\\n      else {input.pollingFast = false; input.slowPoll();}\\n    }\\n    input.polling.set(20, p);\\n  };\\n\\n  // Read input from the textarea, and update the document to match.\\n  // When something is selected, it is present in the textarea, and\\n  // selected (unless it is huge, in which case a placeholder is\\n  // used). When nothing is selected, the cursor sits after previously\\n  // seen text (can be empty), which is stored in prevInput (we must\\n  // not reset the textarea when typing, because that breaks IME).\\n  TextareaInput.prototype.poll = function () {\\n      var this$1 = this;\\n\\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\\n    // Since this is called a *lot*, try to bail out as cheaply as\\n    // possible when it is clear that nothing happened. hasSelection\\n    // will be the case when there is a lot of text in the textarea,\\n    // in which case reading its value would be expensive.\\n    if (this.contextMenuPending || !cm.state.focused ||\\n        (hasSelection(input) && !prevInput && !this.composing) ||\\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\\n      { return false }\\n\\n    var text = input.value;\\n    // If nothing changed, bail.\\n    if (text == prevInput && !cm.somethingSelected()) { return false }\\n    // Work around nonsensical selection resetting in IE9/10, and\\n    // inexplicable appearance of private area unicode characters on\\n    // some key combos in Mac (#2689).\\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\\n        mac && /[\\\\uf700-\\\\uf7ff]/.test(text)) {\\n      cm.display.input.reset();\\n      return false\\n    }\\n\\n    if (cm.doc.sel == cm.display.selForContextMenu) {\\n      var first = text.charCodeAt(0);\\n      if (first == 0x200b && !prevInput) { prevInput = \\\"\\\\u200b\\\"; }\\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\\\"undo\\\") }\\n    }\\n    // Find the part of the input that is actually new\\n    var same = 0, l = Math.min(prevInput.length, text.length);\\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\\n\\n    runInOp(cm, function () {\\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\\n                     null, this$1.composing ? \\\"*compose\\\" : null);\\n\\n      // Don't leave long text in the textarea, since it makes further polling slow\\n      if (text.length > 1000 || text.indexOf(\\\"\\\\n\\\") > -1) { input.value = this$1.prevInput = \\\"\\\"; }\\n      else { this$1.prevInput = text; }\\n\\n      if (this$1.composing) {\\n        this$1.composing.range.clear();\\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\\\"to\\\"),\\n                                           {className: \\\"CodeMirror-composing\\\"});\\n      }\\n    });\\n    return true\\n  };\\n\\n  TextareaInput.prototype.ensurePolled = function () {\\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\\n  };\\n\\n  TextareaInput.prototype.onKeyPress = function () {\\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\\n    this.fastPoll();\\n  };\\n\\n  TextareaInput.prototype.onContextMenu = function (e) {\\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\\n    if (input.contextMenuPending) { input.contextMenuPending(); }\\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\\n    if (!pos || presto) { return } // Opera is difficult.\\n\\n    // Reset the current text selection only if the click is done outside of the selection\\n    // and 'resetSelectionOnContextMenu' option is true.\\n    var reset = cm.options.resetSelectionOnContextMenu;\\n    if (reset && cm.doc.sel.contains(pos) == -1)\\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\\n\\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\\n    input.wrapper.style.cssText = \\\"position: static\\\";\\n    te.style.cssText = \\\"position: absolute; width: 30px; height: 30px;\\\\n      top: \\\" + (e.clientY - wrapperBox.top - 5) + \\\"px; left: \\\" + (e.clientX - wrapperBox.left - 5) + \\\"px;\\\\n      z-index: 1000; background: \\\" + (ie ? \\\"rgba(255, 255, 255, .05)\\\" : \\\"transparent\\\") + \\\";\\\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\\\";\\n    var oldScrollY;\\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\\n    display.input.focus();\\n    if (webkit) { window.scrollTo(null, oldScrollY); }\\n    display.input.reset();\\n    // Adds \\\"Select all\\\" to context menu in FF\\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \\\" \\\"; }\\n    input.contextMenuPending = rehide;\\n    display.selForContextMenu = cm.doc.sel;\\n    clearTimeout(display.detectingSelectAll);\\n\\n    // Select-all will be greyed out if there's nothing to select, so\\n    // this adds a zero-width space so that we can later check whether\\n    // it got selected.\\n    function prepareSelectAllHack() {\\n      if (te.selectionStart != null) {\\n        var selected = cm.somethingSelected();\\n        var extval = \\\"\\\\u200b\\\" + (selected ? te.value : \\\"\\\");\\n        te.value = \\\"\\\\u21da\\\"; // Used to catch context-menu undo\\n        te.value = extval;\\n        input.prevInput = selected ? \\\"\\\" : \\\"\\\\u200b\\\";\\n        te.selectionStart = 1; te.selectionEnd = extval.length;\\n        // Re-set this, in case some other handler touched the\\n        // selection in the meantime.\\n        display.selForContextMenu = cm.doc.sel;\\n      }\\n    }\\n    function rehide() {\\n      if (input.contextMenuPending != rehide) { return }\\n      input.contextMenuPending = false;\\n      input.wrapper.style.cssText = oldWrapperCSS;\\n      te.style.cssText = oldCSS;\\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\\n\\n      // Try to detect the user choosing select-all\\n      if (te.selectionStart != null) {\\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\\n        var i = 0, poll = function () {\\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\\n              te.selectionEnd > 0 && input.prevInput == \\\"\\\\u200b\\\") {\\n            operation(cm, selectAll)(cm);\\n          } else if (i++ < 10) {\\n            display.detectingSelectAll = setTimeout(poll, 500);\\n          } else {\\n            display.selForContextMenu = null;\\n            display.input.reset();\\n          }\\n        };\\n        display.detectingSelectAll = setTimeout(poll, 200);\\n      }\\n    }\\n\\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\\n    if (captureRightClick) {\\n      e_stop(e);\\n      var mouseup = function () {\\n        off(window, \\\"mouseup\\\", mouseup);\\n        setTimeout(rehide, 20);\\n      };\\n      on(window, \\\"mouseup\\\", mouseup);\\n    } else {\\n      setTimeout(rehide, 50);\\n    }\\n  };\\n\\n  TextareaInput.prototype.readOnlyChanged = function (val) {\\n    if (!val) { this.reset(); }\\n    this.textarea.disabled = val == \\\"nocursor\\\";\\n  };\\n\\n  TextareaInput.prototype.setUneditable = function () {};\\n\\n  TextareaInput.prototype.needsContentAttribute = false;\\n\\n  function fromTextArea(textarea, options) {\\n    options = options ? copyObj(options) : {};\\n    options.value = textarea.value;\\n    if (!options.tabindex && textarea.tabIndex)\\n      { options.tabindex = textarea.tabIndex; }\\n    if (!options.placeholder && textarea.placeholder)\\n      { options.placeholder = textarea.placeholder; }\\n    // Set autofocus to true if this textarea is focused, or if it has\\n    // autofocus and no other element is focused.\\n    if (options.autofocus == null) {\\n      var hasFocus = activeElt();\\n      options.autofocus = hasFocus == textarea ||\\n        textarea.getAttribute(\\\"autofocus\\\") != null && hasFocus == document.body;\\n    }\\n\\n    function save() {textarea.value = cm.getValue();}\\n\\n    var realSubmit;\\n    if (textarea.form) {\\n      on(textarea.form, \\\"submit\\\", save);\\n      // Deplorable hack to make the submit method do the right thing.\\n      if (!options.leaveSubmitMethodAlone) {\\n        var form = textarea.form;\\n        realSubmit = form.submit;\\n        try {\\n          var wrappedSubmit = form.submit = function () {\\n            save();\\n            form.submit = realSubmit;\\n            form.submit();\\n            form.submit = wrappedSubmit;\\n          };\\n        } catch(e) {}\\n      }\\n    }\\n\\n    options.finishInit = function (cm) {\\n      cm.save = save;\\n      cm.getTextArea = function () { return textarea; };\\n      cm.toTextArea = function () {\\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\\n        save();\\n        textarea.parentNode.removeChild(cm.getWrapperElement());\\n        textarea.style.display = \\\"\\\";\\n        if (textarea.form) {\\n          off(textarea.form, \\\"submit\\\", save);\\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \\\"function\\\")\\n            { textarea.form.submit = realSubmit; }\\n        }\\n      };\\n    };\\n\\n    textarea.style.display = \\\"none\\\";\\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\\n      options);\\n    return cm\\n  }\\n\\n  function addLegacyProps(CodeMirror) {\\n    CodeMirror.off = off;\\n    CodeMirror.on = on;\\n    CodeMirror.wheelEventPixels = wheelEventPixels;\\n    CodeMirror.Doc = Doc;\\n    CodeMirror.splitLines = splitLinesAuto;\\n    CodeMirror.countColumn = countColumn;\\n    CodeMirror.findColumn = findColumn;\\n    CodeMirror.isWordChar = isWordCharBasic;\\n    CodeMirror.Pass = Pass;\\n    CodeMirror.signal = signal;\\n    CodeMirror.Line = Line;\\n    CodeMirror.changeEnd = changeEnd;\\n    CodeMirror.scrollbarModel = scrollbarModel;\\n    CodeMirror.Pos = Pos;\\n    CodeMirror.cmpPos = cmp;\\n    CodeMirror.modes = modes;\\n    CodeMirror.mimeModes = mimeModes;\\n    CodeMirror.resolveMode = resolveMode;\\n    CodeMirror.getMode = getMode;\\n    CodeMirror.modeExtensions = modeExtensions;\\n    CodeMirror.extendMode = extendMode;\\n    CodeMirror.copyState = copyState;\\n    CodeMirror.startState = startState;\\n    CodeMirror.innerMode = innerMode;\\n    CodeMirror.commands = commands;\\n    CodeMirror.keyMap = keyMap;\\n    CodeMirror.keyName = keyName;\\n    CodeMirror.isModifierKey = isModifierKey;\\n    CodeMirror.lookupKey = lookupKey;\\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\\n    CodeMirror.StringStream = StringStream;\\n    CodeMirror.SharedTextMarker = SharedTextMarker;\\n    CodeMirror.TextMarker = TextMarker;\\n    CodeMirror.LineWidget = LineWidget;\\n    CodeMirror.e_preventDefault = e_preventDefault;\\n    CodeMirror.e_stopPropagation = e_stopPropagation;\\n    CodeMirror.e_stop = e_stop;\\n    CodeMirror.addClass = addClass;\\n    CodeMirror.contains = contains;\\n    CodeMirror.rmClass = rmClass;\\n    CodeMirror.keyNames = keyNames;\\n  }\\n\\n  // EDITOR CONSTRUCTOR\\n\\n  defineOptions(CodeMirror);\\n\\n  addEditorMethods(CodeMirror);\\n\\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\\n  var dontDelegate = \\\"iter insert remove copy getEditor constructor\\\".split(\\\" \\\");\\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\\n    { CodeMirror.prototype[prop] = (function(method) {\\n      return function() {return method.apply(this.doc, arguments)}\\n    })(Doc.prototype[prop]); } }\\n\\n  eventMixin(Doc);\\n  CodeMirror.inputStyles = {\\\"textarea\\\": TextareaInput, \\\"contenteditable\\\": ContentEditableInput};\\n\\n  // Extra arguments are stored as the mode's dependencies, which is\\n  // used by (legacy) mechanisms like loadmode.js to automatically\\n  // load a mode. (Preferred mechanism is the require/define calls.)\\n  CodeMirror.defineMode = function(name/*, mode, */) {\\n    if (!CodeMirror.defaults.mode && name != \\\"null\\\") { CodeMirror.defaults.mode = name; }\\n    defineMode.apply(this, arguments);\\n  };\\n\\n  CodeMirror.defineMIME = defineMIME;\\n\\n  // Minimal default mode.\\n  CodeMirror.defineMode(\\\"null\\\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\\n  CodeMirror.defineMIME(\\\"text/plain\\\", \\\"null\\\");\\n\\n  // EXTENSIONS\\n\\n  CodeMirror.defineExtension = function (name, func) {\\n    CodeMirror.prototype[name] = func;\\n  };\\n  CodeMirror.defineDocExtension = function (name, func) {\\n    Doc.prototype[name] = func;\\n  };\\n\\n  CodeMirror.fromTextArea = fromTextArea;\\n\\n  addLegacyProps(CodeMirror);\\n\\n  CodeMirror.version = \\\"5.49.0\\\";\\n\\n  return CodeMirror;\\n\\n})));\\n\",\"export default \\\"/* BASICS */\\\\n\\\\n.CodeMirror {\\\\n  /* Set height, width, borders, and global font properties here */\\\\n  font-family: monospace;\\\\n  height: 300px;\\\\n  color: black;\\\\n  direction: ltr;\\\\n}\\\\n\\\\n/* PADDING */\\\\n\\\\n.CodeMirror-lines {\\\\n  padding: 4px 0; /* Vertical padding around content */\\\\n}\\\\n.CodeMirror pre.CodeMirror-line,\\\\n.CodeMirror pre.CodeMirror-line-like {\\\\n  padding: 0 4px; /* Horizontal padding of content */\\\\n}\\\\n\\\\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\\\\n  background-color: white; /* The little square between H and V scrollbars */\\\\n}\\\\n\\\\n/* GUTTER */\\\\n\\\\n.CodeMirror-gutters {\\\\n  border-right: 1px solid #ddd;\\\\n  background-color: #f7f7f7;\\\\n  white-space: nowrap;\\\\n}\\\\n.CodeMirror-linenumbers {}\\\\n.CodeMirror-linenumber {\\\\n  padding: 0 3px 0 5px;\\\\n  min-width: 20px;\\\\n  text-align: right;\\\\n  color: #999;\\\\n  white-space: nowrap;\\\\n}\\\\n\\\\n.CodeMirror-guttermarker { color: black; }\\\\n.CodeMirror-guttermarker-subtle { color: #999; }\\\\n\\\\n/* CURSOR */\\\\n\\\\n.CodeMirror-cursor {\\\\n  border-left: 1px solid black;\\\\n  border-right: none;\\\\n  width: 0;\\\\n}\\\\n/* Shown when moving in bi-directional text */\\\\n.CodeMirror div.CodeMirror-secondarycursor {\\\\n  border-left: 1px solid silver;\\\\n}\\\\n.cm-fat-cursor .CodeMirror-cursor {\\\\n  width: auto;\\\\n  border: 0 !important;\\\\n  background: #7e7;\\\\n}\\\\n.cm-fat-cursor div.CodeMirror-cursors {\\\\n  z-index: 1;\\\\n}\\\\n.cm-fat-cursor-mark {\\\\n  background-color: rgba(20, 255, 20, 0.5);\\\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\\\n  -moz-animation: blink 1.06s steps(1) infinite;\\\\n  animation: blink 1.06s steps(1) infinite;\\\\n}\\\\n.cm-animate-fat-cursor {\\\\n  width: auto;\\\\n  border: 0;\\\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\\\n  -moz-animation: blink 1.06s steps(1) infinite;\\\\n  animation: blink 1.06s steps(1) infinite;\\\\n  background-color: #7e7;\\\\n}\\\\n@-moz-keyframes blink {\\\\n  0% {}\\\\n  50% { background-color: transparent; }\\\\n  100% {}\\\\n}\\\\n@-webkit-keyframes blink {\\\\n  0% {}\\\\n  50% { background-color: transparent; }\\\\n  100% {}\\\\n}\\\\n@keyframes blink {\\\\n  0% {}\\\\n  50% { background-color: transparent; }\\\\n  100% {}\\\\n}\\\\n\\\\n/* Can style cursor different in overwrite (non-insert) mode */\\\\n.CodeMirror-overwrite .CodeMirror-cursor {}\\\\n\\\\n.cm-tab { display: inline-block; text-decoration: inherit; }\\\\n\\\\n.CodeMirror-rulers {\\\\n  position: absolute;\\\\n  left: 0; right: 0; top: -50px; bottom: 0;\\\\n  overflow: hidden;\\\\n}\\\\n.CodeMirror-ruler {\\\\n  border-left: 1px solid #ccc;\\\\n  top: 0; bottom: 0;\\\\n  position: absolute;\\\\n}\\\\n\\\\n/* DEFAULT THEME */\\\\n\\\\n.cm-s-default .cm-header {color: blue;}\\\\n.cm-s-default .cm-quote {color: #090;}\\\\n.cm-negative {color: #d44;}\\\\n.cm-positive {color: #292;}\\\\n.cm-header, .cm-strong {font-weight: bold;}\\\\n.cm-em {font-style: italic;}\\\\n.cm-link {text-decoration: underline;}\\\\n.cm-strikethrough {text-decoration: line-through;}\\\\n\\\\n.cm-s-default .cm-keyword {color: #708;}\\\\n.cm-s-default .cm-atom {color: #219;}\\\\n.cm-s-default .cm-number {color: #164;}\\\\n.cm-s-default .cm-def {color: #00f;}\\\\n.cm-s-default .cm-variable,\\\\n.cm-s-default .cm-punctuation,\\\\n.cm-s-default .cm-property,\\\\n.cm-s-default .cm-operator {}\\\\n.cm-s-default .cm-variable-2 {color: #05a;}\\\\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\\\\n.cm-s-default .cm-comment {color: #a50;}\\\\n.cm-s-default .cm-string {color: #a11;}\\\\n.cm-s-default .cm-string-2 {color: #f50;}\\\\n.cm-s-default .cm-meta {color: #555;}\\\\n.cm-s-default .cm-qualifier {color: #555;}\\\\n.cm-s-default .cm-builtin {color: #30a;}\\\\n.cm-s-default .cm-bracket {color: #997;}\\\\n.cm-s-default .cm-tag {color: #170;}\\\\n.cm-s-default .cm-attribute {color: #00c;}\\\\n.cm-s-default .cm-hr {color: #999;}\\\\n.cm-s-default .cm-link {color: #00c;}\\\\n\\\\n.cm-s-default .cm-error {color: #f00;}\\\\n.cm-invalidchar {color: #f00;}\\\\n\\\\n.CodeMirror-composing { border-bottom: 2px solid; }\\\\n\\\\n/* Default styles for common addons */\\\\n\\\\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\\\\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\\\\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\\\\n.CodeMirror-activeline-background {background: #e8f2ff;}\\\\n\\\\n/* STOP */\\\\n\\\\n/* The rest of this file contains styles related to the mechanics of\\\\n   the editor. You probably shouldn't touch them. */\\\\n\\\\n.CodeMirror {\\\\n  position: relative;\\\\n  overflow: hidden;\\\\n  background: white;\\\\n}\\\\n\\\\n.CodeMirror-scroll {\\\\n  overflow: scroll !important; /* Things will break if this is overridden */\\\\n  /* 30px is the magic margin used to hide the element's real scrollbars */\\\\n  /* See overflow: hidden in .CodeMirror */\\\\n  margin-bottom: -30px; margin-right: -30px;\\\\n  padding-bottom: 30px;\\\\n  height: 100%;\\\\n  outline: none; /* Prevent dragging from highlighting the element */\\\\n  position: relative;\\\\n}\\\\n.CodeMirror-sizer {\\\\n  position: relative;\\\\n  border-right: 30px solid transparent;\\\\n}\\\\n\\\\n/* The fake, visible scrollbars. Used to force redraw during scrolling\\\\n   before actual scrolling happens, thus preventing shaking and\\\\n   flickering artifacts. */\\\\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\\\\n  position: absolute;\\\\n  z-index: 6;\\\\n  display: none;\\\\n}\\\\n.CodeMirror-vscrollbar {\\\\n  right: 0; top: 0;\\\\n  overflow-x: hidden;\\\\n  overflow-y: scroll;\\\\n}\\\\n.CodeMirror-hscrollbar {\\\\n  bottom: 0; left: 0;\\\\n  overflow-y: hidden;\\\\n  overflow-x: scroll;\\\\n}\\\\n.CodeMirror-scrollbar-filler {\\\\n  right: 0; bottom: 0;\\\\n}\\\\n.CodeMirror-gutter-filler {\\\\n  left: 0; bottom: 0;\\\\n}\\\\n\\\\n.CodeMirror-gutters {\\\\n  position: absolute; left: 0; top: 0;\\\\n  min-height: 100%;\\\\n  z-index: 3;\\\\n}\\\\n.CodeMirror-gutter {\\\\n  white-space: normal;\\\\n  height: 100%;\\\\n  display: inline-block;\\\\n  vertical-align: top;\\\\n  margin-bottom: -30px;\\\\n}\\\\n.CodeMirror-gutter-wrapper {\\\\n  position: absolute;\\\\n  z-index: 4;\\\\n  background: none !important;\\\\n  border: none !important;\\\\n}\\\\n.CodeMirror-gutter-background {\\\\n  position: absolute;\\\\n  top: 0; bottom: 0;\\\\n  z-index: 4;\\\\n}\\\\n.CodeMirror-gutter-elt {\\\\n  position: absolute;\\\\n  cursor: default;\\\\n  z-index: 4;\\\\n}\\\\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\\\\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\\\\n\\\\n.CodeMirror-lines {\\\\n  cursor: text;\\\\n  min-height: 1px; /* prevents collapsing before first draw */\\\\n}\\\\n.CodeMirror pre.CodeMirror-line,\\\\n.CodeMirror pre.CodeMirror-line-like {\\\\n  /* Reset some styles that the rest of the page might have set */\\\\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\\\\n  border-width: 0;\\\\n  background: transparent;\\\\n  font-family: inherit;\\\\n  font-size: inherit;\\\\n  margin: 0;\\\\n  white-space: pre;\\\\n  word-wrap: normal;\\\\n  line-height: inherit;\\\\n  color: inherit;\\\\n  z-index: 2;\\\\n  position: relative;\\\\n  overflow: visible;\\\\n  -webkit-tap-highlight-color: transparent;\\\\n  -webkit-font-variant-ligatures: contextual;\\\\n  font-variant-ligatures: contextual;\\\\n}\\\\n.CodeMirror-wrap pre.CodeMirror-line,\\\\n.CodeMirror-wrap pre.CodeMirror-line-like {\\\\n  word-wrap: break-word;\\\\n  white-space: pre-wrap;\\\\n  word-break: normal;\\\\n}\\\\n\\\\n.CodeMirror-linebackground {\\\\n  position: absolute;\\\\n  left: 0; right: 0; top: 0; bottom: 0;\\\\n  z-index: 0;\\\\n}\\\\n\\\\n.CodeMirror-linewidget {\\\\n  position: relative;\\\\n  z-index: 2;\\\\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\\\\n}\\\\n\\\\n.CodeMirror-widget {}\\\\n\\\\n.CodeMirror-rtl pre { direction: rtl; }\\\\n\\\\n.CodeMirror-code {\\\\n  outline: none;\\\\n}\\\\n\\\\n/* Force content-box sizing for the elements where we expect it */\\\\n.CodeMirror-scroll,\\\\n.CodeMirror-sizer,\\\\n.CodeMirror-gutter,\\\\n.CodeMirror-gutters,\\\\n.CodeMirror-linenumber {\\\\n  -moz-box-sizing: content-box;\\\\n  box-sizing: content-box;\\\\n}\\\\n\\\\n.CodeMirror-measure {\\\\n  position: absolute;\\\\n  width: 100%;\\\\n  height: 0;\\\\n  overflow: hidden;\\\\n  visibility: hidden;\\\\n}\\\\n\\\\n.CodeMirror-cursor {\\\\n  position: absolute;\\\\n  pointer-events: none;\\\\n}\\\\n.CodeMirror-measure pre { position: static; }\\\\n\\\\ndiv.CodeMirror-cursors {\\\\n  visibility: hidden;\\\\n  position: relative;\\\\n  z-index: 3;\\\\n}\\\\ndiv.CodeMirror-dragcursors {\\\\n  visibility: visible;\\\\n}\\\\n\\\\n.CodeMirror-focused div.CodeMirror-cursors {\\\\n  visibility: visible;\\\\n}\\\\n\\\\n.CodeMirror-selected { background: #d9d9d9; }\\\\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\\\\n.CodeMirror-crosshair { cursor: crosshair; }\\\\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\\\\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\\\\n\\\\n.cm-searching {\\\\n  background-color: #ffa;\\\\n  background-color: rgba(255, 255, 0, .4);\\\\n}\\\\n\\\\n/* Used to force a border model for a node */\\\\n.cm-force-border { padding-right: .1px; }\\\\n\\\\n@media print {\\\\n  /* Hide the cursor when printing */\\\\n  .CodeMirror div.CodeMirror-cursors {\\\\n    visibility: hidden;\\\\n  }\\\\n}\\\\n\\\\n/* See issue #2901 */\\\\n.cm-tab-wrap-hack:after { content: ''; }\\\\n\\\\n/* Help users use markselection to safely style text background */\\\\nspan.CodeMirror-selectedtext { background: none; }\\\\n\\\"\",\"// CodeMirror, copyright (c) by Marijn Haverbeke and others\\n// Distributed under an MIT license: https://codemirror.net/LICENSE\\n\\n(function(mod) {\\n  if (typeof exports == \\\"object\\\" && typeof module == \\\"object\\\") // CommonJS\\n    mod(require(\\\"../../lib/codemirror\\\"));\\n  else if (typeof define == \\\"function\\\" && define.amd) // AMD\\n    define([\\\"../../lib/codemirror\\\"], mod);\\n  else // Plain browser env\\n    mod(CodeMirror);\\n})(function(CodeMirror) {\\n\\\"use strict\\\";\\n\\nCodeMirror.defineMode(\\\"yaml\\\", function() {\\n\\n  var cons = ['true', 'false', 'on', 'off', 'yes', 'no'];\\n  var keywordRegex = new RegExp(\\\"\\\\\\\\b((\\\"+cons.join(\\\")|(\\\")+\\\"))$\\\", 'i');\\n\\n  return {\\n    token: function(stream, state) {\\n      var ch = stream.peek();\\n      var esc = state.escaped;\\n      state.escaped = false;\\n      /* comments */\\n      if (ch == \\\"#\\\" && (stream.pos == 0 || /\\\\s/.test(stream.string.charAt(stream.pos - 1)))) {\\n        stream.skipToEnd();\\n        return \\\"comment\\\";\\n      }\\n\\n      if (stream.match(/^('([^']|\\\\\\\\.)*'?|\\\"([^\\\"]|\\\\\\\\.)*\\\"?)/))\\n        return \\\"string\\\";\\n\\n      if (state.literal && stream.indentation() > state.keyCol) {\\n        stream.skipToEnd(); return \\\"string\\\";\\n      } else if (state.literal) { state.literal = false; }\\n      if (stream.sol()) {\\n        state.keyCol = 0;\\n        state.pair = false;\\n        state.pairStart = false;\\n        /* document start */\\n        if(stream.match(/---/)) { return \\\"def\\\"; }\\n        /* document end */\\n        if (stream.match(/\\\\.\\\\.\\\\./)) { return \\\"def\\\"; }\\n        /* array list item */\\n        if (stream.match(/\\\\s*-\\\\s+/)) { return 'meta'; }\\n      }\\n      /* inline pairs/lists */\\n      if (stream.match(/^(\\\\{|\\\\}|\\\\[|\\\\])/)) {\\n        if (ch == '{')\\n          state.inlinePairs++;\\n        else if (ch == '}')\\n          state.inlinePairs--;\\n        else if (ch == '[')\\n          state.inlineList++;\\n        else\\n          state.inlineList--;\\n        return 'meta';\\n      }\\n\\n      /* list seperator */\\n      if (state.inlineList > 0 && !esc && ch == ',') {\\n        stream.next();\\n        return 'meta';\\n      }\\n      /* pairs seperator */\\n      if (state.inlinePairs > 0 && !esc && ch == ',') {\\n        state.keyCol = 0;\\n        state.pair = false;\\n        state.pairStart = false;\\n        stream.next();\\n        return 'meta';\\n      }\\n\\n      /* start of value of a pair */\\n      if (state.pairStart) {\\n        /* block literals */\\n        if (stream.match(/^\\\\s*(\\\\||\\\\>)\\\\s*/)) { state.literal = true; return 'meta'; };\\n        /* references */\\n        if (stream.match(/^\\\\s*(\\\\&|\\\\*)[a-z0-9\\\\._-]+\\\\b/i)) { return 'variable-2'; }\\n        /* numbers */\\n        if (state.inlinePairs == 0 && stream.match(/^\\\\s*-?[0-9\\\\.\\\\,]+\\\\s?$/)) { return 'number'; }\\n        if (state.inlinePairs > 0 && stream.match(/^\\\\s*-?[0-9\\\\.\\\\,]+\\\\s?(?=(,|}))/)) { return 'number'; }\\n        /* keywords */\\n        if (stream.match(keywordRegex)) { return 'keyword'; }\\n      }\\n\\n      /* pairs (associative arrays) -> key */\\n      if (!state.pair && stream.match(/^\\\\s*(?:[,\\\\[\\\\]{}&*!|>'\\\"%@`][^\\\\s'\\\":]|[^,\\\\[\\\\]{}#&*!|>'\\\"%@`])[^#]*?(?=\\\\s*:($|\\\\s))/)) {\\n        state.pair = true;\\n        state.keyCol = stream.indentation();\\n        return \\\"atom\\\";\\n      }\\n      if (state.pair && stream.match(/^:\\\\s*/)) { state.pairStart = true; return 'meta'; }\\n\\n      /* nothing found, continue */\\n      state.pairStart = false;\\n      state.escaped = (ch == '\\\\\\\\');\\n      stream.next();\\n      return null;\\n    },\\n    startState: function() {\\n      return {\\n        pair: false,\\n        pairStart: false,\\n        keyCol: 0,\\n        inlinePairs: 0,\\n        inlineList: 0,\\n        literal: false,\\n        escaped: false\\n      };\\n    },\\n    lineComment: \\\"#\\\",\\n    fold: \\\"indent\\\"\\n  };\\n});\\n\\nCodeMirror.defineMIME(\\\"text/x-yaml\\\", \\\"yaml\\\");\\nCodeMirror.defineMIME(\\\"text/yaml\\\", \\\"yaml\\\");\\n\\n});\\n\",\"// CodeMirror, copyright (c) by Marijn Haverbeke and others\\n// Distributed under an MIT license: https://codemirror.net/LICENSE\\n\\n(function(mod) {\\n  if (typeof exports == \\\"object\\\" && typeof module == \\\"object\\\") // CommonJS\\n    mod(require(\\\"../../lib/codemirror\\\"));\\n  else if (typeof define == \\\"function\\\" && define.amd) // AMD\\n    define([\\\"../../lib/codemirror\\\"], mod);\\n  else // Plain browser env\\n    mod(CodeMirror);\\n})(function(CodeMirror) {\\n  \\\"use strict\\\";\\n\\n  CodeMirror.defineMode(\\\"jinja2\\\", function() {\\n    var keywords = [\\\"and\\\", \\\"as\\\", \\\"block\\\", \\\"endblock\\\", \\\"by\\\", \\\"cycle\\\", \\\"debug\\\", \\\"else\\\", \\\"elif\\\",\\n      \\\"extends\\\", \\\"filter\\\", \\\"endfilter\\\", \\\"firstof\\\", \\\"for\\\",\\n      \\\"endfor\\\", \\\"if\\\", \\\"endif\\\", \\\"ifchanged\\\", \\\"endifchanged\\\",\\n      \\\"ifequal\\\", \\\"endifequal\\\", \\\"ifnotequal\\\",\\n      \\\"endifnotequal\\\", \\\"in\\\", \\\"include\\\", \\\"load\\\", \\\"not\\\", \\\"now\\\", \\\"or\\\",\\n      \\\"parsed\\\", \\\"regroup\\\", \\\"reversed\\\", \\\"spaceless\\\",\\n      \\\"endspaceless\\\", \\\"ssi\\\", \\\"templatetag\\\", \\\"openblock\\\",\\n      \\\"closeblock\\\", \\\"openvariable\\\", \\\"closevariable\\\",\\n      \\\"openbrace\\\", \\\"closebrace\\\", \\\"opencomment\\\",\\n      \\\"closecomment\\\", \\\"widthratio\\\", \\\"url\\\", \\\"with\\\", \\\"endwith\\\",\\n      \\\"get_current_language\\\", \\\"trans\\\", \\\"endtrans\\\", \\\"noop\\\", \\\"blocktrans\\\",\\n      \\\"endblocktrans\\\", \\\"get_available_languages\\\",\\n      \\\"get_current_language_bidi\\\", \\\"plural\\\"],\\n    operator = /^[+\\\\-*&%=<>!?|~^]/,\\n    sign = /^[:\\\\[\\\\(\\\\{]/,\\n    atom = [\\\"true\\\", \\\"false\\\"],\\n    number = /^(\\\\d[+\\\\-\\\\*\\\\/])?\\\\d+(\\\\.\\\\d+)?/;\\n\\n    keywords = new RegExp(\\\"((\\\" + keywords.join(\\\")|(\\\") + \\\"))\\\\\\\\b\\\");\\n    atom = new RegExp(\\\"((\\\" + atom.join(\\\")|(\\\") + \\\"))\\\\\\\\b\\\");\\n\\n    function tokenBase (stream, state) {\\n      var ch = stream.peek();\\n\\n      //Comment\\n      if (state.incomment) {\\n        if(!stream.skipTo(\\\"#}\\\")) {\\n          stream.skipToEnd();\\n        } else {\\n          stream.eatWhile(/\\\\#|}/);\\n          state.incomment = false;\\n        }\\n        return \\\"comment\\\";\\n      //Tag\\n      } else if (state.intag) {\\n        //After operator\\n        if(state.operator) {\\n          state.operator = false;\\n          if(stream.match(atom)) {\\n            return \\\"atom\\\";\\n          }\\n          if(stream.match(number)) {\\n            return \\\"number\\\";\\n          }\\n        }\\n        //After sign\\n        if(state.sign) {\\n          state.sign = false;\\n          if(stream.match(atom)) {\\n            return \\\"atom\\\";\\n          }\\n          if(stream.match(number)) {\\n            return \\\"number\\\";\\n          }\\n        }\\n\\n        if(state.instring) {\\n          if(ch == state.instring) {\\n            state.instring = false;\\n          }\\n          stream.next();\\n          return \\\"string\\\";\\n        } else if(ch == \\\"'\\\" || ch == '\\\"') {\\n          state.instring = ch;\\n          stream.next();\\n          return \\\"string\\\";\\n        } else if(stream.match(state.intag + \\\"}\\\") || stream.eat(\\\"-\\\") && stream.match(state.intag + \\\"}\\\")) {\\n          state.intag = false;\\n          return \\\"tag\\\";\\n        } else if(stream.match(operator)) {\\n          state.operator = true;\\n          return \\\"operator\\\";\\n        } else if(stream.match(sign)) {\\n          state.sign = true;\\n        } else {\\n          if(stream.eat(\\\" \\\") || stream.sol()) {\\n            if(stream.match(keywords)) {\\n              return \\\"keyword\\\";\\n            }\\n            if(stream.match(atom)) {\\n              return \\\"atom\\\";\\n            }\\n            if(stream.match(number)) {\\n              return \\\"number\\\";\\n            }\\n            if(stream.sol()) {\\n              stream.next();\\n            }\\n          } else {\\n            stream.next();\\n          }\\n\\n        }\\n        return \\\"variable\\\";\\n      } else if (stream.eat(\\\"{\\\")) {\\n        if (stream.eat(\\\"#\\\")) {\\n          state.incomment = true;\\n          if(!stream.skipTo(\\\"#}\\\")) {\\n            stream.skipToEnd();\\n          } else {\\n            stream.eatWhile(/\\\\#|}/);\\n            state.incomment = false;\\n          }\\n          return \\\"comment\\\";\\n        //Open tag\\n        } else if (ch = stream.eat(/\\\\{|%/)) {\\n          //Cache close tag\\n          state.intag = ch;\\n          if(ch == \\\"{\\\") {\\n            state.intag = \\\"}\\\";\\n          }\\n          stream.eat(\\\"-\\\");\\n          return \\\"tag\\\";\\n        }\\n      }\\n      stream.next();\\n    };\\n\\n    return {\\n      startState: function () {\\n        return {tokenize: tokenBase};\\n      },\\n      token: function (stream, state) {\\n        return state.tokenize(stream, state);\\n      },\\n      blockCommentStart: \\\"{#\\\",\\n      blockCommentEnd: \\\"#}\\\"\\n    };\\n  });\\n\\n  CodeMirror.defineMIME(\\\"text/jinja2\\\", \\\"jinja2\\\");\\n});\\n\"]}","code":"(self.webpackJsonp=self.webpackJsonp||[]).push([[123],{149:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,\"loaded\",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,\"id\",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},384:function(e,t,r){var n,i,o;function l(e){return(l=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}o=function(){\"use strict\";var e=navigator.userAgent,t=navigator.platform,r=/gecko\\/\\d/i.test(e),n=/MSIE \\d/.test(e),i=/Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(e),o=/Edge\\/(\\d+)/.exec(e),s=n||i||o,a=s&&(n?document.documentMode||6:+(o||i)[1]),u=!o&&/WebKit\\//.test(e),c=u&&/Qt\\/\\d+\\.\\d+/.test(e),f=!o&&/Chrome\\//.test(e),d=/Opera\\//.test(e),h=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(e),g=/PhantomJS/.test(e),m=!o&&/AppleWebKit/.test(e)&&/Mobile\\/\\w+/.test(e),v=/Android/.test(e),y=m||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=m||/Mac/.test(t),w=/\\bCrOS\\b/.test(e),x=/win/i.test(t),C=d&&e.match(/Version\\/(\\d*\\.\\d*)/);C&&(C=Number(C[1])),C&&C>=15&&(d=!1,u=!0);var S=b&&(c||d&&(null==C||C<12.11)),k=r||s&&a>=9;function M(e){return new RegExp(\"(^|\\\\s)\"+e+\"(?:$|\\\\s)\\\\s*\")}var L,T=function(e,t){var r=e.className,n=M(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:\"\")}};function N(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function O(e,t){return N(e).appendChild(t)}function A(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),\"string\"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function D(e,t,r,n){var i=A(e,t,r,n);return i.setAttribute(\"role\",\"presentation\"),i}function W(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function H(){var e;try{e=document.activeElement}catch(We){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function P(e,t){var r=e.className;M(t).test(r)||(e.className+=(r?\" \":\"\")+t)}function z(e,t){for(var r=e.split(\" \"),n=0;n<r.length;n++)r[n]&&!M(r[n]).test(t)&&(t+=\" \"+r[n]);return t}L=document.createRange?function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(We){return n}return n.collapse(!0),n.moveEnd(\"character\",r),n.moveStart(\"character\",t),n};var F=function(e){e.select()};function E(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function I(e,t,r){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function R(e,t,r,n,i){null==t&&-1==(t=e.search(/[^\\s\\u00a0]/))&&(t=e.length);for(var o=n||0,l=i||0;;){var s=e.indexOf(\"\\t\",o);if(s<0||s>=t)return l+(t-o);l+=s-o,l+=r-l%r,o=s+1}}m?F=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(F=function(e){try{e.select()}catch(t){}});var B=function(){this.id=null};function G(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}B.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var U=30,V={toString:function(){return\"CodeMirror.Pass\"}},j={scroll:!1},K={origin:\"*mouse\"},X={origin:\"+move\"};function _(e,t,r){for(var n=0,i=0;;){var o=e.indexOf(\"\\t\",n);-1==o&&(o=e.length);var l=o-n;if(o==e.length||i+l>=t)return n+Math.min(l,t-i);if(i+=o-n,n=o+1,(i+=r-i%r)>=t)return n}}var Y=[\"\"];function q(e){for(;Y.length<=e;)Y.push($(Y)+\" \");return Y[e]}function $(e){return e[e.length-1]}function Z(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function J(){}function Q(e,t){var r;return Object.create?r=Object.create(e):(J.prototype=e,r=new J),t&&I(t,r),r}var ee=/[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;function te(e){return/\\w/.test(e)||e>\"\"&&(e.toUpperCase()!=e.toLowerCase()||ee.test(e))}function re(e,t){return t?!!(t.source.indexOf(\"\\\\w\")>-1&&te(e))||t.test(e):te(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ie=/[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;function oe(e){return e.charCodeAt(0)>=768&&ie.test(e)}function le(e,t,r){for(;(r<0?t>0:t<e.length)&&oe(e.charAt(t));)t+=r;return t}function se(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var i=(t+r)/2,o=n<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:r;e(o)?r=o:t=o+n}}var ae=null;function ue(e,t,r){var n;ae=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&\"before\"==r?n=i:ae=i),o.from==t&&(o.from!=o.to&&\"before\"!=r?n=i:ae=i)}return null!=n?n:ae}var ce=function(){var e=\"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\",t=\"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";var r=/[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/,n=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,l=/[1n]/;function s(e,t,r){this.level=e,this.from=t,this.to=r}return function(a,u){var c=\"ltr\"==u?\"L\":\"R\";if(0==a.length||\"ltr\"==u&&!r.test(a))return!1;for(var f,d=a.length,h=[],p=0;p<d;++p)h.push((f=a.charCodeAt(p))<=247?e.charAt(f):1424<=f&&f<=1524?\"R\":1536<=f&&f<=1785?t.charAt(f-1536):1774<=f&&f<=2220?\"r\":8192<=f&&f<=8203?\"w\":8204==f?\"b\":\"L\");for(var g=0,m=c;g<d;++g){var v=h[g];\"m\"==v?h[g]=m:m=v}for(var y=0,b=c;y<d;++y){var w=h[y];\"1\"==w&&\"r\"==b?h[y]=\"n\":i.test(w)&&(b=w,\"r\"==w&&(h[y]=\"R\"))}for(var x=1,C=h[0];x<d-1;++x){var S=h[x];\"+\"==S&&\"1\"==C&&\"1\"==h[x+1]?h[x]=\"1\":\",\"!=S||C!=h[x+1]||\"1\"!=C&&\"n\"!=C||(h[x]=C),C=S}for(var k=0;k<d;++k){var M=h[k];if(\",\"==M)h[k]=\"N\";else if(\"%\"==M){var L=void 0;for(L=k+1;L<d&&\"%\"==h[L];++L);for(var T=k&&\"!\"==h[k-1]||L<d&&\"1\"==h[L]?\"1\":\"N\",N=k;N<L;++N)h[N]=T;k=L-1}}for(var O=0,A=c;O<d;++O){var D=h[O];\"L\"==A&&\"1\"==D?h[O]=\"L\":i.test(D)&&(A=D)}for(var W=0;W<d;++W)if(n.test(h[W])){var H=void 0;for(H=W+1;H<d&&n.test(h[H]);++H);for(var P=\"L\"==(W?h[W-1]:c),z=P==(\"L\"==(H<d?h[H]:c))?P?\"L\":\"R\":c,F=W;F<H;++F)h[F]=z;W=H-1}for(var E,I=[],R=0;R<d;)if(o.test(h[R])){var B=R;for(++R;R<d&&o.test(h[R]);++R);I.push(new s(0,B,R))}else{var G=R,U=I.length;for(++R;R<d&&\"L\"!=h[R];++R);for(var V=G;V<R;)if(l.test(h[V])){G<V&&I.splice(U,0,new s(1,G,V));var j=V;for(++V;V<R&&l.test(h[V]);++V);I.splice(U,0,new s(2,j,V)),G=V}else++V;G<R&&I.splice(U,0,new s(1,G,R))}return\"ltr\"==u&&(1==I[0].level&&(E=a.match(/^\\s+/))&&(I[0].from=E[0].length,I.unshift(new s(0,0,E[0].length))),1==$(I).level&&(E=a.match(/\\s+$/))&&($(I).to-=E[0].length,I.push(new s(0,d-E[0].length,d)))),\"rtl\"==u?I.reverse():I}}();function fe(e,t){var r=e.order;return null==r&&(r=e.order=ce(e.text,t)),r}var de=[],he=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent(\"on\"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||de).concat(r)}};function pe(e,t){return e._handlers&&e._handlers[t]||de}function ge(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent(\"on\"+t,r);else{var n=e._handlers,i=n&&n[t];if(i){var o=G(i,r);o>-1&&(n[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function me(e,t){var r=pe(e,t);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function ve(e,t,r){return\"string\"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),me(e,r||t.type,e,t),Se(t)||t.codemirrorIgnore}function ye(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==G(r,t[n])&&r.push(t[n])}function be(e,t){return pe(e,t).length>0}function we(e){e.prototype.on=function(e,t){he(this,e,t)},e.prototype.off=function(e,t){ge(this,e,t)}}function xe(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ce(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Se(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ke(e){xe(e),Ce(e)}function Me(e){return e.target||e.srcElement}function Le(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Te,Ne,Oe=function(){if(s&&a<9)return!1;var e=A(\"div\");return\"draggable\"in e||\"dragDrop\"in e}();function Ae(e){if(null==Te){var t=A(\"span\",\"\");O(e,A(\"span\",[t,document.createTextNode(\"x\")])),0!=e.firstChild.offsetHeight&&(Te=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var r=Te?A(\"span\",\"\"):A(\"span\",\"\",null,\"display: inline-block; width: 1px; margin-right: -1px\");return r.setAttribute(\"cm-text\",\"\"),r}function De(e){if(null!=Ne)return Ne;var t=O(e,document.createTextNode(\"AA\")),r=L(t,0,1).getBoundingClientRect(),n=L(t,1,2).getBoundingClientRect();return N(e),!(!r||r.left==r.right)&&(Ne=n.right-r.right<3)}var We,He=3!=\"\\n\\nb\".split(/\\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf(\"\\n\",t);-1==i&&(i=e.length);var o=e.slice(t,\"\\r\"==e.charAt(i-1)?i-1:i),l=o.indexOf(\"\\r\");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\\r\\n?|\\n/)},Pe=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(We){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(We){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints(\"StartToEnd\",t)},ze=\"oncopy\"in(We=A(\"div\"))||(We.setAttribute(\"oncopy\",\"return;\"),\"function\"==typeof We.oncopy),Fe=null,Ee={},Ie={};function Re(e){if(\"string\"==typeof e&&Ie.hasOwnProperty(e))e=Ie[e];else if(e&&\"string\"==typeof e.name&&Ie.hasOwnProperty(e.name)){var t=Ie[e.name];\"string\"==typeof t&&(t={name:t}),(e=Q(t,e)).name=t.name}else{if(\"string\"==typeof e&&/^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(e))return Re(\"application/xml\");if(\"string\"==typeof e&&/^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(e))return Re(\"application/json\")}return\"string\"==typeof e?{name:e}:e||{name:\"null\"}}function Be(e,t){t=Re(t);var r=Ee[t.name];if(!r)return Be(e,\"text/plain\");var n=r(e,t);if(Ge.hasOwnProperty(t.name)){var i=Ge[t.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n[\"_\"+o]=n[o]),n[o]=i[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var l in t.modeProps)n[l]=t.modeProps[l];return n}var Ge={};function Ue(e,t){I(t,Ge.hasOwnProperty(e)?Ge[e]:Ge[e]={})}function Ve(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function je(e,t){for(var r;e.innerMode&&(r=e.innerMode(t))&&r.mode!=e;)t=r.state,e=r.mode;return r||{mode:e,state:t}}function Ke(e,t,r){return!e.startState||e.startState(t,r)}var Xe=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};function _e(e,t){if((t-=e.first)<0||t>=e.size)throw new Error(\"There is no line \"+(t+e.first)+\" in the document.\");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function Ye(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function qe(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function $e(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function Ze(e){if(null==e.parent)return null;for(var t=e.parent,r=G(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function Je(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var l=0;l<e.lines.length;++l){var s=e.lines[l].height;if(t<s)break;t-=s}return r+l}function Qe(e,t){return t>=e.first&&t<e.first+e.size}function et(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function tt(e,t,r){if(void 0===r&&(r=null),!(this instanceof tt))return new tt(e,t,r);this.line=e,this.ch=t,this.sticky=r}function rt(e,t){return e.line-t.line||e.ch-t.ch}function nt(e,t){return e.sticky==t.sticky&&0==rt(e,t)}function it(e){return tt(e.line,e.ch)}function ot(e,t){return rt(e,t)<0?t:e}function lt(e,t){return rt(e,t)<0?e:t}function st(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function at(e,t){if(t.line<e.first)return tt(e.first,0);var r=e.first+e.size-1;return t.line>r?tt(r,_e(e,r).text.length):function(e,t){var r=e.ch;return null==r||r>t?tt(e.line,t):r<0?tt(e.line,0):e}(t,_e(e,t.line).text.length)}function ut(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=at(e,t[n]);return r}Xe.prototype.eol=function(){return this.pos>=this.string.length},Xe.prototype.sol=function(){return this.pos==this.lineStart},Xe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xe.prototype.eat=function(e){var t=this.string.charAt(this.pos);if(\"string\"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Xe.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Xe.prototype.eatSpace=function(){for(var e=this.pos;/[\\s\\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Xe.prototype.skipToEnd=function(){this.pos=this.string.length},Xe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Xe.prototype.backUp=function(e){this.pos-=e},Xe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Xe.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Xe.prototype.match=function(e,t,r){if(\"string\"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Xe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Xe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Xe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ct=function(e,t){this.state=e,this.lookAhead=t},ft=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function dt(e,t,r,n){var i=[e.state.modeGen],o={};xt(e,t.text,e.doc.mode,r,function(e,t){return i.push(e,t)},o,n);for(var l=r.state,s=function(n){r.baseTokens=i;var s=e.state.overlays[n],a=1,u=0;r.state=!0,xt(e,t.text,s.mode,r,function(e,t){for(var r=a;u<e;){var n=i[a];n>e&&i.splice(a,1,e,i[a+1],n),a+=2,u=Math.min(e,n)}if(t)if(s.opaque)i.splice(r,a-r,e,\"overlay \"+t),a=r+2;else for(;r<a;r+=2){var o=i[r+1];i[r+1]=(o?o+\" \":\"\")+\"overlay \"+t}},o),r.state=l,r.baseTokens=null,r.baseTokenPos=1},a=0;a<e.state.overlays.length;++a)s(a);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function ht(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=pt(e,Ze(t)),i=t.text.length>e.options.maxHighlightLength&&Ve(e.doc.mode,n.state),o=dt(e,t,n);i&&(n.state=i),t.stateAfter=n.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function pt(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return new ft(n,!0,t);var o=function(e,t,r){for(var n,i,o=e.doc,l=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>l;--s){if(s<=o.first)return o.first;var a=_e(o,s-1),u=a.stateAfter;if(u&&(!r||s+(u instanceof ct?u.lookAhead:0)<=o.modeFrontier))return s;var c=R(a.text,null,e.options.tabSize);(null==i||n>c)&&(i=s-1,n=c)}return i}(e,t,r),l=o>n.first&&_e(n,o-1).stateAfter,s=l?ft.fromSaved(n,l,o):new ft(n,Ke(n.mode),o);return n.iter(o,t,function(r){gt(e,r.text,s);var n=s.line;r.stateAfter=n==t-1||n%5==0||n>=i.viewFrom&&n<i.viewTo?s.save():null,s.nextLine()}),r&&(n.modeFrontier=s.line),s}function gt(e,t,r,n){var i=e.doc.mode,o=new Xe(t,e.options.tabSize,r);for(o.start=o.pos=n||0,\"\"==t&&mt(i,r.state);!o.eol();)vt(i,o,r.state),o.start=o.pos}function mt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=je(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function vt(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=je(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error(\"Mode \"+e.name+\" failed to advance stream.\")}ft.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ft.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,\"\"),size:this.baseTokens[this.baseTokenPos]-e}},ft.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ft.fromSaved=function(e,t,r){return t instanceof ct?new ft(e,Ve(e.mode,t.state),r,t.lookAhead):new ft(e,Ve(e.mode,t),r)},ft.prototype.save=function(e){var t=!1!==e?Ve(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ct(t,this.maxLookAhead):t};var yt=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function bt(e,t,r,n){var i,o,l=e.doc,s=l.mode,a=_e(l,(t=at(l,t)).line),u=pt(e,t.line,r),c=new Xe(a.text,e.options.tabSize,u);for(n&&(o=[]);(n||c.pos<t.ch)&&!c.eol();)c.start=c.pos,i=vt(s,c,u.state),n&&o.push(new yt(c,i,Ve(l.mode,u.state)));return n?o:new yt(c,i,u.state)}function wt(e,t){if(e)for(;;){var r=e.match(/(?:^|\\s+)line-(background-)?(\\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?\"bgClass\":\"textClass\";null==t[n]?t[n]=r[2]:new RegExp(\"(?:^|s)\"+r[2]+\"(?:$|s)\").test(t[n])||(t[n]+=\" \"+r[2])}return e}function xt(e,t,r,n,i,o,l){var s=r.flattenSpans;null==s&&(s=e.options.flattenSpans);var a,u=0,c=null,f=new Xe(t,e.options.tabSize,n),d=e.options.addModeClass&&[null];for(\"\"==t&&wt(mt(r,n.state),o);!f.eol();){if(f.pos>e.options.maxHighlightLength?(s=!1,l&&gt(e,t,n,f.pos),f.pos=t.length,a=null):a=wt(vt(r,f,n.state,d),o),d){var h=d[0].name;h&&(a=\"m-\"+(a?h+\" \"+a:h))}if(!s||c!=a){for(;u<f.start;)i(u=Math.min(f.start,u+5e3),c);c=a}f.start=f.pos}for(;u<f.pos;){var p=Math.min(f.pos,u+5e3);i(p,c),u=p}}var Ct=!1,St=!1;function kt(e,t,r){this.marker=e,this.from=t,this.to=r}function Mt(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function Lt(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Tt(e,t){if(t.full)return null;var r=Qe(e,t.from.line)&&_e(e,t.from.line).markedSpans,n=Qe(e,t.to.line)&&_e(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=0==rt(t.from,t.to),s=function(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&\"bookmark\"==l.type&&(!r||!o.marker.insertLeft)){var s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new kt(l,o.from,s?null:o.to))}}return n}(r,i,l),a=function(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.to||(l.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&\"bookmark\"==l.type&&(!r||o.marker.insertLeft)){var s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new kt(l,s?null:o.from-t,null==o.to?null:o.to-t))}}return n}(n,o,l),u=1==t.text.length,c=$(t.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){var d=s[f];if(null==d.to){var h=Mt(a,d.marker);h?u&&(d.to=null==h.to?null:h.to+c):d.to=i}}if(a)for(var p=0;p<a.length;++p){var g=a[p];if(null!=g.to&&(g.to+=c),null==g.from)Mt(s,g.marker)||(g.from=c,u&&(s||(s=[])).push(g));else g.from+=c,u&&(s||(s=[])).push(g)}s&&(s=Nt(s)),a&&a!=s&&(a=Nt(a));var m=[s];if(!u){var v,y=t.text.length-2;if(y>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(v||(v=[])).push(new kt(s[b].marker,null,null));for(var w=0;w<y;++w)m.push(v);m.push(a)}return m}function Nt(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ot(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function At(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Dt(e){return e.inclusiveLeft?-1:0}function Wt(e){return e.inclusiveRight?1:0}function Ht(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=rt(n.from,i.from)||Dt(e)-Dt(t);if(o)return-o;var l=rt(n.to,i.to)||Wt(e)-Wt(t);return l||t.id-e.id}function Pt(e,t){var r,n=St&&e.markedSpans;if(n)for(var i=void 0,o=0;o<n.length;++o)(i=n[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||Ht(r,i.marker)<0)&&(r=i.marker);return r}function zt(e){return Pt(e,!0)}function Ft(e){return Pt(e,!1)}function Et(e,t){var r,n=St&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!r||Ht(r,o.marker)<0)&&(r=o.marker)}return r}function It(e,t,r,n,i){var o=_e(e,t),l=St&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var a=l[s];if(a.marker.collapsed){var u=a.marker.find(0),c=rt(u.from,r)||Dt(a.marker)-Dt(i),f=rt(u.to,n)||Wt(a.marker)-Wt(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?rt(u.to,r)>=0:rt(u.to,r)>0)||c>=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?rt(u.from,n)<=0:rt(u.from,n)<0)))return!0}}}function Rt(e){for(var t;t=zt(e);)e=t.find(-1,!0).line;return e}function Bt(e,t){var r=_e(e,t),n=Rt(r);return r==n?t:Ze(n)}function Gt(e,t){if(t>e.lastLine())return t;var r,n=_e(e,t);if(!Ut(e,n))return t;for(;r=Ft(n);)n=r.find(1,!0).line;return Ze(n)+1}function Ut(e,t){var r=St&&t.markedSpans;if(r)for(var n=void 0,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Vt(e,t,n))return!0}}function Vt(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return Vt(e,n.line,Mt(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&Vt(e,t,i))return!0}function jt(e){for(var t=0,r=(e=Rt(e)).parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;o=(r=o).parent)for(var l=0;l<o.children.length;++l){var s=o.children[l];if(s==r)break;t+=s.height}return t}function Kt(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=zt(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=Ft(n);){var o=t.find(0,!0);r-=n.text.length-o.from.ch,r+=(n=o.to.line).text.length-o.to.ch}return r}function Xt(e){var t=e.display,r=e.doc;t.maxLine=_e(r,r.first),t.maxLineLength=Kt(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=Kt(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}var _t=function(e,t,r){this.text=e,At(this,t),this.height=r?r(this):1};function Yt(e){e.parent=null,Ot(e)}_t.prototype.lineNo=function(){return Ze(this)},we(_t);var qt={},$t={};function Zt(e,t){if(!e||/^\\s*$/.test(e))return null;var r=t.addModeClass?$t:qt;return r[e]||(r[e]=e.replace(/\\S+/g,\"cm-$&\"))}function Jt(e,t){var r=D(\"span\",null,null,u?\"padding-right: .1px\":null),n={pre:D(\"pre\",[r],\"CodeMirror-line\"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption(\"lineWrapping\")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,l=void 0;n.pos=0,n.addToken=er,De(e.display.measure)&&(l=fe(o,e.doc.direction))&&(n.addToken=tr(n.addToken,l)),n.map=[],nr(o,n,ht(e,o,t!=e.display.externalMeasured&&Ze(o))),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=z(o.styleClasses.bgClass,n.bgClass||\"\")),o.styleClasses.textClass&&(n.textClass=z(o.styleClasses.textClass,n.textClass||\"\"))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Ae(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(u){var s=n.content.lastChild;(/\\bcm-tab\\b/.test(s.className)||s.querySelector&&s.querySelector(\".cm-tab\"))&&(n.content.className=\"cm-tab-wrap-hack\")}return me(e,\"renderLine\",e,t.line,n.pre),n.pre.className&&(n.textClass=z(n.pre.className,n.textClass||\"\")),n}function Qt(e){var t=A(\"span\",\"\",\"cm-invalidchar\");return t.title=\"\\\\u\"+e.charCodeAt(0).toString(16),t.setAttribute(\"aria-label\",t.title),t}function er(e,t,r,n,i,o,l){if(t){var u,c=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n=\"\",i=0;i<e.length;i++){var o=e.charAt(i);\" \"!=o||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=\"\"),n+=o,r=\" \"==o}return n}(t,e.trailingSpace):t,f=e.cm.state.specialChars,d=!1;if(f.test(t)){u=document.createDocumentFragment();for(var h=0;;){f.lastIndex=h;var p=f.exec(t),g=p?p.index-h:t.length-h;if(g){var m=document.createTextNode(c.slice(h,h+g));s&&a<9?u.appendChild(A(\"span\",[m])):u.appendChild(m),e.map.push(e.pos,e.pos+g,m),e.col+=g,e.pos+=g}if(!p)break;h+=g+1;var v=void 0;if(\"\\t\"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=u.appendChild(A(\"span\",q(b),\"cm-tab\"))).setAttribute(\"role\",\"presentation\"),v.setAttribute(\"cm-text\",\"\\t\"),e.col+=b}else\"\\r\"==p[0]||\"\\n\"==p[0]?((v=u.appendChild(A(\"span\",\"\\r\"==p[0]?\"\":\"\",\"cm-invalidchar\"))).setAttribute(\"cm-text\",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute(\"cm-text\",p[0]),s&&a<9?u.appendChild(A(\"span\",[v])):u.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,u=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,u),s&&a<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),r||n||i||d||o){var w=r||\"\";n&&(w+=n),i&&(w+=i);var x=A(\"span\",[u],w,o);if(l)for(var C in l)l.hasOwnProperty(C)&&\"style\"!=C&&\"class\"!=C&&x.setAttribute(C,l[C]);return e.content.appendChild(x)}e.content.appendChild(u)}}function tr(e,t){return function(r,n,i,o,l,s,a){i=i?i+\" cm-force-border\":\"cm-force-border\";for(var u=r.pos,c=u+n.length;;){for(var f=void 0,d=0;d<t.length&&!((f=t[d]).to>u&&f.from<=u);d++);if(f.to>=c)return e(r,n,i,o,l,s,a);e(r,n.slice(0,f.to-u),i,o,null,s,a),o=null,n=n.slice(f.to-u),u=f.to}}}function rr(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement(\"span\"))),i.setAttribute(\"cm-marker\",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function nr(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var l,s,a,u,c,f,d,h=i.length,p=0,g=1,m=\"\",v=0;;){if(v==p){a=u=c=s=\"\",d=null,f=null,v=1/0;for(var y=[],b=void 0,w=0;w<n.length;++w){var x=n[w],C=x.marker;if(\"bookmark\"==C.type&&x.from==p&&C.widgetNode)y.push(C);else if(x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)){if(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,u=\"\"),C.className&&(a+=\" \"+C.className),C.css&&(s=(s?s+\";\":\"\")+C.css),C.startStyle&&x.from==p&&(c+=\" \"+C.startStyle),C.endStyle&&x.to==v&&(b||(b=[])).push(C.endStyle,x.to),C.title&&((d||(d={})).title=C.title),C.attributes)for(var S in C.attributes)(d||(d={}))[S]=C.attributes[S];C.collapsed&&(!f||Ht(f.marker,C)<0)&&(f=x)}else x.from>p&&v>x.from&&(v=x.from)}if(b)for(var k=0;k<b.length;k+=2)b[k+1]==v&&(u+=\" \"+b[k]);if(!f||f.from==p)for(var M=0;M<y.length;++M)rr(t,0,y[M]);if(f&&(f.from||0)==p){if(rr(t,(null==f.to?h+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=h)break;for(var L=Math.min(h,v);;){if(m){var T=p+m.length;if(!f){var N=T>L?m.slice(0,L-p):m;t.addToken(t,N,l?l+a:a,c,p+N.length==v?u:\"\",s,d)}if(T>=L){m=m.slice(L-p),p=L;break}p=T,c=\"\"}m=i.slice(o,o=r[g++]),l=Zt(r[g++],t.cm.options)}}else for(var O=1;O<r.length;O+=2)t.addToken(t,i.slice(o,o=r[O]),Zt(r[O+1],t.cm.options))}function ir(e,t,r){this.line=t,this.rest=function(e){for(var t,r;t=Ft(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}(t),this.size=this.rest?Ze($(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Ut(e,t)}function or(e,t,r){for(var n,i=[],o=t;o<r;o=n){var l=new ir(e.doc,_e(e.doc,o),o);n=o+l.size,i.push(l)}return i}var lr=null,sr=null;function ar(e,t){var r=pe(e,t);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);lr?n=lr.delayedCallbacks:sr?n=sr:(n=sr=[],setTimeout(ur,0));for(var o=function(e){n.push(function(){return r[e].apply(null,i)})},l=0;l<r.length;++l)o(l)}}function ur(){var e=sr;sr=null;for(var t=0;t<e.length;++t)e[t]()}function cr(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];\"text\"==o?hr(e,t):\"gutter\"==o?gr(e,t,r,n):\"class\"==o?pr(e,t):\"widget\"==o&&mr(e,t,n)}t.changes=null}function fr(e){return e.node==e.text&&(e.node=A(\"div\",null,null,\"position: relative\"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function dr(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):Jt(e,t)}function hr(e,t){var r=t.text.className,n=dr(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,pr(e,t)):r&&(t.text.className=r)}function pr(e,t){!function(e,t){var r=t.bgClass?t.bgClass+\" \"+(t.line.bgClass||\"\"):t.line.bgClass;if(r&&(r+=\" CodeMirror-linebackground\"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var n=fr(t);t.background=n.insertBefore(A(\"div\",null,r),n.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?fr(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=\"\");var r=t.textClass?t.textClass+\" \"+(t.line.textClass||\"\"):t.line.textClass;t.text.className=r||\"\"}function gr(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=fr(t);t.gutterBackground=A(\"div\",null,\"CodeMirror-gutter-background \"+t.line.gutterClass,\"left: \"+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+\"px; width: \"+n.gutterTotalWidth+\"px\"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var l=fr(t),s=t.gutter=A(\"div\",null,\"CodeMirror-gutter-wrapper\",\"left: \"+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+\"px\");if(e.display.input.setUneditable(s),l.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=\" \"+t.line.gutterClass),!e.options.lineNumbers||o&&o[\"CodeMirror-linenumbers\"]||(t.lineNumber=s.appendChild(A(\"div\",et(e.options,r),\"CodeMirror-linenumber CodeMirror-gutter-elt\",\"left: \"+n.gutterLeft[\"CodeMirror-linenumbers\"]+\"px; width: \"+e.display.lineNumInnerWidth+\"px\"))),o)for(var a=0;a<e.display.gutterSpecs.length;++a){var u=e.display.gutterSpecs[a].className,c=o.hasOwnProperty(u)&&o[u];c&&s.appendChild(A(\"div\",[c],\"CodeMirror-gutter-elt\",\"left: \"+n.gutterLeft[u]+\"px; width: \"+n.gutterWidth[u]+\"px\"))}}}function mr(e,t,r){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild,i=void 0;n;n=i)i=n.nextSibling,\"CodeMirror-linewidget\"==n.className&&t.node.removeChild(n);yr(e,t,r)}function vr(e,t,r,n){var i=dr(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),pr(e,t),gr(e,t,r,n),yr(e,t,n),t.node}function yr(e,t,r){if(br(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)br(e,t.rest[n],t,r,!1)}function br(e,t,r,n,i){if(t.widgets)for(var o=fr(r),l=0,s=t.widgets;l<s.length;++l){var a=s[l],u=A(\"div\",[a.node],\"CodeMirror-linewidget\");a.handleMouseEvents||u.setAttribute(\"cm-ignore-events\",\"true\"),wr(a,u,r,n),e.display.input.setUneditable(u),i&&a.above?o.insertBefore(u,r.gutter||r.text):o.appendChild(u),ar(a,\"redraw\")}}function wr(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+\"px\",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+\"px\"),t.style.width=i+\"px\"}e.coverGutter&&(t.style.zIndex=5,t.style.position=\"relative\",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+\"px\"))}function xr(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!W(document.body,e.node)){var r=\"position: relative;\";e.coverGutter&&(r+=\"margin-left: -\"+t.display.gutters.offsetWidth+\"px;\"),e.noHScroll&&(r+=\"width: \"+t.display.wrapper.clientWidth+\"px;\"),O(t.display.measure,A(\"div\",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function Cr(e,t){for(var r=Me(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&\"true\"==r.getAttribute(\"cm-ignore-events\")||r.parentNode==e.sizer&&r!=e.mover)return!0}function Sr(e){return e.lineSpace.offsetTop}function kr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Mr(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=O(e.measure,A(\"pre\",\"x\",\"CodeMirror-line-like\")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Lr(e){return U-e.display.nativeBarWidth}function Tr(e){return e.display.scroller.clientWidth-Lr(e)-e.display.barWidth}function Nr(e){return e.display.scroller.clientHeight-Lr(e)-e.display.barHeight}function Or(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(Ze(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Ar(e,t,r,n){return Hr(e,Wr(e,t),r,n)}function Dr(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[un(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function Wr(e,t){var r=Ze(t),n=Dr(e,r);n&&!n.text?n=null:n&&n.changes&&(cr(e,n,r,nn(e)),e.curOp.forceUpdate=!0),n||(n=function(e,t){var r=Ze(t=Rt(t)),n=e.display.externalMeasured=new ir(e.doc,t,r);n.lineN=r;var i=n.built=Jt(e,n);return n.text=i.pre,O(e.display.lineMeasure,i.pre),n}(e,t));var i=Or(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Hr(e,t,r,n,i){t.before&&(r=-1);var o,l=r+(n||\"\");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,r){var n=e.options.lineWrapping,i=n&&Tr(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var a=l[s],u=l[s+1];Math.abs(a.bottom-u.bottom)>2&&o.push((a.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,r,n){var i,o=Fr(t.map,r,n),l=o.node,u=o.start,c=o.end,f=o.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;u&&oe(t.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&oe(t.line.text.charAt(o.coverStart+c));)++c;if((i=s&&a<9&&0==u&&c==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Er(L(l,u,c).getClientRects(),n)).left||i.right||0==u)break;c=u,u-=1,f=\"right\"}s&&a<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Fe)return Fe;var t=O(e,A(\"span\",\"x\")),r=t.getBoundingClientRect(),n=L(t,0,1).getBoundingClientRect();return Fe=Math.abs(r.left-n.left)>1}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}(e.display.measure,i))}else{var h;u>0&&(f=n=\"right\"),i=e.options.lineWrapping&&(h=l.getClientRects()).length>1?h[\"right\"==n?h.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!u&&(!i||!i.left&&!i.right)){var p=l.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+rn(e.display),top:p.top,bottom:p.bottom}:zr}for(var g=i.top-t.rect.top,m=i.bottom-t.rect.top,v=(g+m)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var w=b?y[b-1]:0,x=y[b],C={left:(\"right\"==f?i.right:i.left)-t.rect.left,right:(\"left\"==f?i.left:i.right)-t.rect.left,top:w,bottom:x};i.left||i.right||(C.bogus=!0);e.options.singleCursorHeightPerLine||(C.rtop=g,C.rbottom=m);return C}(e,t,r,n)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Pr,zr={left:0,right:0,top:0,bottom:0};function Fr(e,t,r){for(var n,i,o,l,s,a,u=0;u<e.length;u+=3)if(s=e[u],a=e[u+1],t<s?(i=0,o=1,l=\"left\"):t<a?o=(i=t-s)+1:(u==e.length-3||t==a&&e[u+3]>t)&&(i=(o=a-s)-1,t>=a&&(l=\"right\")),null!=i){if(n=e[u+2],s==a&&r==(n.insertLeft?\"left\":\"right\")&&(l=r),\"left\"==r&&0==i)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)n=e[2+(u-=3)],l=\"left\";if(\"right\"==r&&i==a-s)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)n=e[(u+=3)+2],l=\"right\";break}return{node:n,start:i,end:o,collapse:l,coverStart:s,coverEnd:a}}function Er(e,t){var r=zr;if(\"left\"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var i=e.length-1;i>=0&&(r=e[i]).left==r.right;i--);return r}function Ir(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Rr(e){e.display.externalMeasure=null,N(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ir(e.display.view[t])}function Br(e){Rr(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Gr(){return f&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ur(){return f&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Vr(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=xr(e.widgets[r]));return t}function jr(e,t,r,n,i){if(!i){var o=Vr(t);r.top+=o,r.bottom+=o}if(\"line\"==n)return r;n||(n=\"local\");var l=jt(t);if(\"local\"==n?l+=Sr(e.display):l-=e.display.viewOffset,\"page\"==n||\"window\"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+(\"window\"==n?0:Ur());var a=s.left+(\"window\"==n?0:Gr());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function Kr(e,t,r){if(\"div\"==r)return t;var n=t.left,i=t.top;if(\"page\"==r)n-=Gr(),i-=Ur();else if(\"local\"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function Xr(e,t,r,n,i){return n||(n=_e(e.doc,t.line)),jr(e,n,Ar(e,n,t.ch,i),r)}function _r(e,t,r,n,i,o){function l(t,l){var s=Hr(e,i,t,l?\"right\":\"left\",o);return l?s.left=s.right:s.right=s.left,jr(e,n,s,r)}n=n||_e(e.doc,t.line),i||(i=Wr(e,n));var s=fe(n,e.doc.direction),a=t.ch,u=t.sticky;if(a>=n.text.length?(a=n.text.length,u=\"before\"):a<=0&&(a=0,u=\"after\"),!s)return l(\"before\"==u?a-1:a,\"before\"==u);function c(e,t,r){return l(r?e-1:e,1==s[t].level!=r)}var f=ue(s,a,u),d=ae,h=c(a,f,\"before\"==u);return null!=d&&(h.other=c(a,d,\"before\"!=u)),h}function Yr(e,t){var r=0;t=at(e.doc,t),e.options.lineWrapping||(r=rn(e.display)*t.ch);var n=_e(e.doc,t.line),i=jt(n)+Sr(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function qr(e,t,r,n,i){var o=tt(e,t,r);return o.xRel=i,n&&(o.outside=n),o}function $r(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return qr(n.first,0,null,-1,-1);var i=Je(n,r),o=n.first+n.size-1;if(i>o)return qr(n.first+n.size-1,_e(n,o).text.length,null,1,1);t<0&&(t=0);for(var l=_e(n,i);;){var s=en(e,l,i,t,r),a=Et(l,s.ch+(s.xRel>0||s.outside>0?1:0));if(!a)return s;var u=a.find(1);if(u.line==i)return u;l=_e(n,i=u.line)}}function Zr(e,t,r,n){n-=Vr(t);var i=t.text.length,o=se(function(t){return Hr(e,r,t-1).bottom<=n},i,0);return{begin:o,end:i=se(function(t){return Hr(e,r,t).top>n},o,i)}}function Jr(e,t,r,n){return r||(r=Wr(e,t)),Zr(e,t,r,jr(e,t,Hr(e,r,n),\"line\").top)}function Qr(e,t,r,n){return!(e.bottom<=r)&&(e.top>r||(n?e.left:e.right)>t)}function en(e,t,r,n,i){i-=jt(t);var o=Wr(e,t),l=Vr(t),s=0,a=t.text.length,u=!0,c=fe(t,e.doc.direction);if(c){var f=(e.options.lineWrapping?function(e,t,r,n,i,o,l){var s=Zr(e,t,n,l),a=s.begin,u=s.end;/\\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,f=null,d=0;d<i.length;d++){var h=i[d];if(!(h.from>=u||h.to<=a)){var p=1!=h.level,g=Hr(e,n,p?Math.min(u,h.to)-1:Math.max(a,h.from)).right,m=g<o?o-g+1e9:g-o;(!c||f>m)&&(c=h,f=m)}}c||(c=i[i.length-1]);c.from<a&&(c={from:a,to:c.to,level:c.level});c.to>u&&(c={from:c.from,to:u,level:c.level});return c}:function(e,t,r,n,i,o,l){var s=se(function(s){var a=i[s],u=1!=a.level;return Qr(_r(e,tt(r,u?a.to:a.from,u?\"before\":\"after\"),\"line\",t,n),o,l,!0)},0,i.length-1),a=i[s];if(s>0){var u=1!=a.level,c=_r(e,tt(r,u?a.from:a.to,u?\"after\":\"before\"),\"line\",t,n);Qr(c,o,l,!0)&&c.top>l&&(a=i[s-1])}return a})(e,t,r,o,c,n,i);s=(u=1!=f.level)?f.from:f.to-1,a=u?f.to:f.from-1}var d,h,p=null,g=null,m=se(function(t){var r=Hr(e,o,t);return r.top+=l,r.bottom+=l,!!Qr(r,n,i,!1)&&(r.top<=i&&r.left<=n&&(p=t,g=r),!0)},s,a),v=!1;if(g){var y=n-g.left<g.right-n,b=y==u;m=p+(b?0:1),h=b?\"after\":\"before\",d=y?g.left:g.right}else{u||m!=a&&m!=s||m++,h=0==m?\"after\":m==t.text.length?\"before\":Hr(e,o,m-(u?1:0)).bottom+l<=i==u?\"after\":\"before\";var w=_r(e,tt(r,m,h),\"line\",t,o);d=w.left,v=i<w.top?-1:i>=w.bottom?1:0}return qr(r,m=le(t.text,m,1),h,v,n-d)}function tn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Pr){Pr=A(\"pre\",null,\"CodeMirror-line-like\");for(var t=0;t<49;++t)Pr.appendChild(document.createTextNode(\"x\")),Pr.appendChild(A(\"br\"));Pr.appendChild(document.createTextNode(\"x\"))}O(e.measure,Pr);var r=Pr.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),N(e.measure),r||1}function rn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=A(\"span\",\"xxxxxxxxxx\"),r=A(\"pre\",[t],\"CodeMirror-line-like\");O(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function nn(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l){var s=e.display.gutterSpecs[l].className;r[s]=o.offsetLeft+o.clientLeft+i,n[s]=o.clientWidth}return{fixedPos:on(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function on(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ln(e){var t=tn(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/rn(e.display)-3);return function(i){if(Ut(e.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function sn(e){var t=e.doc,r=ln(e);t.iter(function(e){var t=r(e);t!=e.height&&$e(e,t)})}function an(e,t,r,n){var i=e.display;if(!r&&\"true\"==Me(t).getAttribute(\"cm-not-content\"))return null;var o,l,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,l=t.clientY-s.top}catch(t){return null}var a,u=$r(e,o,l);if(n&&1==u.xRel&&(a=_e(e.doc,u.line).text).length==u.ch){var c=R(a,a.length,e.options.tabSize)-a.length;u=tt(u.line,Math.max(0,Math.round((o-Mr(e.display).left)/rn(e.display))-c))}return u}function un(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function cn(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)St&&Bt(e.doc,t)<i.viewTo&&dn(e);else if(r<=i.viewFrom)St&&Gt(e.doc,r+n)>i.viewFrom?dn(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)dn(e);else if(t<=i.viewFrom){var o=hn(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):dn(e)}else if(r>=i.viewTo){var l=hn(e,t,t,-1);l?(i.view=i.view.slice(0,l.index),i.viewTo=l.lineN):dn(e)}else{var s=hn(e,t,t,-1),a=hn(e,r,r+n,1);s&&a?(i.view=i.view.slice(0,s.index).concat(or(e,s.lineN,a.lineN)).concat(i.view.slice(a.index)),i.viewTo+=n):dn(e)}var u=i.externalMeasured;u&&(r<u.lineN?u.lineN+=n:t<u.lineN+u.size&&(i.externalMeasured=null))}function fn(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[un(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);-1==G(l,r)&&l.push(r)}}}function dn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function hn(e,t,r,n){var i,o=un(e,t),l=e.display.view;if(!St||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=e.display.viewFrom,a=0;a<o;a++)s+=l[a].size;if(s!=t){if(n>0){if(o==l.length-1)return null;i=s+l[o].size-t,o++}else i=s-t;t+=i,r+=i}for(;Bt(e.doc,r)!=r;){if(o==(n<0?0:l.length-1))return null;r+=n*l[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function pn(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function gn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function mn(e,t){void 0===t&&(t=!0);for(var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++)if(t||l!=r.sel.primIndex){var s=r.sel.ranges[l];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var a=s.empty();(a||e.options.showCursorWhenSelecting)&&vn(e,s.head,i),a||bn(e,s,o)}}return n}function vn(e,t,r){var n=_r(e,t,\"div\",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(A(\"div\",\"\",\"CodeMirror-cursor\"));if(i.style.left=n.left+\"px\",i.style.top=n.top+\"px\",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+\"px\",n.other){var o=r.appendChild(A(\"div\",\"\",\"CodeMirror-cursor CodeMirror-secondarycursor\"));o.style.display=\"\",o.style.left=n.other.left+\"px\",o.style.top=n.other.top+\"px\",o.style.height=.85*(n.other.bottom-n.other.top)+\"px\"}}function yn(e,t){return e.top-t.top||e.left-t.left}function bn(e,t,r){var n=e.display,i=e.doc,o=document.createDocumentFragment(),l=Mr(e.display),s=l.left,a=Math.max(n.sizerWidth,Tr(e)-n.sizer.offsetLeft)-l.right,u=\"ltr\"==i.direction;function c(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),o.appendChild(A(\"div\",null,\"CodeMirror-selected\",\"position: absolute; left: \"+e+\"px;\\n                             top: \"+t+\"px; width: \"+(null==r?a-e:r)+\"px;\\n                             height: \"+(n-t)+\"px\"))}function f(t,r,n){var o,l,f=_e(i,t),d=f.text.length;function h(r,n){return Xr(e,tt(t,r),\"div\",f,n)}function p(t,r,n){var i=Jr(e,f,null,t),o=\"ltr\"==r==(\"after\"==n)?\"left\":\"right\";return h(\"after\"==n?i.begin:i.end-(/\\s/.test(f.text.charAt(i.end-1))?2:1),o)[o]}var g=fe(f,i.direction);return function(e,t,r,n){if(!e)return n(t,r,\"ltr\",0);for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>t||t==r&&l.to==t)&&(n(Math.max(l.from,t),Math.min(l.to,r),1==l.level?\"rtl\":\"ltr\",o),i=!0)}i||n(t,r,\"ltr\")}(g,r||0,null==n?d:n,function(e,t,i,f){var m=\"ltr\"==i,v=h(e,m?\"left\":\"right\"),y=h(t-1,m?\"right\":\"left\"),b=null==r&&0==e,w=null==n&&t==d,x=0==f,C=!g||f==g.length-1;if(y.top-v.top<=3){var S=(u?w:b)&&C,k=(u?b:w)&&x?s:(m?v:y).left,M=S?a:(m?y:v).right;c(k,v.top,M-k,v.bottom)}else{var L,T,N,O;m?(L=u&&b&&x?s:v.left,T=u?a:p(e,i,\"before\"),N=u?s:p(t,i,\"after\"),O=u&&w&&C?a:y.right):(L=u?p(e,i,\"before\"):s,T=!u&&b&&x?a:v.right,N=!u&&w&&C?s:y.left,O=u?p(t,i,\"after\"):a),c(L,v.top,T-L,v.bottom),v.bottom<y.top&&c(s,v.bottom,null,y.top),c(N,y.top,O-N,y.bottom)}(!o||yn(v,o)<0)&&(o=v),yn(y,o)<0&&(o=y),(!l||yn(v,l)<0)&&(l=v),yn(y,l)<0&&(l=y)}),{start:o,end:l}}var d=t.from(),h=t.to();if(d.line==h.line)f(d.line,d.ch,h.ch);else{var p=_e(i,d.line),g=_e(i,h.line),m=Rt(p)==Rt(g),v=f(d.line,d.ch,m?p.text.length+1:null).end,y=f(h.line,m?0:null,h.ch).start;m&&(v.top<y.top-2?(c(v.right,v.top,null,v.bottom),c(s,y.top,y.left,y.bottom)):c(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&c(s,v.bottom,null,y.top)}r.appendChild(o)}function wn(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility=\"\",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(r=!r)?\"\":\"hidden\"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility=\"hidden\")}}function xn(e){e.state.focused||(e.display.input.focus(),Sn(e))}function Cn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,kn(e))},100)}function Sn(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),\"nocursor\"!=e.options.readOnly&&(e.state.focused||(me(e,\"focus\",e,t),e.state.focused=!0,P(e.display.wrapper,\"CodeMirror-focused\"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),u&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),wn(e))}function kn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(me(e,\"blur\",e,t),e.state.focused=!1,T(e.display.wrapper,\"CodeMirror-focused\")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Mn(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i=t.view[n],o=e.options.lineWrapping,l=void 0,u=0;if(!i.hidden){if(s&&a<8){var c=i.node.offsetTop+i.node.offsetHeight;l=c-r,r=c}else{var f=i.node.getBoundingClientRect();l=f.bottom-f.top,!o&&i.text.firstChild&&(u=i.text.firstChild.getBoundingClientRect().right-f.left-1)}var d=i.line.height-l;if((d>.005||d<-.005)&&($e(i.line,l),Ln(i.line),i.rest))for(var h=0;h<i.rest.length;h++)Ln(i.rest[h]);if(u>e.display.sizerWidth){var p=Math.ceil(u/rn(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=i.line,e.display.maxLineChanged=!0)}}}}function Ln(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function Tn(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Sr(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=Je(t,n),l=Je(t,i);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;s<o?(o=s,l=Je(t,jt(_e(t,s))+e.wrapper.clientHeight)):Math.min(a,t.lastLine())>=l&&(o=Je(t,jt(_e(t,a))-e.wrapper.clientHeight),l=a)}return{from:o,to:Math.max(l,o+1)}}function Nn(e,t){var r=e.display,n=tn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,o=Nr(e),l={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+kr(r),a=t.top<n,u=t.bottom>s-n;if(t.top<i)l.scrollTop=a?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(u?s:t.bottom)-o);c!=i&&(l.scrollTop=c)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft,d=Tr(e)-(e.options.fixedGutter?r.gutters.offsetWidth:0),h=t.right-t.left>d;return h&&(t.right=t.left+d),t.left<10?l.scrollLeft=0:t.left<f?l.scrollLeft=Math.max(0,t.left-(h?0:10)):t.right>d+f-3&&(l.scrollLeft=t.right+(h?0:10)-d),l}function On(e,t){null!=t&&(Wn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function An(e){Wn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Dn(e,t,r){null==t&&null==r||Wn(e),null!=t&&(e.curOp.scrollLeft=t),null!=r&&(e.curOp.scrollTop=r)}function Wn(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Hn(e,Yr(e,t.from),Yr(e,t.to),t.margin))}function Hn(e,t,r,n){var i=Nn(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});Dn(e,i.scrollLeft,i.scrollTop)}function Pn(e,t){Math.abs(e.doc.scrollTop-t)<2||(r||li(e,{top:t}),zn(e,t,!0),r&&li(e),ti(e,100))}function zn(e,t,r){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Fn(e,t,r,n){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,ui(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function En(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+kr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Lr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var In=function(e,t,r){this.cm=r;var n=this.vert=A(\"div\",[A(\"div\",null,null,\"min-width: 1px\")],\"CodeMirror-vscrollbar\"),i=this.horiz=A(\"div\",[A(\"div\",null,null,\"height: 100%; min-height: 1px\")],\"CodeMirror-hscrollbar\");n.tabIndex=i.tabIndex=-1,e(n),e(i),he(n,\"scroll\",function(){n.clientHeight&&t(n.scrollTop,\"vertical\")}),he(i,\"scroll\",function(){i.clientWidth&&t(i.scrollLeft,\"horizontal\")}),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth=\"18px\")};In.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display=\"block\",this.vert.style.bottom=t?n+\"px\":\"0\";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+\"px\"}else this.vert.style.display=\"\",this.vert.firstChild.style.height=\"0\";if(t){this.horiz.style.display=\"block\",this.horiz.style.right=r?n+\"px\":\"0\",this.horiz.style.left=e.barLeft+\"px\";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+\"px\"}else this.horiz.style.display=\"\",this.horiz.firstChild.style.width=\"0\";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},In.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,\"horiz\")},In.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,\"vert\")},In.prototype.zeroWidthHack=function(){var e=b&&!p?\"12px\":\"18px\";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents=\"none\",this.disableHoriz=new B,this.disableVert=new B},In.prototype.enableZeroWidthBar=function(e,t,r){e.style.pointerEvents=\"auto\",t.set(1e3,function n(){var i=e.getBoundingClientRect();(\"vert\"==r?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents=\"none\":t.set(1e3,n)})},In.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Rn=function(){};function Bn(e,t){t||(t=En(e));var r=e.display.barWidth,n=e.display.barHeight;Gn(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&Mn(e),Gn(e,En(e)),r=e.display.barWidth,n=e.display.barHeight}function Gn(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+\"px\",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+\"px\",r.heightForcer.style.borderBottom=n.bottom+\"px solid transparent\",n.right&&n.bottom?(r.scrollbarFiller.style.display=\"block\",r.scrollbarFiller.style.height=n.bottom+\"px\",r.scrollbarFiller.style.width=n.right+\"px\"):r.scrollbarFiller.style.display=\"\",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display=\"block\",r.gutterFiller.style.height=n.bottom+\"px\",r.gutterFiller.style.width=t.gutterWidth+\"px\"):r.gutterFiller.style.display=\"\"}Rn.prototype.update=function(){return{bottom:0,right:0}},Rn.prototype.setScrollLeft=function(){},Rn.prototype.setScrollTop=function(){},Rn.prototype.clear=function(){};var Un={native:In,null:Rn};function Vn(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&T(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Un[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),he(t,\"mousedown\",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute(\"cm-not-content\",\"true\")},function(t,r){\"horizontal\"==r?Fn(e,t):Pn(e,t)},e),e.display.scrollbars.addClass&&P(e.display.wrapper,e.display.scrollbars.addClass)}var jn=0;function Kn(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++jn},t=e.curOp,lr?lr.ops.push(t):t.ownsGroup=lr={ops:[t],delayedCallbacks:[]}}function Xn(e){var t=e.curOp;t&&function(e,t){var r=e.ownsGroup;if(r)try{!function(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}(r)}finally{lr=null,t(r)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,r=0;r<t.length;r++)_n(t[r]);for(var n=0;n<t.length;n++)(i=t[n]).updatedDisplay=i.mustUpdate&&ii(i.cm,i.update);var i;for(var o=0;o<t.length;o++)Yn(t[o]);for(var l=0;l<t.length;l++)qn(t[l]);for(var s=0;s<t.length;s++)$n(t[s])}(e)})}function _n(e){var t=e.cm,r=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Lr(e)+\"px\",t.sizer.style.marginBottom=-t.nativeBarWidth+\"px\",t.sizer.style.borderRightWidth=Lr(e)+\"px\",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Xt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ni(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Yn(e){var t=e.cm,r=t.display;e.updatedDisplay&&Mn(t),e.barMeasure=En(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ar(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Lr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Tr(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function qn(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+\"px\",e.maxScrollLeft<t.doc.scrollLeft&&Fn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==H();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Bn(t,e.barMeasure),e.updatedDisplay&&ai(t,e.barMeasure),e.selectionChanged&&wn(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&xn(e.cm)}function $n(e){var t=e.cm,r=t.display,n=t.doc;(e.updatedDisplay&&oi(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&zn(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Fn(t,e.scrollLeft,!0,!0),e.scrollToPos)&&function(e,t){if(!ve(e,\"scrollCursorIntoView\")){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!g){var o=A(\"div\",\"\",null,\"position: absolute;\\n                         top: \"+(t.top-r.viewOffset-Sr(e.display))+\"px;\\n                         height: \"+(t.bottom-t.top+Lr(e)+r.barHeight)+\"px;\\n                         left: \"+t.left+\"px; width: \"+Math.max(2,t.right-t.left)+\"px;\");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,r,n){var i;null==n&&(n=0),e.options.lineWrapping||t!=r||(r=\"before\"==(t=t.ch?tt(t.line,\"before\"==t.sticky?t.ch-1:t.ch,\"after\"):t).sticky?tt(t.line,t.ch+1,\"before\"):t);for(var o=0;o<5;o++){var l=!1,s=_r(e,t),a=r&&r!=t?_r(e,r):s,u=Nn(e,i={left:Math.min(s.left,a.left),top:Math.min(s.top,a.top)-n,right:Math.max(s.left,a.left),bottom:Math.max(s.bottom,a.bottom)+n}),c=e.doc.scrollTop,f=e.doc.scrollLeft;if(null!=u.scrollTop&&(Pn(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(l=!0)),null!=u.scrollLeft&&(Fn(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(l=!0)),!l)break}return i}(t,at(n,e.scrollToPos.from),at(n,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var l=0;l<i.length;++l)i[l].lines.length||me(i[l],\"hide\");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&me(o[s],\"unhide\");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&me(t,\"changes\",t,e.changeObjs),e.update&&e.update.finish()}function Zn(e,t){if(e.curOp)return t();Kn(e);try{return t()}finally{Xn(e)}}function Jn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Kn(e);try{return t.apply(e,arguments)}finally{Xn(e)}}}function Qn(e){return function(){if(this.curOp)return e.apply(this,arguments);Kn(this);try{return e.apply(this,arguments)}finally{Xn(this)}}}function ei(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Kn(t);try{return e.apply(this,arguments)}finally{Xn(t)}}}function ti(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,E(ri,e))}function ri(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=pt(e,t.highlightFrontier),i=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(n.line>=e.display.viewFrom){var l=o.styles,s=o.text.length>e.options.maxHighlightLength?Ve(t.mode,n.state):null,a=dt(e,o,n,!0);s&&(n.state=s),o.styles=a.styles;var u=o.styleClasses,c=a.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var f=!l||l.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),d=0;!f&&d<l.length;++d)f=l[d]!=o.styles[d];f&&i.push(n.line),o.stateAfter=n.save(),n.nextLine()}else o.text.length<=e.options.maxHighlightLength&&gt(e,o.text,n),o.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return ti(e,e.options.workDelay),!0}),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),i.length&&Zn(e,function(){for(var t=0;t<i.length;t++)fn(e,i[t],\"text\")})}}var ni=function(e,t,r){var n=e.display;this.viewport=t,this.visible=Tn(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Tr(e),this.force=r,this.dims=nn(e),this.events=[]};function ii(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return dn(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==pn(e))return!1;ci(e)&&(dn(e),t.dims=nn(e));var i=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),l=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(i,r.viewTo)),St&&(o=Bt(e.doc,o),l=Gt(e.doc,l));var s=o!=r.viewFrom||l!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;!function(e,t,r){var n=e.display;0==n.view.length||t>=n.viewTo||r<=n.viewFrom?(n.view=or(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=or(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(un(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(or(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,un(e,r)))),n.viewTo=r}(e,o,l),r.viewOffset=jt(_e(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+\"px\";var a=pn(e);if(!s&&0==a&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var c=function(e){if(e.hasFocus())return null;var t=H();if(!t||!W(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&W(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}(e);return a>4&&(r.lineDiv.style.display=\"none\"),function(e,t,r){var n=e.display,i=e.options.lineNumbers,o=n.lineDiv,l=o.firstChild;function s(t){var r=t.nextSibling;return u&&b&&e.display.currentWheelTarget==t?t.style.display=\"none\":t.parentNode.removeChild(t),r}for(var a=n.view,c=n.viewFrom,f=0;f<a.length;f++){var d=a[f];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;l!=d.node;)l=s(l);var h=i&&null!=t&&t<=c&&d.lineNumber;d.changes&&(G(d.changes,\"gutter\")>-1&&(h=!1),cr(e,d,c,r)),h&&(N(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(et(e.options,c)))),l=d.node.nextSibling}else{var p=vr(e,d,c,r);o.insertBefore(p,l)}c+=d.size}for(;l;)l=s(l)}(e,r.updateLineNumbers,t.dims),a>4&&(r.lineDiv.style.display=\"\"),r.renderedView=r.view,function(e){if(e&&e.activeElt&&e.activeElt!=H()&&(e.activeElt.focus(),e.anchorNode&&W(document.body,e.anchorNode)&&W(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}(c),N(r.cursorDiv),N(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,s&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,ti(e,400)),r.updateLineNumbers=null,!0}function oi(e,t){for(var r=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Tr(e)||(r&&null!=r.top&&(r={top:Math.min(e.doc.height+kr(e.display)-Nr(e),r.top)}),t.visible=Tn(e.display,e.doc,r),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&ii(e,t);n=!1){Mn(e);var i=En(e);gn(e),Bn(e,i),ai(e,i),t.force=!1}t.signal(e,\"update\",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,\"viewportChange\",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function li(e,t){var r=new ni(e,t);if(ii(e,r)){Mn(e),oi(e,r);var n=En(e);gn(e),Bn(e,n),ai(e,n),r.finish()}}function si(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+\"px\"}function ai(e,t){e.display.sizer.style.minHeight=t.docHeight+\"px\",e.display.heightForcer.style.top=t.docHeight+\"px\",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Lr(e)+\"px\"}function ui(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=on(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+\"px\",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&(r[l].gutter&&(r[l].gutter.style.left=o),r[l].gutterBackground&&(r[l].gutterBackground.style.left=o));var s=r[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+\"px\")}}function ci(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=et(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(A(\"div\",[A(\"div\",r)],\"CodeMirror-linenumber CodeMirror-gutter-elt\")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width=\"\",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l)+1,n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+\"px\",si(e.display),!0}return!1}function fi(e,t){for(var r=[],n=!1,i=0;i<e.length;i++){var o=e[i],l=null;if(\"string\"!=typeof o&&(l=o.style,o=o.className),\"CodeMirror-linenumbers\"==o){if(!t)continue;n=!0}r.push({className:o,style:l})}return t&&!n&&r.push({className:\"CodeMirror-linenumbers\",style:null}),r}function di(e){var t=e.gutters,r=e.gutterSpecs;N(t),e.lineGutter=null;for(var n=0;n<r.length;++n){var i=r[n],o=i.className,l=i.style,s=t.appendChild(A(\"div\",null,\"CodeMirror-gutter \"+o));l&&(s.style.cssText=l),\"CodeMirror-linenumbers\"==o&&(e.lineGutter=s,s.style.width=(e.lineNumWidth||1)+\"px\")}t.style.display=r.length?\"\":\"none\",si(e)}function hi(e){di(e.display),cn(e),ui(e)}function pi(e,t,n,i){var o=this;this.input=n,o.scrollbarFiller=A(\"div\",null,\"CodeMirror-scrollbar-filler\"),o.scrollbarFiller.setAttribute(\"cm-not-content\",\"true\"),o.gutterFiller=A(\"div\",null,\"CodeMirror-gutter-filler\"),o.gutterFiller.setAttribute(\"cm-not-content\",\"true\"),o.lineDiv=D(\"div\",null,\"CodeMirror-code\"),o.selectionDiv=A(\"div\",null,null,\"position: relative; z-index: 1\"),o.cursorDiv=A(\"div\",null,\"CodeMirror-cursors\"),o.measure=A(\"div\",null,\"CodeMirror-measure\"),o.lineMeasure=A(\"div\",null,\"CodeMirror-measure\"),o.lineSpace=D(\"div\",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,\"position: relative; outline: none\");var l=D(\"div\",[o.lineSpace],\"CodeMirror-lines\");o.mover=A(\"div\",[l],null,\"position: relative\"),o.sizer=A(\"div\",[o.mover],\"CodeMirror-sizer\"),o.sizerWidth=null,o.heightForcer=A(\"div\",null,null,\"position: absolute; height: \"+U+\"px; width: 1px;\"),o.gutters=A(\"div\",null,\"CodeMirror-gutters\"),o.lineGutter=null,o.scroller=A(\"div\",[o.sizer,o.heightForcer,o.gutters],\"CodeMirror-scroll\"),o.scroller.setAttribute(\"tabIndex\",\"-1\"),o.wrapper=A(\"div\",[o.scrollbarFiller,o.gutterFiller,o.scroller],\"CodeMirror\"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),u||r&&y||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=fi(i.gutters,i.lineNumbers),di(o),n.init(o)}ni.prototype.signal=function(e,t){be(e,t)&&this.events.push(arguments)},ni.prototype.finish=function(){for(var e=0;e<this.events.length;e++)me.apply(null,this.events[e])};var gi=0,mi=null;function vi(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}}function yi(e){var t=vi(e);return t.x*=mi,t.y*=mi,t}function bi(e,t){var n=vi(t),i=n.x,o=n.y,l=e.display,s=l.scroller,a=s.scrollWidth>s.clientWidth,c=s.scrollHeight>s.clientHeight;if(i&&a||o&&c){if(o&&b&&u)e:for(var f=t.target,h=l.view;f!=s;f=f.parentNode)for(var p=0;p<h.length;p++)if(h[p].node==f){e.display.currentWheelTarget=f;break e}if(i&&!r&&!d&&null!=mi)return o&&c&&Pn(e,Math.max(0,s.scrollTop+o*mi)),Fn(e,Math.max(0,s.scrollLeft+i*mi)),(!o||o&&c)&&xe(t),void(l.wheelStartX=null);if(o&&null!=mi){var g=o*mi,m=e.doc.scrollTop,v=m+l.wrapper.clientHeight;g<0?m=Math.max(0,m+g-50):v=Math.min(e.doc.height,v+g+50),li(e,{top:m,bottom:v})}gi<20&&(null==l.wheelStartX?(l.wheelStartX=s.scrollLeft,l.wheelStartY=s.scrollTop,l.wheelDX=i,l.wheelDY=o,setTimeout(function(){if(null!=l.wheelStartX){var e=s.scrollLeft-l.wheelStartX,t=s.scrollTop-l.wheelStartY,r=t&&l.wheelDY&&t/l.wheelDY||e&&l.wheelDX&&e/l.wheelDX;l.wheelStartX=l.wheelStartY=null,r&&(mi=(mi*gi+r)/(gi+1),++gi)}},200)):(l.wheelDX+=i,l.wheelDY+=o))}}s?mi=-.53:r?mi=15:f?mi=-.7:h&&(mi=-1/3);var wi=function(e,t){this.ranges=e,this.primIndex=t};wi.prototype.primary=function(){return this.ranges[this.primIndex]},wi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(!nt(r.anchor,n.anchor)||!nt(r.head,n.head))return!1}return!0},wi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new xi(it(this.ranges[t].anchor),it(this.ranges[t].head));return new wi(e,this.primIndex)},wi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},wi.prototype.contains=function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(rt(t,n.from())>=0&&rt(e,n.to())<=0)return r}return-1};var xi=function(e,t){this.anchor=e,this.head=t};function Ci(e,t,r){var n=e&&e.options.selectionsMayTouch,i=t[r];t.sort(function(e,t){return rt(e.from(),t.from())}),r=G(t,i);for(var o=1;o<t.length;o++){var l=t[o],s=t[o-1],a=rt(s.to(),l.from());if(n&&!l.empty()?a>0:a>=0){var u=lt(s.from(),l.from()),c=ot(s.to(),l.to()),f=s.empty()?l.from()==l.head:s.from()==s.head;o<=r&&--r,t.splice(--o,2,new xi(f?c:u,f?u:c))}}return new wi(t,r)}function Si(e,t){return new wi([new xi(e,t||e)],0)}function ki(e){return e.text?tt(e.from.line+e.text.length-1,$(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Mi(e,t){if(rt(e,t.from)<0)return e;if(rt(e,t.to)<=0)return ki(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=ki(t).ch-t.to.ch),tt(r,n)}function Li(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new xi(Mi(i.anchor,t),Mi(i.head,t)))}return Ci(e.cm,r,e.sel.primIndex)}function Ti(e,t,r){return e.line==t.line?tt(r.line,e.ch-t.ch+r.ch):tt(r.line+(e.line-t.line),e.ch)}function Ni(e){e.doc.mode=Be(e.options,e.doc.modeOption),Oi(e)}function Oi(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ti(e,100),e.state.modeGen++,e.curOp&&cn(e)}function Ai(e,t){return 0==t.from.ch&&0==t.to.ch&&\"\"==$(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Di(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){!function(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ot(e),At(e,r);var i=n?n(e):1;i!=e.height&&$e(e,i)}(e,r,i,n),ar(e,\"change\",e,t)}function l(e,t){for(var r=[],o=e;o<t;++o)r.push(new _t(u[o],i(o),n));return r}var s=t.from,a=t.to,u=t.text,c=_e(e,s.line),f=_e(e,a.line),d=$(u),h=i(u.length-1),p=a.line-s.line;if(t.full)e.insert(0,l(0,u.length)),e.remove(u.length,e.size-u.length);else if(Ai(e,t)){var g=l(0,u.length-1);o(f,f.text,h),p&&e.remove(s.line,p),g.length&&e.insert(s.line,g)}else if(c==f)if(1==u.length)o(c,c.text.slice(0,s.ch)+d+c.text.slice(a.ch),h);else{var m=l(1,u.length-1);m.push(new _t(d+c.text.slice(a.ch),h,n)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),e.insert(s.line+1,m)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+f.text.slice(a.ch),i(0)),e.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(f,d+f.text.slice(a.ch),h);var v=l(1,u.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,v)}ar(e,\"change\",e,t)}function Wi(e,t,r){!function e(n,i,o){if(n.linked)for(var l=0;l<n.linked.length;++l){var s=n.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;r&&!a||(t(s.doc,a),e(s.doc,n,a))}}}(e,null,!0)}function Hi(e,t){if(t.cm)throw new Error(\"This document is already in use.\");e.doc=t,t.cm=e,sn(e),Ni(e),Pi(e),e.options.lineWrapping||Xt(e),e.options.mode=t.modeOption,cn(e)}function Pi(e){(\"rtl\"==e.doc.direction?P:T)(e.display.lineDiv,\"CodeMirror-rtl\")}function zi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Fi(e,t){var r={from:it(t.from),to:ki(t),text:Ye(e,t.from,t.to)};return Gi(e,r,t.from.line,t.to.line+1),Wi(e,function(e){return Gi(e,r,t.from.line,t.to.line+1)},!0),r}function Ei(e){for(;e.length;){if(!$(e).ranges)break;e.pop()}}function Ii(e,t,r,n){var i=e.history;i.undone.length=0;var o,l,s=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&(\"+\"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||\"*\"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Ei(e.done),$(e.done)):e.done.length&&!$(e.done).ranges?$(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),$(e.done)):void 0}(i,i.lastOp==n)))l=$(o.changes),0==rt(t.from,t.to)&&0==rt(t.from,l.to)?l.to=ki(t):o.changes.push(Fi(e,t));else{var a=$(i.done);for(a&&a.ranges||Bi(e.sel,i.done),o={changes:[Fi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,l||me(e,\"historyAdded\")}function Ri(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,r,n){var i=t.charAt(0);return\"*\"==i||\"+\"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,$(i.done),t))?i.done[i.done.length-1]=t:Bi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&!1!==n.clearRedo&&Ei(i.undone)}function Bi(e,t){var r=$(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Gi(e,t,r,n){var i=t[\"spans_\"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t[\"spans_\"+e.id]={}))[o]=r.markedSpans),++o})}function Ui(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Vi(e,t){var r=function(e,t){var r=t[\"spans_\"+e.id];if(!r)return null;for(var n=[],i=0;i<t.text.length;++i)n.push(Ui(r[i]));return n}(e,t),n=Tt(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function ji(e,t,r){for(var n=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)n.push(r?wi.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];n.push({changes:s});for(var a=0;a<l.length;++a){var u=l[a],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var f in u)(c=f.match(/^spans_(\\d+)$/))&&G(t,Number(c[1]))>-1&&($(s)[f]=u[f],delete u[f])}}}return n}function Ki(e,t,r,n){if(n){var i=e.anchor;if(r){var o=rt(t,i)<0;o!=rt(r,i)<0?(i=t,t=r):o!=rt(t,r)<0&&(t=r)}return new xi(i,t)}return new xi(r||t,t)}function Xi(e,t,r,n,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Zi(e,new wi([Ki(e.sel.primary(),t,r,i)],0),n)}function _i(e,t,r){for(var n=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)n[o]=Ki(e.sel.ranges[o],t[o],null,i);Zi(e,Ci(e.cm,n,e.sel.primIndex),r)}function Yi(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,Zi(e,Ci(e.cm,i,e.sel.primIndex),n)}function qi(e,t,r,n){Zi(e,Si(t,r),n)}function $i(e,t,r){var n=e.history.done,i=$(n);i&&i.ranges?(n[n.length-1]=t,Ji(e,t,r)):Zi(e,t,r)}function Zi(e,t,r){Ji(e,t,r),Ri(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Ji(e,t,r){(be(e,\"beforeSelectionChange\")||e.cm&&be(e.cm,\"beforeSelectionChange\"))&&(t=function(e,t,r){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new xi(at(e,t[r].anchor),at(e,t[r].head))},origin:r&&r.origin};return me(e,\"beforeSelectionChange\",e,n),e.cm&&me(e.cm,\"beforeSelectionChange\",e.cm,n),n.ranges!=t.ranges?Ci(e.cm,n.ranges,n.ranges.length-1):t}(e,t,r));var n=r&&r.bias||(rt(t.primary().head,e.sel.primary().head)<0?-1:1);Qi(e,to(e,t,n,!0)),r&&!1===r.scroll||!e.cm||An(e.cm)}function Qi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ye(e.cm)),ar(e,\"cursorActivity\",e))}function eo(e){Qi(e,to(e,e.sel,null,!1))}function to(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],a=no(e,l.anchor,s&&s.anchor,r,n),u=no(e,l.head,s&&s.head,r,n);(i||a!=l.anchor||u!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new xi(a,u))}return i?Ci(e.cm,i,t.primIndex):t}function ro(e,t,r,n,i){var o=_e(e,t.line);if(o.markedSpans)for(var l=0;l<o.markedSpans.length;++l){var s=o.markedSpans[l],a=s.marker,u=\"selectLeft\"in a?!a.selectLeft:a.inclusiveLeft,c=\"selectRight\"in a?!a.selectRight:a.inclusiveRight;if((null==s.from||(u?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(c?s.to>=t.ch:s.to>t.ch))){if(i&&(me(a,\"beforeCursorEnter\"),a.explicitlyCleared)){if(o.markedSpans){--l;continue}break}if(!a.atomic)continue;if(r){var f=a.find(n<0?1:-1),d=void 0;if((n<0?c:u)&&(f=io(e,f,-n,f&&f.line==t.line?o:null)),f&&f.line==t.line&&(d=rt(f,r))&&(n<0?d<0:d>0))return ro(e,f,t,n,i)}var h=a.find(n<0?-1:1);return(n<0?u:c)&&(h=io(e,h,n,h.line==t.line?o:null)),h?ro(e,h,t,n,i):null}}return t}function no(e,t,r,n,i){var o=n||1,l=ro(e,t,r,o,i)||!i&&ro(e,t,r,o,!0)||ro(e,t,r,-o,i)||!i&&ro(e,t,r,-o,!0);return l||(e.cantEdit=!0,tt(e.first,0))}function io(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?at(e,tt(t.line-1)):null:r>0&&t.ch==(n||_e(e,t.line)).text.length?t.line<e.first+e.size-1?tt(t.line+1,0):null:new tt(t.line,t.ch+r)}function oo(e){e.setSelection(tt(e.firstLine(),0),tt(e.lastLine()),j)}function lo(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(t,r,i,o){t&&(n.from=at(e,t)),r&&(n.to=at(e,r)),i&&(n.text=i),void 0!==o&&(n.origin=o)}),me(e,\"beforeChange\",e,n),e.cm&&me(e.cm,\"beforeChange\",e.cm,n),n.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function so(e,t,r){if(e.cm){if(!e.cm.curOp)return Jn(e.cm,so)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(be(e,\"beforeChange\")||e.cm&&be(e.cm,\"beforeChange\"))||(t=lo(e,t,!0))){var n=Ct&&!r&&function(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=G(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(0),a=0;a<i.length;++a){var u=i[a];if(!(rt(u.to,s.from)<0||rt(u.from,s.to)>0)){var c=[a,1],f=rt(u.from,s.from),d=rt(u.to,s.to);(f<0||!l.inclusiveLeft&&!f)&&c.push({from:u.from,to:s.from}),(d>0||!l.inclusiveRight&&!d)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-3}}return i}(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)ao(e,{from:n[i].from,to:n[i].to,text:i?[\"\"]:t.text,origin:t.origin});else ao(e,t)}}function ao(e,t){if(1!=t.text.length||\"\"!=t.text[0]||0!=rt(t.from,t.to)){var r=Li(e,t);Ii(e,t,r,e.cm?e.cm.curOp.id:NaN),fo(e,t,r,Tt(e,t));var n=[];Wi(e,function(e,r){r||-1!=G(n,e.history)||(mo(e.history,t),n.push(e.history)),fo(e,t,null,Tt(e,t))})}}function uo(e,t,r){var n=e.cm&&e.cm.state.suppressEdits;if(!n||r){for(var i,o=e.history,l=e.sel,s=\"undo\"==t?o.done:o.undone,a=\"undo\"==t?o.undone:o.done,u=0;u<s.length&&(i=s[u],r?!i.ranges||i.equals(e.sel):i.ranges);u++);if(u!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(n)return void s.push(i);break}if(Bi(i,a),r&&!i.equals(e.sel))return void Zi(e,i,{clearRedo:!1});l=i}var c=[];Bi(l,a),a.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var f=be(e,\"beforeChange\")||e.cm&&be(e.cm,\"beforeChange\"),d=function(r){var n=i.changes[r];if(n.origin=t,f&&!lo(e,n,!1))return s.length=0,{};c.push(Fi(e,n));var o=r?Li(e,n):$(s);fo(e,n,o,Vi(e,n)),!r&&e.cm&&e.cm.scrollIntoView({from:n.from,to:ki(n)});var l=[];Wi(e,function(e,t){t||-1!=G(l,e.history)||(mo(e.history,n),l.push(e.history)),fo(e,n,null,Vi(e,n))})},h=i.changes.length-1;h>=0;--h){var p=d(h);if(p)return p.v}}}}function co(e,t){if(0!=t&&(e.first+=t,e.sel=new wi(Z(e.sel.ranges,function(e){return new xi(tt(e.anchor.line+t,e.anchor.ch),tt(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){cn(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)fn(e.cm,n,\"gutter\")}}function fo(e,t,r,n){if(e.cm&&!e.cm.curOp)return Jn(e.cm,fo)(e,t,r,n);if(t.to.line<e.first)co(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);co(e,i),t={from:tt(e.first,0),to:tt(t.to.line+i,t.to.ch),text:[$(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:tt(o,_e(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ye(e,t.from,t.to),r||(r=Li(e,t)),e.cm?function(e,t,r){var n=e.doc,i=e.display,o=t.from,l=t.to,s=!1,a=o.line;e.options.lineWrapping||(a=Ze(Rt(_e(n,o.line))),n.iter(a,l.line+1,function(e){if(e==i.maxLine)return s=!0,!0}));n.sel.contains(t.from,t.to)>-1&&ye(e);Di(n,t,r,ln(e)),e.options.lineWrapping||(n.iter(a,o.line+t.text.length,function(e){var t=Kt(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var i=_e(e,n).stateAfter;if(i&&(!(i instanceof ct)||n+i.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}})(n,o.line),ti(e,400);var u=t.text.length-(l.line-o.line)-1;t.full?cn(e):o.line!=l.line||1!=t.text.length||Ai(e.doc,t)?cn(e,o.line,l.line+1,u):fn(e,o.line,\"text\");var c=be(e,\"changes\"),f=be(e,\"change\");if(f||c){var d={from:o,to:l,text:t.text,removed:t.removed,origin:t.origin};f&&ar(e,\"change\",e,d),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}(e.cm,t,n):Di(e,t,n),Ji(e,r,j),e.cantEdit&&no(e,tt(e.firstLine(),0))&&(e.cantEdit=!1)}}function ho(e,t,r,n,i){var o;n||(n=r),rt(n,r)<0&&(r=(o=[n,r])[0],n=o[1]),\"string\"==typeof t&&(t=e.splitLines(t)),so(e,{from:r,to:n,text:t,origin:i})}function po(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function go(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)po(o.ranges[s].anchor,t,r,n),po(o.ranges[s].head,t,r,n)}else{for(var a=0;a<o.changes.length;++a){var u=o.changes[a];if(r<u.from.line)u.from=tt(u.from.line+n,u.from.ch),u.to=tt(u.to.line+n,u.to.ch);else if(t<=u.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function mo(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;go(e.done,r,n,i),go(e.undone,r,n,i)}function vo(e,t,r,n){var i=t,o=t;return\"number\"==typeof t?o=_e(e,st(e,t)):i=Ze(t),null==i?null:(n(o,i)&&e.cm&&fn(e.cm,i,r),o)}function yo(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}function bo(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}xi.prototype.from=function(){return lt(this.anchor,this.head)},xi.prototype.to=function(){return ot(this.anchor,this.head)},xi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},yo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height,Yt(i),ar(i,\"delete\")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},bo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var o=Math.min(t,i-e),l=n.height;if(n.removeInner(e,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof yo))){var s=[];this.collapse(s),this.children=[new yo(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(var l=i.lines.length%25+25,s=l;s<i.lines.length;){var a=new yo(i.lines.slice(s,s+=25));i.height-=a.height,this.children.splice(++n,0,a),a.parent=this}i.lines=i.lines.slice(0,l),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new bo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=G(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var n=new bo(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e);if(i.iterN(e,l,r))return!0;if(0==(t-=l))break;e=0}else e-=o}}};var wo=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};function xo(e,t,r){jt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&On(e,r)}wo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=Ze(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=xr(this);$e(r,Math.max(0,r.height-o)),e&&(Zn(e,function(){xo(e,r,-o),fn(e,n,\"widget\")}),ar(e,\"lineWidgetCleared\",e,this,n))}},wo.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=xr(this)-t;i&&(Ut(this.doc,n)||$e(n,n.height+i),r&&Zn(r,function(){r.curOp.forceUpdate=!0,xo(r,n,i),ar(r,\"lineWidgetChanged\",r,e,Ze(n))}))},we(wo);var Co=0,So=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Co};function ko(e,t,r,n,i){if(n&&n.shared)return function(e,t,r,n,i){(n=I(n)).shared=!1;var o=[ko(e,t,r,n,i)],l=o[0],s=n.widgetNode;return Wi(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(ko(e,at(e,t),at(e,r),n,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;l=$(o)}),new Mo(o,l)}(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return Jn(e.cm,ko)(e,t,r,n,i);var o=new So(e,i),l=rt(t,r);if(n&&I(n,o,!1),l>0||0==l&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=D(\"span\",[o.replacedWith],\"CodeMirror-widget\"),n.handleMouseEvents||o.widgetNode.setAttribute(\"cm-ignore-events\",\"true\"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(It(e,t.line,t,r,o)||t.line!=r.line&&It(e,r.line,t,r,o))throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");St=!0}o.addToHistory&&Ii(e,{from:t,to:r,origin:\"markText\"},e.sel,NaN);var s,a=t.line,u=e.cm;if(e.iter(a,r.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&Rt(e)==u.display.maxLine&&(s=!0),o.collapsed&&a!=t.line&&$e(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new kt(o,a==t.line?t.ch:null,a==r.line?r.ch:null)),++a}),o.collapsed&&e.iter(t.line,r.line+1,function(t){Ut(e,t)&&$e(t,0)}),o.clearOnEnter&&he(o,\"beforeCursorEnter\",function(){return o.clear()}),o.readOnly&&(Ct=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Co,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)cn(u,t.line,r.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=t.line;c<=r.line;c++)fn(u,c,\"text\");o.atomic&&eo(u.doc),ar(u,\"markerAdded\",u,o)}return o}So.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Kn(e),be(this,\"clear\")){var r=this.find();r&&ar(this,\"clear\",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=Mt(l.markedSpans,this);e&&!this.collapsed?fn(e,Ze(l),\"text\"):e&&(null!=s.to&&(i=Ze(l)),null!=s.from&&(n=Ze(l))),l.markedSpans=Lt(l.markedSpans,s),null==s.from&&this.collapsed&&!Ut(this.doc,l)&&e&&$e(l,tn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var u=Rt(this.lines[a]),c=Kt(u);c>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&cn(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&eo(e.doc)),e&&ar(e,\"markerCleared\",e,this,n,i),t&&Xn(e),this.parent&&this.parent.clear()}},So.prototype.find=function(e,t){var r,n;null==e&&\"bookmark\"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],l=Mt(o.markedSpans,this);if(null!=l.from&&(r=tt(t?o:Ze(o),l.from),-1==e))return r;if(null!=l.to&&(n=tt(t?o:Ze(o),l.to),1==e))return n}return r&&{from:r,to:n}},So.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;t&&n&&Zn(n,function(){var i=t.line,o=Ze(t.line),l=Dr(n,o);if(l&&(Ir(l),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Ut(r.doc,i)&&null!=r.height){var s=r.height;r.height=null;var a=xr(r)-s;a&&$e(i,i.height+a)}ar(n,\"markerChanged\",n,e)})},So.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=G(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},So.prototype.detachLine=function(e){if(this.lines.splice(G(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},we(So);var Mo=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function Lo(e){return e.findMarks(tt(e.first,0),e.clipPos(tt(e.lastLine())),function(e){return e.parent})}function To(e){for(var t=function(t){var r=e[t],n=[r.primary.doc];Wi(r.primary.doc,function(e){return n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];-1==G(n,o.doc)&&(o.parent=null,r.markers.splice(i--,1))}},r=0;r<e.length;r++)t(r)}Mo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ar(this,\"clear\")}},Mo.prototype.find=function(e,t){return this.primary.find(e,t)},we(Mo);var No=0,Oo=function e(t,r,n,i,o){if(!(this instanceof e))return new e(t,r,n,i,o);null==n&&(n=0),bo.call(this,[new yo([new _t(\"\",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var l=tt(n,0);this.sel=Si(l),this.history=new zi(null),this.id=++No,this.modeOption=r,this.lineSep=i,this.direction=\"rtl\"==o?\"rtl\":\"ltr\",this.extend=!1,\"string\"==typeof t&&(t=this.splitLines(t)),Di(this,{from:l,to:l,text:t}),Zi(this,Si(l),j)};Oo.prototype=Q(bo.prototype,{constructor:Oo,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=qe(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:ei(function(e){var t=tt(this.first,0),r=this.first+this.size-1;so(this,{from:t,to:tt(r,_e(this,r).text.length),text:this.splitLines(e),origin:\"setValue\",full:!0},!0),this.cm&&Dn(this.cm,0,0),Zi(this,Si(t),j)}),replaceRange:function(e,t,r,n){ho(this,e,t=at(this,t),r=r?at(this,r):t,n)},getRange:function(e,t,r){var n=Ye(this,at(this,e),at(this,t));return!1===r?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Qe(this,e))return _e(this,e)},getLineNumber:function(e){return Ze(e)},getLineHandleVisualStart:function(e){return\"number\"==typeof e&&(e=_e(this,e)),Rt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||\"head\"==e?t.head:\"anchor\"==e?t.anchor:\"end\"==e||\"to\"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ei(function(e,t,r){qi(this,at(this,\"number\"==typeof e?tt(e,t||0):e),null,r)}),setSelection:ei(function(e,t,r){qi(this,at(this,e),at(this,t||e),r)}),extendSelection:ei(function(e,t,r){Xi(this,at(this,e),t&&at(this,t),r)}),extendSelections:ei(function(e,t){_i(this,ut(this,e),t)}),extendSelectionsBy:ei(function(e,t){_i(this,ut(this,Z(this.sel.ranges,e)),t)}),setSelections:ei(function(e,t,r){if(e.length){for(var n=[],i=0;i<e.length;i++)n[i]=new xi(at(this,e[i].anchor),at(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Zi(this,Ci(this.cm,n,t),r)}}),addSelection:ei(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new xi(at(this,e),at(this,t||e))),Zi(this,Ci(this.cm,n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=Ye(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=Ye(this,r[n].from(),r[n].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||\"+input\")},replaceSelections:ei(function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];n[o]={from:l.from(),to:l.to(),text:this.splitLines(e[o]),origin:r}}for(var s=t&&\"end\"!=t&&function(e,t,r){for(var n=[],i=tt(e.first,0),o=i,l=0;l<t.length;l++){var s=t[l],a=Ti(s.from,i,o),u=Ti(ki(s),i,o);if(i=s.to,o=u,\"around\"==r){var c=e.sel.ranges[l],f=rt(c.head,c.anchor)<0;n[l]=new xi(f?u:a,f?a:u)}else n[l]=new xi(a,a)}return new wi(n,e.sel.primIndex)}(this,n,t),a=n.length-1;a>=0;a--)so(this,n[a]);s?$i(this,s):this.cm&&An(this.cm)}),undo:ei(function(){uo(this,\"undo\")}),redo:ei(function(){uo(this,\"redo\")}),undoSelection:ei(function(){uo(this,\"undo\",!0)}),redoSelection:ei(function(){uo(this,\"redo\",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new zi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:ji(this.history.done),undone:ji(this.history.undone)}},setHistory:function(e){var t=this.history=new zi(this.history.maxGeneration);t.done=ji(e.done.slice(0),null,!0),t.undone=ji(e.undone.slice(0),null,!0)},setGutterMarker:ei(function(e,t,r){return vo(this,e,\"gutter\",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&ne(n)&&(e.gutterMarkers=null),!0})}),clearGutter:ei(function(e){var t=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&vo(t,r,\"gutter\",function(){return r.gutterMarkers[e]=null,ne(r.gutterMarkers)&&(r.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(\"number\"==typeof e){if(!Qe(this,e))return null;if(t=e,!(e=_e(this,e)))return null}else if(null==(t=Ze(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:ei(function(e,t,r){return vo(this,e,\"gutter\"==t?\"gutter\":\"class\",function(e){var n=\"text\"==t?\"textClass\":\"background\"==t?\"bgClass\":\"gutter\"==t?\"gutterClass\":\"wrapClass\";if(e[n]){if(M(r).test(e[n]))return!1;e[n]+=\" \"+r}else e[n]=r;return!0})}),removeLineClass:ei(function(e,t,r){return vo(this,e,\"gutter\"==t?\"gutter\":\"class\",function(e){var n=\"text\"==t?\"textClass\":\"background\"==t?\"bgClass\":\"gutter\"==t?\"gutterClass\":\"wrapClass\",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.match(M(r));if(!o)return!1;var l=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&l!=i.length?\" \":\"\")+i.slice(l)||null}return!0})}),addLineWidget:ei(function(e,t,r){return function(e,t,r,n){var i=new wo(e,r,n),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),vo(e,t,\"widget\",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Ut(e,t)){var n=jt(t)<e.scrollTop;$e(t,t.height+xr(i)),n&&On(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&ar(o,\"lineWidgetAdded\",o,i,\"number\"==typeof t?t:Ze(t)),i}(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return ko(this,at(this,e),at(this,t),r,r&&r.type||\"range\")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return ko(this,e=at(this,e),e,r,\"bookmark\")},findMarksAt:function(e){var t=[],r=_e(this,(e=at(this,e)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=at(this,e),t=at(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var l=o.markedSpans;if(l)for(var s=0;s<l.length;s++){var a=l[s];null!=a.to&&i==e.line&&e.ch>=a.to||null==a.from&&i!=e.line||null!=a.from&&i==t.line&&a.from>=t.ch||r&&!r(a.marker)||n.push(a.marker.parent||a.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+n;if(o>e)return t=e,!0;e-=o,++r}),at(this,tt(r,t))},indexFromPos:function(e){var t=(e=at(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+r}),t},copy:function(e){var t=new Oo(qe(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new Oo(qe(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(rt(o,l)){var s=ko(e,o,l,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}(n,Lo(this)),n},unlinkDoc:function(e){if(e instanceof Ml&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),To(Lo(this));break}}if(e.history==this.history){var r=[e.id];Wi(e,function(e){return r.push(e.id)},!0),e.history=new zi(null),e.history.done=ji(this.history.done,r),e.history.undone=ji(this.history.undone,r)}},iterLinkedDocs:function(e){Wi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):He(e)},lineSeparator:function(){return this.lineSep||\"\\n\"},setDirection:ei(function(e){var t;(\"rtl\"!=e&&(e=\"ltr\"),e!=this.direction)&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Zn(t=this.cm,function(){Pi(t),cn(t)}))})}),Oo.prototype.eachLine=Oo.prototype.iter;var Ao=0;function Do(e){var t=this;if(Wo(t),!ve(t,e)&&!Cr(t.display,e)){xe(e),s&&(Ao=+new Date);var r=an(t,e,!0),n=e.dataTransfer.files;if(r&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,a=function(e,n){if(!t.options.allowDropFileTypes||-1!=G(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=Jn(t,function(){var e=s.result;if(/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(e)&&(e=\"\"),o[n]=e,++l==i){var a={from:r=at(t.doc,r),to:r,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:\"paste\"};so(t.doc,a),$i(t.doc,Si(r,ki(a)))}}),s.readAsText(e)}},u=0;u<i;++u)a(n[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var c=e.dataTransfer.getData(\"Text\");if(c){var f;if(t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections()),Ji(t.doc,Si(r,r)),f)for(var d=0;d<f.length;++d)ho(t.doc,\"\",f[d].anchor,f[d].head,\"drag\");t.replaceSelection(c,\"around\",\"paste\"),t.display.input.focus()}}catch(e){}}}}function Wo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ho(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName(\"CodeMirror\"),r=[],n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&r.push(i)}r.length&&r[0].operation(function(){for(var t=0;t<r.length;t++)e(r[t])})}}var Po=!1;function zo(){var e;Po||(he(window,\"resize\",function(){null==e&&(e=setTimeout(function(){e=null,Ho(Fo)},100))}),he(window,\"blur\",function(){return Ho(kn)}),Po=!0)}function Fo(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Eo={3:\"Pause\",8:\"Backspace\",9:\"Tab\",13:\"Enter\",16:\"Shift\",17:\"Ctrl\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Esc\",32:\"Space\",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"Left\",38:\"Up\",39:\"Right\",40:\"Down\",44:\"PrintScrn\",45:\"Insert\",46:\"Delete\",59:\";\",61:\"=\",91:\"Mod\",92:\"Mod\",93:\"Mod\",106:\"*\",107:\"=\",109:\"-\",110:\".\",111:\"/\",145:\"ScrollLock\",173:\"-\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\",63232:\"Up\",63233:\"Down\",63234:\"Left\",63235:\"Right\",63272:\"Delete\",63273:\"Home\",63275:\"End\",63276:\"PageUp\",63277:\"PageDown\",63302:\"Insert\"},Io=0;Io<10;Io++)Eo[Io+48]=Eo[Io+96]=String(Io);for(var Ro=65;Ro<=90;Ro++)Eo[Ro]=String.fromCharCode(Ro);for(var Bo=1;Bo<=12;Bo++)Eo[Bo+111]=Eo[Bo+63235]=\"F\"+Bo;var Go={};function Uo(e){var t,r,n,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var l=0;l<o.length-1;l++){var s=o[l];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error(\"Unrecognized modifier name: \"+s);n=!0}}return t&&(e=\"Alt-\"+e),r&&(e=\"Ctrl-\"+e),i&&(e=\"Cmd-\"+e),n&&(e=\"Shift-\"+e),e}function Vo(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if(\"...\"==n){delete e[r];continue}for(var i=Z(r.split(\" \"),Uo),o=0;o<i.length;o++){var l=void 0,s=void 0;o==i.length-1?(s=i.join(\" \"),l=n):(s=i.slice(0,o+1).join(\" \"),l=\"...\");var a=t[s];if(a){if(a!=l)throw new Error(\"Inconsistent bindings for \"+s)}else t[s]=l}delete e[r]}for(var u in t)e[u]=t[u];return e}function jo(e,t,r,n){var i=(t=Yo(t)).call?t.call(e,n):t[e];if(!1===i)return\"nothing\";if(\"...\"===i)return\"multi\";if(null!=i&&r(i))return\"handled\";if(t.fallthrough){if(\"[object Array]\"!=Object.prototype.toString.call(t.fallthrough))return jo(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var l=jo(e,t.fallthrough[o],r,n);if(l)return l}}}function Ko(e){var t=\"string\"==typeof e?e:Eo[e.keyCode];return\"Ctrl\"==t||\"Alt\"==t||\"Shift\"==t||\"Mod\"==t}function Xo(e,t,r){var n=e;return t.altKey&&\"Alt\"!=n&&(e=\"Alt-\"+e),(S?t.metaKey:t.ctrlKey)&&\"Ctrl\"!=n&&(e=\"Ctrl-\"+e),(S?t.ctrlKey:t.metaKey)&&\"Cmd\"!=n&&(e=\"Cmd-\"+e),!r&&t.shiftKey&&\"Shift\"!=n&&(e=\"Shift-\"+e),e}function _o(e,t){if(d&&34==e.keyCode&&e.char)return!1;var r=Eo[e.keyCode];return null!=r&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(r=e.code),Xo(r,e,t))}function Yo(e){return\"string\"==typeof e?Go[e]:e}function qo(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&rt(o.from,$(n).to)<=0;){var l=n.pop();if(rt(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}Zn(e,function(){for(var t=n.length-1;t>=0;t--)ho(e.doc,\"\",n[t].from,n[t].to,\"+delete\");An(e)})}function $o(e,t,r){var n=le(e.text,t+r,r);return n<0||n>e.text.length?null:n}function Zo(e,t,r){var n=$o(e,t.ch,r);return null==n?null:new tt(t.line,n,r<0?\"after\":\"before\")}function Jo(e,t,r,n,i){if(e){var o=fe(r,t.doc.direction);if(o){var l,s=i<0?$(o):o[0],a=i<0==(1==s.level)?\"after\":\"before\";if(s.level>0||\"rtl\"==t.doc.direction){var u=Wr(t,r);l=i<0?r.text.length-1:0;var c=Hr(t,u,l).top;l=se(function(e){return Hr(t,u,e).top==c},i<0==(1==s.level)?s.from:s.to-1,l),\"before\"==a&&(l=$o(r,l,1))}else l=i<0?s.to:s.from;return new tt(n,l,a)}}return new tt(n,i<0?r.text.length:0,i<0?\"before\":\"after\")}Go.basic={Left:\"goCharLeft\",Right:\"goCharRight\",Up:\"goLineUp\",Down:\"goLineDown\",End:\"goLineEnd\",Home:\"goLineStartSmart\",PageUp:\"goPageUp\",PageDown:\"goPageDown\",Delete:\"delCharAfter\",Backspace:\"delCharBefore\",\"Shift-Backspace\":\"delCharBefore\",Tab:\"defaultTab\",\"Shift-Tab\":\"indentAuto\",Enter:\"newlineAndIndent\",Insert:\"toggleOverwrite\",Esc:\"singleSelection\"},Go.pcDefault={\"Ctrl-A\":\"selectAll\",\"Ctrl-D\":\"deleteLine\",\"Ctrl-Z\":\"undo\",\"Shift-Ctrl-Z\":\"redo\",\"Ctrl-Y\":\"redo\",\"Ctrl-Home\":\"goDocStart\",\"Ctrl-End\":\"goDocEnd\",\"Ctrl-Up\":\"goLineUp\",\"Ctrl-Down\":\"goLineDown\",\"Ctrl-Left\":\"goGroupLeft\",\"Ctrl-Right\":\"goGroupRight\",\"Alt-Left\":\"goLineStart\",\"Alt-Right\":\"goLineEnd\",\"Ctrl-Backspace\":\"delGroupBefore\",\"Ctrl-Delete\":\"delGroupAfter\",\"Ctrl-S\":\"save\",\"Ctrl-F\":\"find\",\"Ctrl-G\":\"findNext\",\"Shift-Ctrl-G\":\"findPrev\",\"Shift-Ctrl-F\":\"replace\",\"Shift-Ctrl-R\":\"replaceAll\",\"Ctrl-[\":\"indentLess\",\"Ctrl-]\":\"indentMore\",\"Ctrl-U\":\"undoSelection\",\"Shift-Ctrl-U\":\"redoSelection\",\"Alt-U\":\"redoSelection\",fallthrough:\"basic\"},Go.emacsy={\"Ctrl-F\":\"goCharRight\",\"Ctrl-B\":\"goCharLeft\",\"Ctrl-P\":\"goLineUp\",\"Ctrl-N\":\"goLineDown\",\"Alt-F\":\"goWordRight\",\"Alt-B\":\"goWordLeft\",\"Ctrl-A\":\"goLineStart\",\"Ctrl-E\":\"goLineEnd\",\"Ctrl-V\":\"goPageDown\",\"Shift-Ctrl-V\":\"goPageUp\",\"Ctrl-D\":\"delCharAfter\",\"Ctrl-H\":\"delCharBefore\",\"Alt-D\":\"delWordAfter\",\"Alt-Backspace\":\"delWordBefore\",\"Ctrl-K\":\"killLine\",\"Ctrl-T\":\"transposeChars\",\"Ctrl-O\":\"openLine\"},Go.macDefault={\"Cmd-A\":\"selectAll\",\"Cmd-D\":\"deleteLine\",\"Cmd-Z\":\"undo\",\"Shift-Cmd-Z\":\"redo\",\"Cmd-Y\":\"redo\",\"Cmd-Home\":\"goDocStart\",\"Cmd-Up\":\"goDocStart\",\"Cmd-End\":\"goDocEnd\",\"Cmd-Down\":\"goDocEnd\",\"Alt-Left\":\"goGroupLeft\",\"Alt-Right\":\"goGroupRight\",\"Cmd-Left\":\"goLineLeft\",\"Cmd-Right\":\"goLineRight\",\"Alt-Backspace\":\"delGroupBefore\",\"Ctrl-Alt-Backspace\":\"delGroupAfter\",\"Alt-Delete\":\"delGroupAfter\",\"Cmd-S\":\"save\",\"Cmd-F\":\"find\",\"Cmd-G\":\"findNext\",\"Shift-Cmd-G\":\"findPrev\",\"Cmd-Alt-F\":\"replace\",\"Shift-Cmd-Alt-F\":\"replaceAll\",\"Cmd-[\":\"indentLess\",\"Cmd-]\":\"indentMore\",\"Cmd-Backspace\":\"delWrappedLineLeft\",\"Cmd-Delete\":\"delWrappedLineRight\",\"Cmd-U\":\"undoSelection\",\"Shift-Cmd-U\":\"redoSelection\",\"Ctrl-Up\":\"goDocStart\",\"Ctrl-Down\":\"goDocEnd\",fallthrough:[\"basic\",\"emacsy\"]},Go.default=b?Go.macDefault:Go.pcDefault;var Qo={selectAll:oo,singleSelection:function(e){return e.setSelection(e.getCursor(\"anchor\"),e.getCursor(\"head\"),j)},killLine:function(e){return qo(e,function(t){if(t.empty()){var r=_e(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:tt(t.head.line+1,0)}:{from:t.head,to:tt(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return qo(e,function(t){return{from:tt(t.from().line,0),to:at(e.doc,tt(t.to().line+1,0))}})},delLineLeft:function(e){return qo(e,function(e){return{from:tt(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return qo(e,function(t){var r=e.charCoords(t.head,\"div\").top+5;return{from:e.coordsChar({left:0,top:r},\"div\"),to:t.from()}})},delWrappedLineRight:function(e){return qo(e,function(t){var r=e.charCoords(t.head,\"div\").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},\"div\");return{from:t.from(),to:n}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(tt(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(tt(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return el(e,t.head.line)},{origin:\"+move\",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return tl(e,t.head)},{origin:\"+move\",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var r=_e(e.doc,t),n=function(e){for(var t;t=Ft(e);)e=t.find(1,!0).line;return e}(r);n!=r&&(t=Ze(n));return Jo(!0,e,r,t,-1)}(e,t.head.line)},{origin:\"+move\",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,\"div\").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},\"div\")},X)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,\"div\").top+5;return e.coordsChar({left:0,top:r},\"div\")},X)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,\"div\").top+5,n=e.coordsChar({left:0,top:r},\"div\");return n.ch<e.getLine(n.line).search(/\\S/)?tl(e,t.head):n},X)},goLineUp:function(e){return e.moveV(-1,\"line\")},goLineDown:function(e){return e.moveV(1,\"line\")},goPageUp:function(e){return e.moveV(-1,\"page\")},goPageDown:function(e){return e.moveV(1,\"page\")},goCharLeft:function(e){return e.moveH(-1,\"char\")},goCharRight:function(e){return e.moveH(1,\"char\")},goColumnLeft:function(e){return e.moveH(-1,\"column\")},goColumnRight:function(e){return e.moveH(1,\"column\")},goWordLeft:function(e){return e.moveH(-1,\"word\")},goGroupRight:function(e){return e.moveH(1,\"group\")},goGroupLeft:function(e){return e.moveH(-1,\"group\")},goWordRight:function(e){return e.moveH(1,\"word\")},delCharBefore:function(e){return e.deleteH(-1,\"char\")},delCharAfter:function(e){return e.deleteH(1,\"char\")},delWordBefore:function(e){return e.deleteH(-1,\"word\")},delWordAfter:function(e){return e.deleteH(1,\"word\")},delGroupBefore:function(e){return e.deleteH(-1,\"group\")},delGroupAfter:function(e){return e.deleteH(1,\"group\")},indentAuto:function(e){return e.indentSelection(\"smart\")},indentMore:function(e){return e.indentSelection(\"add\")},indentLess:function(e){return e.indentSelection(\"subtract\")},insertTab:function(e){return e.replaceSelection(\"\\t\")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=R(e.getLine(o.line),o.ch,n);t.push(q(n-l%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection(\"add\"):e.execCommand(\"insertTab\")},transposeChars:function(e){return Zn(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,o=_e(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new tt(i.line,i.ch-1)),i.ch>0)i=new tt(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),tt(i.line,i.ch-2),i,\"+transpose\");else if(i.line>e.doc.first){var l=_e(e.doc,i.line-1).text;l&&(i=new tt(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+l.charAt(l.length-1),tt(i.line-1,l.length-1),i,\"+transpose\"))}r.push(new xi(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){return Zn(e,function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,\"+input\");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);An(e)})},openLine:function(e){return e.replaceSelection(\"\\n\",\"start\")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function el(e,t){var r=_e(e.doc,t),n=Rt(r);return n!=r&&(t=Ze(n)),Jo(!0,e,n,t,1)}function tl(e,t){var r=el(e,t.line),n=_e(e.doc,r.line),i=fe(n,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;return tt(r.line,l?0:o,r.sticky)}return r}function rl(e,t,r){if(\"string\"==typeof t&&!(t=Qo[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=V}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}var nl=new B;function il(e,t,r,n){var i=e.state.keySeq;if(i){if(Ko(t))return\"handled\";if(/\\'$/.test(t)?e.state.keySeq=null:nl.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),ol(e,i+\" \"+t,r,n))return!0}return ol(e,t,r,n)}function ol(e,t,r,n){var i=function(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=jo(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&jo(t,e.options.extraKeys,r,e)||jo(t,e.options.keyMap,r,e)}(e,t,n);return\"multi\"==i&&(e.state.keySeq=t),\"handled\"==i&&ar(e,\"keyHandled\",e,t,r),\"handled\"!=i&&\"multi\"!=i||(xe(r),wn(e)),!!i}function ll(e,t){var r=_o(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?il(e,\"Shift-\"+r,t,function(t){return rl(e,t,!0)})||il(e,r,t,function(t){if(\"string\"==typeof t?/^go[A-Z]/.test(t):t.motion)return rl(e,t)}):il(e,r,t,function(t){return rl(e,t)}))}var sl=null;function al(e){var t=this;if(t.curOp.focus=H(),!ve(t,e)){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=ll(t,e);d&&(sl=n?r:null,!n&&88==r&&!ze&&(b?e.metaKey:e.ctrlKey)&&t.replaceSelection(\"\",null,\"cut\")),18!=r||/\\bCodeMirror-crosshair\\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function r(e){18!=e.keyCode&&e.altKey||(T(t,\"CodeMirror-crosshair\"),ge(document,\"keyup\",r),ge(document,\"mouseover\",r))}P(t,\"CodeMirror-crosshair\"),he(document,\"keyup\",r),he(document,\"mouseover\",r)}(t)}}function ul(e){16==e.keyCode&&(this.doc.sel.shift=!1),ve(this,e)}function cl(e){var t=this;if(!(Cr(t.display,e)||ve(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(d&&r==sl)return sl=null,void xe(e);if(!d||e.which&&!(e.which<10)||!ll(t,e)){var i=String.fromCharCode(null==n?r:n);\"\\b\"!=i&&(function(e,t,r){return il(e,\"'\"+r+\"'\",t,function(t){return rl(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var fl,dl,hl=function(e,t,r){this.time=e,this.pos=t,this.button=r};function pl(e){var t=this,r=t.display;if(!(ve(t,e)||r.activeTouch&&r.input.supportsTouch()))if(r.input.ensurePolled(),r.shift=e.shiftKey,Cr(r,e))u||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));else if(!vl(t,e)){var n=an(t,e),i=Le(e),o=n?function(e,t){var r=+new Date;return dl&&dl.compare(r,e,t)?(fl=dl=null,\"triple\"):fl&&fl.compare(r,e,t)?(dl=new hl(r,e,t),fl=null,\"double\"):(fl=new hl(r,e,t),dl=null,\"single\")}(n,i):\"single\";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),n&&function(e,t,r,n,i){var o=\"Click\";\"double\"==n?o=\"Double\"+o:\"triple\"==n&&(o=\"Triple\"+o);return il(e,Xo(o=(1==t?\"Left\":2==t?\"Middle\":\"Right\")+o,i),i,function(t){if(\"string\"==typeof t&&(t=Qo[t]),!t)return!1;var n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n=t(e,r)!=V}finally{e.state.suppressEdits=!1}return n})}(t,i,n,o,e)||(1==i?n?function(e,t,r,n){s?setTimeout(E(xn,e),0):e.curOp.focus=H();var i,o=function(e,t,r){var n=e.getOption(\"configureMouse\"),i=n?n(e,t,r):{};if(null==i.unit){var o=w?r.shiftKey&&r.metaKey:r.altKey;i.unit=o?\"rectangle\":\"single\"==t?\"char\":\"double\"==t?\"word\":\"line\"}(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||r.shiftKey);null==i.addNew&&(i.addNew=b?r.metaKey:r.ctrlKey);null==i.moveOnDrag&&(i.moveOnDrag=!(b?r.altKey:r.ctrlKey));return i}(e,r,n),l=e.doc.sel;e.options.dragDrop&&Oe&&!e.isReadOnly()&&\"single\"==r&&(i=l.contains(t))>-1&&(rt((i=l.ranges[i]).from(),t)<0||t.xRel>0)&&(rt(i.to(),t)>0||t.xRel<0)?function(e,t,r,n){var i=e.display,o=!1,l=Jn(e,function(t){u&&(i.scroller.draggable=!1),e.state.draggingText=!1,ge(i.wrapper.ownerDocument,\"mouseup\",l),ge(i.wrapper.ownerDocument,\"mousemove\",c),ge(i.scroller,\"dragstart\",f),ge(i.scroller,\"drop\",l),o||(xe(t),n.addNew||Xi(e.doc,r,null,null,n.extend),u||s&&9==a?setTimeout(function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()},20):i.input.focus())}),c=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},f=function(){return o=!0};u&&(i.scroller.draggable=!0);e.state.draggingText=l,l.copy=!n.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop();he(i.wrapper.ownerDocument,\"mouseup\",l),he(i.wrapper.ownerDocument,\"mousemove\",c),he(i.scroller,\"dragstart\",f),he(i.scroller,\"drop\",l),Cn(e),setTimeout(function(){return i.input.focus()},20)}(e,n,t,o):function(e,t,r,n){var i=e.display,o=e.doc;xe(t);var l,s,a=o.sel,u=a.ranges;n.addNew&&!n.extend?(s=o.sel.contains(r),l=s>-1?u[s]:new xi(r,r)):(l=o.sel.primary(),s=o.sel.primIndex);if(\"rectangle\"==n.unit)n.addNew||(l=new xi(r,r)),r=an(e,t,!0,!0),s=-1;else{var c=gl(e,r,n.unit);l=n.extend?Ki(l,c.anchor,c.head,n.extend):c}n.addNew?-1==s?(s=u.length,Zi(o,Ci(e,u.concat([l]),s),{scroll:!1,origin:\"*mouse\"})):u.length>1&&u[s].empty()&&\"char\"==n.unit&&!n.extend?(Zi(o,Ci(e,u.slice(0,s).concat(u.slice(s+1)),0),{scroll:!1,origin:\"*mouse\"}),a=o.sel):Yi(o,s,l,K):(s=0,Zi(o,new wi([l],0),K),a=o.sel);var f=r;function d(t){if(0!=rt(f,t))if(f=t,\"rectangle\"==n.unit){for(var i=[],u=e.options.tabSize,c=R(_e(o,r.line).text,r.ch,u),d=R(_e(o,t.line).text,t.ch,u),h=Math.min(c,d),p=Math.max(c,d),g=Math.min(r.line,t.line),m=Math.min(e.lastLine(),Math.max(r.line,t.line));g<=m;g++){var v=_e(o,g).text,y=_(v,h,u);h==p?i.push(new xi(tt(g,y),tt(g,y))):v.length>y&&i.push(new xi(tt(g,y),tt(g,_(v,p,u))))}i.length||i.push(new xi(r,r)),Zi(o,Ci(e,a.ranges.slice(0,s).concat(i),s),{origin:\"*mouse\",scroll:!1}),e.scrollIntoView(t)}else{var b,w=l,x=gl(e,t,n.unit),C=w.anchor;rt(x.anchor,C)>0?(b=x.head,C=lt(w.from(),x.anchor)):(b=x.anchor,C=ot(w.to(),x.head));var S=a.ranges.slice(0);S[s]=function(e,t){var r=t.anchor,n=t.head,i=_e(e.doc,r.line);if(0==rt(r,n)&&r.sticky==n.sticky)return t;var o=fe(i);if(!o)return t;var l=ue(o,r.ch,r.sticky),s=o[l];if(s.from!=r.ch&&s.to!=r.ch)return t;var a,u=l+(s.from==r.ch==(1!=s.level)?0:1);if(0==u||u==o.length)return t;if(n.line!=r.line)a=(n.line-r.line)*(\"ltr\"==e.doc.direction?1:-1)>0;else{var c=ue(o,n.ch,n.sticky),f=c-l||(n.ch-r.ch)*(1==s.level?-1:1);a=c==u-1||c==u?f<0:f>0}var d=o[u+(a?-1:0)],h=a==(1==d.level),p=h?d.from:d.to,g=h?\"after\":\"before\";return r.ch==p&&r.sticky==g?t:new xi(new tt(r.line,p,g),n)}(e,new xi(at(o,C),b)),Zi(o,Ci(e,S,s),K)}}var h=i.wrapper.getBoundingClientRect(),p=0;function g(t){e.state.selectingText=!1,p=1/0,t&&(xe(t),i.input.focus()),ge(i.wrapper.ownerDocument,\"mousemove\",m),ge(i.wrapper.ownerDocument,\"mouseup\",v),o.history.lastSelOrigin=null}var m=Jn(e,function(t){0!==t.buttons&&Le(t)?function t(r){var l=++p;var s=an(e,r,!0,\"rectangle\"==n.unit);if(!s)return;if(0!=rt(s,f)){e.curOp.focus=H(),d(s);var a=Tn(i,o);(s.line>=a.to||s.line<a.from)&&setTimeout(Jn(e,function(){p==l&&t(r)}),150)}else{var u=r.clientY<h.top?-20:r.clientY>h.bottom?20:0;u&&setTimeout(Jn(e,function(){p==l&&(i.scroller.scrollTop+=u,t(r))}),50)}}(t):g(t)}),v=Jn(e,g);e.state.selectingText=v,he(i.wrapper.ownerDocument,\"mousemove\",m),he(i.wrapper.ownerDocument,\"mouseup\",v)}(e,n,t,o)}(t,n,o,e):Me(e)==r.scroller&&xe(e):2==i?(n&&Xi(t.doc,n),setTimeout(function(){return r.input.focus()},20)):3==i&&(k?t.display.input.onContextMenu(e):Cn(t)))}}function gl(e,t,r){if(\"char\"==r)return new xi(t,t);if(\"word\"==r)return e.findWordAt(t);if(\"line\"==r)return new xi(tt(t.line,0),at(e.doc,tt(t.line+1,0)));var n=r(e,t);return new xi(n.from,n.to)}function ml(e,t,r,n){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&xe(t);var l=e.display,s=l.lineDiv.getBoundingClientRect();if(o>s.bottom||!be(e,r))return Se(t);o-=s.top-l.viewOffset;for(var a=0;a<e.display.gutterSpecs.length;++a){var u=l.gutters.childNodes[a];if(u&&u.getBoundingClientRect().right>=i)return me(e,r,e,Je(e.doc,o),e.display.gutterSpecs[a].className,t),Se(t)}}function vl(e,t){return ml(e,t,\"gutterClick\",!0)}function yl(e,t){Cr(e.display,t)||function(e,t){if(!be(e,\"gutterContextMenu\"))return!1;return ml(e,t,\"gutterContextMenu\",!1)}(e,t)||ve(e,t,\"contextmenu\")||k||e.display.input.onContextMenu(t)}function bl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\\s*cm-s-\\S+/g,\"\")+e.options.theme.replace(/(^|\\s)\\s*/g,\" cm-s-\"),Br(e)}hl.prototype.compare=function(e,t,r){return this.time+400>e&&0==rt(t,this.pos)&&r==this.button};var wl={toString:function(){return\"CodeMirror.Init\"}},xl={},Cl={};function Sl(e,t,r){if(!t!=!(r&&r!=wl)){var n=e.display.dragFunctions,i=t?he:ge;i(e.display.scroller,\"dragstart\",n.start),i(e.display.scroller,\"dragenter\",n.enter),i(e.display.scroller,\"dragover\",n.over),i(e.display.scroller,\"dragleave\",n.leave),i(e.display.scroller,\"drop\",n.drop)}}function kl(e){e.options.lineWrapping?(P(e.display.wrapper,\"CodeMirror-wrap\"),e.display.sizer.style.minWidth=\"\",e.display.sizerWidth=null):(T(e.display.wrapper,\"CodeMirror-wrap\"),Xt(e)),sn(e),cn(e),Br(e),setTimeout(function(){return Bn(e)},100)}function Ml(e,t){var r=this;if(!(this instanceof Ml))return new Ml(e,t);this.options=t=t?I(t):{},I(xl,t,!1);var n=t.value;\"string\"==typeof n?n=new Oo(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var i=new Ml.inputStyles[t.inputStyle](this),o=this.display=new pi(e,n,i,t);for(var l in o.wrapper.CodeMirror=this,bl(this),t.lineWrapping&&(this.display.wrapper.className+=\" CodeMirror-wrap\"),Vn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new B,keySeq:null,specialChars:null},t.autofocus&&!y&&o.input.focus(),s&&a<11&&setTimeout(function(){return r.display.input.reset(!0)},20),function(e){var t=e.display;he(t.scroller,\"mousedown\",Jn(e,pl)),he(t.scroller,\"dblclick\",s&&a<11?Jn(e,function(t){if(!ve(e,t)){var r=an(e,t);if(r&&!vl(e,t)&&!Cr(e.display,t)){xe(t);var n=e.findWordAt(r);Xi(e.doc,n.anchor,n.head)}}}):function(t){return ve(e,t)||xe(t)});he(t.scroller,\"contextmenu\",function(t){return yl(e,t)});var r,n={end:0};function i(){t.activeTouch&&(r=setTimeout(function(){return t.activeTouch=null},1e3),(n=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}he(t.scroller,\"touchstart\",function(i){if(!ve(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!vl(e,i)){t.input.ensurePolled(),clearTimeout(r);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-n.end<=300?n:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),he(t.scroller,\"touchmove\",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),he(t.scroller,\"touchend\",function(r){var n=t.activeTouch;if(n&&!Cr(t,r)&&null!=n.left&&!n.moved&&new Date-n.start<300){var l,s=e.coordsChar(t.activeTouch,\"page\");l=!n.prev||o(n,n.prev)?new xi(s,s):!n.prev.prev||o(n,n.prev.prev)?e.findWordAt(s):new xi(tt(s.line,0),at(e.doc,tt(s.line+1,0))),e.setSelection(l.anchor,l.head),e.focus(),xe(r)}i()}),he(t.scroller,\"touchcancel\",i),he(t.scroller,\"scroll\",function(){t.scroller.clientHeight&&(Pn(e,t.scroller.scrollTop),Fn(e,t.scroller.scrollLeft,!0),me(e,\"scroll\",e))}),he(t.scroller,\"mousewheel\",function(t){return bi(e,t)}),he(t.scroller,\"DOMMouseScroll\",function(t){return bi(e,t)}),he(t.wrapper,\"scroll\",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){ve(e,t)||ke(t)},over:function(t){ve(e,t)||(!function(e,t){var r=an(e,t);if(r){var n=document.createDocumentFragment();vn(e,r,n),e.display.dragCursor||(e.display.dragCursor=A(\"div\",null,\"CodeMirror-cursors CodeMirror-dragcursors\"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),O(e.display.dragCursor,n)}}(e,t),ke(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-Ao<100))ke(t);else if(!ve(e,t)&&!Cr(e.display,t)&&(t.dataTransfer.setData(\"Text\",e.getSelection()),t.dataTransfer.effectAllowed=\"copyMove\",t.dataTransfer.setDragImage&&!h)){var r=A(\"img\",null,null,\"position: fixed; left: 0; top: 0;\");r.src=\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\",d&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),d&&r.parentNode.removeChild(r)}}(e,t)},drop:Jn(e,Do),leave:function(t){ve(e,t)||Wo(e)}};var l=t.input.getField();he(l,\"keyup\",function(t){return ul.call(e,t)}),he(l,\"keydown\",Jn(e,al)),he(l,\"keypress\",Jn(e,cl)),he(l,\"focus\",function(t){return Sn(e,t)}),he(l,\"blur\",function(t){return kn(e,t)})}(this),zo(),Kn(this),this.curOp.forceUpdate=!0,Hi(this,n),t.autofocus&&!y||this.hasFocus()?setTimeout(E(Sn,this),20):kn(this),Cl)Cl.hasOwnProperty(l)&&Cl[l](r,t[l],wl);ci(this),t.finishInit&&t.finishInit(this);for(var c=0;c<Ll.length;++c)Ll[c](r);Xn(this),u&&t.lineWrapping&&\"optimizelegibility\"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering=\"auto\")}Ml.defaults=xl,Ml.optionHandlers=Cl;var Ll=[];function Tl(e,t,r,n){var i,o=e.doc;null==r&&(r=\"add\"),\"smart\"==r&&(o.mode.indent?i=pt(e,t).state:r=\"prev\");var l=e.options.tabSize,s=_e(o,t),a=R(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\\s*/)[0];if(n||/\\S/.test(s.text)){if(\"smart\"==r&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==V||u>150)){if(!n)return;r=\"prev\"}}else u=0,r=\"not\";\"prev\"==r?u=t>o.first?R(_e(o,t-1).text,null,l):0:\"add\"==r?u=a+e.options.indentUnit:\"subtract\"==r?u=a-e.options.indentUnit:\"number\"==typeof r&&(u=a+r),u=Math.max(0,u);var f=\"\",d=0;if(e.options.indentWithTabs)for(var h=Math.floor(u/l);h;--h)d+=l,f+=\"\\t\";if(d<u&&(f+=q(u-d)),f!=c)return ho(o,f,tt(t,0),tt(t,c.length),\"+input\"),s.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<c.length){var m=tt(t,c.length);Yi(o,p,new xi(m,m));break}}}Ml.defineInitHook=function(e){return Ll.push(e)};var Nl=null;function Ol(e){Nl=e}function Al(e,t,r,n,i){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var l=+new Date-200,s=\"paste\"==i||e.state.pasteIncoming>l,a=He(t),u=null;if(s&&n.ranges.length>1)if(Nl&&Nl.text.join(\"\\n\")==t){if(n.ranges.length%Nl.text.length==0){u=[];for(var c=0;c<Nl.text.length;c++)u.push(o.splitLines(Nl.text[c]))}}else a.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(u=Z(a,function(e){return[e]}));for(var f=e.curOp.updateInput,d=n.ranges.length-1;d>=0;d--){var h=n.ranges[d],p=h.from(),g=h.to();h.empty()&&(r&&r>0?p=tt(p.line,p.ch-r):e.state.overwrite&&!s?g=tt(g.line,Math.min(_e(o,g.line).text.length,g.ch+$(a).length)):s&&Nl&&Nl.lineWise&&Nl.text.join(\"\\n\")==t&&(p=g=tt(p.line,0)));var m={from:p,to:g,text:u?u[d%u.length]:a,origin:i||(s?\"paste\":e.state.cutIncoming>l?\"cut\":\"+input\")};so(e.doc,m),ar(e,\"inputRead\",e,m)}t&&!s&&Wl(e,t),An(e),e.curOp.updateInput<2&&(e.curOp.updateInput=f),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Dl(e,t){var r=e.clipboardData&&e.clipboardData.getData(\"Text\");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Zn(t,function(){return Al(t,r,0,null,\"paste\")}),!0}function Wl(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var o=e.getModeAt(i.head),l=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){l=Tl(e,i.head.line,\"smart\");break}}else o.electricInput&&o.electricInput.test(_e(e.doc,i.head.line).text.slice(0,i.head.ch))&&(l=Tl(e,i.head.line,\"smart\"));l&&ar(e,\"electricInput\",e,i.head.line)}}}function Hl(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,o={anchor:tt(i,0),head:tt(i+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function Pl(e,t,r,n){e.setAttribute(\"autocorrect\",r?\"\":\"off\"),e.setAttribute(\"autocapitalize\",n?\"\":\"off\"),e.setAttribute(\"spellcheck\",!!t)}function zl(){var e=A(\"textarea\",null,null,\"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\"),t=A(\"div\",[e],null,\"overflow: hidden; position: relative; width: 3px; height: 0px;\");return u?e.style.width=\"1000px\":e.setAttribute(\"wrap\",\"off\"),m&&(e.style.border=\"1px solid black\"),Pl(e),t}function Fl(e,t,r,n,i){var o=t,l=r,s=_e(e,t.line);function a(n){var o,l;if(null==(o=i?function(e,t,r,n){var i=fe(t,e.doc.direction);if(!i)return Zo(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky=\"before\"):r.ch<=0&&(r.ch=0,r.sticky=\"after\");var o=ue(i,r.ch,r.sticky),l=i[o];if(\"ltr\"==e.doc.direction&&l.level%2==0&&(n>0?l.to>r.ch:l.from<r.ch))return Zo(t,r,n);var s,a=function(e,r){return $o(t,e instanceof tt?e.ch:e,r)},u=function(r){return e.options.lineWrapping?(s=s||Wr(e,t),Jr(e,t,s,r)):{begin:0,end:t.text.length}},c=u(\"before\"==r.sticky?a(r,-1):r.ch);if(\"rtl\"==e.doc.direction||1==l.level){var f=1==l.level==n<0,d=a(r,f?1:-1);if(null!=d&&(f?d<=l.to&&d<=c.end:d>=l.from&&d>=c.begin)){var h=f?\"before\":\"after\";return new tt(r.line,d,h)}}var p=function(e,t,n){for(var o=function(e,t){return t?new tt(r.line,a(e,1),\"before\"):new tt(r.line,e,\"after\")};e>=0&&e<i.length;e+=t){var l=i[e],s=t>0==(1!=l.level),u=s?n.begin:a(n.end,-1);if(l.from<=u&&u<l.to)return o(u,s);if(u=s?l.from:a(l.to,-1),n.begin<=u&&u<n.end)return o(u,s)}},g=p(o+n,n,c);if(g)return g;var m=n>0?c.end:a(c.begin,-1);return null==m||n>0&&m==t.text.length||!(g=p(n>0?0:i.length-1,n,u(m)))?null:g}(e.cm,s,t,r):Zo(s,t,r))){if(n||(l=t.line+r)<e.first||l>=e.first+e.size||(t=new tt(l,t.ch,t.sticky),!(s=_e(e,l))))return!1;t=Jo(i,e.cm,s,t.line,r)}else t=o;return!0}if(\"char\"==n)a();else if(\"column\"==n)a(!0);else if(\"word\"==n||\"group\"==n)for(var u=null,c=\"group\"==n,f=e.cm&&e.cm.getHelper(t,\"wordChars\"),d=!0;!(r<0)||a(!d);d=!1){var h=s.text.charAt(t.ch)||\"\\n\",p=re(h,f)?\"w\":c&&\"\\n\"==h?\"n\":!c||/\\s/.test(h)?null:\"p\";if(!c||d||p||(p=\"s\"),u&&u!=p){r<0&&(r=1,a(),t.sticky=\"after\");break}if(p&&(u=p),r>0&&!a(!d))break}var g=no(e,t,o,l,!0);return nt(o,g)&&(g.hitSide=!0),g}function El(e,t,r,n){var i,o,l=e.doc,s=t.left;if(\"page\"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(a-.5*tn(e.display),3);i=(r>0?t.bottom:t.top)+r*u}else\"line\"==n&&(i=r>0?t.bottom+3:t.top-3);for(;(o=$r(e,s,i)).outside;){if(r<0?i<=0:i>=l.height){o.hitSide=!0;break}i+=5*r}return o}var Il=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new B,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Rl(e,t){var r=Dr(e,t.line);if(!r||r.hidden)return null;var n=_e(e.doc,t.line),i=Or(r,n,t.line),o=fe(n,e.doc.direction),l=\"left\";o&&(l=ue(o,t.ch)%2?\"right\":\"left\");var s=Fr(i.map,t.ch,l);return s.offset=\"right\"==s.collapse?s.end:s.start,s}function Bl(e,t){return t&&(e.bad=!0),e}function Gl(e,t,r){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[r]))return Bl(e.clipPos(tt(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==n)return Ul(o,t,r)}}function Ul(e,t,r){var n=e.text.firstChild,i=!1;if(!t||!W(n,t))return Bl(tt(Ze(e.line),0),!0);if(t==n&&(i=!0,t=n.childNodes[r],r=0,!t)){var o=e.rest?$(e.rest):e.line;return Bl(tt(Ze(o),o.text.length),i)}var l=3==t.nodeType?t:null,s=t;for(l||1!=t.childNodes.length||3!=t.firstChild.nodeType||(l=t.firstChild,r&&(r=l.nodeValue.length));s.parentNode!=n;)s=s.parentNode;var a=e.measure,u=a.maps;function c(t,r,n){for(var i=-1;i<(u?u.length:0);i++)for(var o=i<0?a.map:u[i],l=0;l<o.length;l+=3){var s=o[l+2];if(s==t||s==r){var c=Ze(i<0?e.line:e.rest[i]),f=o[l]+n;return(n<0||s!=t)&&(f=o[l+(n?1:0)]),tt(c,f)}}}var f=c(l,s,r);if(f)return Bl(f,i);for(var d=s.nextSibling,h=l?l.nodeValue.length-r:0;d;d=d.nextSibling){if(f=c(d,d.firstChild,0))return Bl(tt(f.line,f.ch-h),i);h+=d.textContent.length}for(var p=s.previousSibling,g=r;p;p=p.previousSibling){if(f=c(p,p.firstChild,-1))return Bl(tt(f.line,f.ch+g),i);g+=p.textContent.length}}Il.prototype.init=function(e){var t=this,r=this,n=r.cm,i=r.div=e.lineDiv;function o(e){if(!ve(n,e)){if(n.somethingSelected())Ol({lineWise:!1,text:n.getSelections()}),\"cut\"==e.type&&n.replaceSelection(\"\",null,\"cut\");else{if(!n.options.lineWiseCopyCut)return;var t=Hl(n);Ol({lineWise:!0,text:t.text}),\"cut\"==e.type&&n.operation(function(){n.setSelections(t.ranges,0,j),n.replaceSelection(\"\",null,\"cut\")})}if(e.clipboardData){e.clipboardData.clearData();var o=Nl.text.join(\"\\n\");if(e.clipboardData.setData(\"Text\",o),e.clipboardData.getData(\"Text\")==o)return void e.preventDefault()}var l=zl(),s=l.firstChild;n.display.lineSpace.insertBefore(l,n.display.lineSpace.firstChild),s.value=Nl.text.join(\"\\n\");var a=document.activeElement;F(s),setTimeout(function(){n.display.lineSpace.removeChild(l),a.focus(),a==i&&r.showPrimarySelection()},50)}}Pl(i,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize),he(i,\"paste\",function(e){ve(n,e)||Dl(e,n)||a<=11&&setTimeout(Jn(n,function(){return t.updateFromDOM()}),20)}),he(i,\"compositionstart\",function(e){t.composing={data:e.data,done:!1}}),he(i,\"compositionupdate\",function(e){t.composing||(t.composing={data:e.data,done:!1})}),he(i,\"compositionend\",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),he(i,\"touchstart\",function(){return r.forceCompositionEnd()}),he(i,\"input\",function(){t.composing||t.readFromDOMSoon()}),he(i,\"copy\",o),he(i,\"cut\",o)},Il.prototype.prepareSelection=function(){var e=mn(this.cm,!1);return e.focus=this.cm.state.focused,e},Il.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Il.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Il.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),o=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var l=Gl(t,e.anchorNode,e.anchorOffset),s=Gl(t,e.focusNode,e.focusOffset);if(!l||l.bad||!s||s.bad||0!=rt(lt(l,s),i)||0!=rt(ot(l,s),o)){var a=t.display.view,u=i.line>=t.display.viewFrom&&Rl(t,i)||{node:a[0].measure.map[2],offset:0},c=o.line<t.display.viewTo&&Rl(t,o);if(!c){var f=a[a.length-1].measure,d=f.maps?f.maps[f.maps.length-1]:f.map;c={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(u&&c){var h,p=e.rangeCount&&e.getRangeAt(0);try{h=L(u.node,u.offset,c.offset,c.node)}catch(We){}h&&(!r&&t.state.focused?(e.collapse(u.node,u.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),p&&null==e.anchorNode?e.addRange(p):r&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Il.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Il.prototype.showMultipleSelections=function(e){O(this.cm.display.cursorDiv,e.cursors),O(this.cm.display.selectionDiv,e.selection)},Il.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Il.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return W(this.div,t)},Il.prototype.focus=function(){\"nocursor\"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Il.prototype.blur=function(){this.div.blur()},Il.prototype.getField=function(){return this.div},Il.prototype.supportsTouch=function(){return!0},Il.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Zn(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Il.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Il.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(v&&f&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:\"keydown\",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var r=Gl(t,e.anchorNode,e.anchorOffset),n=Gl(t,e.focusNode,e.focusOffset);r&&n&&Zn(t,function(){Zi(t.doc,Si(r,n),j),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}}},Il.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,r,n=this.cm,i=n.display,o=n.doc.sel.primary(),l=o.from(),s=o.to();if(0==l.ch&&l.line>n.firstLine()&&(l=tt(l.line-1,_e(n.doc,l.line-1).length)),s.ch==_e(n.doc,s.line).text.length&&s.line<n.lastLine()&&(s=tt(s.line+1,0)),l.line<i.viewFrom||s.line>i.viewTo-1)return!1;l.line==i.viewFrom||0==(e=un(n,l.line))?(t=Ze(i.view[0].line),r=i.view[0].node):(t=Ze(i.view[e].line),r=i.view[e-1].node.nextSibling);var a,u,c=un(n,s.line);if(c==i.view.length-1?(a=i.viewTo-1,u=i.lineDiv.lastChild):(a=Ze(i.view[c+1].line)-1,u=i.view[c+1].node.previousSibling),!r)return!1;for(var f=n.doc.splitLines(function(e,t,r,n,i){var o=\"\",l=!1,s=e.doc.lineSeparator(),a=!1;function u(){l&&(o+=s,a&&(o+=s),l=a=!1)}function c(e){e&&(u(),o+=e)}function f(t){if(1==t.nodeType){var r=t.getAttribute(\"cm-text\");if(r)return void c(r);var o,d=t.getAttribute(\"cm-marker\");if(d){var h=e.findMarks(tt(n,0),tt(i+1,0),(m=+d,function(e){return e.id==m}));return void(h.length&&(o=h[0].find(0))&&c(Ye(e.doc,o.from,o.to).join(s)))}if(\"false\"==t.getAttribute(\"contenteditable\"))return;var p=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;p&&u();for(var g=0;g<t.childNodes.length;g++)f(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(a=!0),p&&(l=!0)}else 3==t.nodeType&&c(t.nodeValue.replace(/\\u200b/g,\"\").replace(/\\u00a0/g,\" \"));var m}for(;f(t),t!=r;)t=t.nextSibling,a=!1;return o}(n,r,u,t,a)),d=Ye(n.doc,tt(t,0),tt(a,_e(n.doc,a).text.length));f.length>1&&d.length>1;)if($(f)==$(d))f.pop(),d.pop(),a--;else{if(f[0]!=d[0])break;f.shift(),d.shift(),t++}for(var h=0,p=0,g=f[0],m=d[0],v=Math.min(g.length,m.length);h<v&&g.charCodeAt(h)==m.charCodeAt(h);)++h;for(var y=$(f),b=$(d),w=Math.min(y.length-(1==f.length?h:0),b.length-(1==d.length?h:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==f.length&&1==d.length&&t==l.line)for(;h&&h>l.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)h--,p++;f[f.length-1]=y.slice(0,y.length-p).replace(/^\\u200b+/,\"\"),f[0]=f[0].slice(h).replace(/\\u200b+$/,\"\");var x=tt(t,h),C=tt(a,d.length?$(d).length-p:0);return f.length>1||f[0]||rt(x,C)?(ho(n.doc,f,x,C,\"+input\"),!0):void 0},Il.prototype.ensurePolled=function(){this.forceCompositionEnd()},Il.prototype.reset=function(){this.forceCompositionEnd()},Il.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Il.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Il.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Zn(this.cm,function(){return cn(e.cm)})},Il.prototype.setUneditable=function(e){e.contentEditable=\"false\"},Il.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Jn(this.cm,Al)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Il.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(\"nocursor\"!=e)},Il.prototype.onContextMenu=function(){},Il.prototype.resetPosition=function(){},Il.prototype.needsContentAttribute=!0;var Vl=function(e){this.cm=e,this.prevInput=\"\",this.pollingFast=!1,this.polling=new B,this.hasSelection=!1,this.composing=null};Vl.prototype.init=function(e){var t=this,r=this,n=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!ve(n,e)){if(n.somethingSelected())Ol({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=Hl(n);Ol({lineWise:!0,text:t.text}),\"cut\"==e.type?n.setSelections(t.ranges,null,j):(r.prevInput=\"\",i.value=t.text.join(\"\\n\"),F(i))}\"cut\"==e.type&&(n.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(i.style.width=\"0px\"),he(i,\"input\",function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),r.poll()}),he(i,\"paste\",function(e){ve(n,e)||Dl(e,n)||(n.state.pasteIncoming=+new Date,r.fastPoll())}),he(i,\"cut\",o),he(i,\"copy\",o),he(e.scroller,\"paste\",function(t){if(!Cr(e,t)&&!ve(n,t)){if(!i.dispatchEvent)return n.state.pasteIncoming=+new Date,void r.focus();var o=new Event(\"paste\");o.clipboardData=t.clipboardData,i.dispatchEvent(o)}}),he(e.lineSpace,\"selectstart\",function(t){Cr(e,t)||xe(t)}),he(i,\"compositionstart\",function(){var e=n.getCursor(\"from\");r.composing&&r.composing.range.clear(),r.composing={start:e,range:n.markText(e,n.getCursor(\"to\"),{className:\"CodeMirror-composing\"})}}),he(i,\"compositionend\",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},Vl.prototype.createField=function(e){this.wrapper=zl(),this.textarea=this.wrapper.firstChild},Vl.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=mn(e);if(e.options.moveInputWithCursor){var i=_r(e,r.sel.primary().head,\"div\"),o=t.wrapper.getBoundingClientRect(),l=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+l.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+l.left-o.left))}return n},Vl.prototype.showSelection=function(e){var t=this.cm.display;O(t.cursorDiv,e.cursors),O(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+\"px\",this.wrapper.style.left=e.teLeft+\"px\")},Vl.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput=\"\";var r=t.getSelection();this.textarea.value=r,t.state.focused&&F(this.textarea),s&&a>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value=\"\",s&&a>=9&&(this.hasSelection=null))}},Vl.prototype.getField=function(){return this.textarea},Vl.prototype.supportsTouch=function(){return!1},Vl.prototype.focus=function(){if(\"nocursor\"!=this.cm.options.readOnly&&(!y||H()!=this.textarea))try{this.textarea.focus()}catch(We){}},Vl.prototype.blur=function(){this.textarea.blur()},Vl.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Vl.prototype.receivedFocus=function(){this.slowPoll()},Vl.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Vl.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function r(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,r))})},Vl.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||Pe(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=r.value;if(i==n&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===i||b&&/[\\uf700-\\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||n||(n=\"\"),8666==o)return this.reset(),this.cm.execCommand(\"undo\")}for(var l=0,u=Math.min(n.length,i.length);l<u&&n.charCodeAt(l)==i.charCodeAt(l);)++l;return Zn(t,function(){Al(t,i.slice(l),n.length-l,null,e.composing?\"*compose\":null),i.length>1e3||i.indexOf(\"\\n\")>-1?r.value=e.prevInput=\"\":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor(\"to\"),{className:\"CodeMirror-composing\"}))}),!0},Vl.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Vl.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Vl.prototype.onContextMenu=function(e){var t=this,r=t.cm,n=r.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=an(r,e),l=n.scroller.scrollTop;if(o&&!d){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(o)&&Jn(r,Zi)(r.doc,Si(o),j);var c,f=i.style.cssText,h=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText=\"position: static\",i.style.cssText=\"position: absolute; width: 30px; height: 30px;\\n      top: \"+(e.clientY-p.top-5)+\"px; left: \"+(e.clientX-p.left-5)+\"px;\\n      z-index: 1000; background: \"+(s?\"rgba(255, 255, 255, .05)\":\"transparent\")+\";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\",u&&(c=window.scrollY),n.input.focus(),u&&window.scrollTo(null,c),n.input.reset(),r.somethingSelected()||(i.value=t.prevInput=\" \"),t.contextMenuPending=m,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll),s&&a>=9&&g(),k){ke(e);he(window,\"mouseup\",function e(){ge(window,\"mouseup\",e),setTimeout(m,20)})}else setTimeout(m,50)}function g(){if(null!=i.selectionStart){var e=r.somethingSelected(),o=\"\"+(e?i.value:\"\");i.value=\"\",i.value=o,t.prevInput=e?\"\":\"\",i.selectionStart=1,i.selectionEnd=o.length,n.selForContextMenu=r.doc.sel}}function m(){if(t.contextMenuPending==m&&(t.contextMenuPending=!1,t.wrapper.style.cssText=h,i.style.cssText=f,s&&a<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=l),null!=i.selectionStart)){(!s||s&&a<9)&&g();var e=0;n.detectingSelectAll=setTimeout(function o(){n.selForContextMenu==r.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&\"\"==t.prevInput?Jn(r,oo)(r):e++<10?n.detectingSelectAll=setTimeout(o,500):(n.selForContextMenu=null,n.input.reset())},200)}}},Vl.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=\"nocursor\"==e},Vl.prototype.setUneditable=function(){},Vl.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function r(r,n,i,o){e.defaults[r]=n,i&&(t[r]=o?function(e,t,r){r!=wl&&i(e,t,r)}:i)}e.defineOption=r,e.Init=wl,r(\"value\",\"\",function(e,t){return e.setValue(t)},!0),r(\"mode\",null,function(e,t){e.doc.modeOption=t,Ni(e)},!0),r(\"indentUnit\",2,Ni,!0),r(\"indentWithTabs\",!1),r(\"smartIndent\",!0),r(\"tabSize\",4,function(e){Oi(e),Br(e),cn(e)},!0),r(\"lineSeparator\",null,function(e,t){if(e.doc.lineSep=t,t){var r=[],n=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,r.push(tt(n,o))}n++});for(var i=r.length-1;i>=0;i--)ho(e.doc,t,r[i],tt(r[i].line,r[i].ch+t.length))}}),r(\"specialChars\",/[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test(\"\\t\")?\"\":\"|\\t\"),\"g\"),r!=wl&&e.refresh()}),r(\"specialCharPlaceholder\",Qt,function(e){return e.refresh()},!0),r(\"electricChars\",!0),r(\"inputStyle\",y?\"contenteditable\":\"textarea\",function(){throw new Error(\"inputStyle can not (yet) be changed in a running editor\")},!0),r(\"spellcheck\",!1,function(e,t){return e.getInputField().spellcheck=t},!0),r(\"autocorrect\",!1,function(e,t){return e.getInputField().autocorrect=t},!0),r(\"autocapitalize\",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),r(\"rtlMoveVisually\",!x),r(\"wholeLineUpdateBefore\",!0),r(\"theme\",\"default\",function(e){bl(e),hi(e)},!0),r(\"keyMap\",\"default\",function(e,t,r){var n=Yo(t),i=r!=wl&&Yo(r);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)}),r(\"extraKeys\",null),r(\"configureMouse\",null),r(\"lineWrapping\",!1,kl,!0),r(\"gutters\",[],function(e,t){e.display.gutterSpecs=fi(t,e.options.lineNumbers),hi(e)},!0),r(\"fixedGutter\",!0,function(e,t){e.display.gutters.style.left=t?on(e.display)+\"px\":\"0\",e.refresh()},!0),r(\"coverGutterNextToScrollbar\",!1,function(e){return Bn(e)},!0),r(\"scrollbarStyle\",\"native\",function(e){Vn(e),Bn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),r(\"lineNumbers\",!1,function(e,t){e.display.gutterSpecs=fi(e.options.gutters,t),hi(e)},!0),r(\"firstLineNumber\",1,hi,!0),r(\"lineNumberFormatter\",function(e){return e},hi,!0),r(\"showCursorWhenSelecting\",!1,gn,!0),r(\"resetSelectionOnContextMenu\",!0),r(\"lineWiseCopyCut\",!0),r(\"pasteLinesPerSelection\",!0),r(\"selectionsMayTouch\",!1),r(\"readOnly\",!1,function(e,t){\"nocursor\"==t&&(kn(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),r(\"disableInput\",!1,function(e,t){t||e.display.input.reset()},!0),r(\"dragDrop\",!0,Sl),r(\"allowDropFileTypes\",null),r(\"cursorBlinkRate\",530),r(\"cursorScrollMargin\",0),r(\"cursorHeight\",1,gn,!0),r(\"singleCursorHeightPerLine\",!0,gn,!0),r(\"workTime\",100),r(\"workDelay\",100),r(\"flattenSpans\",!0,Oi,!0),r(\"addModeClass\",!1,Oi,!0),r(\"pollInterval\",100),r(\"undoDepth\",200,function(e,t){return e.doc.history.undoDepth=t}),r(\"historyEventDelay\",1250),r(\"viewportMargin\",10,function(e){return e.refresh()},!0),r(\"maxHighlightLength\",1e4,Oi,!0),r(\"moveInputWithCursor\",!0,function(e,t){t||e.display.input.resetPosition()}),r(\"tabindex\",null,function(e,t){return e.display.input.getField().tabIndex=t||\"\"}),r(\"autofocus\",null),r(\"direction\",\"ltr\",function(e,t){return e.doc.setDirection(t)},!0),r(\"phrases\",null)}(Ml),function(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,r){var n=this.options,i=n[e];n[e]==r&&\"mode\"!=e||(n[e]=r,t.hasOwnProperty(e)&&Jn(this,t[e])(this,r,i),me(this,\"optionChange\",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?\"push\":\"unshift\"](Yo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:Qn(function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error(\"Overlays may not be stateful.\");!function(e,t,r){for(var n=0,i=r(t);n<e.length&&r(e[n])<=i;)n++;e.splice(n,0,t)}(this.state.overlays,{mode:n,modeSpec:t,opaque:r&&r.opaque,priority:r&&r.priority||0},function(e){return e.priority}),this.state.modeGen++,cn(this)}),removeOverlay:Qn(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||\"string\"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void cn(this)}}),indentLine:Qn(function(e,t,r){\"string\"!=typeof t&&\"number\"!=typeof t&&(t=null==t?this.options.smartIndent?\"smart\":\"prev\":t?\"add\":\"subtract\"),Qe(this.doc,e)&&Tl(this,e,t,r)}),indentSelection:Qn(function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(Tl(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&An(this));else{var o=i.from(),l=i.to(),s=Math.max(r,o.line);r=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1;for(var a=s;a<r;++a)Tl(this,a,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[n].from().ch>0&&Yi(this.doc,n,new xi(o,u[n].to()),j)}}}),getTokenAt:function(e,t){return bt(this,e,t)},getLineTokens:function(e,t){return bt(this,tt(e),t,!0)},getTokenTypeAt:function(e){e=at(this.doc,e);var t,r=ht(this,_e(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var l=n+i>>1;if((l?r[2*l-1]:0)>=o)i=l;else{if(!(r[2*l+1]<o)){t=r[2*l+2];break}n=l+1}}var s=t?t.indexOf(\"overlay \"):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!r.hasOwnProperty(t))return n;var i=r[t],o=this.getModeAt(e);if(\"string\"==typeof o[t])i[o[t]]&&n.push(i[o[t]]);else if(o[t])for(var l=0;l<o[t].length;l++){var s=i[o[t][l]];s&&n.push(s)}else o.helperType&&i[o.helperType]?n.push(i[o.helperType]):i[o.name]&&n.push(i[o.name]);for(var a=0;a<i._global.length;a++){var u=i._global[a];u.pred(o,this)&&-1==G(n,u.val)&&n.push(u.val)}return n},getStateAfter:function(e,t){var r=this.doc;return pt(this,(e=st(r,null==e?r.first+r.size-1:e))+1,t).state},cursorCoords:function(e,t){var r=this.doc.sel.primary();return _r(this,null==e?r.head:\"object\"==l(e)?at(this.doc,e):e?r.from():r.to(),t||\"page\")},charCoords:function(e,t){return Xr(this,at(this.doc,e),t||\"page\")},coordsChar:function(e,t){return $r(this,(e=Kr(this,e,t||\"page\")).left,e.top)},lineAtHeight:function(e,t){return e=Kr(this,{top:e,left:0},t||\"page\").top,Je(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var n,i=!1;if(\"number\"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),n=_e(this.doc,e)}else n=e;return jr(this,n,{top:0,left:0},t||\"page\",r||i).top+(i?this.doc.height-jt(n):0)},defaultTextHeight:function(){return tn(this.display)},defaultCharWidth:function(){return rn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o,l,s,a=this.display,u=(e=_r(this,at(this.doc,e))).bottom,c=e.left;if(t.style.position=\"absolute\",t.setAttribute(\"cm-ignore-events\",\"true\"),this.display.input.setUneditable(t),a.sizer.appendChild(t),\"over\"==n)u=e.top;else if(\"above\"==n||\"near\"==n){var f=Math.max(a.wrapper.clientHeight,this.doc.height),d=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);(\"above\"==n||e.bottom+t.offsetHeight>f)&&e.top>t.offsetHeight?u=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=f&&(u=e.bottom),c+t.offsetWidth>d&&(c=d-t.offsetWidth)}t.style.top=u+\"px\",t.style.left=t.style.right=\"\",\"right\"==i?(c=a.sizer.clientWidth-t.offsetWidth,t.style.right=\"0px\"):(\"left\"==i?c=0:\"middle\"==i&&(c=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=c+\"px\"),r&&(o=this,l={left:c,top:u,right:c+t.offsetWidth,bottom:u+t.offsetHeight},null!=(s=Nn(o,l)).scrollTop&&Pn(o,s.scrollTop),null!=s.scrollLeft&&Fn(o,s.scrollLeft))},triggerOnKeyDown:Qn(al),triggerOnKeyPress:Qn(cl),triggerOnKeyUp:ul,triggerOnMouseDown:Qn(pl),execCommand:function(e){if(Qo.hasOwnProperty(e))return Qo[e].call(null,this)},triggerElectric:Qn(function(e){Wl(this,e)}),findPosH:function(e,t,r,n){var i=1;t<0&&(i=-1,t=-t);for(var o=at(this.doc,e),l=0;l<t&&!(o=Fl(this.doc,o,i,r,n)).hitSide;++l);return o},moveH:Qn(function(e,t){var r=this;this.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?Fl(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()},X)}),deleteH:Qn(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection(\"\",null,\"+delete\"):qo(this,function(r){var i=Fl(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=1,o=n;t<0&&(i=-1,t=-t);for(var l=at(this.doc,e),s=0;s<t;++s){var a=_r(this,l,\"div\");if(null==o?o=a.left:a.left=o,(l=El(this,a,i,r)).hitSide)break}return l},moveV:Qn(function(e,t){var r=this,n=this.doc,i=[],o=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(l){if(o)return e<0?l.from():l.to();var s=_r(r,l.head,\"div\");null!=l.goalColumn&&(s.left=l.goalColumn),i.push(s.left);var a=El(r,s,e,t);return\"page\"==t&&l==n.sel.primary()&&On(r,Xr(r,a,\"div\").top-s.top),a},X),i.length)for(var l=0;l<n.sel.ranges.length;l++)n.sel.ranges[l].goalColumn=i[l]}),findWordAt:function(e){var t=_e(this.doc,e.line).text,r=e.ch,n=e.ch;if(t){var i=this.getHelper(e,\"wordChars\");\"before\"!=e.sticky&&n!=t.length||!r?++n:--r;for(var o=t.charAt(r),l=re(o,i)?function(e){return re(e,i)}:/\\s/.test(o)?function(e){return/\\s/.test(e)}:function(e){return!/\\s/.test(e)&&!re(e)};r>0&&l(t.charAt(r-1));)--r;for(;n<t.length&&l(t.charAt(n));)++n}return new xi(tt(e.line,r),tt(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?P(this.display.cursorDiv,\"CodeMirror-overwrite\"):T(this.display.cursorDiv,\"CodeMirror-overwrite\"),me(this,\"overwriteToggle\",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==H()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Qn(function(e,t){Dn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Lr(this)-this.display.barHeight,width:e.scrollWidth-Lr(this)-this.display.barWidth,clientHeight:Nr(this),clientWidth:Tr(this)}},scrollIntoView:Qn(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):\"number\"==typeof e?e={from:tt(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Wn(e),e.curOp.scrollToPos=t}(this,e):Hn(this,e.from,e.to,e.margin)}),setSize:Qn(function(e,t){var r=this,n=function(e){return\"number\"==typeof e||/^\\d+$/.test(String(e))?e+\"px\":e};null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&Rr(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){fn(r,i,\"widget\");break}++i}),this.curOp.forceUpdate=!0,me(this,\"refresh\",this)}),operation:function(e){return Zn(this,e)},startOperation:function(){return Kn(this)},endOperation:function(){return Xn(this)},refresh:Qn(function(){var e=this.display.cachedTextHeight;cn(this),this.curOp.forceUpdate=!0,Br(this),Dn(this,this.doc.scrollLeft,this.doc.scrollTop),si(this.display),(null==e||Math.abs(e-tn(this.display))>.5)&&sn(this),me(this,\"refresh\",this)}),swapDoc:Qn(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Hi(this,e),Br(this),this.display.input.reset(),Dn(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ar(this,\"swapDoc\",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},we(e),e.registerHelper=function(t,n,i){r.hasOwnProperty(t)||(r[t]=e[t]={_global:[]}),r[t][n]=i},e.registerGlobalHelper=function(t,n,i,o){e.registerHelper(t,n,o),r[t]._global.push({pred:i,val:o})}}(Ml);var jl=\"iter insert remove copy getEditor constructor\".split(\" \");for(var Kl in Oo.prototype)Oo.prototype.hasOwnProperty(Kl)&&G(jl,Kl)<0&&(Ml.prototype[Kl]=function(e){return function(){return e.apply(this.doc,arguments)}}(Oo.prototype[Kl]));return we(Oo),Ml.inputStyles={textarea:Vl,contenteditable:Il},Ml.defineMode=function(e){Ml.defaults.mode||\"null\"==e||(Ml.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ee[e]=t}.apply(this,arguments)},Ml.defineMIME=function(e,t){Ie[e]=t},Ml.defineMode(\"null\",function(){return{token:function(e){return e.skipToEnd()}}}),Ml.defineMIME(\"text/plain\",\"null\"),Ml.defineExtension=function(e,t){Ml.prototype[e]=t},Ml.defineDocExtension=function(e,t){Oo.prototype[e]=t},Ml.fromTextArea=function(e,t){if((t=t?I(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=H();t.autofocus=r==e||null!=e.getAttribute(\"autofocus\")&&r==document.body}function n(){e.value=s.getValue()}var i;if(e.form&&(he(e.form,\"submit\",n),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var l=o.submit=function(){n(),o.submit=i,o.submit(),o.submit=l}}catch(We){}}t.finishInit=function(r){r.save=n,r.getTextArea=function(){return e},r.toTextArea=function(){r.toTextArea=isNaN,n(),e.parentNode.removeChild(r.getWrapperElement()),e.style.display=\"\",e.form&&(ge(e.form,\"submit\",n),t.leaveSubmitMethodAlone||\"function\"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display=\"none\";var s=Ml(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s},function(e){e.off=ge,e.on=he,e.wheelEventPixels=yi,e.Doc=Oo,e.splitLines=He,e.countColumn=R,e.findColumn=_,e.isWordChar=te,e.Pass=V,e.signal=me,e.Line=_t,e.changeEnd=ki,e.scrollbarModel=Un,e.Pos=tt,e.cmpPos=rt,e.modes=Ee,e.mimeModes=Ie,e.resolveMode=Re,e.getMode=Be,e.modeExtensions=Ge,e.extendMode=Ue,e.copyState=Ve,e.startState=Ke,e.innerMode=je,e.commands=Qo,e.keyMap=Go,e.keyName=_o,e.isModifierKey=Ko,e.lookupKey=jo,e.normalizeKeyMap=Vo,e.StringStream=Xe,e.SharedTextMarker=Mo,e.TextMarker=So,e.LineWidget=wo,e.e_preventDefault=xe,e.e_stopPropagation=Ce,e.e_stop=ke,e.addClass=P,e.contains=W,e.rmClass=T,e.keyNames=Eo}(Ml),Ml.version=\"5.49.0\",Ml},\"object\"===l(t)&&void 0!==e?e.exports=o():void 0===(i=\"function\"==typeof(n=o)?n.call(t,r,t,e):n)||(e.exports=i)},671:function(e,t,r){\"use strict\";t.a=\"/* BASICS */\\n\\n.CodeMirror {\\n  /* Set height, width, borders, and global font properties here */\\n  font-family: monospace;\\n  height: 300px;\\n  color: black;\\n  direction: ltr;\\n}\\n\\n/* PADDING */\\n\\n.CodeMirror-lines {\\n  padding: 4px 0; /* Vertical padding around content */\\n}\\n.CodeMirror pre.CodeMirror-line,\\n.CodeMirror pre.CodeMirror-line-like {\\n  padding: 0 4px; /* Horizontal padding of content */\\n}\\n\\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\\n  background-color: white; /* The little square between H and V scrollbars */\\n}\\n\\n/* GUTTER */\\n\\n.CodeMirror-gutters {\\n  border-right: 1px solid #ddd;\\n  background-color: #f7f7f7;\\n  white-space: nowrap;\\n}\\n.CodeMirror-linenumbers {}\\n.CodeMirror-linenumber {\\n  padding: 0 3px 0 5px;\\n  min-width: 20px;\\n  text-align: right;\\n  color: #999;\\n  white-space: nowrap;\\n}\\n\\n.CodeMirror-guttermarker { color: black; }\\n.CodeMirror-guttermarker-subtle { color: #999; }\\n\\n/* CURSOR */\\n\\n.CodeMirror-cursor {\\n  border-left: 1px solid black;\\n  border-right: none;\\n  width: 0;\\n}\\n/* Shown when moving in bi-directional text */\\n.CodeMirror div.CodeMirror-secondarycursor {\\n  border-left: 1px solid silver;\\n}\\n.cm-fat-cursor .CodeMirror-cursor {\\n  width: auto;\\n  border: 0 !important;\\n  background: #7e7;\\n}\\n.cm-fat-cursor div.CodeMirror-cursors {\\n  z-index: 1;\\n}\\n.cm-fat-cursor-mark {\\n  background-color: rgba(20, 255, 20, 0.5);\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  -moz-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n}\\n.cm-animate-fat-cursor {\\n  width: auto;\\n  border: 0;\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  -moz-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n  background-color: #7e7;\\n}\\n@-moz-keyframes blink {\\n  0% {}\\n  50% { background-color: transparent; }\\n  100% {}\\n}\\n@-webkit-keyframes blink {\\n  0% {}\\n  50% { background-color: transparent; }\\n  100% {}\\n}\\n@keyframes blink {\\n  0% {}\\n  50% { background-color: transparent; }\\n  100% {}\\n}\\n\\n/* Can style cursor different in overwrite (non-insert) mode */\\n.CodeMirror-overwrite .CodeMirror-cursor {}\\n\\n.cm-tab { display: inline-block; text-decoration: inherit; }\\n\\n.CodeMirror-rulers {\\n  position: absolute;\\n  left: 0; right: 0; top: -50px; bottom: 0;\\n  overflow: hidden;\\n}\\n.CodeMirror-ruler {\\n  border-left: 1px solid #ccc;\\n  top: 0; bottom: 0;\\n  position: absolute;\\n}\\n\\n/* DEFAULT THEME */\\n\\n.cm-s-default .cm-header {color: blue;}\\n.cm-s-default .cm-quote {color: #090;}\\n.cm-negative {color: #d44;}\\n.cm-positive {color: #292;}\\n.cm-header, .cm-strong {font-weight: bold;}\\n.cm-em {font-style: italic;}\\n.cm-link {text-decoration: underline;}\\n.cm-strikethrough {text-decoration: line-through;}\\n\\n.cm-s-default .cm-keyword {color: #708;}\\n.cm-s-default .cm-atom {color: #219;}\\n.cm-s-default .cm-number {color: #164;}\\n.cm-s-default .cm-def {color: #00f;}\\n.cm-s-default .cm-variable,\\n.cm-s-default .cm-punctuation,\\n.cm-s-default .cm-property,\\n.cm-s-default .cm-operator {}\\n.cm-s-default .cm-variable-2 {color: #05a;}\\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\\n.cm-s-default .cm-comment {color: #a50;}\\n.cm-s-default .cm-string {color: #a11;}\\n.cm-s-default .cm-string-2 {color: #f50;}\\n.cm-s-default .cm-meta {color: #555;}\\n.cm-s-default .cm-qualifier {color: #555;}\\n.cm-s-default .cm-builtin {color: #30a;}\\n.cm-s-default .cm-bracket {color: #997;}\\n.cm-s-default .cm-tag {color: #170;}\\n.cm-s-default .cm-attribute {color: #00c;}\\n.cm-s-default .cm-hr {color: #999;}\\n.cm-s-default .cm-link {color: #00c;}\\n\\n.cm-s-default .cm-error {color: #f00;}\\n.cm-invalidchar {color: #f00;}\\n\\n.CodeMirror-composing { border-bottom: 2px solid; }\\n\\n/* Default styles for common addons */\\n\\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\\n.CodeMirror-activeline-background {background: #e8f2ff;}\\n\\n/* STOP */\\n\\n/* The rest of this file contains styles related to the mechanics of\\n   the editor. You probably shouldn't touch them. */\\n\\n.CodeMirror {\\n  position: relative;\\n  overflow: hidden;\\n  background: white;\\n}\\n\\n.CodeMirror-scroll {\\n  overflow: scroll !important; /* Things will break if this is overridden */\\n  /* 30px is the magic margin used to hide the element's real scrollbars */\\n  /* See overflow: hidden in .CodeMirror */\\n  margin-bottom: -30px; margin-right: -30px;\\n  padding-bottom: 30px;\\n  height: 100%;\\n  outline: none; /* Prevent dragging from highlighting the element */\\n  position: relative;\\n}\\n.CodeMirror-sizer {\\n  position: relative;\\n  border-right: 30px solid transparent;\\n}\\n\\n/* The fake, visible scrollbars. Used to force redraw during scrolling\\n   before actual scrolling happens, thus preventing shaking and\\n   flickering artifacts. */\\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\\n  position: absolute;\\n  z-index: 6;\\n  display: none;\\n}\\n.CodeMirror-vscrollbar {\\n  right: 0; top: 0;\\n  overflow-x: hidden;\\n  overflow-y: scroll;\\n}\\n.CodeMirror-hscrollbar {\\n  bottom: 0; left: 0;\\n  overflow-y: hidden;\\n  overflow-x: scroll;\\n}\\n.CodeMirror-scrollbar-filler {\\n  right: 0; bottom: 0;\\n}\\n.CodeMirror-gutter-filler {\\n  left: 0; bottom: 0;\\n}\\n\\n.CodeMirror-gutters {\\n  position: absolute; left: 0; top: 0;\\n  min-height: 100%;\\n  z-index: 3;\\n}\\n.CodeMirror-gutter {\\n  white-space: normal;\\n  height: 100%;\\n  display: inline-block;\\n  vertical-align: top;\\n  margin-bottom: -30px;\\n}\\n.CodeMirror-gutter-wrapper {\\n  position: absolute;\\n  z-index: 4;\\n  background: none !important;\\n  border: none !important;\\n}\\n.CodeMirror-gutter-background {\\n  position: absolute;\\n  top: 0; bottom: 0;\\n  z-index: 4;\\n}\\n.CodeMirror-gutter-elt {\\n  position: absolute;\\n  cursor: default;\\n  z-index: 4;\\n}\\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\\n\\n.CodeMirror-lines {\\n  cursor: text;\\n  min-height: 1px; /* prevents collapsing before first draw */\\n}\\n.CodeMirror pre.CodeMirror-line,\\n.CodeMirror pre.CodeMirror-line-like {\\n  /* Reset some styles that the rest of the page might have set */\\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\\n  border-width: 0;\\n  background: transparent;\\n  font-family: inherit;\\n  font-size: inherit;\\n  margin: 0;\\n  white-space: pre;\\n  word-wrap: normal;\\n  line-height: inherit;\\n  color: inherit;\\n  z-index: 2;\\n  position: relative;\\n  overflow: visible;\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-font-variant-ligatures: contextual;\\n  font-variant-ligatures: contextual;\\n}\\n.CodeMirror-wrap pre.CodeMirror-line,\\n.CodeMirror-wrap pre.CodeMirror-line-like {\\n  word-wrap: break-word;\\n  white-space: pre-wrap;\\n  word-break: normal;\\n}\\n\\n.CodeMirror-linebackground {\\n  position: absolute;\\n  left: 0; right: 0; top: 0; bottom: 0;\\n  z-index: 0;\\n}\\n\\n.CodeMirror-linewidget {\\n  position: relative;\\n  z-index: 2;\\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\\n}\\n\\n.CodeMirror-widget {}\\n\\n.CodeMirror-rtl pre { direction: rtl; }\\n\\n.CodeMirror-code {\\n  outline: none;\\n}\\n\\n/* Force content-box sizing for the elements where we expect it */\\n.CodeMirror-scroll,\\n.CodeMirror-sizer,\\n.CodeMirror-gutter,\\n.CodeMirror-gutters,\\n.CodeMirror-linenumber {\\n  -moz-box-sizing: content-box;\\n  box-sizing: content-box;\\n}\\n\\n.CodeMirror-measure {\\n  position: absolute;\\n  width: 100%;\\n  height: 0;\\n  overflow: hidden;\\n  visibility: hidden;\\n}\\n\\n.CodeMirror-cursor {\\n  position: absolute;\\n  pointer-events: none;\\n}\\n.CodeMirror-measure pre { position: static; }\\n\\ndiv.CodeMirror-cursors {\\n  visibility: hidden;\\n  position: relative;\\n  z-index: 3;\\n}\\ndiv.CodeMirror-dragcursors {\\n  visibility: visible;\\n}\\n\\n.CodeMirror-focused div.CodeMirror-cursors {\\n  visibility: visible;\\n}\\n\\n.CodeMirror-selected { background: #d9d9d9; }\\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\\n.CodeMirror-crosshair { cursor: crosshair; }\\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\\n\\n.cm-searching {\\n  background-color: #ffa;\\n  background-color: rgba(255, 255, 0, .4);\\n}\\n\\n/* Used to force a border model for a node */\\n.cm-force-border { padding-right: .1px; }\\n\\n@media print {\\n  /* Hide the cursor when printing */\\n  .CodeMirror div.CodeMirror-cursors {\\n    visibility: hidden;\\n  }\\n}\\n\\n/* See issue #2901 */\\n.cm-tab-wrap-hack:after { content: ''; }\\n\\n/* Help users use markselection to safely style text background */\\nspan.CodeMirror-selectedtext { background: none; }\\n\"},672:function(e,t,r){(function(e){var n,i,o,l;function s(e){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}l=function(e){\"use strict\";e.defineMode(\"yaml\",function(){var e=new RegExp(\"\\\\b((\"+[\"true\",\"false\",\"on\",\"off\",\"yes\",\"no\"].join(\")|(\")+\"))$\",\"i\");return{token:function(t,r){var n=t.peek(),i=r.escaped;if(r.escaped=!1,\"#\"==n&&(0==t.pos||/\\s/.test(t.string.charAt(t.pos-1))))return t.skipToEnd(),\"comment\";if(t.match(/^('([^']|\\\\.)*'?|\"([^\"]|\\\\.)*\"?)/))return\"string\";if(r.literal&&t.indentation()>r.keyCol)return t.skipToEnd(),\"string\";if(r.literal&&(r.literal=!1),t.sol()){if(r.keyCol=0,r.pair=!1,r.pairStart=!1,t.match(/---/))return\"def\";if(t.match(/\\.\\.\\./))return\"def\";if(t.match(/\\s*-\\s+/))return\"meta\"}if(t.match(/^(\\{|\\}|\\[|\\])/))return\"{\"==n?r.inlinePairs++:\"}\"==n?r.inlinePairs--:\"[\"==n?r.inlineList++:r.inlineList--,\"meta\";if(r.inlineList>0&&!i&&\",\"==n)return t.next(),\"meta\";if(r.inlinePairs>0&&!i&&\",\"==n)return r.keyCol=0,r.pair=!1,r.pairStart=!1,t.next(),\"meta\";if(r.pairStart){if(t.match(/^\\s*(\\||\\>)\\s*/))return r.literal=!0,\"meta\";if(t.match(/^\\s*(\\&|\\*)[a-z0-9\\._-]+\\b/i))return\"variable-2\";if(0==r.inlinePairs&&t.match(/^\\s*-?[0-9\\.\\,]+\\s?$/))return\"number\";if(r.inlinePairs>0&&t.match(/^\\s*-?[0-9\\.\\,]+\\s?(?=(,|}))/))return\"number\";if(t.match(e))return\"keyword\"}return!r.pair&&t.match(/^\\s*(?:[,\\[\\]{}&*!|>'\"%@`][^\\s'\":]|[^,\\[\\]{}#&*!|>'\"%@`])[^#]*?(?=\\s*:($|\\s))/)?(r.pair=!0,r.keyCol=t.indentation(),\"atom\"):r.pair&&t.match(/^:\\s*/)?(r.pairStart=!0,\"meta\"):(r.pairStart=!1,r.escaped=\"\\\\\"==n,t.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},lineComment:\"#\",fold:\"indent\"}}),e.defineMIME(\"text/x-yaml\",\"yaml\"),e.defineMIME(\"text/yaml\",\"yaml\")},\"object\"==s(t)&&\"object\"==s(e)?l(r(384)):(i=[r(384)],void 0===(o=\"function\"==typeof(n=l)?n.apply(t,i):n)||(e.exports=o))}).call(this,r(149)(e))},673:function(e,t,r){(function(e){var n,i,o,l;function s(e){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}l=function(e){\"use strict\";e.defineMode(\"jinja2\",function(){var e=[\"and\",\"as\",\"block\",\"endblock\",\"by\",\"cycle\",\"debug\",\"else\",\"elif\",\"extends\",\"filter\",\"endfilter\",\"firstof\",\"for\",\"endfor\",\"if\",\"endif\",\"ifchanged\",\"endifchanged\",\"ifequal\",\"endifequal\",\"ifnotequal\",\"endifnotequal\",\"in\",\"include\",\"load\",\"not\",\"now\",\"or\",\"parsed\",\"regroup\",\"reversed\",\"spaceless\",\"endspaceless\",\"ssi\",\"templatetag\",\"openblock\",\"closeblock\",\"openvariable\",\"closevariable\",\"openbrace\",\"closebrace\",\"opencomment\",\"closecomment\",\"widthratio\",\"url\",\"with\",\"endwith\",\"get_current_language\",\"trans\",\"endtrans\",\"noop\",\"blocktrans\",\"endblocktrans\",\"get_available_languages\",\"get_current_language_bidi\",\"plural\"],t=/^[+\\-*&%=<>!?|~^]/,r=/^[:\\[\\(\\{]/,n=[\"true\",\"false\"],i=/^(\\d[+\\-\\*\\/])?\\d+(\\.\\d+)?/;function o(o,l){var s=o.peek();if(l.incomment)return o.skipTo(\"#}\")?(o.eatWhile(/\\#|}/),l.incomment=!1):o.skipToEnd(),\"comment\";if(l.intag){if(l.operator){if(l.operator=!1,o.match(n))return\"atom\";if(o.match(i))return\"number\"}if(l.sign){if(l.sign=!1,o.match(n))return\"atom\";if(o.match(i))return\"number\"}if(l.instring)return s==l.instring&&(l.instring=!1),o.next(),\"string\";if(\"'\"==s||'\"'==s)return l.instring=s,o.next(),\"string\";if(o.match(l.intag+\"}\")||o.eat(\"-\")&&o.match(l.intag+\"}\"))return l.intag=!1,\"tag\";if(o.match(t))return l.operator=!0,\"operator\";if(o.match(r))l.sign=!0;else if(o.eat(\" \")||o.sol()){if(o.match(e))return\"keyword\";if(o.match(n))return\"atom\";if(o.match(i))return\"number\";o.sol()&&o.next()}else o.next();return\"variable\"}if(o.eat(\"{\")){if(o.eat(\"#\"))return l.incomment=!0,o.skipTo(\"#}\")?(o.eatWhile(/\\#|}/),l.incomment=!1):o.skipToEnd(),\"comment\";if(s=o.eat(/\\{|%/))return l.intag=s,\"{\"==s&&(l.intag=\"}\"),o.eat(\"-\"),\"tag\"}o.next()}return e=new RegExp(\"((\"+e.join(\")|(\")+\"))\\\\b\"),n=new RegExp(\"((\"+n.join(\")|(\")+\"))\\\\b\"),{startState:function(){return{tokenize:o}},token:function(e,t){return t.tokenize(e,t)},blockCommentStart:\"{#\",blockCommentEnd:\"#}\"}}),e.defineMIME(\"text/jinja2\",\"jinja2\")},\"object\"==s(t)&&\"object\"==s(e)?l(r(384)):(i=[r(384)],void 0===(o=\"function\"==typeof(n=l)?n.apply(t,i):n)||(e.exports=o))}).call(this,r(149)(e))}}]);","extractedComments":[]}