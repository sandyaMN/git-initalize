{"version":3,"sources":["webpack:///./node_modules/@polymer/iron-input/iron-input.js","webpack:///./node_modules/@polymer/paper-item/paper-item-behavior.js","webpack:///./node_modules/@polymer/paper-item/paper-item-shared-styles.js","webpack:///./src/mixins/localize-mixin.js","webpack:///./src/common/entity/compute_state_name.ts","webpack:///./src/common/entity/domain_icon.ts","webpack:///./src/components/ha-icon.ts","webpack:///./src/mixins/events-mixin.js","webpack:///./src/common/entity/compute_state_domain.ts","webpack:///./node_modules/@polymer/iron-flex-layout/iron-flex-layout-classes.js","webpack:///./node_modules/@polymer/paper-item/paper-item-body.js","webpack:///./node_modules/@polymer/paper-spinner/paper-spinner.js","webpack:///./src/components/entity/state-badge.ts","webpack:///./src/common/entity/compute_object_id.ts","webpack:///./node_modules/@polymer/paper-item/paper-icon-item.js","webpack:///./src/common/entity/sensor_icon.ts","webpack:///./src/common/entity/state_icon.ts","webpack:///./src/common/entity/binary_sensor_icon.ts","webpack:///./src/common/entity/cover_icon.ts","webpack:///./src/common/entity/input_dateteime_icon.ts","webpack:///./src/components/entity/ha-entity-picker.ts","webpack:///./node_modules/fecha/src/fecha.js","webpack:///./node_modules/@polymer/app-layout/app-header-layout/app-header-layout.js","webpack:///./src/common/datetime/format_time.ts","webpack:///./src/common/datetime/format_date.ts","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/material/vaadin-date-picker-overlay-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay.js","webpack:///./node_modules/@vaadin/vaadin-button/theme/material/vaadin-button-styles.js","webpack:///./node_modules/@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js","webpack:///./node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","webpack:///./node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics-collect.js","webpack:///./node_modules/@vaadin/vaadin-element-mixin/vaadin-element-mixin.js","webpack:///./node_modules/@vaadin/vaadin-button/src/vaadin-button.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/material/vaadin-date-picker-overlay-content-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-helper.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-month-calendar.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-infinite-scroller.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay-content.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/material/vaadin-month-calendar-styles.js","webpack:///./node_modules/@vaadin/vaadin-material-styles/mixins/required-field.js","webpack:///./node_modules/@vaadin/vaadin-material-styles/mixins/field-button.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/material/vaadin-text-field-styles.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field-mixin.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/material/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-mixin.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker.js","webpack:///./src/resources/ha-date-picker-style.js","webpack:///./src/panels/logbook/ha-logbook-data.js","webpack:///./src/panels/logbook/ha-logbook.js","webpack:///./src/panels/logbook/ha-panel-logbook.js","webpack:///./node_modules/@polymer/paper-input/paper-input.js","webpack:///./node_modules/@polymer/iron-a11y-announcer/iron-a11y-announcer.js"],"names":["Polymer","_template","html","_templateObject","is","behaviors","IronValidatableBehavior","properties","bindValue","type","String","value","computed","allowedPattern","autoValidate","Boolean","_inputElement","Object","observers","listeners","input","keypress","created","IronA11yAnnouncer","requestAvailability","this","_previousValidInput","_patternAlreadyChecked","attached","_observer","dom","observeNodes","info","_initSlottedInput","bind","detached","unobserveNodes","inputElement","getEffectiveChildren","fire","_patternRegExp","pattern","RegExp","_bindValueChanged","undefined","validate","_onInput","_checkPatternValidity","_announceInvalidCharacter","_isPrintable","event","anyNonPrintable","keyCode","mozNonPrintable","charCode","_onKeypress","regexp","metaKey","ctrlKey","altKey","thisChar","fromCharCode","test","preventDefault","i","length","invalid","valid","checkValidity","required","hasValidator","call","message","text","_computeValue","__webpack_require__","d","__webpack_exports__","PaperItemBehavior","_polymer_iron_behaviors_iron_button_state_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_iron_behaviors_iron_control_state_js__WEBPACK_IMPORTED_MODULE_2__","IronButtonState","IronControlState","hostAttributes","role","tabindex","$_documentContainer","document","createElement","setAttribute","innerHTML","head","appendChild","content","dedupingMixin","superClass","_superClass","_class","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","apply","arguments","_inherits","key","get","hass","localize","Function","computeStateName","_compute_object_id__WEBPACK_IMPORTED_MODULE_0__","stateObj","attributes","friendly_name","computeObjectId","entity_id","replace","domainIcon","_const__WEBPACK_IMPORTED_MODULE_0__","fixedIcons","alert","alexa","automation","calendar","camera","climate","configurator","conversation","counter","device_tracker","fan","google_assistant","group","history_graph","homeassistant","homekit","image_processing","input_boolean","input_datetime","input_number","input_select","input_text","light","mailbox","notify","persistent_notification","person","plant","proximity","remote","scene","script","sensor","simple_alarm","sun","switch","timer","updater","vacuum","water_heater","weather","weblink","zone","domain","state","console","warn","DEFAULT_DOMAIN_ICON","ironIconClass","customElements","loaded","HaIcon","_ironIconClass","_getPrototypeOf2","_this","_len","args","Array","_key","concat","_assertThisInitialized","node","eventName","methodName","_get","prototype","_iconsetName","e","then","define","EventsMixin","detail","options","fireEvent","computeStateDomain","_compute_domain__WEBPACK_IMPORTED_MODULE_0__","computeDomain","template","PaperSpinnerBehavior","StateBadge","property","query","_templateObject2","overrideIcon","stateIcon","changedProps","has","iconStyle","color","filter","hostStyle","backgroundImage","entity_picture","overrideImage","imageUrl","hassUrl","display","hs_color","hue","sat","brightness","errorMessage","_typeof","assign","_icon","style","css","_templateObject3","LitElement","entityId","substr","indexOf","fixedDeviceClassIcons","humidity","illuminance","temperature","pressure","power","signal_strength","state_icon_stateIcon","domainIcons","binary_sensor","activated","device_class","cover","open","dclass","battery","Number","isNaN","batteryRound","Math","round","unit","unit_of_measurement","UNIT_C","UNIT_F","has_date","has_time","icon","rowRenderer","root","_owner","model","firstElementChild","querySelector","item","textContent","HaEntityPicker","attribute","memoizeOne","includeDomains","excludeDomains","entityFilter","includeDeviceClasses","states","entityIds","keys","eid","includes","sort","map","_this2","_opened","_hass","_getStates","_value","allowCustomEntity","_openedChanged","_valueChanged","autofocus","label","disabled","_clearValue","ev","stopPropagation","_setValue","newValue","_this3","setTimeout","_templateObject4","fecha","token","word","literal","noop","shorten","arr","sLen","newArr","len","push","monthUpdate","arrName","v","i18n","index","charAt","toUpperCase","toLowerCase","month","pad","val","dayNames","monthNames","monthNamesShort","dayNamesShort","amPm","DoFn","D","formatFlags","dateObj","getDate","DD","Do","getDay","dd","ddd","dddd","M","getMonth","MM","MMM","MMMM","YY","getFullYear","YYYY","h","getHours","hh","H","HH","m","getMinutes","mm","s","getSeconds","ss","S","getMilliseconds","SS","SSS","a","A","ZZ","o","getTimezoneOffset","floor","abs","parseFlags","day","parseInt","cent","Date","year","hour","minute","second","millisecond","isPm","minutes","parts","match","timezoneOffset","masks","default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","format","mask","i18nSettings","toString","getTime","Error","literals","$0","$1","slice","shift","parse","dateStr","str","dateInfo","parseInfo","newFormat","matches","date","today","UTC","AppLayoutBehavior","hasScrollingRegion","reflectToAttribute","header","$","headerSlot","getDistributedNodes","_updateLayoutStates","isAttached","wrapper","classList","remove","scrollTarget","contentContainer","ownerDocument","documentElement","headerHeight","offsetHeight","left","right","requestAnimationFrame","rect","getBoundingClientRect","rightOffset","clientWidth","containerStyle","fixed","condenses","marginTop","paddingTop","fecha__WEBPACK_IMPORTED_MODULE_0__","toLocaleTimeStringSupportsOptions","toLocaleTimeString","name","locales","toLocaleDateStringSupportsOptions","toLocaleDateString","DatePickerOverlayElement","DisableUpgradeMixin","OverlayElement","vaadin_button_styles_templateObject","TabIndexMixin","VaadinTabIndexMixin","vaadin_control_state_mixin_classCallCheck","vaadin_control_state_mixin_possibleConstructorReturn","vaadin_control_state_mixin_getPrototypeOf","vaadin_control_state_mixin_inherits","vaadin_control_state_mixin_createClass","observer","window","ShadyDOM","ControlStateMixin","_TabIndexMixin","VaadinControlStateMixin","addEventListener","composedPath","_focus","focusElement","_setFocused","ensureEventComposed","composed","target","dispatchEvent","CustomEvent","bubbles","cancelable","shadowRoot","defaultPrevented","shiftKey","_isShiftTabbing","HTMLElement","focus","firefox","navigator","userAgent","parseFloat","parentNode","nextSibling","fakeTarget","position","opacity","tabIndex","insertBefore","removeChild","focused","_boundKeydownListener","_bodyKeydownListener","_boundKeyupListener","_bodyKeyupListener","body","removeEventListener","hasAttribute","removeAttribute","_tabPressed","blur","_previousTabIndex","setProperties","localName","DEV_MODE_CODE_REGEXP","FlowClients","Vaadin","Flow","clients","uncommentAndRun","callback","exec","log","runIfDevelopmentMode","developmentMode","maybeGatherAndSendStats","localStorage","getItem","location","hostname","productionModeApps","client","productionMode","isFlowProductionMode","isDevelopmentMode","statsJob","usageStatistics","registrations","developmentModeCallback","registered","Set","ElementMixin","VaadinElementMixin","vaadin_element_mixin_classCallCheck","vaadin_element_mixin_possibleConstructorReturn","vaadin_element_mixin_getPrototypeOf","doctype","vaadin_element_mixin_inherits","vaadin_element_mixin_get","add","Debouncer","debounce","idlePeriod","enqueueDebouncer","ButtonElement","ThemableMixin","GestureEventListeners","PolymerElement","vaadin_button_templateObject","vaadin_button_get","vaadin_button_getPrototypeOf","button","_addActiveListeners","addListener","vaadin_date_picker_overlay_content_styles_templateObject","DatePickerHelper","VaadinDatePickerHelper","vaadin_date_picker_helper_classCallCheck","dayOfWeek","nearestThursdayDiff","nearestThursday","firstOfJanuary","setFullYear","timeDiff","daysSinceFirstOfJanuary","date1","date2","min","max","dates","reduce","closestDate","candidate","MonthCalendarElement","vaadin_month_calendar_templateObject","selectedDate","focusedDate","showWeekNumbers","ignoreTaps","_notTapping","minDate","maxDate","_days","_dateEquals","_dateAllowed","firstDate","setMonth","setDate","lastDate","formatTitle","delta","weekDayNames","firstDayOfWeek","weekDayNamesShort","_applyFirstDayOfWeek","weekDay","weekDayShort","_dateAdd","days","startMonth","targetMonth","acc","_getISOWeekNumber","_getWeekNumber","week","ariaLabel","_getDate","weekdays","_isToday","InfiniteScrollerElement","vaadin_infinite_scroller_templateObject","bufferSize","_initialScroll","_initialIndex","_buffers","_preventScrollEvent","_mayHaveMomentum","_initialized","active","vaadin_infinite_scroller_get","vaadin_infinite_scroller_getPrototypeOf","querySelectorAll","fullHeight","height","tpl","_TemplateClass","templatize","forwardHostProp","prop","forEach","buffer","children","insertionPoint","_itemWrapper","instance","scroller","_createPool","_initDone","_ensureStampedInstance","translateY","_reset","up","_bufferHeight","transform","updated","reverse","_scrollDisabled","scrollTop","bufferOffset","offsetTop","upperThresholdReached","itemHeight","lowerThresholdReached","_translateBuffer","_updateClones","_debouncerScrollFinish","timeOut","after","scrollerRect","_isVisible","_debouncerUpdateClones","_this4","container","_loop","itemWrapper","slotName","_contentIndex","flush","afterNextRender","_finishInit","tmpInstance","set","viewPortOnly","_this5","_firstIndex","bufferIndex","firstIndex","element","bottom","top","_this6","_itemHeightVal","ShadyCSS","nativeCss","updateStyles","getComputedStyleValue","getComputedStyle","getPropertyValue","setProperty","itemHeightPx","removeProperty","DatePickerOverlayContentElement","ThemePropertyMixin","vaadin_date_picker_overlay_content_templateObject","_focusedMonthDate","initialPosition","_originDate","_visibleMonthIndex","_desktopMode","_translateX","_yearScrollerWidth","_ignoreTaps","_focused","vaadin_date_picker_overlay_content_get","vaadin_date_picker_overlay_content_getPrototypeOf","_onKeydown","_stopPropagation","_onOverlayFocus","_onOverlayBlur","_closeYearScroller","_toggleAnimateClass","setTouchAction","scrollers","_currentlyFocusedDate","announce","join","cancelButton","animate","_scrollToPosition","_differenceInMonths","revealDate","yearsFromNow","diff","scrolledAboveViewport","monthScroller","visibleItems","clientHeight","scrolledBelowViewport","scrollToDate","yearScroller","_repositionYearScroller","_doIgnoreTaps","_repositionMonthScroller","_debouncer","formatDate","_extractDateParts","_close","_scrollToCurrentMonth","yearDelta","y","targetPosition","_targetPosition","duration","start","smoothScroll","timestamp","t","b","c","currentTime","currentPos","oldPosition","range","dx","ddy","ddx","newTranslateX","_limit","_handleTrack","_openYearScroller","enable","_isYearScrollerVisible","x","result","months","_dateAfterXMonths","overlayContent","getRootNode","host","overlay","opened","k","IronA11yKeysBehavior","keyboardEventMatchesKeys","isToday","todayButton","isCancel","isScroller","eventKey","_eventKey","isFullscreen","isShift","_moveFocusByDays","_onTodayTap","_moveFocusInsideMonth","_moveFocusByMonths","_cancel","dateToFocus","_focusDate","_getClosestDate","_focusClosestDate","todayMidnight","vaadin_month_calendar_styles_templateObject","vaadin_text_field_styles_templateObject","HOST_PROPS","accessible","PROP_TYPE","DEFAULT","ACCESSIBLE","TextFieldMixin","subclass","_ControlStateMixin","VaadinTextFieldMixin","vaadin_text_field_mixin_classCallCheck","vaadin_text_field_mixin_possibleConstructorReturn","vaadin_text_field_mixin_getPrototypeOf","vaadin_text_field_mixin_inherits","autocomplete","autocorrect","autocapitalize","autoselect","clearButtonVisible","clear","maxlength","minlength","placeholder","readonly","hasValue","preventInvalidInput","_enabledCharPattern","_labelId","_errorId","_inputId","_createMethodObserver","__preventInput","stopImmediatePropagation","_inputDebouncer","__fromClearButton","__userInput","clearButton","_valueClearing","changeEvent","sourceEvent","newVal","oldVal","slotted","_slottedTagName","_slottedInput","_validateSlottedValue","_addInputListeners","_addIEListeners","_removeInputListeners","_removeIEListeners","_propagateHostAttributes","attr","attributesValues","_len2","_key2","attributeNames","_setOrToggleAttribute","_boundOnInput","_boundOnChange","_boundOnBlur","_boundOnFocus","_boundOnPaste","_boundOnDrop","_boundOnBeforeInput","vaadin_text_field_mixin_get","_createConstraintsObserver","_onChange","_onBlur","_onFocus","_onPaste","_onDrop","_onBeforeInput","defaultInput","_onSlotChange","_onClearButtonClick","_onKeyDown","uniqueId","_uniqueId","constructor","__observeOffsetHeight","select","setSelectionRange","inputEvent","Event","dispatchChange","__shouldAcceptKey","__enabledCharRegExp","pastedText","clipboardData","getData","__enabledTextRegExp","draggedText","dataTransfer","data","_shouldPreventInput","_createPropertyObserver","errorId","ids","sizePropertyName","previousSizePropertyName","_dispatchIronResizeEventIfNeeded","el","TextFieldElement","vaadin_text_field_templateObject","list","title","vaadin_date_picker_styles_templateObject","DatePickerMixin","_mixinBehaviors","VaadinDatePickerMixin","vaadin_date_picker_mixin_classCallCheck","vaadin_date_picker_mixin_possibleConstructorReturn","vaadin_date_picker_mixin_getPrototypeOf","vaadin_date_picker_mixin_inherits","mixinBehaviors","IronResizableBehavior","_selectedDate","_focusedDate","_fullscreen","_fullscreenMediaQuery","_touchPrevented","weekdaysShort","cancel","yearStr","parseDate","split","monthName","fullYear","_minDate","_maxDate","_noInput","_ios","_webkitOverflowScroll","webkitOverflowScrolling","_ignoreAnnounce","_focusOverlayOnOpen","_overlayInitialized","vaadin_date_picker_mixin_get","_boundOnScroll","_onScroll","_boundFocus","_boundUpdateAlignmentAndPosition","_updateAlignmentAndPosition","inputIndex","getAttribute","_preventDefault","_onUserInput","_overlayContent","_focusAndSelect","_onVaadinOverlayClose","close","fullscreen","ios","num","fmt","yearSign","yearFmt","yearAbs","_initOverlay","__userInputOccurred","__dispatchChange","inputValue","_formatISO","_inputValue","_ignoreFocusedDateChange","theme","overlayInitialized","oldValue","_parseDate","_handleDateChange","inputRect","bottomAlign","innerHeight","innerWidth","viewportWidth","viewportHeight","_openedWithFocusRing","parsedInitialPosition","_preventWebkitOverflowScrollingTouch","parentElement","oldInlineValue","prevented","dateObject","parsedDate","_isValidDate","_nativeInput","selectionStart","selectionEnd","inputValid","minMaxValid","inputValidity","contains","_setSelectionRange","focusCancel","_userInputValueChanged","announceFocusedDate","_input","unwrap","DatePickerElement","vaadin_date_picker_templateObject","_userInputValue","vaadin_date_picker_get","vaadin_date_picker_getPrototypeOf","i18nClear","documentContainer","DATA_CACHE","HaLogbookData","filterDate","filterPeriod","filterEntity","isLoading","readOnly","entries","newHass","oldHass","updateData","_setIsLoading","logbookEntries","_setEntries","period","entities","entity","_getFromServer","url","callApi","HaLogbook","LocalizeMixin","rtl","formatTime","language","change","current","base","previous","toDateString","computeRTL","HaPanelLogbook","ha_panel_logbook_templateObject","narrow","_currentDate","toISOString","_periodIndex","_entityId","datePicker","ha_panel_logbook_getPrototypeOf","picker","periodIndex","_setEntityId","refreshLogbook","PaperInputBehavior","IronFormElementBehavior","_focusableElement","iron-input-ready","_onIronInputReady","nativeInput","$$","_typesThatHaveText","alwaysFloatLabel","_handleValueAndAutoValidate","mode","_text","_onIronAnnounce","async"],"mappings":"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","file":"chunk.35211cb4884793a39fa1.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronA11yAnnouncer} from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport {IronValidatableBehavior} from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`<iron-input>` is a wrapper to a native `<input>` element, that adds two-way\nbinding and prevention of invalid input. To use it, you must distribute a native\n`<input>` yourself. You can continue to use the native `input` as you would\nnormally:\n\n    <iron-input>\n      <input>\n    </iron-input>\n\n    <iron-input>\n      <input type=\"email\" disabled>\n    </iron-input>\n\n### Two-way binding\n\nBy default you can only get notified of changes to a native `<input>`'s `value`\ndue to user input:\n\n    <input value=\"{{myValue::input}}\">\n\nThis means that if you imperatively set the value (i.e. `someNativeInput.value =\n'foo'`), no events will be fired and this change cannot be observed.\n\n`iron-input` adds the `bind-value` property that mirrors the native `input`'s\n'`value` property; this property can be used for two-way data binding.\n`bind-value` will notify if it is changed either by user input or by script.\n\n    <iron-input bind-value=\"{{myValue}}\">\n      <input>\n    </iron-input>\n\nNote: this means that if you want to imperatively set the native `input`'s, you\n_must_ set `bind-value` instead, so that the wrapper `iron-input` can be\nnotified.\n\n### Validation\n\n`iron-input` uses the native `input`'s validation. For simplicity, `iron-input`\nhas a `validate()` method (which internally just checks the distributed\n`input`'s validity), which sets an `invalid` attribute that can also be used for\nstyling.\n\nTo validate automatically as you type, you can use the `auto-validate`\nattribute.\n\n`iron-input` also fires an `iron-input-validate` event after `validate()` is\ncalled. You can use it to implement a custom validator:\n\n    var CatsOnlyValidator = {\n      validate: function(ironInput) {\n        var valid = !ironInput.bindValue || ironInput.bindValue === 'cat';\n        ironInput.invalid = !valid;\n        return valid;\n      }\n    }\n    ironInput.addEventListener('iron-input-validate', function() {\n      CatsOnly.validate(input2);\n    });\n\nYou can also use an element implementing an\n[`IronValidatorBehavior`](/element/PolymerElements/iron-validatable-behavior).\nThis example can also be found in the demo for this element:\n\n    <iron-input validator=\"cats-only\">\n      <input>\n    </iron-input>\n\n### Preventing invalid input\n\nIt may be desirable to only allow users to enter certain characters. You can use\nthe `allowed-pattern` attribute to accomplish this. This feature is separate\nfrom validation, and `allowed-pattern` does not affect how the input is\nvalidated.\n\n    // Only allow typing digits, but a valid input has exactly 5 digits.\n    <iron-input allowed-pattern=\"[0-9]\">\n      <input pattern=\"\\d{5}\">\n    </iron-input>\n\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n    </style>\n    <slot id=\"content\"></slot>\n`,\n\n  is: 'iron-input',\n  behaviors: [IronValidatableBehavior],\n\n  /**\n   * Fired whenever `validate()` is called.\n   *\n   * @event iron-input-validate\n   */\n\n  properties: {\n\n    /**\n     * Use this property instead of `value` for two-way data binding, or to\n     * set a default value for the input. **Do not** use the distributed\n     * input's `value` property to set a default value.\n     */\n    bindValue: {type: String, value: ''},\n\n    /**\n     * Computed property that echoes `bindValue` (mostly used for Polymer 1.0\n     * backcompatibility, if you were one-way binding to the Polymer 1.0\n     * `input is=\"iron-input\"` value attribute).\n     */\n    value: {type: String, computed: '_computeValue(bindValue)'},\n\n    /**\n     * Regex-like list of characters allowed as input; all characters not in the\n     * list will be rejected. The recommended format should be a list of allowed\n     * characters, for example, `[a-zA-Z0-9.+-!;:]`.\n     *\n     * This pattern represents the allowed characters for the field; as the user\n     * inputs text, each individual character will be checked against the\n     * pattern (rather than checking the entire value as a whole). If a\n     * character is not a match, it will be rejected.\n     *\n     * Pasted input will have each character checked individually; if any\n     * character doesn't match `allowedPattern`, the entire pasted string will\n     * be rejected.\n     *\n     * Note: if you were using `iron-input` in 1.0, you were also required to\n     * set `prevent-invalid-input`. This is no longer needed as of Polymer 2.0,\n     * and will be set automatically for you if an `allowedPattern` is provided.\n     *\n     */\n    allowedPattern: {type: String},\n\n    /**\n     * Set to true to auto-validate the input value as you type.\n     */\n    autoValidate: {type: Boolean, value: false},\n\n    /**\n     * The native input element.\n     */\n    _inputElement: Object,\n  },\n\n  observers: ['_bindValueChanged(bindValue, _inputElement)'],\n  listeners: {'input': '_onInput', 'keypress': '_onKeypress'},\n\n  created: function() {\n    IronA11yAnnouncer.requestAvailability();\n    this._previousValidInput = '';\n    this._patternAlreadyChecked = false;\n  },\n\n  attached: function() {\n    // If the input is added at a later time, update the internal reference.\n    this._observer = dom(this).observeNodes(function(info) {\n      this._initSlottedInput();\n    }.bind(this));\n  },\n\n  detached: function() {\n    if (this._observer) {\n      dom(this).unobserveNodes(this._observer);\n      this._observer = null;\n    }\n  },\n\n  /**\n   * Returns the distributed input element.\n   */\n  get inputElement() {\n    return this._inputElement;\n  },\n\n  _initSlottedInput: function() {\n    this._inputElement = this.getEffectiveChildren()[0];\n\n    if (this.inputElement && this.inputElement.value) {\n      this.bindValue = this.inputElement.value;\n    }\n\n    this.fire('iron-input-ready');\n  },\n\n  get _patternRegExp() {\n    var pattern;\n    if (this.allowedPattern) {\n      pattern = new RegExp(this.allowedPattern);\n    } else {\n      switch (this.inputElement.type) {\n        case 'number':\n          pattern = /[0-9.,e-]/;\n          break;\n      }\n    }\n    return pattern;\n  },\n\n  /**\n   * @suppress {checkTypes}\n   */\n  _bindValueChanged: function(bindValue, inputElement) {\n    // The observer could have run before attached() when we have actually\n    // initialized this property.\n    if (!inputElement) {\n      return;\n    }\n\n    if (bindValue === undefined) {\n      inputElement.value = null;\n    } else if (bindValue !== inputElement.value) {\n      this.inputElement.value = bindValue;\n    }\n\n    if (this.autoValidate) {\n      this.validate();\n    }\n\n    // manually notify because we don't want to notify until after setting value\n    this.fire('bind-value-changed', {value: bindValue});\n  },\n\n  _onInput: function() {\n    // Need to validate each of the characters pasted if they haven't\n    // been validated inside `_onKeypress` already.\n    if (this.allowedPattern && !this._patternAlreadyChecked) {\n      var valid = this._checkPatternValidity();\n      if (!valid) {\n        this._announceInvalidCharacter(\n            'Invalid string of characters not entered.');\n        this.inputElement.value = this._previousValidInput;\n      }\n    }\n    this.bindValue = this._previousValidInput = this.inputElement.value;\n    this._patternAlreadyChecked = false;\n  },\n\n  _isPrintable: function(event) {\n    // What a control/printable character is varies wildly based on the browser.\n    // - most control characters (arrows, backspace) do not send a `keypress`\n    // event\n    //   in Chrome, but the *do* on Firefox\n    // - in Firefox, when they do send a `keypress` event, control chars have\n    //   a charCode = 0, keyCode = xx (for ex. 40 for down arrow)\n    // - printable characters always send a keypress event.\n    // - in Firefox, printable chars always have a keyCode = 0. In Chrome, the\n    // keyCode\n    //   always matches the charCode.\n    // None of this makes any sense.\n\n    // For these keys, ASCII code == browser keycode.\n    var anyNonPrintable = (event.keyCode == 8) ||  // backspace\n        (event.keyCode == 9) ||                    // tab\n        (event.keyCode == 13) ||                   // enter\n        (event.keyCode == 27);                     // escape\n\n    // For these keys, make sure it's a browser keycode and not an ASCII code.\n    var mozNonPrintable = (event.keyCode == 19) ||  // pause\n        (event.keyCode == 20) ||                    // caps lock\n        (event.keyCode == 45) ||                    // insert\n        (event.keyCode == 46) ||                    // delete\n        (event.keyCode == 144) ||                   // num lock\n        (event.keyCode == 145) ||                   // scroll lock\n        (event.keyCode > 32 &&\n         event.keyCode < 41) ||  // page up/down, end, home, arrows\n        (event.keyCode > 111 && event.keyCode < 124);  // fn keys\n\n    return !anyNonPrintable && !(event.charCode == 0 && mozNonPrintable);\n  },\n\n  _onKeypress: function(event) {\n    if (!this.allowedPattern && this.inputElement.type !== 'number') {\n      return;\n    }\n    var regexp = this._patternRegExp;\n    if (!regexp) {\n      return;\n    }\n\n    // Handle special keys and backspace\n    if (event.metaKey || event.ctrlKey || event.altKey) {\n      return;\n    }\n\n    // Check the pattern either here or in `_onInput`, but not in both.\n    this._patternAlreadyChecked = true;\n\n    var thisChar = String.fromCharCode(event.charCode);\n    if (this._isPrintable(event) && !regexp.test(thisChar)) {\n      event.preventDefault();\n      this._announceInvalidCharacter(\n          'Invalid character ' + thisChar + ' not entered.');\n    }\n  },\n\n  _checkPatternValidity: function() {\n    var regexp = this._patternRegExp;\n    if (!regexp) {\n      return true;\n    }\n    for (var i = 0; i < this.inputElement.value.length; i++) {\n      if (!regexp.test(this.inputElement.value[i])) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Returns true if `value` is valid. The validator provided in `validator`\n   * will be used first, then any constraints.\n   * @return {boolean} True if the value is valid.\n   */\n  validate: function() {\n    if (!this.inputElement) {\n      this.invalid = false;\n      return true;\n    }\n\n    // Use the nested input's native validity.\n    var valid = this.inputElement.checkValidity();\n\n    // Only do extra checking if the browser thought this was valid.\n    if (valid) {\n      // Empty, required input is invalid\n      if (this.required && this.bindValue === '') {\n        valid = false;\n      } else if (this.hasValidator()) {\n        valid = IronValidatableBehavior.validate.call(this, this.bindValue);\n      }\n    }\n\n    this.invalid = !valid;\n    this.fire('iron-input-validate');\n    return valid;\n  },\n\n  _announceInvalidCharacter: function(message) {\n    this.fire('iron-announce', {text: message});\n  },\n\n  _computeValue: function(bindValue) {\n    return bindValue;\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronButtonState} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\n\n/*\n`PaperItemBehavior` is a convenience behavior shared by <paper-item> and\n<paper-icon-item> that manages the shared control states and attributes of\nthe items.\n*/\n/** @polymerBehavior PaperItemBehavior */\nexport const PaperItemBehaviorImpl = {\n  hostAttributes: {role: 'option', tabindex: '0'}\n};\n\n/** @polymerBehavior */\nexport const PaperItemBehavior =\n    [IronButtonState, IronControlState, PaperItemBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/color.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"paper-item-shared-styles\">\n  <template>\n    <style>\n      :host, .paper-item {\n        display: block;\n        position: relative;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n      }\n\n      .paper-item {\n        @apply --paper-font-subhead;\n        border:none;\n        outline: none;\n        background: white;\n        width: 100%;\n        text-align: left;\n      }\n\n      :host([hidden]), .paper-item[hidden] {\n        display: none !important;\n      }\n\n      :host(.iron-selected), .paper-item.iron-selected {\n        font-weight: var(--paper-item-selected-weight, bold);\n\n        @apply --paper-item-selected;\n      }\n\n      :host([disabled]), .paper-item[disabled] {\n        color: var(--paper-item-disabled-color, var(--disabled-text-color));\n\n        @apply --paper-item-disabled;\n      }\n\n      :host(:focus), .paper-item:focus {\n        position: relative;\n        outline: 0;\n\n        @apply --paper-item-focused;\n      }\n\n      :host(:focus):before, .paper-item:focus:before {\n        @apply --layout-fit;\n\n        background: currentColor;\n        content: '';\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n\n        @apply --paper-item-focused-before;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeObjectId } from \"./compute_object_id\";\n\nexport const computeStateName = (stateObj: HassEntity): string => {\n  return stateObj.attributes.friendly_name === undefined\n    ? computeObjectId(stateObj.entity_id).replace(/_/g, \" \")\n    : stateObj.attributes.friendly_name || \"\";\n};\n","/**\n * Return the icon to be used for a domain.\n *\n * Optionally pass in a state to influence the domain icon.\n */\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nconst fixedIcons = {\n  alert: \"hass:alert\",\n  alexa: \"hass:amazon-alexa\",\n  automation: \"hass:playlist-play\",\n  calendar: \"hass:calendar\",\n  camera: \"hass:video\",\n  climate: \"hass:thermostat\",\n  configurator: \"hass:settings\",\n  conversation: \"hass:text-to-speech\",\n  counter: \"hass:counter\",\n  device_tracker: \"hass:account\",\n  fan: \"hass:fan\",\n  google_assistant: \"hass:google-assistant\",\n  group: \"hass:google-circles-communities\",\n  history_graph: \"hass:chart-line\",\n  homeassistant: \"hass:home-assistant\",\n  homekit: \"hass:home-automation\",\n  image_processing: \"hass:image-filter-frames\",\n  input_boolean: \"hass:drawing\",\n  input_datetime: \"hass:calendar-clock\",\n  input_number: \"hass:ray-vertex\",\n  input_select: \"hass:format-list-bulleted\",\n  input_text: \"hass:textbox\",\n  light: \"hass:lightbulb\",\n  mailbox: \"hass:mailbox\",\n  notify: \"hass:comment-alert\",\n  persistent_notification: \"hass:bell\",\n  person: \"hass:account\",\n  plant: \"hass:flower\",\n  proximity: \"hass:apple-safari\",\n  remote: \"hass:remote\",\n  scene: \"hass:google-pages\",\n  script: \"hass:file-document\",\n  sensor: \"hass:eye\",\n  simple_alarm: \"hass:bell\",\n  sun: \"hass:white-balance-sunny\",\n  switch: \"hass:flash\",\n  timer: \"hass:timer\",\n  updater: \"hass:cloud-upload\",\n  vacuum: \"hass:robot-vacuum\",\n  water_heater: \"hass:thermometer\",\n  weather: \"hass:weather-cloudy\",\n  weblink: \"hass:open-in-new\",\n  zone: \"hass:map-marker\",\n};\n\nexport const domainIcon = (domain: string, state?: string): string => {\n  if (domain in fixedIcons) {\n    return fixedIcons[domain];\n  }\n\n  switch (domain) {\n    case \"alarm_control_panel\":\n      switch (state) {\n        case \"armed_home\":\n          return \"hass:bell-plus\";\n        case \"armed_night\":\n          return \"hass:bell-sleep\";\n        case \"disarmed\":\n          return \"hass:bell-outline\";\n        case \"triggered\":\n          return \"hass:bell-ring\";\n        default:\n          return \"hass:bell\";\n      }\n\n    case \"binary_sensor\":\n      return state && state === \"off\"\n        ? \"hass:radiobox-blank\"\n        : \"hass:checkbox-marked-circle\";\n\n    case \"cover\":\n      return state === \"closed\" ? \"hass:window-closed\" : \"hass:window-open\";\n\n    case \"lock\":\n      return state && state === \"unlocked\" ? \"hass:lock-open\" : \"hass:lock\";\n\n    case \"media_player\":\n      return state && state !== \"off\" && state !== \"idle\"\n        ? \"hass:cast-connected\"\n        : \"hass:cast\";\n\n    case \"zwave\":\n      switch (state) {\n        case \"dead\":\n          return \"hass:emoticon-dead\";\n        case \"sleeping\":\n          return \"hass:sleep\";\n        case \"initializing\":\n          return \"hass:timer-sand\";\n        default:\n          return \"hass:z-wave\";\n      }\n\n    default:\n      // tslint:disable-next-line\n      console.warn(\n        \"Unable to find icon for domain \" + domain + \" (\" + state + \")\"\n      );\n      return DEFAULT_DOMAIN_ICON;\n  }\n};\n","import { Constructor } from \"../types\";\n\nimport \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeDomain } from \"./compute_domain\";\n\nexport const computeStateDomain = (stateObj: HassEntity) => {\n  return computeDomain(stateObj.entity_id);\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/*\nA set of layout classes that let you specify layout properties directly in\nmarkup. You must include this file in every element that needs to use them.\n\nSample use:\n\n    import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\n\n    const template = html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .test { width: 100px; }\n      </style>\n      <div class=\"layout horizontal center-center\">\n        <div class=\"test\">horizontal layout center alignment</div>\n      </div>\n    `;\n    document.body.appendChild(template.content);\n\nThe following imports are available:\n - iron-flex\n - iron-flex-reverse\n - iron-flex-alignment\n - iron-flex-factors\n - iron-positioning\n*/\n\nconst template = html`\n/* Most common used flex styles*/\n<dom-module id=\"iron-flex\">\n  <template>\n    <style>\n      .layout.horizontal,\n      .layout.vertical {\n        display: -ms-flexbox;\n        display: -webkit-flex;\n        display: flex;\n      }\n\n      .layout.inline {\n        display: -ms-inline-flexbox;\n        display: -webkit-inline-flex;\n        display: inline-flex;\n      }\n\n      .layout.horizontal {\n        -ms-flex-direction: row;\n        -webkit-flex-direction: row;\n        flex-direction: row;\n      }\n\n      .layout.vertical {\n        -ms-flex-direction: column;\n        -webkit-flex-direction: column;\n        flex-direction: column;\n      }\n\n      .layout.wrap {\n        -ms-flex-wrap: wrap;\n        -webkit-flex-wrap: wrap;\n        flex-wrap: wrap;\n      }\n\n      .layout.no-wrap {\n        -ms-flex-wrap: nowrap;\n        -webkit-flex-wrap: nowrap;\n        flex-wrap: nowrap;\n      }\n\n      .layout.center,\n      .layout.center-center {\n        -ms-flex-align: center;\n        -webkit-align-items: center;\n        align-items: center;\n      }\n\n      .layout.center-justified,\n      .layout.center-center {\n        -ms-flex-pack: center;\n        -webkit-justify-content: center;\n        justify-content: center;\n      }\n\n      .flex {\n        -ms-flex: 1 1 0.000000001px;\n        -webkit-flex: 1;\n        flex: 1;\n        -webkit-flex-basis: 0.000000001px;\n        flex-basis: 0.000000001px;\n      }\n\n      .flex-auto {\n        -ms-flex: 1 1 auto;\n        -webkit-flex: 1 1 auto;\n        flex: 1 1 auto;\n      }\n\n      .flex-none {\n        -ms-flex: none;\n        -webkit-flex: none;\n        flex: none;\n      }\n    </style>\n  </template>\n</dom-module>\n/* Basic flexbox reverse styles */\n<dom-module id=\"iron-flex-reverse\">\n  <template>\n    <style>\n      .layout.horizontal-reverse,\n      .layout.vertical-reverse {\n        display: -ms-flexbox;\n        display: -webkit-flex;\n        display: flex;\n      }\n\n      .layout.horizontal-reverse {\n        -ms-flex-direction: row-reverse;\n        -webkit-flex-direction: row-reverse;\n        flex-direction: row-reverse;\n      }\n\n      .layout.vertical-reverse {\n        -ms-flex-direction: column-reverse;\n        -webkit-flex-direction: column-reverse;\n        flex-direction: column-reverse;\n      }\n\n      .layout.wrap-reverse {\n        -ms-flex-wrap: wrap-reverse;\n        -webkit-flex-wrap: wrap-reverse;\n        flex-wrap: wrap-reverse;\n      }\n    </style>\n  </template>\n</dom-module>\n/* Flexbox alignment */\n<dom-module id=\"iron-flex-alignment\">\n  <template>\n    <style>\n      /**\n       * Alignment in cross axis.\n       */\n      .layout.start {\n        -ms-flex-align: start;\n        -webkit-align-items: flex-start;\n        align-items: flex-start;\n      }\n\n      .layout.center,\n      .layout.center-center {\n        -ms-flex-align: center;\n        -webkit-align-items: center;\n        align-items: center;\n      }\n\n      .layout.end {\n        -ms-flex-align: end;\n        -webkit-align-items: flex-end;\n        align-items: flex-end;\n      }\n\n      .layout.baseline {\n        -ms-flex-align: baseline;\n        -webkit-align-items: baseline;\n        align-items: baseline;\n      }\n\n      /**\n       * Alignment in main axis.\n       */\n      .layout.start-justified {\n        -ms-flex-pack: start;\n        -webkit-justify-content: flex-start;\n        justify-content: flex-start;\n      }\n\n      .layout.center-justified,\n      .layout.center-center {\n        -ms-flex-pack: center;\n        -webkit-justify-content: center;\n        justify-content: center;\n      }\n\n      .layout.end-justified {\n        -ms-flex-pack: end;\n        -webkit-justify-content: flex-end;\n        justify-content: flex-end;\n      }\n\n      .layout.around-justified {\n        -ms-flex-pack: distribute;\n        -webkit-justify-content: space-around;\n        justify-content: space-around;\n      }\n\n      .layout.justified {\n        -ms-flex-pack: justify;\n        -webkit-justify-content: space-between;\n        justify-content: space-between;\n      }\n\n      /**\n       * Self alignment.\n       */\n      .self-start {\n        -ms-align-self: flex-start;\n        -webkit-align-self: flex-start;\n        align-self: flex-start;\n      }\n\n      .self-center {\n        -ms-align-self: center;\n        -webkit-align-self: center;\n        align-self: center;\n      }\n\n      .self-end {\n        -ms-align-self: flex-end;\n        -webkit-align-self: flex-end;\n        align-self: flex-end;\n      }\n\n      .self-stretch {\n        -ms-align-self: stretch;\n        -webkit-align-self: stretch;\n        align-self: stretch;\n      }\n\n      .self-baseline {\n        -ms-align-self: baseline;\n        -webkit-align-self: baseline;\n        align-self: baseline;\n      }\n\n      /**\n       * multi-line alignment in main axis.\n       */\n      .layout.start-aligned {\n        -ms-flex-line-pack: start;  /* IE10 */\n        -ms-align-content: flex-start;\n        -webkit-align-content: flex-start;\n        align-content: flex-start;\n      }\n\n      .layout.end-aligned {\n        -ms-flex-line-pack: end;  /* IE10 */\n        -ms-align-content: flex-end;\n        -webkit-align-content: flex-end;\n        align-content: flex-end;\n      }\n\n      .layout.center-aligned {\n        -ms-flex-line-pack: center;  /* IE10 */\n        -ms-align-content: center;\n        -webkit-align-content: center;\n        align-content: center;\n      }\n\n      .layout.between-aligned {\n        -ms-flex-line-pack: justify;  /* IE10 */\n        -ms-align-content: space-between;\n        -webkit-align-content: space-between;\n        align-content: space-between;\n      }\n\n      .layout.around-aligned {\n        -ms-flex-line-pack: distribute;  /* IE10 */\n        -ms-align-content: space-around;\n        -webkit-align-content: space-around;\n        align-content: space-around;\n      }\n    </style>\n  </template>\n</dom-module>\n/* Non-flexbox positioning helper styles */\n<dom-module id=\"iron-flex-factors\">\n  <template>\n    <style>\n      .flex,\n      .flex-1 {\n        -ms-flex: 1 1 0.000000001px;\n        -webkit-flex: 1;\n        flex: 1;\n        -webkit-flex-basis: 0.000000001px;\n        flex-basis: 0.000000001px;\n      }\n\n      .flex-2 {\n        -ms-flex: 2;\n        -webkit-flex: 2;\n        flex: 2;\n      }\n\n      .flex-3 {\n        -ms-flex: 3;\n        -webkit-flex: 3;\n        flex: 3;\n      }\n\n      .flex-4 {\n        -ms-flex: 4;\n        -webkit-flex: 4;\n        flex: 4;\n      }\n\n      .flex-5 {\n        -ms-flex: 5;\n        -webkit-flex: 5;\n        flex: 5;\n      }\n\n      .flex-6 {\n        -ms-flex: 6;\n        -webkit-flex: 6;\n        flex: 6;\n      }\n\n      .flex-7 {\n        -ms-flex: 7;\n        -webkit-flex: 7;\n        flex: 7;\n      }\n\n      .flex-8 {\n        -ms-flex: 8;\n        -webkit-flex: 8;\n        flex: 8;\n      }\n\n      .flex-9 {\n        -ms-flex: 9;\n        -webkit-flex: 9;\n        flex: 9;\n      }\n\n      .flex-10 {\n        -ms-flex: 10;\n        -webkit-flex: 10;\n        flex: 10;\n      }\n\n      .flex-11 {\n        -ms-flex: 11;\n        -webkit-flex: 11;\n        flex: 11;\n      }\n\n      .flex-12 {\n        -ms-flex: 12;\n        -webkit-flex: 12;\n        flex: 12;\n      }\n    </style>\n  </template>\n</dom-module>\n<dom-module id=\"iron-positioning\">\n  <template>\n    <style>\n      .block {\n        display: block;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      .invisible {\n        visibility: hidden !important;\n      }\n\n      .relative {\n        position: relative;\n      }\n\n      .fit {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n      }\n\n      body.fullbleed {\n        margin: 0;\n        height: 100vh;\n      }\n\n      .scroll {\n        -webkit-overflow-scrolling: touch;\n        overflow: auto;\n      }\n\n      /* fixed position */\n      .fixed-bottom,\n      .fixed-left,\n      .fixed-right,\n      .fixed-top {\n        position: fixed;\n      }\n\n      .fixed-top {\n        top: 0;\n        left: 0;\n        right: 0;\n      }\n\n      .fixed-right {\n        top: 0;\n        right: 0;\n        bottom: 0;\n      }\n\n      .fixed-bottom {\n        right: 0;\n        bottom: 0;\n        left: 0;\n      }\n\n      .fixed-left {\n        top: 0;\n        bottom: 0;\n        left: 0;\n      }\n    </style>\n  </template>\n</dom-module>\n`;\ntemplate.setAttribute('style', 'display: none;');\ndocument.head.appendChild(template.content);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/*\nUse `<paper-item-body>` in a `<paper-item>` or `<paper-icon-item>` to make two-\nor three- line items. It is a flex item that is a vertical flexbox.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n    </paper-item>\n\nThe child elements with the `secondary` attribute is given secondary text\nstyling.\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-body-two-line-min-height` | Minimum height of a two-line item | `72px`\n`--paper-item-body-three-line-min-height` | Minimum height of a three-line item | `88px`\n`--paper-item-body-secondary-color` | Foreground color for the `secondary` area | `--secondary-text-color`\n`--paper-item-body-secondary` | Mixin applied to the `secondary` area | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */\n        @apply --layout-vertical;\n        @apply --layout-center-justified;\n        @apply --layout-flex;\n      }\n\n      :host([two-line]) {\n        min-height: var(--paper-item-body-two-line-min-height, 72px);\n      }\n\n      :host([three-line]) {\n        min-height: var(--paper-item-body-three-line-min-height, 88px);\n      }\n\n      :host > ::slotted(*) {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      :host > ::slotted([secondary]) {\n        @apply --paper-font-body1;\n\n        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));\n\n        @apply --paper-item-body-secondary;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-item-body'\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/paper-styles/color.js';\nimport './paper-spinner-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperSpinnerBehavior} from './paper-spinner-behavior.js';\n\nconst template = html`\n  <style include=\"paper-spinner-styles\"></style>\n\n  <div id=\"spinnerContainer\" class-name=\"[[__computeContainerClasses(active, __coolingDown)]]\" on-animationend=\"__reset\" on-webkit-animation-end=\"__reset\">\n    <div class=\"spinner-layer layer-1\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"spinner-layer layer-2\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"spinner-layer layer-3\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"spinner-layer layer-4\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n  </div>\n`;\ntemplate.setAttribute('strip-whitespace', '');\n\n/**\nMaterial design: [Progress &\nactivity](https://www.google.com/design/spec/components/progress-activity.html)\n\nElement providing a multiple color material design circular spinner.\n\n    <paper-spinner active></paper-spinner>\n\nThe default spinner cycles between four layers of colors; by default they are\nblue, red, yellow and green. It can be customized to cycle between four\ndifferent colors. Use <paper-spinner-lite> for single color spinners.\n\n### Accessibility\n\nAlt attribute should be set to provide adequate context for accessibility. If\nnot provided, it defaults to 'loading'. Empty alt can be provided to mark the\nelement as decorative if alternative content is provided in another form (e.g. a\ntext block following the spinner).\n\n    <paper-spinner alt=\"Loading contacts list\" active></paper-spinner>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-spinner-layer-1-color` | Color of the first spinner rotation | `--google-blue-500`\n`--paper-spinner-layer-2-color` | Color of the second spinner rotation | `--google-red-500`\n`--paper-spinner-layer-3-color` | Color of the third spinner rotation | `--google-yellow-500`\n`--paper-spinner-layer-4-color` | Color of the fourth spinner rotation | `--google-green-500`\n`--paper-spinner-stroke-width` | The width of the spinner stroke | 3px\n\n@group Paper Elements\n@element paper-spinner\n@hero hero.svg\n@demo demo/index.html\n*/\nPolymer({\n  _template: template,\n\n  is: 'paper-spinner',\n\n  behaviors: [PaperSpinnerBehavior]\n});\n","import {\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  html,\n  property,\n  PropertyValues,\n  query,\n} from \"lit-element\";\nimport \"../ha-icon\";\nimport { computeStateDomain } from \"../../common/entity/compute_state_domain\";\nimport { stateIcon } from \"../../common/entity/state_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"../ha-icon\";\nimport { HomeAssistant } from \"../../types\";\n\nclass StateBadge extends LitElement {\n  public hass?: HomeAssistant;\n  @property() public stateObj?: HassEntity;\n  @property() public overrideIcon?: string;\n  @property() public overrideImage?: string;\n  @query(\"ha-icon\") private _icon!: HaIcon;\n\n  protected render(): TemplateResult | void {\n    const stateObj = this.stateObj;\n\n    if (!stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon\n        id=\"icon\"\n        data-domain=${computeStateDomain(stateObj)}\n        data-state=${stateObj.state}\n        .icon=${this.overrideIcon || stateIcon(stateObj)}\n      ></ha-icon>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\") || !this.stateObj) {\n      return;\n    }\n    const stateObj = this.stateObj;\n\n    const iconStyle: Partial<CSSStyleDeclaration> = {\n      color: \"\",\n      filter: \"\",\n    };\n    const hostStyle: Partial<CSSStyleDeclaration> = {\n      backgroundImage: \"\",\n    };\n    if (stateObj) {\n      // hide icon if we have entity picture\n      if (\n        (stateObj.attributes.entity_picture && !this.overrideIcon) ||\n        this.overrideImage\n      ) {\n        let imageUrl = this.overrideImage || stateObj.attributes.entity_picture;\n        if (this.hass) {\n          imageUrl = this.hass.hassUrl(imageUrl);\n        }\n        hostStyle.backgroundImage = `url(${imageUrl})`;\n        iconStyle.display = \"none\";\n      } else {\n        if (stateObj.attributes.hs_color) {\n          const hue = stateObj.attributes.hs_color[0];\n          const sat = stateObj.attributes.hs_color[1];\n          if (sat > 10) {\n            iconStyle.color = `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n          }\n        }\n        if (stateObj.attributes.brightness) {\n          const brightness = stateObj.attributes.brightness;\n          if (typeof brightness !== \"number\") {\n            const errorMessage = `Type error: state-badge expected number, but type of ${\n              stateObj.entity_id\n            }.attributes.brightness is ${typeof brightness} (${brightness})`;\n            // tslint:disable-next-line\n            console.warn(errorMessage);\n          }\n          // lowest brighntess will be around 50% (that's pretty dark)\n          iconStyle.filter = `brightness(${(brightness + 245) / 5}%)`;\n        }\n      }\n    }\n    Object.assign(this._icon.style, iconStyle);\n    Object.assign(this.style, hostStyle);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        position: relative;\n        display: inline-block;\n        width: 40px;\n        color: var(--paper-item-icon-color, #44739e);\n        border-radius: 50%;\n        height: 40px;\n        text-align: center;\n        background-size: cover;\n        line-height: 40px;\n        vertical-align: middle;\n      }\n\n      ha-icon {\n        transition: color 0.3s ease-in-out, filter 0.3s ease-in-out;\n      }\n\n      /* Color the icon if light or sun is on */\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      /* Color the icon if unavailable */\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"state-badge\": StateBadge;\n  }\n}\n\ncustomElements.define(\"state-badge\", StateBadge);\n","/** Compute the object ID of a state. */\nexport const computeObjectId = (entityId: string): string => {\n  return entityId.substr(entityId.indexOf(\".\") + 1);\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/typography.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/*\n`<paper-icon-item>` is a convenience element to make an item with icon. It is an\ninteractive list item with a fixed-width icon area, according to Material\nDesign. This is useful if the icons are of varying widths, but you want the item\nbodies to line up. Use this like a `<paper-item>`. The child node with the slot\nname `item-icon` is placed in the icon area.\n\n    <paper-icon-item>\n      <iron-icon icon=\"favorite\" slot=\"item-icon\"></iron-icon>\n      Favorite\n    </paper-icon-item>\n    <paper-icon-item>\n      <div class=\"avatar\" slot=\"item-icon\"></div>\n      Avatar\n    </paper-icon-item>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-icon-width` | Width of the icon area | `56px`\n`--paper-item-icon` | Mixin applied to the icon area | `{}`\n`--paper-icon-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\"></style>\n    <style>\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n        @apply --paper-icon-item;\n      }\n\n      .content-icon {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n\n        width: var(--paper-item-icon-width, 56px);\n        @apply --paper-item-icon;\n      }\n    </style>\n\n    <div id=\"contentIcon\" class=\"content-icon\">\n      <slot name=\"item-icon\"></slot>\n    </div>\n    <slot></slot>\n`,\n\n  is: 'paper-icon-item',\n  behaviors: [PaperItemBehavior]\n});\n","/** Return an icon representing a sensor state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNIT_C, UNIT_F } from \"../const\";\nimport { domainIcon } from \"./domain_icon\";\n\nconst fixedDeviceClassIcons = {\n  humidity: \"hass:water-percent\",\n  illuminance: \"hass:brightness-5\",\n  temperature: \"hass:thermometer\",\n  pressure: \"hass:gauge\",\n  power: \"hass:flash\",\n  signal_strength: \"hass:wifi\",\n};\n\nexport const sensorIcon = (state: HassEntity) => {\n  const dclass = state.attributes.device_class;\n\n  if (dclass && dclass in fixedDeviceClassIcons) {\n    return fixedDeviceClassIcons[dclass];\n  }\n  if (dclass === \"battery\") {\n    const battery = Number(state.state);\n    if (isNaN(battery)) {\n      return \"hass:battery-unknown\";\n    }\n    const batteryRound = Math.round(battery / 10) * 10;\n    if (batteryRound >= 100) {\n      return \"hass:battery\";\n    }\n    if (batteryRound <= 0) {\n      return \"hass:battery-alert\";\n    }\n    // Will return one of the following icons: (listed so extractor picks up)\n    // hass:battery-10\n    // hass:battery-20\n    // hass:battery-30\n    // hass:battery-40\n    // hass:battery-50\n    // hass:battery-60\n    // hass:battery-70\n    // hass:battery-80\n    // hass:battery-90\n    // We obscure 'hass' in iconname so this name does not get picked up\n    return `${\"hass\"}:battery-${batteryRound}`;\n  }\n\n  const unit = state.attributes.unit_of_measurement;\n  if (unit === UNIT_C || unit === UNIT_F) {\n    return \"hass:thermometer\";\n  }\n  return domainIcon(\"sensor\");\n};\n","/** Return an icon representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\nimport { binarySensorIcon } from \"./binary_sensor_icon\";\n\nimport { computeDomain } from \"./compute_domain\";\nimport { domainIcon } from \"./domain_icon\";\nimport { coverIcon } from \"./cover_icon\";\nimport { sensorIcon } from \"./sensor_icon\";\nimport { inputDateTimeIcon } from \"./input_dateteime_icon\";\n\nconst domainIcons = {\n  binary_sensor: binarySensorIcon,\n  cover: coverIcon,\n  sensor: sensorIcon,\n  input_datetime: inputDateTimeIcon,\n};\n\nexport const stateIcon = (state: HassEntity) => {\n  if (!state) {\n    return DEFAULT_DOMAIN_ICON;\n  }\n  if (state.attributes.icon) {\n    return state.attributes.icon;\n  }\n\n  const domain = computeDomain(state.entity_id);\n\n  if (domain in domainIcons) {\n    return domainIcons[domain](state);\n  }\n  return domainIcon(domain, state.state);\n};\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\n/** Return an icon representing a binary sensor state. */\n\nexport const binarySensorIcon = (state: HassEntity) => {\n  const activated = state.state && state.state === \"off\";\n  switch (state.attributes.device_class) {\n    case \"battery\":\n      return activated ? \"hass:battery\" : \"hass:battery-outline\";\n    case \"cold\":\n      return activated ? \"hass:thermometer\" : \"hass:snowflake\";\n    case \"connectivity\":\n      return activated ? \"hass:server-network-off\" : \"hass:server-network\";\n    case \"door\":\n      return activated ? \"hass:door-closed\" : \"hass:door-open\";\n    case \"garage_door\":\n      return activated ? \"hass:garage\" : \"hass:garage-open\";\n    case \"gas\":\n    case \"power\":\n    case \"problem\":\n    case \"safety\":\n    case \"smoke\":\n      return activated ? \"hass:shield-check\" : \"hass:alert\";\n    case \"heat\":\n      return activated ? \"hass:thermometer\" : \"hass:fire\";\n    case \"light\":\n      return activated ? \"hass:brightness-5\" : \"hass:brightness-7\";\n    case \"lock\":\n      return activated ? \"hass:lock\" : \"hass:lock-open\";\n    case \"moisture\":\n      return activated ? \"hass:water-off\" : \"hass:water\";\n    case \"motion\":\n      return activated ? \"hass:walk\" : \"hass:run\";\n    case \"occupancy\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"opening\":\n      return activated ? \"hass:square\" : \"hass:square-outline\";\n    case \"plug\":\n      return activated ? \"hass:power-plug-off\" : \"hass:power-plug\";\n    case \"presence\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"sound\":\n      return activated ? \"hass:music-note-off\" : \"hass:music-note\";\n    case \"vibration\":\n      return activated ? \"hass:crop-portrait\" : \"hass:vibrate\";\n    case \"window\":\n      return activated ? \"hass:window-closed\" : \"hass:window-open\";\n    default:\n      return activated ? \"hass:radiobox-blank\" : \"hass:checkbox-marked-circle\";\n  }\n};\n","/** Return an icon representing a cover state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { domainIcon } from \"./domain_icon\";\n\nexport const coverIcon = (state: HassEntity): string => {\n  const open = state.state !== \"closed\";\n  switch (state.attributes.device_class) {\n    case \"garage\":\n      return open ? \"hass:garage-open\" : \"hass:garage\";\n    case \"door\":\n      return open ? \"hass:door-open\" : \"hass:door-closed\";\n    case \"shutter\":\n      return open ? \"hass:window-shutter-open\" : \"hass:window-shutter\";\n    case \"blind\":\n      return open ? \"hass:blinds-open\" : \"hass:blinds\";\n    case \"window\":\n      return open ? \"hass:window-open\" : \"hass:window-closed\";\n    default:\n      return domainIcon(\"cover\", state.state);\n  }\n};\n","/** Return an icon representing an input datetime state. */\nimport { domainIcon } from \"./domain_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nexport const inputDateTimeIcon = (state: HassEntity): string => {\n  if (!state.attributes.has_date) {\n    return \"hass:clock\";\n  }\n  if (!state.attributes.has_time) {\n    return \"hass:calendar\";\n  }\n  return domainIcon(\"input_datetime\");\n};\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@vaadin/vaadin-combo-box/theme/material/vaadin-combo-box-light\";\nimport memoizeOne from \"memoize-one\";\n\nimport \"./state-badge\";\n\nimport { computeStateName } from \"../../common/entity/compute_state_name\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n  property,\n  PropertyValues,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { PolymerChangedEvent } from \"../../polymer-types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { computeDomain } from \"../../common/entity/compute_domain\";\n\nexport type HaEntityPickerEntityFilterFunc = (entityId: HassEntity) => boolean;\n\nconst rowRenderer = (\n  root: HTMLElement,\n  _owner,\n  model: { item: HassEntity }\n) => {\n  if (!root.firstElementChild) {\n    root.innerHTML = `\n      <style>\n        paper-icon-item {\n          margin: -10px;\n          padding: 0;\n        }\n      </style>\n      <paper-icon-item>\n        <state-badge state-obj=\"[[item]]\" slot=\"item-icon\"></state-badge>\n        <paper-item-body two-line=\"\">\n          <div class='name'>[[_computeStateName(item)]]</div>\n          <div secondary>[[item.entity_id]]</div>\n        </paper-item-body>\n      </paper-icon-item>\n    `;\n  }\n\n  root.querySelector(\"state-badge\")!.stateObj = model.item;\n  root.querySelector(\".name\")!.textContent = computeStateName(model.item);\n  root.querySelector(\"[secondary]\")!.textContent = model.item.entity_id;\n};\n\nclass HaEntityPicker extends LitElement {\n  @property({ type: Boolean }) public autofocus?: boolean;\n  @property({ type: Boolean }) public disabled?: boolean;\n  @property({ type: Boolean, attribute: \"allow-custom-entity\" })\n  public allowCustomEntity;\n  @property() public hass?: HomeAssistant;\n  @property() public label?: string;\n  @property() public value?: string;\n  /**\n   * Show entities from specific domains.\n   * @type {Array}\n   * @attr include-domains\n   */\n  @property({ type: Array, attribute: \"include-domains\" })\n  public includeDomains?: string[];\n  /**\n   * Show no entities of these domains.\n   * @type {Array}\n   * @attr exclude-domains\n   */\n  @property({ type: Array, attribute: \"exclude-domains\" })\n  public excludeDomains?: string[];\n  /**\n   * Show only entities of these device classes.\n   * @type {Array}\n   * @attr include-device-classes\n   */\n  @property({ type: Array, attribute: \"include-device-classes\" })\n  public includeDeviceClasses?: string[];\n  @property() public entityFilter?: HaEntityPickerEntityFilterFunc;\n  @property({ type: Boolean }) private _opened?: boolean;\n  @property() private _hass?: HomeAssistant;\n\n  private _getStates = memoizeOne(\n    (\n      hass: this[\"hass\"],\n      includeDomains: this[\"includeDomains\"],\n      excludeDomains: this[\"excludeDomains\"],\n      entityFilter: this[\"entityFilter\"],\n      includeDeviceClasses: this[\"includeDeviceClasses\"]\n    ) => {\n      let states: HassEntity[] = [];\n\n      if (!hass) {\n        return [];\n      }\n      let entityIds = Object.keys(hass.states);\n\n      if (includeDomains) {\n        entityIds = entityIds.filter((eid) =>\n          includeDomains.includes(computeDomain(eid))\n        );\n      }\n\n      if (excludeDomains) {\n        entityIds = entityIds.filter(\n          (eid) => !excludeDomains.includes(computeDomain(eid))\n        );\n      }\n\n      states = entityIds.sort().map((key) => hass!.states[key]);\n\n      if (includeDeviceClasses) {\n        states = states.filter(\n          (stateObj) =>\n            // We always want to include the entity of the current value\n            stateObj.entity_id === this.value ||\n            (stateObj.attributes.device_class &&\n              includeDeviceClasses.includes(stateObj.attributes.device_class))\n        );\n      }\n\n      if (entityFilter) {\n        states = states.filter(\n          (stateObj) =>\n            // We always want to include the entity of the current value\n            stateObj.entity_id === this.value || entityFilter!(stateObj)\n        );\n      }\n\n      return states;\n    }\n  );\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"hass\") && !this._opened) {\n      this._hass = this.hass;\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    const states = this._getStates(\n      this._hass,\n      this.includeDomains,\n      this.excludeDomains,\n      this.entityFilter,\n      this.includeDeviceClasses\n    );\n\n    return html`\n      <vaadin-combo-box-light\n        item-value-path=\"entity_id\"\n        item-label-path=\"entity_id\"\n        .items=${states}\n        .value=${this._value}\n        .allowCustomValue=${this.allowCustomEntity}\n        .renderer=${rowRenderer}\n        @opened-changed=${this._openedChanged}\n        @value-changed=${this._valueChanged}\n      >\n        <paper-input\n          .autofocus=${this.autofocus}\n          .label=${this.label === undefined && this._hass\n            ? this._hass.localize(\"ui.components.entity.entity-picker.entity\")\n            : this.label}\n          .value=${this._value}\n          .disabled=${this.disabled}\n          class=\"input\"\n          autocapitalize=\"none\"\n          autocomplete=\"off\"\n          autocorrect=\"off\"\n          spellcheck=\"false\"\n        >\n          ${this.value\n            ? html`\n                <paper-icon-button\n                  aria-label=${this.hass!.localize(\n                    \"ui.components.entity.entity-picker.clear\"\n                  )}\n                  slot=\"suffix\"\n                  class=\"clear-button\"\n                  icon=\"hass:close\"\n                  @click=${this._clearValue}\n                  no-ripple\n                >\n                  Clear\n                </paper-icon-button>\n              `\n            : \"\"}\n          ${states.length > 0\n            ? html`\n                <paper-icon-button\n                  aria-label=${this.hass!.localize(\n                    \"ui.components.entity.entity-picker.show_entities\"\n                  )}\n                  slot=\"suffix\"\n                  class=\"toggle-button\"\n                  .icon=${this._opened ? \"hass:menu-up\" : \"hass:menu-down\"}\n                >\n                  Toggle\n                </paper-icon-button>\n              `\n            : \"\"}\n        </paper-input>\n      </vaadin-combo-box-light>\n    `;\n  }\n\n  private _clearValue(ev: Event) {\n    ev.stopPropagation();\n    this._setValue(\"\");\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _openedChanged(ev: PolymerChangedEvent<boolean>) {\n    this._opened = ev.detail.value;\n  }\n\n  private _valueChanged(ev: PolymerChangedEvent<string>) {\n    const newValue = ev.detail.value;\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-input > paper-icon-button {\n        width: 24px;\n        height: 24px;\n        padding: 2px;\n        color: var(--secondary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-entity-picker\", HaEntityPicker);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entity-picker\": HaEntityPicker;\n  }\n}\n","/**\n * Parse or format dates\n * @class fecha\n */\nvar fecha = {};\nvar token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\nvar twoDigits = '\\\\d\\\\d?';\nvar threeDigits = '\\\\d{3}';\nvar fourDigits = '\\\\d{4}';\nvar word = '[^\\\\s]+';\nvar literal = /\\[([^]*?)\\]/gm;\nvar noop = function () {\n};\n\nfunction regexEscape(str) {\n  return str.replace( /[|\\\\{()[^$+*?.-]/g, '\\\\$&');\n}\n\nfunction shorten(arr, sLen) {\n  var newArr = [];\n  for (var i = 0, len = arr.length; i < len; i++) {\n    newArr.push(arr[i].substr(0, sLen));\n  }\n  return newArr;\n}\n\nfunction monthUpdate(arrName) {\n  return function (d, v, i18n) {\n    var index = i18n[arrName].indexOf(v.charAt(0).toUpperCase() + v.substr(1).toLowerCase());\n    if (~index) {\n      d.month = index;\n    }\n  };\n}\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\nvar dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nvar monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nvar monthNamesShort = shorten(monthNames, 3);\nvar dayNamesShort = shorten(dayNames, 3);\nfecha.i18n = {\n  dayNamesShort: dayNamesShort,\n  dayNames: dayNames,\n  monthNamesShort: monthNamesShort,\n  monthNames: monthNames,\n  amPm: ['am', 'pm'],\n  DoFn: function DoFn(D) {\n    return D + ['th', 'st', 'nd', 'rd'][D % 10 > 3 ? 0 : (D - D % 10 !== 10) * D % 10];\n  }\n};\n\nvar formatFlags = {\n  D: function(dateObj) {\n    return dateObj.getDate();\n  },\n  DD: function(dateObj) {\n    return pad(dateObj.getDate());\n  },\n  Do: function(dateObj, i18n) {\n    return i18n.DoFn(dateObj.getDate());\n  },\n  d: function(dateObj) {\n    return dateObj.getDay();\n  },\n  dd: function(dateObj) {\n    return pad(dateObj.getDay());\n  },\n  ddd: function(dateObj, i18n) {\n    return i18n.dayNamesShort[dateObj.getDay()];\n  },\n  dddd: function(dateObj, i18n) {\n    return i18n.dayNames[dateObj.getDay()];\n  },\n  M: function(dateObj) {\n    return dateObj.getMonth() + 1;\n  },\n  MM: function(dateObj) {\n    return pad(dateObj.getMonth() + 1);\n  },\n  MMM: function(dateObj, i18n) {\n    return i18n.monthNamesShort[dateObj.getMonth()];\n  },\n  MMMM: function(dateObj, i18n) {\n    return i18n.monthNames[dateObj.getMonth()];\n  },\n  YY: function(dateObj) {\n    return pad(String(dateObj.getFullYear()), 4).substr(2);\n  },\n  YYYY: function(dateObj) {\n    return pad(dateObj.getFullYear(), 4);\n  },\n  h: function(dateObj) {\n    return dateObj.getHours() % 12 || 12;\n  },\n  hh: function(dateObj) {\n    return pad(dateObj.getHours() % 12 || 12);\n  },\n  H: function(dateObj) {\n    return dateObj.getHours();\n  },\n  HH: function(dateObj) {\n    return pad(dateObj.getHours());\n  },\n  m: function(dateObj) {\n    return dateObj.getMinutes();\n  },\n  mm: function(dateObj) {\n    return pad(dateObj.getMinutes());\n  },\n  s: function(dateObj) {\n    return dateObj.getSeconds();\n  },\n  ss: function(dateObj) {\n    return pad(dateObj.getSeconds());\n  },\n  S: function(dateObj) {\n    return Math.round(dateObj.getMilliseconds() / 100);\n  },\n  SS: function(dateObj) {\n    return pad(Math.round(dateObj.getMilliseconds() / 10), 2);\n  },\n  SSS: function(dateObj) {\n    return pad(dateObj.getMilliseconds(), 3);\n  },\n  a: function(dateObj, i18n) {\n    return dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1];\n  },\n  A: function(dateObj, i18n) {\n    return dateObj.getHours() < 12 ? i18n.amPm[0].toUpperCase() : i18n.amPm[1].toUpperCase();\n  },\n  ZZ: function(dateObj) {\n    var o = dateObj.getTimezoneOffset();\n    return (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4);\n  }\n};\n\nvar parseFlags = {\n  D: [twoDigits, function (d, v) {\n    d.day = v;\n  }],\n  Do: [twoDigits + word, function (d, v) {\n    d.day = parseInt(v, 10);\n  }],\n  M: [twoDigits, function (d, v) {\n    d.month = v - 1;\n  }],\n  YY: [twoDigits, function (d, v) {\n    var da = new Date(), cent = +('' + da.getFullYear()).substr(0, 2);\n    d.year = '' + (v > 68 ? cent - 1 : cent) + v;\n  }],\n  h: [twoDigits, function (d, v) {\n    d.hour = v;\n  }],\n  m: [twoDigits, function (d, v) {\n    d.minute = v;\n  }],\n  s: [twoDigits, function (d, v) {\n    d.second = v;\n  }],\n  YYYY: [fourDigits, function (d, v) {\n    d.year = v;\n  }],\n  S: ['\\\\d', function (d, v) {\n    d.millisecond = v * 100;\n  }],\n  SS: ['\\\\d{2}', function (d, v) {\n    d.millisecond = v * 10;\n  }],\n  SSS: [threeDigits, function (d, v) {\n    d.millisecond = v;\n  }],\n  d: [twoDigits, noop],\n  ddd: [word, noop],\n  MMM: [word, monthUpdate('monthNamesShort')],\n  MMMM: [word, monthUpdate('monthNames')],\n  a: [word, function (d, v, i18n) {\n    var val = v.toLowerCase();\n    if (val === i18n.amPm[0]) {\n      d.isPm = false;\n    } else if (val === i18n.amPm[1]) {\n      d.isPm = true;\n    }\n  }],\n  ZZ: ['[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z', function (d, v) {\n    var parts = (v + '').match(/([+-]|\\d\\d)/gi), minutes;\n\n    if (parts) {\n      minutes = +(parts[1] * 60) + parseInt(parts[2], 10);\n      d.timezoneOffset = parts[0] === '+' ? minutes : -minutes;\n    }\n  }]\n};\nparseFlags.dd = parseFlags.d;\nparseFlags.dddd = parseFlags.ddd;\nparseFlags.DD = parseFlags.D;\nparseFlags.mm = parseFlags.m;\nparseFlags.hh = parseFlags.H = parseFlags.HH = parseFlags.h;\nparseFlags.MM = parseFlags.M;\nparseFlags.ss = parseFlags.s;\nparseFlags.A = parseFlags.a;\n\n\n// Some common format strings\nfecha.masks = {\n  default: 'ddd MMM DD YYYY HH:mm:ss',\n  shortDate: 'M/D/YY',\n  mediumDate: 'MMM D, YYYY',\n  longDate: 'MMMM D, YYYY',\n  fullDate: 'dddd, MMMM D, YYYY',\n  shortTime: 'HH:mm',\n  mediumTime: 'HH:mm:ss',\n  longTime: 'HH:mm:ss.SSS'\n};\n\n/***\n * Format a date\n * @method format\n * @param {Date|number} dateObj\n * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n */\nfecha.format = function (dateObj, mask, i18nSettings) {\n  var i18n = i18nSettings || fecha.i18n;\n\n  if (typeof dateObj === 'number') {\n    dateObj = new Date(dateObj);\n  }\n\n  if (Object.prototype.toString.call(dateObj) !== '[object Date]' || isNaN(dateObj.getTime())) {\n    throw new Error('Invalid Date in fecha.format');\n  }\n\n  mask = fecha.masks[mask] || mask || fecha.masks['default'];\n\n  var literals = [];\n\n  // Make literals inactive by replacing them with ??\n  mask = mask.replace(literal, function($0, $1) {\n    literals.push($1);\n    return '??';\n  });\n  // Apply formatting rules\n  mask = mask.replace(token, function ($0) {\n    return $0 in formatFlags ? formatFlags[$0](dateObj, i18n) : $0.slice(1, $0.length - 1);\n  });\n  // Inline literal values back into the formatted value\n  return mask.replace(/\\?\\?/g, function() {\n    return literals.shift();\n  });\n};\n\n/**\n * Parse a date string into an object, changes - into /\n * @method parse\n * @param {string} dateStr Date string\n * @param {string} format Date parse format\n * @returns {Date|boolean}\n */\nfecha.parse = function (dateStr, format, i18nSettings) {\n  var i18n = i18nSettings || fecha.i18n;\n\n  if (typeof format !== 'string') {\n    throw new Error('Invalid format in fecha.parse');\n  }\n\n  format = fecha.masks[format] || format;\n\n  // Avoid regular expression denial of service, fail early for really long strings\n  // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n  if (dateStr.length > 1000) {\n    return null;\n  }\n\n  var dateInfo = {};\n  var parseInfo = [];\n  var newFormat = regexEscape(format).replace(token, function ($0) {\n    if (parseFlags[$0]) {\n      var info = parseFlags[$0];\n      parseInfo.push(info[1]);\n      return '(' + info[0] + ')';\n    }\n\n    return $0;\n  });\n  var matches = dateStr.match(new RegExp(newFormat, 'i'));\n  if (!matches) {\n    return null;\n  }\n\n  for (var i = 1; i < matches.length; i++) {\n    parseInfo[i - 1](dateInfo, matches[i], i18n);\n  }\n\n  var today = new Date();\n  if (dateInfo.isPm === true && dateInfo.hour != null && +dateInfo.hour !== 12) {\n    dateInfo.hour = +dateInfo.hour + 12;\n  } else if (dateInfo.isPm === false && +dateInfo.hour === 12) {\n    dateInfo.hour = 0;\n  }\n\n  var date;\n  if (dateInfo.timezoneOffset != null) {\n    dateInfo.minute = +(dateInfo.minute || 0) - +dateInfo.timezoneOffset;\n    date = new Date(Date.UTC(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n      dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0));\n  } else {\n    date = new Date(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n      dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0);\n  }\n  return date;\n};\n\nexport default fecha;\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {AppLayoutBehavior} from '../app-layout-behavior/app-layout-behavior.js';\n\n/**\napp-header-layout is a wrapper element that positions an app-header and other\ncontent. This element uses the document scroll by default, but it can also\ndefine its own scrolling region.\n\nUsing the document scroll:\n\n```html\n<app-header-layout>\n  <app-header slot=\"header\" fixed condenses effects=\"waterfall\">\n    <app-toolbar>\n      <div main-title>App name</div>\n    </app-toolbar>\n  </app-header>\n  <div>\n    main content\n  </div>\n</app-header-layout>\n```\n\nUsing an own scrolling region:\n\n```html\n<app-header-layout has-scrolling-region style=\"width: 300px; height: 400px;\">\n  <app-header slot=\"header\" fixed condenses effects=\"waterfall\">\n    <app-toolbar>\n      <div main-title>App name</div>\n    </app-toolbar>\n  </app-header>\n  <div>\n    main content\n  </div>\n</app-header-layout>\n```\n\nAdd the `fullbleed` attribute to app-header-layout to make it fit the size of\nits container:\n\n```html\n<app-header-layout fullbleed>\n ...\n</app-header-layout>\n```\n\n@group App Elements\n@element app-header-layout\n@demo app-header-layout/demo/simple.html Simple Demo\n@demo app-header-layout/demo/scrolling-region.html Scrolling Region\n@demo app-header-layout/demo/music.html Music Demo\n@demo app-header-layout/demo/footer.html Footer Demo\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        /**\n         * Force app-header-layout to have its own stacking context so that its parent can\n         * control the stacking of it relative to other elements (e.g. app-drawer-layout).\n         * This could be done using \\`isolation: isolate\\`, but that's not well supported\n         * across browsers.\n         */\n        position: relative;\n        z-index: 0;\n      }\n\n      #wrapper ::slotted([slot=header]) {\n        @apply --layout-fixed-top;\n        z-index: 1;\n      }\n\n      #wrapper.initializing ::slotted([slot=header]) {\n        position: relative;\n      }\n\n      :host([has-scrolling-region]) {\n        height: 100%;\n      }\n\n      :host([has-scrolling-region]) #wrapper ::slotted([slot=header]) {\n        position: absolute;\n      }\n\n      :host([has-scrolling-region]) #wrapper.initializing ::slotted([slot=header]) {\n        position: relative;\n      }\n\n      :host([has-scrolling-region]) #wrapper #contentContainer {\n        @apply --layout-fit;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n\n      :host([has-scrolling-region]) #wrapper.initializing #contentContainer {\n        position: relative;\n      }\n\n      :host([fullbleed]) {\n        @apply --layout-vertical;\n        @apply --layout-fit;\n      }\n\n      :host([fullbleed]) #wrapper,\n      :host([fullbleed]) #wrapper #contentContainer {\n        @apply --layout-vertical;\n        @apply --layout-flex;\n      }\n\n      #contentContainer {\n        /* Create a stacking context here so that all children appear below the header. */\n        position: relative;\n        z-index: 0;\n      }\n\n      @media print {\n        :host([has-scrolling-region]) #wrapper #contentContainer {\n          overflow-y: visible;\n        }\n      }\n\n    </style>\n\n    <div id=\"wrapper\" class=\"initializing\">\n      <slot id=\"headerSlot\" name=\"header\"></slot>\n\n      <div id=\"contentContainer\">\n        <slot></slot>\n      </div>\n    </div>\n`,\n\n  is: 'app-header-layout',\n  behaviors: [AppLayoutBehavior],\n\n  properties: {\n    /**\n     * If true, the current element will have its own scrolling region.\n     * Otherwise, it will use the document scroll to control the header.\n     */\n    hasScrollingRegion: {type: Boolean, value: false, reflectToAttribute: true}\n  },\n\n  observers: ['resetLayout(isAttached, hasScrollingRegion)'],\n\n  /**\n   * A reference to the app-header element.\n   *\n   * @property header\n   */\n  get header() {\n    return dom(this.$.headerSlot).getDistributedNodes()[0];\n  },\n\n  _updateLayoutStates: function() {\n    var header = this.header;\n    if (!this.isAttached || !header) {\n      return;\n    }\n    // Remove the initializing class, which staticly positions the header and\n    // the content until the height of the header can be read.\n    this.$.wrapper.classList.remove('initializing');\n    // Update scroll target.\n    header.scrollTarget = this.hasScrollingRegion ?\n        this.$.contentContainer :\n        this.ownerDocument.documentElement;\n    // Get header height here so that style reads are batched together before\n    // style writes (i.e. getBoundingClientRect() below).\n    var headerHeight = header.offsetHeight;\n    // Update the header position.\n    if (!this.hasScrollingRegion) {\n      requestAnimationFrame(function() {\n        var rect = this.getBoundingClientRect();\n        var rightOffset = document.documentElement.clientWidth - rect.right;\n        header.style.left = rect.left + 'px';\n        header.style.right = rightOffset + 'px';\n      }.bind(this));\n    } else {\n      header.style.left = '';\n      header.style.right = '';\n    }\n    // Update the content container position.\n    var containerStyle = this.$.contentContainer.style;\n    if (header.fixed && !header.condenses && this.hasScrollingRegion) {\n      // If the header size does not change and we're using a scrolling region,\n      // exclude the header area from the scrolling region so that the header\n      // doesn't overlap the scrollbar.\n      containerStyle.marginTop = headerHeight + 'px';\n      containerStyle.paddingTop = '';\n    } else {\n      containerStyle.paddingTop = headerHeight + 'px';\n      containerStyle.marginTop = '';\n    }\n  }\n});\n","import fecha from \"fecha\";\n\n// Check for support of native locale string options\nfunction toLocaleTimeStringSupportsOptions() {\n  try {\n    new Date().toLocaleTimeString(\"i\");\n  } catch (e) {\n    return e.name === \"RangeError\";\n  }\n  return false;\n}\n\nexport default toLocaleTimeStringSupportsOptions()\n  ? (dateObj: Date, locales: string) =>\n      dateObj.toLocaleTimeString(locales, {\n        hour: \"numeric\",\n        minute: \"2-digit\",\n      })\n  : (dateObj: Date) => fecha.format(dateObj, \"shortTime\");\n","import fecha from \"fecha\";\n\n// Check for support of native locale string options\nfunction toLocaleDateStringSupportsOptions() {\n  try {\n    new Date().toLocaleDateString(\"i\");\n  } catch (e) {\n    return e.name === \"RangeError\";\n  }\n  return false;\n}\n\nexport default toLocaleDateStringSupportsOptions()\n  ? (dateObj: Date, locales: string) =>\n      dateObj.toLocaleDateString(locales, {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n      })\n  : (dateObj: Date) => fecha.format(dateObj, \"mediumDate\");\n","import '@vaadin/vaadin-material-styles/mixins/overlay.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-date-picker-overlay\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style include=\"material-overlay\">\n      :host([fullscreen]) {\n        top: 0 !important;\n        right: 0 !important;\n        bottom: var(--vaadin-overlay-viewport-bottom) !important;\n        left: 0 !important;\n        align-items: stretch;\n        justify-content: stretch;\n      }\n\n      [part=\"overlay\"] {\n        overflow: hidden;\n        -webkit-overflow-scrolling: auto;\n      }\n\n      :host(:not([fullscreen])) [part=\"overlay\"] {\n        width: 360px;\n        max-height: 500px;\n        border-radius: 0 4px 4px;\n      }\n\n      :host(:not([fullscreen])[right-aligned]) [part=\"overlay\"] {\n        border-radius: 4px 0 4px 4px;\n      }\n\n      :host(:not([fullscreen])[bottom-aligned]) [part=\"overlay\"] {\n        border-radius: 4px;\n      }\n\n      :host(:not([fullscreen])[show-week-numbers]) [part=\"overlay\"] {\n        width: 396px;\n      }\n\n      [part=\"content\"] {\n        padding: 0;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { OverlayElement } from '@vaadin/vaadin-overlay/src/vaadin-overlay.js';\n\nimport { DisableUpgradeMixin } from '@polymer/polymer/lib/mixins/disable-upgrade-mixin.js';\n/**\n * The overlay element.\n *\n * ### Styling\n *\n * See [`<vaadin-overlay>` documentation](https://github.com/vaadin/vaadin-overlay/blob/master/src/vaadin-overlay.html)\n * for `<vaadin-date-picker-overlay>` parts.\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayElement extends DisableUpgradeMixin(OverlayElement) {\n  static get is() {\n    return 'vaadin-date-picker-overlay';\n  }\n}\n\ncustomElements.define(DatePickerOverlayElement.is, DatePickerOverlayElement);\n","import '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/shadow.js';\nimport '@vaadin/vaadin-material-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-button\" theme-for=\"vaadin-button\">\n  <template>\n    <style>\n      :host {\n        padding: 8px;\n        min-width: 64px;\n        box-sizing: border-box;\n        display: inline-flex;\n        align-items: baseline;\n        justify-content: center;\n        border-radius: 4px;\n        color: var(--material-primary-text-color);\n        font-family: var(--material-font-family);\n        text-transform: uppercase;\n        font-size: var(--material-button-font-size);\n        line-height: 20px;\n        font-weight: 500;\n        letter-spacing: 0.05em;\n        white-space: nowrap;\n        overflow: hidden;\n        transition: box-shadow 0.2s;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      @-moz-document url-prefix() {\n        :host {\n          vertical-align: -13px;\n        }\n      }\n\n      :host::before,\n      :host::after {\n        content: \"\";\n        pointer-events: none;\n        position: absolute;\n        border-radius: inherit;\n        opacity: 0;\n        background-color: currentColor;\n      }\n\n      :host::before {\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        transition: opacity 0.5s;\n      }\n\n      :host::after {\n        border-radius: 50%;\n        width: 320px;\n        height: 320px;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        transition: all 0.9s;\n      }\n\n      [part=\"label\"] ::slotted(*) {\n        vertical-align: middle;\n      }\n\n      :host(:hover)::before,\n      :host([focus-ring])::before {\n        opacity: 0.08;\n        transition-duration: 0.2s;\n      }\n\n      :host([active])::before {\n        opacity: 0.16;\n        transition: opacity 0.4s;\n      }\n\n      :host([active])::after {\n        transform: translate(-50%, -50%) scale(0.0000001); /* animation works weirdly with scale(0) */\n        opacity: 0.1;\n        transition: 0s;\n      }\n\n      :host(:hover:not([active]))::after {\n        transform: translate(-50%, -50%) scale(1);\n        opacity: 0;\n      }\n\n      :host([disabled]) {\n        pointer-events: none;\n        color: var(--material-disabled-text-color);\n      }\n\n      /* Contained and outline variants */\n      :host([theme~=\"contained\"]),\n      :host([theme~=\"outlined\"]) {\n        padding: 8px 16px;\n      }\n\n      :host([theme~=\"outlined\"]) {\n        box-shadow: inset 0 0 0 1px var(--_material-button-outline-color, rgba(0, 0, 0, 0.2));\n      }\n\n      :host([theme~=\"contained\"]:not([disabled])) {\n        background-color: var(--material-primary-color);\n        color: var(--material-primary-contrast-color);\n        box-shadow: var(--material-shadow-elevation-2dp);\n      }\n\n      :host([theme~=\"contained\"][disabled]) {\n        background-color: var(--material-secondary-background-color);\n      }\n\n      :host([theme~=\"contained\"]:hover) {\n        box-shadow: var(--material-shadow-elevation-4dp);\n      }\n\n      :host([theme~=\"contained\"][active]) {\n        box-shadow: var(--material-shadow-elevation-8dp);\n      }\n\n      /* Icon alignment */\n\n      [part] ::slotted(iron-icon) {\n        display: block;\n        width: 18px;\n        height: 18px;\n      }\n\n      [part=\"prefix\"] ::slotted(iron-icon) {\n        margin-right: 8px;\n        margin-left: -4px;\n      }\n\n      [part=\"suffix\"] ::slotted(iron-icon) {\n        margin-left: 8px;\n        margin-right: -4px;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * A private mixin to avoid problems with dynamic properties and Polymer Analyzer.\n * No need to expose these properties in the API docs.\n * @polymerMixin\n */\nconst TabIndexMixin = superClass => class VaadinTabIndexMixin extends superClass {\n  static get properties() {\n    var properties = {\n      /**\n       * Internal property needed to listen to `tabindex` attribute changes.\n       *\n       * For changing the tabindex of this component use the native `tabIndex` property.\n       * @private\n       */\n      tabindex: {\n        type: Number,\n        value: 0,\n        reflectToAttribute: true,\n        observer: '_tabindexChanged'\n      }\n    };\n\n    if (window.ShadyDOM) {\n      // ShadyDOM browsers need the `tabIndex` in order to notify when the user changes it programmatically.\n      properties['tabIndex'] = properties.tabindex;\n    }\n\n    return properties;\n  }\n};\n\n/**\n * Polymer.IronControlState is not a proper 2.0 class, also, its tabindex\n * implementation fails in the shadow dom, so we have this for vaadin elements.\n * @polymerMixin\n */\nexport const ControlStateMixin = superClass => class VaadinControlStateMixin extends TabIndexMixin(superClass) {\n  static get properties() {\n    return {\n      /**\n       * Specify that this control should have input focus when the page loads.\n       */\n      autofocus: {\n        type: Boolean\n      },\n\n      /**\n       * Stores the previous value of tabindex attribute of the disabled element\n       */\n      _previousTabIndex: {\n        type: Number\n      },\n\n      /**\n       * If true, the user cannot interact with this element.\n       */\n      disabled: {\n        type: Boolean,\n        observer: '_disabledChanged',\n        reflectToAttribute: true\n      },\n\n      _isShiftTabbing: {\n        type: Boolean\n      }\n    };\n  }\n\n  ready() {\n    this.addEventListener('focusin', e => {\n      if (e.composedPath()[0] === this) {\n        this._focus(e);\n      } else if (e.composedPath().indexOf(this.focusElement) !== -1 && !this.disabled) {\n        this._setFocused(true);\n      }\n    });\n    this.addEventListener('focusout', e => this._setFocused(false));\n\n    // In super.ready() other 'focusin' and 'focusout' listeners might be\n    // added, so we call it after our own ones to ensure they execute first.\n    // Issue to watch out: when incorrect, <vaadin-combo-box> refocuses the\n    // input field on iOS after “Done” is pressed.\n    super.ready();\n\n    // This fixes the bug in Firefox 61 (https://bugzilla.mozilla.org/show_bug.cgi?id=1472887)\n    // where focusout event does not go out of shady DOM because composed property in the event is not true\n    const ensureEventComposed = e => {\n      if (!e.composed) {\n        e.target.dispatchEvent(new CustomEvent(e.type, {\n          bubbles: true,\n          composed: true,\n          cancelable: false\n        }));\n      }\n    };\n    this.shadowRoot.addEventListener('focusin', ensureEventComposed);\n    this.shadowRoot.addEventListener('focusout', ensureEventComposed);\n\n    this.addEventListener('keydown', e => {\n      if (!e.defaultPrevented && e.keyCode === 9) {\n        if (e.shiftKey) {\n          // Flag is checked in _focus event handler.\n          this._isShiftTabbing = true;\n          HTMLElement.prototype.focus.apply(this);\n          this._setFocused(false);\n          // Event handling in IE is asynchronous and the flag is removed asynchronously as well\n          setTimeout(() => this._isShiftTabbing = false, 0);\n        } else {\n          // Workaround for FF63-65 bug that causes the focus to get lost when\n          // blurring a slotted component with focusable shadow root content\n          // https://bugzilla.mozilla.org/show_bug.cgi?id=1528686\n          // TODO: Remove when safe\n          const firefox = window.navigator.userAgent.match(/Firefox\\/(\\d\\d\\.\\d)/);\n          if (firefox\n            && parseFloat(firefox[1]) >= 63\n            && parseFloat(firefox[1]) < 66\n            && this.parentNode\n            && this.nextSibling) {\n            const fakeTarget = document.createElement('input');\n            fakeTarget.style.position = 'absolute';\n            fakeTarget.style.opacity = 0;\n            fakeTarget.tabIndex = this.tabIndex;\n\n            this.parentNode.insertBefore(fakeTarget, this.nextSibling);\n            fakeTarget.focus();\n            fakeTarget.addEventListener('focusout', () => this.parentNode.removeChild(fakeTarget));\n          }\n        }\n\n      }\n    });\n\n    if (this.autofocus && !this.focused && !this.disabled) {\n      window.requestAnimationFrame(() => {\n        this._focus();\n        this._setFocused(true);\n        this.setAttribute('focus-ring', '');\n      });\n    }\n\n    this._boundKeydownListener = this._bodyKeydownListener.bind(this);\n    this._boundKeyupListener = this._bodyKeyupListener.bind(this);\n  }\n\n  /**\n   * @protected\n   */\n  connectedCallback() {\n    super.connectedCallback();\n\n    document.body.addEventListener('keydown', this._boundKeydownListener, true);\n    document.body.addEventListener('keyup', this._boundKeyupListener, true);\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    document.body.removeEventListener('keydown', this._boundKeydownListener, true);\n    document.body.removeEventListener('keyup', this._boundKeyupListener, true);\n\n    // in non-Chrome browsers, blur does not fire on the element when it is disconnected.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('focused')) {\n      this._setFocused(false);\n    }\n  }\n\n  _setFocused(focused) {\n    if (focused) {\n      this.setAttribute('focused', '');\n    } else {\n      this.removeAttribute('focused');\n    }\n\n    // focus-ring is true when the element was focused from the keyboard.\n    // Focus Ring [A11ycasts]: https://youtu.be/ilj2P5-5CjI\n    if (focused && this._tabPressed) {\n      this.setAttribute('focus-ring', '');\n    } else {\n      this.removeAttribute('focus-ring');\n    }\n  }\n\n  _bodyKeydownListener(e) {\n    this._tabPressed = e.keyCode === 9;\n  }\n\n  _bodyKeyupListener() {\n    this._tabPressed = false;\n  }\n\n  /**\n   * Any element extending this mixin is required to implement this getter.\n   * It returns the actual focusable element in the component.\n   */\n  get focusElement() {\n    window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`);\n    return this;\n  }\n\n  _focus(e) {\n    if (this._isShiftTabbing) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Moving the focus from the host element causes firing of the blur event what leads to problems in IE.\n   * @private\n   */\n  focus() {\n    if (!this.focusElement || this.disabled) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Native bluring in the host element does nothing because it does not have the focus.\n   * In chrome it works, but not in FF.\n   * @private\n   */\n  blur() {\n    this.focusElement.blur();\n    this._setFocused(false);\n  }\n\n  _disabledChanged(disabled) {\n    this.focusElement.disabled = disabled;\n    if (disabled) {\n      this.blur();\n      this._previousTabIndex = this.tabindex;\n      this.tabindex = -1;\n      this.setAttribute('aria-disabled', 'true');\n    } else {\n      if (typeof this._previousTabIndex !== 'undefined') {\n        this.tabindex = this._previousTabIndex;\n      }\n      this.removeAttribute('aria-disabled');\n    }\n  }\n\n  _tabindexChanged(tabindex) {\n    if (tabindex !== undefined) {\n      this.focusElement.tabIndex = tabindex;\n    }\n\n    if (this.disabled && this.tabindex) {\n      // If tabindex attribute was changed while checkbox was disabled\n      if (this.tabindex !== -1) {\n        this._previousTabIndex = this.tabindex;\n      }\n      this.tabindex = tabindex = undefined;\n    }\n\n    if (window.ShadyDOM) {\n      this.setProperties({tabIndex: tabindex, tabindex: tabindex});\n    }\n  }\n\n  /**\n   * @protected\n   */\n  click() {\n    if (!this.disabled) {\n      super.click();\n    }\n  }\n};\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*\\*\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nconst FlowClients = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    if (isForcedDevelopmentMode()) {\n      return true;\n    }\n\n    if (!isLocalhost()) {\n      return false;\n    }\n\n    if (FlowClients) {\n      return !isFlowProductionMode();\n    }\n\n    return !isMinified();\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (FlowClients) {\n    const productionModeApps = Object.keys(FlowClients)\n      .map(key => FlowClients[key])\n      .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /** vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      // NOTE: In case you edit the code here, YOU MUST UPDATE any statistics reporting code in Flow.\n      // Check all locations calling the method getEntries() in\n      // https://github.com/vaadin/flow/blob/master/flow-server/src/main/java/com/vaadin/flow/internal/UsageStatistics.java#L106\n      // Currently it is only used by BootstrapHandler.\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { version: version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { firstUsed: now };\n          }\n          // Discards any previously logged version number\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return true;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.1.0';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n","import { idlePeriod } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\n\nimport { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\nif (!window.Vaadin) {\n  window['Vaadin'] = {};\n}\n\n/**\n * Array of Vaadin custom element classes that have been finalized.\n */\nwindow['Vaadin'].registrations = window.Vaadin.registrations || [];\n\n// Use the hack to prevent polymer-modulizer from converting to exports\nwindow['Vaadin'].developmentModeCallback = window.Vaadin.developmentModeCallback || {};\nwindow['Vaadin'].developmentModeCallback['vaadin-usage-statistics'] = function() {\n  if (usageStatistics) {\n    usageStatistics();\n  }\n};\n\nlet statsJob;\n\nconst registered = new Set();\n\n/**\n * @polymerMixin\n */\nexport const ElementMixin = superClass => class VaadinElementMixin extends superClass {\n  /** @protected */\n  static finalize() {\n    super.finalize();\n\n    const {is} = this;\n\n    // Registers a class prototype for telemetry purposes.\n    if (is && !registered.has(is)) {\n      window.Vaadin.registrations.push(this);\n      registered.add(is);\n\n      if (window.Vaadin.developmentModeCallback) {\n        statsJob = Debouncer.debounce(statsJob,\n          idlePeriod, () => {\n            window.Vaadin.developmentModeCallback['vaadin-usage-statistics']();\n          }\n        );\n        enqueueDebouncer(statsJob);\n      }\n    }\n  }\n  constructor() {\n    super();\n    if (document.doctype === null) {\n      console.warn(\n        'Vaadin components require the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.'\n      );\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\n/**\n * `<vaadin-button>` is a Web Component providing an accessible and customizable button.\n *\n * ```html\n * <vaadin-button>\n * </vaadin-button>\n * ```\n *\n * ```js\n * document.querySelector('vaadin-button').addEventListener('click', () => alert('Hello World!'));\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are exposed for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label (text) inside the button\n * `prefix` | A slot for e.g. an icon before the label\n * `suffix` | A slot for e.g. an icon after the label\n *\n *\n * The following attributes are exposed for styling:\n *\n * Attribute | Description\n * --------- | -----------\n * `active` | Set when the button is pressed down, either with mouse, touch or the keyboard.\n * `disabled` | Set when the button is disabled.\n * `focus-ring` | Set when the button is focused using the keyboard.\n * `focused` | Set when the button is focused.\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass ButtonElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        GestureEventListeners(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        outline: none;\n        white-space: nowrap;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      /* Ensure the button is always aligned on the baseline */\n      .vaadin-button-container::before {\n        content: \"\\\\2003\";\n        display: inline-block;\n        width: 0;\n      }\n\n      .vaadin-button-container {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        width: 100%;\n        height: 100%;\n        min-height: inherit;\n        text-shadow: inherit;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n      }\n\n      [part=\"prefix\"],\n      [part=\"suffix\"] {\n        flex: none;\n      }\n\n      [part=\"label\"] {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      #button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n      }\n    </style>\n    <div class=\"vaadin-button-container\">\n      <div part=\"prefix\">\n        <slot name=\"prefix\"></slot>\n      </div>\n      <div part=\"label\">\n        <slot></slot>\n      </div>\n      <div part=\"suffix\">\n        <slot name=\"suffix\"></slot>\n      </div>\n    </div>\n    <button id=\"button\" type=\"button\"></button>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-button';\n  }\n\n  static get version() {\n    return '2.2.1';\n  }\n\n  ready() {\n    super.ready();\n\n    // Leaving default role in the native button, makes navigation announcement\n    // being different when using focus navigation (tab) versus using normal\n    // navigation (arrows). The first way announces the label on a button\n    // since the focus is moved programmatically, and the second on a group.\n    this.setAttribute('role', 'button');\n    this.$.button.setAttribute('role', 'presentation');\n\n    this._addActiveListeners();\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    // `active` state is preserved when the element is disconnected between keydown and keyup events.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('active')) {\n      this.removeAttribute('active');\n    }\n  }\n\n  _addActiveListeners() {\n    addListener(this, 'down', () => !this.disabled && this.setAttribute('active', ''));\n    addListener(this, 'up', () => this.removeAttribute('active'));\n    this.addEventListener('keydown', e => !this.disabled && [13, 32].indexOf(e.keyCode) >= 0 && this.setAttribute('active', ''));\n    this.addEventListener('keyup', () => this.removeAttribute('active'));\n    this.addEventListener('blur', () => this.removeAttribute('active'));\n  }\n\n  /**\n   * @protected\n   */\n  get focusElement() {\n    return this.$.button;\n  }\n}\n\ncustomElements.define(ButtonElement.is, ButtonElement);\n\nexport { ButtonElement };\n","import '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/font-icons.js';\nimport '@vaadin/vaadin-material-styles/typography.js';\nimport '@vaadin/vaadin-material-styles/shadow.js';\nimport '@vaadin/vaadin-button/theme/material/vaadin-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-date-picker-overlay-content\" theme-for=\"vaadin-date-picker-overlay-content\">\n  <template>\n    <style>\n      :host {\n        font-family: var(--material-font-family);\n        font-size: var(--material-body-font-size);\n        -webkit-text-size-adjust: 100%;\n        line-height: 1.4;\n\n        /* FIXME(platosha): fix the core styles and remove this override. */\n        background: transparent;\n      }\n\n      :host([fullscreen]) {\n        position: absolute;\n      }\n\n      /* Fullscreen Toolbar */\n\n      [part=\"overlay-header\"] {\n        display: flex;\n        align-items: baseline;\n        position: relative;\n        z-index: 2;\n        color: var(--material-body-text-color);\n        background: var(--material-secondary-background-color);\n        border-bottom: 2px solid var(--material-primary-color);\n        padding: 8px;\n        box-shadow: var(--material-shadow-elevation-4dp);\n      }\n\n      /* FIXME(platosha): fix the core styles and remove this override. */\n      [part=\"overlay-header\"]:not([desktop]) {\n        padding-bottom: 8px;\n      }\n\n      [part=\"label\"] {\n        padding: 0 8px;\n        flex: auto;\n      }\n\n      [part=\"clear-button\"],\n      [part=\"toggle-button\"] {\n        font-family: 'material-icons';\n        font-size: var(--material-icon-font-size);\n        line-height: 24px;\n        width: 24px;\n        height: 24px;\n        text-align: center;\n      }\n\n      [part=\"clear-button\"],\n      [part=\"toggle-button\"],\n      [part=\"years-toggle-button\"] {\n        padding: 8px;\n        color: var(--material-secondary-text-color);\n      }\n\n      [part=\"clear-button\"]:hover,\n      [part=\"toggle-button\"]:hover,\n      [part=\"years-toggle-button\"]:hover {\n        color: inherit;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--material-icons-clear);\n      }\n\n      [part=\"toggle-button\"]::before {\n        content: var(--material-icons-calendar);\n      }\n\n      [part=\"years-toggle-button\"] {\n        position: static;\n        padding: 4px 8px;\n        font-size: var(--material-body-font-size);\n        font-weight: 500;\n        line-height: 24px;\n        letter-spacing: 0.05em;\n        color: var(--material-secondary-text-color);\n      }\n\n      [part=\"years-toggle-button\"]::before {\n        content: '';\n        display: none;\n      }\n\n      [part=\"years-toggle-button\"]::after {\n        content: var(--material-icons-play);\n        display: inline-block;\n        width: 24px;\n        font-family: 'material-icons';\n        font-size: var(--material-icon-font-size);\n        line-height: 24px;\n        text-align: center;\n        transition: transform 100ms cubic-bezier(.4, 0, .2, 1);\n      }\n\n      :host([years-visible]) [part=\"years-toggle-button\"]::after {\n        transform: rotate(90deg);\n      }\n\n      /* Month scroller */\n\n      [part=\"months\"] {\n        --vaadin-infinite-scroller-item-height: 320px;\n        text-align: center;\n      }\n\n      /* Year scroller */\n\n      [part=\"years\"] {\n        z-index: 1;\n        background: var(--material-secondary-text-color);\n        color: var(--material-background-color);\n        text-align: center;\n      }\n\n      [part=\"years\"]::before {\n        z-index: 2;\n        border: 0;\n        width: 8px;\n        height: 8px;\n        transform: translateX(-50%) rotate(-45deg);\n        background: var(--material-background-color);\n      }\n\n      :host([years-visible]) [part=\"years\"]::after {\n        top: calc(20px + 16px);\n        height: calc(100% - 20px - 16px);\n      }\n\n      [part=\"year-number\"] {\n        font-size: var(--material-small-font-size);\n        line-height: 10px; /* NOTE(platosha): chosen to align years to months */\n      }\n\n      [part=\"year-separator\"] {\n        background-color: currentColor;\n        width: 4px;\n        height: 4px;\n        border-radius: 50%;\n        margin: calc(0.5 * var(--vaadin-infinite-scroller-item-height, 80px) - 0.5 * 10px - 0.5 * 4px) auto;\n      }\n\n      /* Bottom Bar */\n\n      [part=\"toolbar\"] {\n        display: flex;\n        justify-content: flex-end;\n        padding: 8px 4px;\n        border-top: 1px solid var(--material-divider-color);\n      }\n\n      [part=\"cancel-button\"] {\n        order: 1;\n      }\n\n      [part=\"today-button\"] {\n        order: 2;\n      }\n\n      [part=\"today-button\"],\n      [part=\"cancel-button\"] {\n        margin: 0 4px;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nexport const DatePickerHelper = class VaadinDatePickerHelper {\n  /**\n   * Get ISO 8601 week number for the given date.\n   *\n   * @param {Date} Date object\n   * @return {Number} Week number\n   */\n  static _getISOWeekNumber(date) {\n    // Ported from Vaadin Framework method com.vaadin.client.DateTimeService.getISOWeekNumber(date)\n    var dayOfWeek = date.getDay(); // 0 == sunday\n\n    // ISO 8601 use weeks that start on monday so we use\n    // mon=1,tue=2,...sun=7;\n    if (dayOfWeek === 0) {\n      dayOfWeek = 7;\n    }\n    // Find nearest thursday (defines the week in ISO 8601). The week number\n    // for the nearest thursday is the same as for the target date.\n    var nearestThursdayDiff = 4 - dayOfWeek; // 4 is thursday\n    var nearestThursday = new Date(date.getTime() + nearestThursdayDiff * 24 * 3600 * 1000);\n\n    var firstOfJanuary = new Date(0, 0);\n    firstOfJanuary.setFullYear(nearestThursday.getFullYear());\n\n    var timeDiff = nearestThursday.getTime() - firstOfJanuary.getTime();\n\n    // Rounding the result, as the division doesn't result in an integer\n    // when the given date is inside daylight saving time period.\n    var daysSinceFirstOfJanuary = Math.round(timeDiff / (24 * 3600 * 1000));\n\n    return Math.floor((daysSinceFirstOfJanuary) / 7 + 1);\n  }\n\n  /**\n   * Check if two dates are equal.\n   *\n   * @param {Date} date1\n   * @param {Date} date2\n   * @return {Boolean} True if the given date objects refer to the same date\n   */\n  static _dateEquals(date1, date2) {\n    return date1 instanceof Date && date2 instanceof Date &&\n        date1.getFullYear() === date2.getFullYear() &&\n        date1.getMonth() === date2.getMonth() &&\n        date1.getDate() === date2.getDate();\n  }\n\n  /**\n   * Check if the given date is in the range of allowed dates.\n   *\n   * @param {Date} date The date to check\n   * @param {Date} min Range start\n   * @param {Date} max Range end\n   * @return {Boolean} True if the date is in the range\n   */\n  static _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  /**\n   * Get closest date from array of dates.\n   *\n   * @param {Date} date The date to compare dates with\n   * @param {Array} dates Array of date objects\n   * @return {Date} Closest date\n   */\n  static _getClosestDate(date, dates) {\n    return dates.filter(date => date !== undefined)\n      .reduce((closestDate, candidate) => {\n        if (!candidate) {\n          return closestDate;\n        }\n\n        if (!closestDate) {\n          return candidate;\n        }\n\n        var candidateDiff = Math.abs(date.getTime() - candidate.getTime());\n        var closestDateDiff = Math.abs(closestDate.getTime() - date.getTime());\n        return candidateDiff < closestDateDiff ? candidate : closestDate;\n      });\n  }\n\n  /**\n   * Extracts the basic component parts of a date (day, month and year)\n   * to the expected format.\n   */\n  static _extractDateParts(date) {\n    return {\n      day: date.getDate(),\n      month: date.getMonth(),\n      year: date.getFullYear()\n    };\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/dom-repeat.js';\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass MonthCalendarElement extends ThemableMixin(GestureEventListeners(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      [part=\"weekdays\"],\n      #days {\n        display: flex;\n        flex-wrap: wrap;\n        flex-grow: 1;\n      }\n\n      #days-container,\n      #weekdays-container {\n        display: flex;\n      }\n\n      [part=\"week-numbers\"] {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        flex-shrink: 0;\n      }\n\n      [part=\"week-numbers\"][hidden],\n      [part=\"weekday\"][hidden] {\n        display: none;\n      }\n\n      [part=\"weekday\"],\n      [part=\"date\"] {\n        /* Would use calc(100% / 7) but it doesn't work nice on IE */\n        width: 14.285714286%;\n      }\n\n      [part=\"weekday\"]:empty,\n      [part=\"week-numbers\"] {\n        width: 12.5%;\n        flex-shrink: 0;\n      }\n    </style>\n\n    <div part=\"month-header\" role=\"heading\">[[_getTitle(month, i18n.monthNames)]]</div>\n    <div id=\"monthGrid\" on-tap=\"_handleTap\" on-touchend=\"_preventDefault\" on-touchstart=\"_onMonthGridTouchStart\">\n      <div id=\"weekdays-container\">\n        <div hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\" part=\"weekday\"></div>\n        <div part=\"weekdays\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekDayNames(i18n.weekdays, i18n.weekdaysShort, showWeekNumbers, i18n.firstDayOfWeek)]]\">\n            <div part=\"weekday\" role=\"heading\" aria-label\\$=\"[[item.weekDay]]\">[[item.weekDayShort]]</div>\n          </template>\n        </div>\n      </div>\n      <div id=\"days-container\">\n        <div part=\"week-numbers\" hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekNumbers(_days)]]\">\n            <div part=\"week-number\" role=\"heading\" aria-label\\$=\"[[i18n.week]] [[item]]\">[[item]]</div>\n          </template>\n        </div>\n        <div id=\"days\">\n          <template is=\"dom-repeat\" items=\"[[_days]]\">\n            <div part=\"date\" today\\$=\"[[_isToday(item)]]\" selected\\$=\"[[_dateEquals(item, selectedDate)]]\" focused\\$=\"[[_dateEquals(item, focusedDate)]]\" date=\"[[item]]\" disabled\\$=\"[[!_dateAllowed(item, minDate, maxDate)]]\" role\\$=\"[[_getRole(item)]]\" aria-label\\$=\"[[_getAriaLabel(item)]]\" aria-disabled\\$=\"[[_getAriaDisabled(item, minDate, maxDate)]]\">[[_getDate(item)]]</div>\n          </template>\n        </div>\n      </div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-month-calendar';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * A `Date` object defining the month to be displayed. Only year and\n       * month properties are actually used.\n       */\n      month: {\n        type: Date,\n        value: new Date()\n      },\n\n      /**\n       * A `Date` object for the currently selected date.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * A `Date` object for the currently focused date.\n       */\n      focusedDate: Date,\n\n      showWeekNumbers: {\n        type: Boolean,\n        value: false\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      /**\n       * Flag stating whether taps on the component should be ignored.\n       */\n      ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: {\n        type: Date,\n        value: null\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: {\n        type: Date,\n        value: null\n      },\n\n      _days: {\n        type: Array,\n        computed: '_getDays(month, i18n.firstDayOfWeek, minDate, maxDate)'\n      },\n\n      disabled: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: '_isDisabled(month, minDate, maxDate)'\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_showWeekNumbersChanged(showWeekNumbers, i18n.firstDayOfWeek)'\n    ];\n  }\n\n  _dateEquals(date1, date2) {\n    return DatePickerHelper._dateEquals(date1, date2);\n  }\n\n  _dateAllowed(date, min, max) {\n    return DatePickerHelper._dateAllowed(date, min, max);\n  }\n\n  /* Returns true if all the dates in the month are out of the allowed range */\n  _isDisabled(month, minDate, maxDate) {\n    // First day of the month\n    var firstDate = new Date(0, 0);\n    firstDate.setFullYear(month.getFullYear());\n    firstDate.setMonth(month.getMonth());\n    firstDate.setDate(1);\n\n    // Last day of the month\n    var lastDate = new Date(0, 0);\n    lastDate.setFullYear(month.getFullYear());\n    lastDate.setMonth(month.getMonth() + 1);\n    lastDate.setDate(0);\n\n    if ((minDate && maxDate)\n      && minDate.getMonth() === maxDate.getMonth()\n      && minDate.getMonth() === month.getMonth()\n      && maxDate.getDate() - minDate.getDate() >= 0) {\n      return false;\n    }\n\n    return !this._dateAllowed(firstDate, minDate, maxDate)\n      && !this._dateAllowed(lastDate, minDate, maxDate);\n  }\n\n  _getTitle(month, monthNames) {\n    if (month === undefined || monthNames === undefined) {\n      return;\n    }\n    return this.i18n.formatTitle(monthNames[month.getMonth()], month.getFullYear());\n  }\n\n  _onMonthGridTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n  }\n\n  _dateAdd(date, delta) {\n    date.setDate(date.getDate() + delta);\n  }\n\n  _applyFirstDayOfWeek(weekDayNames, firstDayOfWeek) {\n    if (weekDayNames === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n\n    return weekDayNames.slice(firstDayOfWeek).concat(weekDayNames.slice(0, firstDayOfWeek));\n  }\n\n  _getWeekDayNames(weekDayNames, weekDayNamesShort, showWeekNumbers, firstDayOfWeek) {\n    if (weekDayNames === undefined || weekDayNamesShort === undefined ||\n      showWeekNumbers === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    weekDayNames = this._applyFirstDayOfWeek(weekDayNames, firstDayOfWeek);\n    weekDayNamesShort = this._applyFirstDayOfWeek(weekDayNamesShort, firstDayOfWeek);\n    weekDayNames = weekDayNames.map((day, index) => {\n      return {\n        weekDay: day,\n        weekDayShort: weekDayNamesShort[index]\n      };\n    });\n\n    return weekDayNames;\n  }\n\n  _getDate(date) {\n    return date ? date.getDate() : '';\n  }\n\n  _showWeekNumbersChanged(showWeekNumbers, firstDayOfWeek) {\n    if (showWeekNumbers && firstDayOfWeek === 1) {\n      this.setAttribute('week-numbers', '');\n    } else {\n      this.removeAttribute('week-numbers');\n    }\n  }\n\n  _showWeekSeparator(showWeekNumbers, firstDayOfWeek) {\n    // Currently only supported for locales that start the week on Monday.\n    return showWeekNumbers && firstDayOfWeek === 1;\n  }\n\n  _isToday(date) {\n    return this._dateEquals(new Date(), date);\n  }\n\n  _getDays(month, firstDayOfWeek) {\n    if (month === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    // First day of the month (at midnight).\n    var date = new Date(0, 0);\n    date.setFullYear(month.getFullYear());\n    date.setMonth(month.getMonth());\n    date.setDate(1);\n\n    // Rewind to first day of the week.\n    while (date.getDay() !== firstDayOfWeek) {\n      this._dateAdd(date, -1);\n    }\n\n    var days = [];\n    var startMonth = date.getMonth();\n    var targetMonth = month.getMonth();\n    while (date.getMonth() === targetMonth || date.getMonth() === startMonth) {\n      days.push(date.getMonth() === targetMonth ? new Date(date.getTime()) : null);\n\n      // Advance to next day.\n      this._dateAdd(date, 1);\n    }\n    return days;\n  }\n\n  _getWeekNumber(date, days) {\n    if (date === undefined || days === undefined) {\n      return;\n    }\n\n    if (!date) {\n      // Get the first non-null date from the days array.\n      date = days.reduce((acc, d) => {\n        return !acc && d ? d : acc;\n      });\n    }\n\n    return DatePickerHelper._getISOWeekNumber(date);\n  }\n\n  _getWeekNumbers(dates) {\n    return dates\n      .map(date => this._getWeekNumber(date, dates))\n      .filter((week, index, arr) => arr.indexOf(week) === index);\n  }\n\n  _handleTap(e) {\n    if (!this.ignoreTaps && !this._notTapping && e.target.date && !e.target.hasAttribute('disabled')) {\n      this.selectedDate = e.target.date;\n      this.dispatchEvent(new CustomEvent('date-tap', {bubbles: true, composed: true}));\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  _getRole(date) {\n    return date ? 'button' : 'presentation';\n  }\n\n  _getAriaLabel(date) {\n    if (!date) {\n      return '';\n    }\n\n    var ariaLabel = this._getDate(date) + ' ' +\n      this.i18n.monthNames[date.getMonth()] + ' ' +\n      date.getFullYear() + ', ' +\n      this.i18n.weekdays[date.getDay()];\n\n    if (this._isToday(date)) {\n      ariaLabel += ', ' + this.i18n.today;\n    }\n\n    return ariaLabel;\n  }\n\n  _getAriaDisabled(date, min, max) {\n    if (date === undefined || min === undefined || max === undefined) {\n      return;\n    }\n    return this._dateAllowed(date, min, max) ? 'false' : 'true';\n  }\n}\n\ncustomElements.define(MonthCalendarElement.is, MonthCalendarElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass InfiniteScrollerElement extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n        overflow: hidden;\n        height: 500px;\n      }\n\n      #scroller {\n        position: relative;\n        height: 100%;\n        overflow: auto;\n        outline: none;\n        margin-right: -40px;\n        -webkit-overflow-scrolling: touch;\n        -ms-overflow-style: none;\n        overflow-x: hidden;\n      }\n\n      #scroller.notouchscroll {\n        -webkit-overflow-scrolling: auto;\n      }\n\n      #scroller::-webkit-scrollbar {\n        display: none;\n      }\n\n      .buffer {\n        position: absolute;\n        width: var(--vaadin-infinite-scroller-buffer-width, 100%);\n        box-sizing: border-box;\n        padding-right: 40px;\n        top: var(--vaadin-infinite-scroller-buffer-offset, 0);\n        animation: fadein 0.2s;\n      }\n\n      @keyframes fadein {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n    </style>\n\n    <div id=\"scroller\" on-scroll=\"_scroll\">\n      <div class=\"buffer\"></div>\n      <div class=\"buffer\"></div>\n      <div id=\"fullHeight\"></div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-infinite-scroller';\n  }\n\n  static get properties() {\n    return {\n\n      /**\n       * Count of individual items in each buffer.\n       * The scroller has 2 buffers altogether so bufferSize of 20\n       * will result in 40 buffered DOM items in total.\n       * Changing after initialization not supported.\n       */\n      bufferSize: {\n        type: Number,\n        value: 20\n      },\n\n      /**\n       * The amount of initial scroll top. Needed in order for the\n       * user to be able to scroll backwards.\n       */\n      _initialScroll: {\n        value: 500000\n      },\n\n      /**\n       * The index/position mapped at _initialScroll point.\n       */\n      _initialIndex: {\n        value: 0\n      },\n\n      _buffers: Array,\n\n      _preventScrollEvent: Boolean,\n\n      _mayHaveMomentum: Boolean,\n\n      _initialized: Boolean,\n\n      active: {\n        type: Boolean,\n        observer: '_activated'\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    this._buffers = Array.prototype.slice.call(this.root.querySelectorAll('.buffer'));\n\n    this.$.fullHeight.style.height = this._initialScroll * 2 + 'px';\n\n    var tpl = this.querySelector('template');\n    this._TemplateClass = templatize(tpl, this, {\n      forwardHostProp: function(prop, value) {\n        if (prop !== 'index') {\n          this._buffers.forEach(buffer => {\n            [].forEach.call(buffer.children, insertionPoint => {\n              insertionPoint._itemWrapper.instance[prop] = value;\n            });\n          });\n        }\n      }\n    });\n\n    // Firefox interprets elements with overflow:auto as focusable\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1069739\n    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n    if (isFirefox) {\n      this.$.scroller.tabIndex = -1;\n    }\n  }\n\n  _activated(active) {\n    if (active && !this._initialized) {\n      this._createPool();\n      this._initialized = true;\n    }\n  }\n\n  _finishInit() {\n    if (!this._initDone) {\n      // Once the first set of items start fading in, stamp the rest\n      this._buffers.forEach(buffer => {\n        [].forEach.call(buffer.children,\n          insertionPoint => this._ensureStampedInstance(insertionPoint._itemWrapper));\n      }, this);\n\n      if (!this._buffers[0].translateY) {\n        this._reset();\n      }\n\n      this._initDone = true;\n    }\n  }\n\n  _translateBuffer(up) {\n    var index = up ? 1 : 0;\n    this._buffers[index].translateY = this._buffers[(index ? 0 : 1)].translateY + this._bufferHeight * (index ? -1 : 1);\n    this._buffers[index].style.transform = 'translate3d(0, ' + this._buffers[index].translateY + 'px, 0)';\n    this._buffers[index].updated = false;\n    this._buffers.reverse();\n  }\n\n  _scroll() {\n    if (this._scrollDisabled) {\n      return;\n    }\n\n    var scrollTop = this.$.scroller.scrollTop;\n    if (scrollTop < this._bufferHeight || scrollTop > this._initialScroll * 2 - this._bufferHeight) {\n      // Scrolled near the end/beginning of the scrollable area -> reset.\n      this._initialIndex = ~~this.position;\n      this._reset();\n    }\n\n    // Check if we scrolled enough to translate the buffer positions.\n    var bufferOffset = this.root.querySelector('.buffer').offsetTop;\n    var upperThresholdReached = scrollTop > this._buffers[1].translateY + this.itemHeight + bufferOffset;\n    var lowerThresholdReached = scrollTop < this._buffers[0].translateY + this.itemHeight + bufferOffset;\n\n    if (upperThresholdReached || lowerThresholdReached) {\n      this._translateBuffer(lowerThresholdReached);\n      this._updateClones();\n    }\n\n    if (!this._preventScrollEvent) {\n      this.dispatchEvent(new CustomEvent('custom-scroll', {bubbles: false, composed: true}));\n      this._mayHaveMomentum = true;\n    }\n    this._preventScrollEvent = false;\n\n    this._debouncerScrollFinish = Debouncer.debounce(this._debouncerScrollFinish,\n      timeOut.after(200), () => {\n        var scrollerRect = this.$.scroller.getBoundingClientRect();\n        if (!this._isVisible(this._buffers[0], scrollerRect) && !this._isVisible(this._buffers[1], scrollerRect)) {\n          this.position = this.position;\n        }\n      });\n  }\n\n  /**\n   * Current scroller position as index. Can be a fractional number.\n   *\n   * @type {Number}\n   */\n  set position(index) {\n    this._preventScrollEvent = true;\n    if (index > this._firstIndex && index < this._firstIndex + this.bufferSize * 2) {\n      this.$.scroller.scrollTop = this.itemHeight * (index - this._firstIndex) + this._buffers[0].translateY;\n    } else {\n      this._initialIndex = ~~index;\n      this._reset();\n      this._scrollDisabled = true;\n      this.$.scroller.scrollTop += index % 1 * this.itemHeight;\n      this._scrollDisabled = false;\n    }\n\n    if (this._mayHaveMomentum) {\n      // Stop the possible iOS Safari momentum with -webkit-overflow-scrolling: auto;\n      this.$.scroller.classList.add('notouchscroll');\n      this._mayHaveMomentum = false;\n\n      setTimeout(() => {\n        // Restore -webkit-overflow-scrolling: touch; after a small delay.\n        this.$.scroller.classList.remove('notouchscroll');\n      }, 10);\n    }\n\n  }\n\n  /**\n   * @private\n   */\n  get position() {\n    return (this.$.scroller.scrollTop - this._buffers[0].translateY) / this.itemHeight + this._firstIndex;\n  }\n\n  get itemHeight() {\n    if (!this._itemHeightVal) {\n      if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n        this.updateStyles();\n      }\n\n      const itemHeight = window.ShadyCSS\n        ? window.ShadyCSS.getComputedStyleValue(this, '--vaadin-infinite-scroller-item-height')\n        : getComputedStyle(this).getPropertyValue('--vaadin-infinite-scroller-item-height');\n      // Use background-position temp inline style for unit conversion\n      const tmpStyleProp = 'background-position';\n      this.$.fullHeight.style.setProperty(tmpStyleProp, itemHeight);\n      const itemHeightPx = getComputedStyle(this.$.fullHeight).getPropertyValue(tmpStyleProp);\n      this.$.fullHeight.style.removeProperty(tmpStyleProp);\n      this._itemHeightVal = parseFloat(itemHeightPx);\n    }\n\n    return this._itemHeightVal;\n  }\n\n  get _bufferHeight() {\n    return this.itemHeight * this.bufferSize;\n  }\n\n  _reset() {\n    this._scrollDisabled = true;\n    this.$.scroller.scrollTop = this._initialScroll;\n    this._buffers[0].translateY = this._initialScroll - this._bufferHeight;\n    this._buffers[1].translateY = this._initialScroll;\n    this._buffers.forEach(buffer => {\n      buffer.style.transform = 'translate3d(0, ' + buffer.translateY + 'px, 0)';\n    });\n    this._buffers[0].updated = this._buffers[1].updated = false;\n    this._updateClones(true);\n\n    this._debouncerUpdateClones = Debouncer.debounce(\n      this._debouncerUpdateClones,\n      timeOut.after(200), () => {\n        this._buffers[0].updated = this._buffers[1].updated = false;\n        this._updateClones();\n      });\n\n    this._scrollDisabled = false;\n  }\n\n  _createPool() {\n    var container = this.getBoundingClientRect();\n    this._buffers.forEach(buffer => {\n      for (var i = 0; i < this.bufferSize; i++) {\n        const itemWrapper = document.createElement('div');\n        itemWrapper.style.height = this.itemHeight + 'px';\n        itemWrapper.instance = {};\n\n        const contentId = InfiniteScrollerElement._contentIndex = InfiniteScrollerElement._contentIndex + 1 || 0;\n        const slotName = 'vaadin-infinite-scroller-item-content-' + contentId;\n\n        const insertionPoint = document.createElement('slot');\n        insertionPoint.setAttribute('name', slotName);\n        insertionPoint._itemWrapper = itemWrapper;\n        buffer.appendChild(insertionPoint);\n\n        itemWrapper.setAttribute('slot', slotName);\n        this.appendChild(itemWrapper);\n\n        // This is needed by IE\n        flush();\n\n        setTimeout(() => {\n          // Only stamp the visible instances first\n          if (this._isVisible(itemWrapper, container)) {\n            this._ensureStampedInstance(itemWrapper);\n          }\n        }, 1); // Wait for first reset\n      }\n    }, this);\n\n    setTimeout(() => {\n      afterNextRender(this, this._finishInit.bind(this));\n    }, 1);\n  }\n\n  _ensureStampedInstance(itemWrapper) {\n    if (itemWrapper.firstElementChild) {\n      return;\n    }\n\n    var tmpInstance = itemWrapper.instance;\n\n    itemWrapper.instance = new this._TemplateClass({});\n    itemWrapper.appendChild(itemWrapper.instance.root);\n\n    Object.keys(tmpInstance).forEach(prop => {\n      itemWrapper.instance.set(prop, tmpInstance[prop]);\n    });\n  }\n\n  _updateClones(viewPortOnly) {\n    this._firstIndex = ~~((this._buffers[0].translateY - this._initialScroll) / this.itemHeight) + this._initialIndex;\n\n    var scrollerRect = viewPortOnly ? this.$.scroller.getBoundingClientRect() : undefined;\n    this._buffers.forEach((buffer, bufferIndex) => {\n      if (!buffer.updated) {\n        var firstIndex = this._firstIndex + this.bufferSize * bufferIndex;\n\n        [].forEach.call(buffer.children, (insertionPoint, index) => {\n          const itemWrapper = insertionPoint._itemWrapper;\n          if (!viewPortOnly || this._isVisible(itemWrapper, scrollerRect)) {\n            itemWrapper.instance.index = firstIndex + index;\n          }\n        });\n        buffer.updated = true;\n      }\n    }, this);\n  }\n\n  _isVisible(element, container) {\n    var rect = element.getBoundingClientRect();\n    return rect.bottom > container.top && rect.top < container.bottom;\n  }\n}\n\ncustomElements.define(InfiniteScrollerElement.is, InfiniteScrollerElement);\n","import '@polymer/polymer/lib/elements/custom-style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-date-picker-overlay-styles\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style>\n      :host {\n        align-items: flex-start;\n        justify-content: flex-start;\n      }\n\n      :host([bottom-aligned]) {\n        justify-content: flex-end;\n      }\n\n      :host([right-aligned]) {\n        align-items: flex-end;\n      }\n\n      :host([right-aligned][dir=\"rtl\"]) {\n        align-items: flex-start;\n      }\n\n      [part=\"overlay\"] {\n        display: flex;\n        flex: auto;\n      }\n\n      [part~=\"content\"] {\n        flex: auto;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport { IronA11yAnnouncer } from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport '@vaadin/vaadin-button/src/vaadin-button.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport './vaadin-month-calendar.js';\nimport './vaadin-infinite-scroller.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport './vaadin-date-picker-styles.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener, setTouchAction } from '@polymer/polymer/lib/utils/gestures.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayContentElement extends\n  ThemableMixin(\n    ThemePropertyMixin(\n      GestureEventListeners(PolymerElement))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n        outline: none;\n        background: #fff;\n      }\n\n      [part=\"overlay-header\"] {\n        display: flex;\n        flex-shrink: 0;\n        flex-wrap: nowrap;\n        align-items: center;\n      }\n\n      :host(:not([fullscreen])) [part=\"overlay-header\"] {\n        display: none;\n      }\n\n      [part=\"label\"] {\n        flex-grow: 1;\n      }\n\n      [part=\"clear-button\"]:not([showclear]) {\n        display: none;\n      }\n\n      [part=\"years-toggle-button\"] {\n        display: flex;\n      }\n\n      [part=\"years-toggle-button\"][desktop] {\n        display: none;\n      }\n\n      :host(:not([years-visible])) [part=\"years-toggle-button\"]::before {\n        transform: rotate(180deg);\n      }\n\n      #scrollers {\n        display: flex;\n        height: 100%;\n        width: 100%;\n        position: relative;\n        overflow: hidden;\n      }\n\n      [part=\"months\"],\n      [part=\"years\"] {\n        height: 100%;\n      }\n\n      [part=\"months\"] {\n        --vaadin-infinite-scroller-item-height: 270px;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n\n      #scrollers[desktop] [part=\"months\"] {\n        right: 50px;\n        transform: none !important;\n      }\n\n      [part=\"years\"] {\n        --vaadin-infinite-scroller-item-height: 80px;\n        width: 50px;\n        position: absolute;\n        right: 0;\n        transform: translateX(100%);\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        /* Center the year scroller position. */\n        --vaadin-infinite-scroller-buffer-offset: 50%;\n      }\n\n      #scrollers[desktop] [part=\"years\"] {\n        position: absolute;\n        transform: none !important;\n      }\n\n      [part=\"years\"]::before {\n        content: '';\n        display: block;\n        background: transparent;\n        width: 0;\n        height: 0;\n        position: absolute;\n        left: 0;\n        top: 50%;\n        transform: translateY(-50%);\n        border-width: 6px;\n        border-style: solid;\n        border-color: transparent;\n        border-left-color: #000;\n      }\n\n      :host(.animate) [part=\"months\"],\n      :host(.animate) [part=\"years\"] {\n        transition: all 200ms;\n      }\n\n      [part=\"toolbar\"] {\n        display: flex;\n        justify-content: space-between;\n        z-index: 2;\n        flex-shrink: 0;\n      }\n\n      [part~=\"overlay-header\"]:not([desktop]) {\n        padding-bottom: 40px;\n      }\n\n      [part~=\"years-toggle-button\"] {\n        position: absolute;\n        top: auto;\n        right: 8px;\n        bottom: 0;\n        z-index: 1;\n        padding: 8px;\n      }\n\n      #announcer {\n        display: inline-block;\n        position: fixed;\n        clip: rect(0, 0, 0, 0);\n        clip-path: inset(100%);\n      }\n    </style>\n\n    <div id=\"announcer\" role=\"alert\" aria-live=\"polite\">\n      [[i18n.calendar]]\n    </div>\n\n    <div part=\"overlay-header\" on-touchend=\"_preventDefault\" desktop\\$=\"[[_desktopMode]]\" aria-hidden=\"true\">\n      <div part=\"label\">[[_formatDisplayed(selectedDate, i18n.formatDate, label)]]</div>\n      <div part=\"clear-button\" on-tap=\"_clear\" showclear\\$=\"[[_showClear(selectedDate)]]\"></div>\n      <div part=\"toggle-button\" on-tap=\"_cancel\"></div>\n\n      <div part=\"years-toggle-button\" desktop\\$=\"[[_desktopMode]]\" on-tap=\"_toggleYearScroller\" aria-hidden=\"true\">\n        [[_yearAfterXMonths(_visibleMonthIndex)]]\n      </div>\n    </div>\n\n    <div id=\"scrollers\" desktop\\$=\"[[_desktopMode]]\" on-track=\"_track\">\n      <vaadin-infinite-scroller id=\"monthScroller\" on-custom-scroll=\"_onMonthScroll\" on-touchstart=\"_onMonthScrollTouchStart\" buffer-size=\"3\" active=\"[[initialPosition]]\" part=\"months\">\n        <template>\n          <vaadin-month-calendar i18n=\"[[i18n]]\" month=\"[[_dateAfterXMonths(index)]]\" selected-date=\"{{selectedDate}}\" focused-date=\"[[focusedDate]]\" ignore-taps=\"[[_ignoreTaps]]\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[minDate]]\" max-date=\"[[maxDate]]\" focused\\$=\"[[_focused]]\" part=\"month\" theme\\$=\"[[theme]]\">\n          </vaadin-month-calendar>\n        </template>\n      </vaadin-infinite-scroller>\n      <vaadin-infinite-scroller id=\"yearScroller\" on-tap=\"_onYearTap\" on-custom-scroll=\"_onYearScroll\" on-touchstart=\"_onYearScrollTouchStart\" buffer-size=\"12\" active=\"[[initialPosition]]\" part=\"years\">\n        <template>\n          <div part=\"year-number\" role=\"button\" current\\$=\"[[_isCurrentYear(index)]]\" selected\\$=\"[[_isSelectedYear(index, selectedDate)]]\">\n            [[_yearAfterXYears(index)]]\n          </div>\n          <div part=\"year-separator\" aria-hidden=\"true\"></div>\n        </template>\n      </vaadin-infinite-scroller>\n    </div>\n\n    <div on-touchend=\"_preventDefault\" role=\"toolbar\" part=\"toolbar\">\n      <vaadin-button id=\"todayButton\" part=\"today-button\" disabled=\"[[!_isTodayAllowed(minDate, maxDate)]]\" on-tap=\"_onTodayTap\">\n        [[i18n.today]]\n      </vaadin-button>\n      <vaadin-button id=\"cancelButton\" part=\"cancel-button\" on-tap=\"_cancel\">\n        [[i18n.cancel]]\n      </vaadin-button>\n    </div>\n\n    <iron-media-query query=\"(min-width: 375px)\" query-matches=\"{{_desktopMode}}\"></iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker-overlay-content';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * The value for this element.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * Date value which is focused using keyboard.\n       */\n      focusedDate: {\n        type: Date,\n        notify: true,\n        observer: '_focusedDateChanged'\n      },\n\n      _focusedMonthDate: Number,\n\n      /**\n       * Date which should be visible when there is no value selected.\n       */\n      initialPosition: {\n        type: Date,\n        observer: '_initialPositionChanged'\n      },\n\n      _originDate: {\n        value: new Date()\n      },\n\n      _visibleMonthIndex: Number,\n\n      _desktopMode: Boolean,\n\n      _translateX: {\n        observer: '_translateXChanged'\n      },\n\n      _yearScrollerWidth: {\n        value: 50\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: Date,\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: Date,\n\n      _focused: Boolean,\n\n      /**\n       * Input label\n       */\n      label: String\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.setAttribute('tabindex', 0);\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    addListener(this, 'tap', this._stopPropagation);\n    this.addEventListener('focus', this._onOverlayFocus.bind(this));\n    this.addEventListener('blur', this._onOverlayBlur.bind(this));\n  }\n\n  /**\n   * Fired when the scroller reaches the target scrolling position.\n   * @event scroll-animation-finished\n   * @param {Number} detail.position new position\n   * @param {Number} detail.oldPosition old position\n   */\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._closeYearScroller();\n    this._toggleAnimateClass(true);\n    setTouchAction(this.$.scrollers, 'pan-y');\n    IronA11yAnnouncer.requestAvailability();\n  }\n\n  announceFocusedDate() {\n    var focusedDate = this._currentlyFocusedDate();\n    var announce = [];\n    if (DatePickerHelper._dateEquals(focusedDate, new Date())) {\n      announce.push(this.i18n.today);\n    }\n    announce = announce.concat([\n      this.i18n.weekdays[focusedDate.getDay()],\n      focusedDate.getDate(),\n      this.i18n.monthNames[focusedDate.getMonth()],\n      focusedDate.getFullYear()\n    ]);\n    if (this.showWeekNumbers && this.i18n.firstDayOfWeek === 1) {\n      announce.push(this.i18n.week);\n      announce.push(DatePickerHelper._getISOWeekNumber(focusedDate));\n    }\n    this.dispatchEvent(new CustomEvent('iron-announce', {\n      bubbles: true,\n      composed: true,\n      detail: {\n        text: announce.join(' ')\n      }\n    }));\n    return;\n  }\n\n  /**\n   * Focuses the cancel button\n   */\n  focusCancel() {\n    this.$.cancelButton.focus();\n  }\n\n  /**\n   * Scrolls the list to the given Date.\n   */\n  scrollToDate(date, animate) {\n    this._scrollToPosition(this._differenceInMonths(date, this._originDate), animate);\n  }\n\n  _focusedDateChanged(focusedDate) {\n    this.revealDate(focusedDate);\n  }\n\n  _isCurrentYear(yearsFromNow) {\n    return yearsFromNow === 0;\n  }\n\n  _isSelectedYear(yearsFromNow, selectedDate) {\n    if (selectedDate) {\n      return selectedDate.getFullYear() === this._originDate.getFullYear() + yearsFromNow;\n    }\n  }\n\n  /**\n   * Scrolls the month and year scrollers enough to reveal the given date.\n   */\n  revealDate(date) {\n    if (date) {\n      var diff = this._differenceInMonths(date, this._originDate);\n      var scrolledAboveViewport = this.$.monthScroller.position > diff;\n\n      var visibleItems = this.$.monthScroller.clientHeight / this.$.monthScroller.itemHeight;\n      var scrolledBelowViewport = this.$.monthScroller.position + visibleItems - 1 < diff;\n\n      if (scrolledAboveViewport) {\n        this._scrollToPosition(diff, true);\n      } else if (scrolledBelowViewport) {\n        this._scrollToPosition(diff - visibleItems + 1, true);\n      }\n    }\n  }\n\n  _onOverlayFocus() {\n    this._focused = true;\n  }\n\n  _onOverlayBlur() {\n    this._focused = false;\n  }\n\n  _initialPositionChanged(initialPosition) {\n    this.scrollToDate(initialPosition);\n  }\n\n  _repositionYearScroller() {\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n    this.$.yearScroller.position = (this.$.monthScroller.position + this._originDate.getMonth()) / 12;\n  }\n\n  _repositionMonthScroller() {\n    this.$.monthScroller.position = this.$.yearScroller.position * 12 - this._originDate.getMonth();\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n  }\n\n  _onMonthScroll() {\n    this._repositionYearScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScroll() {\n    this._repositionMonthScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScrollTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n\n    this._repositionMonthScroller();\n  }\n\n  _onMonthScrollTouchStart() {\n    this._repositionYearScroller();\n  }\n\n  _doIgnoreTaps() {\n    this._ignoreTaps = true;\n    this._debouncer = Debouncer.debounce(this._debouncer,\n      timeOut.after(300), () => this._ignoreTaps = false);\n  }\n\n  _formatDisplayed(date, formatDate, label) {\n    if (date) {\n      return formatDate(DatePickerHelper._extractDateParts(date));\n    } else {\n      return label;\n    }\n  }\n\n  _onTodayTap() {\n    var today = new Date();\n\n    if (Math.abs(this.$.monthScroller.position - this._differenceInMonths(today, this._originDate)) < 0.001) {\n      // Select today only if the month scroller is positioned approximately\n      // at the beginning of the current month\n      this.selectedDate = today;\n      this._close();\n    } else {\n      this._scrollToCurrentMonth();\n    }\n  }\n\n  _scrollToCurrentMonth() {\n    if (this.focusedDate) {\n      this.focusedDate = new Date();\n    }\n\n    this.scrollToDate(new Date(), true);\n  }\n\n  _showClear(selectedDate) {\n    return !!selectedDate;\n  }\n\n  _onYearTap(e) {\n    if (!this._ignoreTaps && !this._notTapping) {\n      var scrollDelta = e.detail.y - (this.$.yearScroller.getBoundingClientRect().top + this.$.yearScroller.clientHeight / 2);\n      var yearDelta = scrollDelta / this.$.yearScroller.itemHeight;\n      this._scrollToPosition(this.$.monthScroller.position + yearDelta * 12, true);\n    }\n  }\n\n  _scrollToPosition(targetPosition, animate) {\n    if (this._targetPosition !== undefined) {\n      this._targetPosition = targetPosition;\n      return;\n    }\n\n    if (!animate) {\n      this.$.monthScroller.position = targetPosition;\n      this._targetPosition = undefined;\n      this._repositionYearScroller();\n      return;\n    }\n\n    this._targetPosition = targetPosition;\n\n    // http://gizma.com/easing/\n    var easingFunction = (t, b, c, d) => {\n      t /= d / 2;\n      if (t < 1) {\n        return c / 2 * t * t + b;\n      }\n      t--;\n      return -c / 2 * (t * (t - 2) - 1) + b;\n    };\n\n    var duration = animate ? 300 : 0;\n    var start = 0;\n    var initialPosition = this.$.monthScroller.position;\n\n    var smoothScroll = timestamp => {\n      start = start || timestamp;\n      var currentTime = timestamp - start;\n\n      if (currentTime < duration) {\n        var currentPos = easingFunction(currentTime, initialPosition, this._targetPosition - initialPosition, duration);\n        this.$.monthScroller.position = currentPos;\n        window.requestAnimationFrame(smoothScroll);\n      } else {\n        this.dispatchEvent(new CustomEvent('scroll-animation-finished', {\n          bubbles: true,\n          composed: true,\n          detail: {\n            position: this._targetPosition,\n            oldPosition: initialPosition\n          }\n        }));\n\n        this.$.monthScroller.position = this._targetPosition;\n        this._targetPosition = undefined;\n      }\n\n      setTimeout(this._repositionYearScroller.bind(this), 1);\n    };\n\n    // Start the animation.\n    window.requestAnimationFrame(smoothScroll);\n  }\n\n  _limit(value, range) {\n    return Math.min(range.max, Math.max(range.min, value));\n  }\n\n  _handleTrack(e) {\n    // Check if horizontal movement threshold (dx) not exceeded or\n    // scrolling fast vertically (ddy).\n    if (Math.abs(e.detail.dx) < 10 || Math.abs(e.detail.ddy) > 10) {\n      return;\n    }\n\n    // If we're flinging quickly -> start animating already.\n    if (Math.abs(e.detail.ddx) > this._yearScrollerWidth / 3) {\n      this._toggleAnimateClass(true);\n    }\n\n    var newTranslateX = this._translateX + e.detail.ddx;\n    this._translateX = this._limit(newTranslateX, {\n      min: 0,\n      max: this._yearScrollerWidth\n    });\n  }\n\n  _track(e) {\n    if (this._desktopMode) {\n      // No need to track for swipe gestures on desktop.\n      return;\n    }\n\n    switch (e.detail.state) {\n      case 'start':\n        this._toggleAnimateClass(false);\n        break;\n\n      case 'track':\n        this._handleTrack(e);\n        break;\n\n      case 'end':\n        this._toggleAnimateClass(true);\n        if (this._translateX >= this._yearScrollerWidth / 2) {\n          this._closeYearScroller();\n        } else {\n          this._openYearScroller();\n        }\n        break;\n    }\n  }\n\n  _toggleAnimateClass(enable) {\n    if (enable) {\n      this.classList.add('animate');\n    } else {\n      this.classList.remove('animate');\n    }\n  }\n\n  _toggleYearScroller() {\n    this._isYearScrollerVisible() ? this._closeYearScroller() : this._openYearScroller();\n  }\n\n  _openYearScroller() {\n    this._translateX = 0;\n    this.setAttribute('years-visible', '');\n  }\n\n  _closeYearScroller() {\n    this.removeAttribute('years-visible');\n    this._translateX = this._yearScrollerWidth;\n  }\n\n  _isYearScrollerVisible() {\n    return this._translateX < this._yearScrollerWidth / 2;\n  }\n\n  _translateXChanged(x) {\n    if (!this._desktopMode) {\n      this.$.monthScroller.style.transform = 'translateX(' + (x - this._yearScrollerWidth) + 'px)';\n      this.$.yearScroller.style.transform = 'translateX(' + x + 'px)';\n    }\n  }\n\n  _yearAfterXYears(index) {\n    var result = new Date(this._originDate);\n    result.setFullYear(parseInt(index) + this._originDate.getFullYear());\n    return result.getFullYear();\n  }\n\n  _yearAfterXMonths(months) {\n    return this._dateAfterXMonths(months).getFullYear();\n  }\n\n  _dateAfterXMonths(months) {\n    var result = new Date(this._originDate);\n    result.setDate(1);\n    result.setMonth(parseInt(months) + this._originDate.getMonth());\n    return result;\n  }\n\n  _differenceInMonths(date1, date2) {\n    var months = (date1.getFullYear() - date2.getFullYear()) * 12;\n    return months - date2.getMonth() + date1.getMonth();\n  }\n\n  _differenceInYears(date1, date2) {\n    return this._differenceInMonths(date1, date2) / 12;\n  }\n\n  _clear() {\n    this.selectedDate = '';\n  }\n\n  _close() {\n    const overlayContent = this.getRootNode().host;\n    const overlay = overlayContent ? overlayContent.getRootNode().host : null;\n    if (overlay) {\n      overlay.opened = false;\n    }\n\n    this.dispatchEvent(new CustomEvent('close', {bubbles: true, composed: true}));\n  }\n\n  _cancel() {\n    this.focusedDate = this.selectedDate;\n    this._close();\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'right', 'left', 'enter', 'space', 'home', 'end', 'pageup', 'pagedown', 'tab', 'esc'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _onKeydown(e) {\n    var focus = this._currentlyFocusedDate();\n\n    // Cannot use (today/cancel).focused flag because vaadin-text-field removes it\n    // previously in the keydown event.\n    const isToday = e.composedPath().indexOf(this.$.todayButton) >= 0;\n    const isCancel = e.composedPath().indexOf(this.$.cancelButton) >= 0;\n    const isScroller = !isToday && !isCancel;\n\n    var eventKey = this._eventKey(e);\n    if (eventKey === 'tab') {\n      // We handle tabs here and don't want to bubble up.\n      e.stopPropagation();\n\n      const isFullscreen = this.hasAttribute('fullscreen');\n      const isShift = e.shiftKey;\n\n      if (isFullscreen) {\n        e.preventDefault();\n      } else if (isShift && isScroller || !isShift && isCancel) {\n        // Return focus back to the input field\n        e.preventDefault();\n        this.dispatchEvent(new CustomEvent('focus-input', {bubbles: true, composed: true}));\n      } else if (isShift && isToday) {\n        // Browser returns focus back to the scrollable area. We need to set\n        // the focused flag, and move the scroll to focused date.\n        this._focused = true;\n        setTimeout(() => this.revealDate(this.focusedDate), 1);\n      } else {\n        // Browser moves the focus out of the scroller, hence focused flag must\n        // set to false.\n        this._focused = false;\n      }\n    } else if (eventKey) {\n      e.preventDefault();\n      e.stopPropagation();\n      switch (eventKey) {\n        case 'down':\n          this._moveFocusByDays(7);\n          this.focus();\n          break;\n        case 'up':\n          this._moveFocusByDays(-7);\n          this.focus();\n          break;\n        case 'right':\n          if (isScroller) {\n            this._moveFocusByDays(1);\n          }\n          break;\n        case 'left':\n          if (isScroller) {\n            this._moveFocusByDays(-1);\n          }\n          break;\n        case 'enter':\n          if (isScroller || isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          }\n          break;\n        case 'space':\n          if (isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          } else {\n            var focusedDate = this.focusedDate;\n            if (DatePickerHelper._dateEquals(focusedDate, this.selectedDate)) {\n              this.selectedDate = '';\n              this.focusedDate = focusedDate;\n            } else {\n              this.selectedDate = focusedDate;\n            }\n          }\n          break;\n        case 'home':\n          this._moveFocusInsideMonth(focus, 'minDate');\n          break;\n        case 'end':\n          this._moveFocusInsideMonth(focus, 'maxDate');\n          break;\n        case 'pagedown':\n          this._moveFocusByMonths(e.shiftKey ? 12 : 1);\n          break;\n        case 'pageup':\n          this._moveFocusByMonths(e.shiftKey ? -12 : -1);\n          break;\n        case 'esc':\n          this._cancel();\n          break;\n      }\n    }\n  }\n\n  _currentlyFocusedDate() {\n    return this.focusedDate || this.selectedDate || this.initialPosition || new Date();\n  }\n\n  _focusDate(dateToFocus) {\n    this.focusedDate = dateToFocus;\n    this._focusedMonthDate = dateToFocus.getDate();\n  }\n\n  _focusClosestDate(focus) {\n    this._focusDate(DatePickerHelper._getClosestDate(focus, [this.minDate, this.maxDate]));\n  }\n\n  _moveFocusByDays(days) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth());\n    dateToFocus.setDate(focus.getDate() + days);\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (days > 0) { // down or right\n          this._focusDate(this.maxDate);\n        } else { // up or left\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusByMonths(months) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth() + months);\n\n    var targetMonth = dateToFocus.getMonth();\n\n    dateToFocus.setDate(this._focusedMonthDate || (this._focusedMonthDate = focus.getDate()));\n    if (dateToFocus.getMonth() !== targetMonth) {\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this.focusedDate = dateToFocus;\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (months > 0) { // pagedown\n          this._focusDate(this.maxDate);\n        } else { // pageup\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusInsideMonth(focusedDate, property) {\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focusedDate.getFullYear());\n\n    if (property === 'minDate') {\n      dateToFocus.setMonth(focusedDate.getMonth());\n      dateToFocus.setDate(1);\n    } else {\n      dateToFocus.setMonth(focusedDate.getMonth() + 1);\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focusedDate, this.minDate, this.maxDate)) {\n        // Move to minDate or maxDate\n        this._focusDate(this[property]);\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focusedDate);\n      }\n    }\n  }\n\n  _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  _isTodayAllowed(min, max) {\n    var today = new Date();\n    var todayMidnight = new Date(0, 0);\n    todayMidnight.setFullYear(today.getFullYear());\n    todayMidnight.setMonth(today.getMonth());\n    todayMidnight.setDate(today.getDate());\n    return this._dateAllowed(todayMidnight, min, max);\n  }\n\n  _stopPropagation(e) {\n    e.stopPropagation();\n  }\n}\n\ncustomElements.define(DatePickerOverlayContentElement.is, DatePickerOverlayContentElement);\n","import '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-date-picker-month-calendar\" theme-for=\"vaadin-month-calendar\">\n  <template>\n    <style>\n      :host {\n        color: var(--material-body-text-color);\n        padding: 0 calc(50% / 8 - 0.5em + 8px);\n      }\n\n      :host([show-week-numbers]) {\n        padding: 0 calc(50% / 9 - 0.5em + 8px);\n      }\n\n      [part=\"month-header\"] {\n        font-size: var(--material-h6-font-size);\n        line-height: 1;\n        padding-top: 20px;\n        margin-bottom: 8px;\n      }\n\n      [part=\"week-number\"],\n      [part=\"weekday\"] {\n        font-size: var(--material-caption-font-size);\n        line-height: 44px;\n        height: 40px;\n        color: var(--material-secondary-text-color);\n      }\n\n      :host([disabled]),\n      :host([disabled]) [part=\"week-number\"],\n      :host([disabled]) [part=\"weekday\"] {\n        color: var(--material-disabled-text-color);\n      }\n\n      [part=\"date\"] {\n        position: relative;\n        font-size: var(--material-body-font-size);\n        line-height: 42px;\n        height: 40px;\n        cursor: default;\n      }\n\n      [part=\"date\"]::after {\n        content: '';\n        position: absolute;\n        z-index: -4;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 38px;\n        height: 38px;\n        box-sizing: border-box;\n        border-radius: 50%;\n        border: 2px solid transparent;\n      }\n\n      /* Today */\n\n      [part=\"date\"][today] {\n        color: var(--material-primary-text-color);\n      }\n\n      /* Hover */\n\n      [part=\"date\"]:not([disabled]):hover::after {\n        background-color: var(--material-secondary-background-color);\n        border-color: var(--material-secondary-background-color);\n        z-index: -3;\n      }\n\n      /* Hide for touch devices */\n      @media (hover: none) {\n        [part=\"date\"]:not([disabled]):hover::after {\n          background-color: transparent;\n          border-color: transparent;\n          z-index: -4;\n        }\n      }\n\n      /* Selected */\n\n      [part=\"date\"][selected] {\n        font-weight: 500;\n      }\n\n      [part=\"date\"]:not([disabled])[selected]::after,\n      [part=\"date\"][selected]::after {\n        background-color: transparent;\n        border-color: currentColor;\n        z-index: -2;\n      }\n\n      /* Focused */\n\n      [part=\"date\"]:not([disabled])[focused],\n      [part=\"date\"]:not([disabled]):active {\n        color: var(--material-primary-contrast-color);\n      }\n\n      [part=\"date\"]:not([disabled])[focused]::after,\n      [part=\"date\"]:not([disabled]):active::after {\n        opacity: 0.7;\n        background-color: var(--material-primary-color);\n        border-color: var(--material-primary-color);\n        z-index: -1;\n      }\n\n      [part=\"date\"][disabled] {\n        color: var(--material-disabled-text-color);\n      }\n\n      :host([focused]) [part=\"date\"]:not([disabled])[focused]::after {\n        opacity: 1;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '../color.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"material-required-field\">\n  <template>\n    <style>\n      [part=\"label\"] {\n        display: block;\n        position: absolute;\n        top: 8px;\n        font-size: 1em;\n        line-height: 1;\n        height: 20px;\n        margin-bottom: -4px;\n        white-space: nowrap;\n        overflow-x: hidden;\n        text-overflow: ellipsis;\n        color: var(--material-secondary-text-color);\n        transform-origin: 0 75%;\n        transform: scale(0.75);\n      }\n\n      :host([required]) [part=\"label\"]::after {\n        content: \" *\";\n        color: inherit;\n      }\n\n      :host([invalid]) [part=\"label\"] {\n        color: var(--material-error-text-color);\n      }\n\n      [part=\"error-message\"] {\n        font-size: .75em;\n        line-height: 1;\n        color: var(--material-error-text-color);\n      }\n\n      /* Margin that doesn’t reserve space when there’s no error message */\n      [part=\"error-message\"]:not(:empty)::before {\n        content: \"\";\n        display: block;\n        height: 6px;\n      }\n\n      :host(:not([invalid])) [part=\"error-message\"] {\n        margin-top: 0;\n        max-height: 0;\n        overflow: hidden;\n      }\n\n      :host([invalid]) [part=\"error-message\"] {\n        animation: reveal 0.2s;\n      }\n\n      @keyframes reveal {\n        0% {\n          opacity: 0;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '../font-icons.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"material-field-button\">\n  <template>\n    <style>\n      /* TODO(platosha): align icon sizes with other elements */\n      [part\\$=\"button\"] {\n        flex: none;\n        width: 24px;\n        height: 24px;\n        padding: 4px;\n        color: var(--material-secondary-text-color);\n        font-size: var(--material-icon-font-size);\n        line-height: 24px;\n        text-align: center;\n      }\n\n      :host(:not([readonly])) [part\\$=\"button\"] {\n        cursor: pointer;\n      }\n\n      :host(:not([readonly])) [part\\$=\"button\"]:hover {\n        color: var(--material-text-color);\n      }\n\n      :host([disabled]) [part\\$=\"button\"],\n      :host([readonly]) [part\\$=\"button\"] {\n        color: var(--material-disabled-text-color);\n      }\n\n      :host([disabled]) [part=\"clear-button\"] {\n        display: none;\n      }\n\n      [part\\$=\"button\"]::before {\n        font-family: \"material-icons\";\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/typography.js';\nimport '@vaadin/vaadin-material-styles/mixins/required-field.js';\nimport '@vaadin/vaadin-material-styles/font-icons.js';\nimport '@vaadin/vaadin-material-styles/mixins/field-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-text-field\" theme-for=\"vaadin-text-field\">\n  <template>\n    <style include=\"material-required-field material-field-button\">\n      :host {\n        display: inline-flex;\n        position: relative;\n        padding-top: 8px;\n        margin-bottom: 8px;\n        outline: none;\n        color: var(--material-body-text-color);\n        font-size: var(--material-body-font-size);\n        line-height: 24px;\n        font-family: var(--material-font-family);\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      :host::before {\n        line-height: 32px;\n      }\n\n      /* Strange gymnastics to make fields vertically align nicely in most cases\n         (no label, with label, without prefix, with prefix, etc.) */\n\n      :host([has-label]) {\n        padding-top: 24px;\n      }\n\n      [part=\"label\"]:empty {\n        display: none;\n      }\n\n      [part=\"label\"]:empty::before {\n        content: \" \";\n        position: absolute;\n      }\n\n      [part=\"input-field\"] {\n        position: relative;\n        top: -0.2px; /* NOTE(platosha): Adjusts for wrong flex baseline in Chrome & Safari */\n        height: 32px;\n        padding-left: 0;\n        background-color: transparent;\n        margin: 0;\n      }\n\n      [part=\"input-field\"]::before,\n      [part=\"input-field\"]::after {\n        content: \"\";\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 1px;\n        transform-origin: 50% 0%;\n        background-color: var(--_material-text-field-input-line-background-color, #000);\n        opacity: var(--_material-text-field-input-line-opacity, 0.42);\n      }\n\n      [part=\"input-field\"]::after {\n        background-color: var(--material-primary-color);\n        opacity: 0;\n        height: 2px;\n        bottom: 0;\n        transform: scaleX(0);\n        transition: opacity 0.175s;\n      }\n\n      :host([disabled]) [part=\"label\"],\n      :host([disabled]) [part=\"value\"],\n      :host([disabled]) [part=\"input-field\"] ::slotted(input),\n      :host([disabled]) [part=\"input-field\"] ::slotted(textarea),\n      :host([disabled]) [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        color: var(--material-disabled-text-color);\n        -webkit-text-fill-color: var(--material-disabled-text-color);\n      }\n\n      [part=\"value\"],\n      :host([disabled]) [part=\"input-field\"] ::slotted(input),\n      :host([disabled]) [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        outline: none;\n        margin: 0;\n        border: 0;\n        border-radius: 0;\n        padding: 8px 0;\n        width: 100%;\n        height: 100%;\n        font-family: inherit;\n        font-size: 1em;\n        line-height: inherit;\n        color: inherit;\n        background-color: transparent;\n        /* Disable default invalid style in Firefox */\n        box-shadow: none;\n      }\n\n      /* TODO: the text opacity should be 42%, but the disabled style is 38%.\n      Would need to introduce another property for it if we want to be 100% accurate. */\n      [part=\"value\"]::-webkit-input-placeholder {\n        color: var(--material-disabled-text-color);\n        transition: opacity 0.175s 0.05s;\n        opacity: 1;\n      }\n\n      [part=\"value\"]:-ms-input-placeholder {\n        color: var(--material-disabled-text-color);\n      }\n\n      [part=\"value\"]::-moz-placeholder {\n        color: var(--material-disabled-text-color);\n        transition: opacity 0.175s 0.05s;\n        opacity: 1;\n      }\n\n      [part=\"value\"]::placeholder {\n        color: var(--material-disabled-text-color);\n        transition: opacity 0.175s 0.1s;\n        opacity: 1;\n      }\n\n      :host([has-label]:not([focused]):not([invalid]):not([theme=\"always-float-label\"])) [part=\"value\"]::-webkit-input-placeholder {\n        opacity: 0;\n        transition-delay: 0;\n      }\n\n      :host([has-label]:not([focused]):not([invalid]):not([theme=\"always-float-label\"])) [part=\"value\"]::-moz-placeholder {\n        opacity: 0;\n        transition-delay: 0;\n      }\n\n      :host([has-label]:not([focused]):not([invalid]):not([theme=\"always-float-label\"])) [part=\"value\"]::placeholder {\n        opacity: 0;\n        transition-delay: 0;\n      }\n\n      /* IE11 doesn’t show the placeholder when the input is focused, so it’s basically useless for this theme */\n      :host([has-label]) [part=\"value\"]:-ms-input-placeholder {\n        opacity: 0;\n      }\n\n      [part=\"label\"] {\n        width: 133%;\n        transition: transform 0.175s, color 0.175s, width 0.175s;\n        transition-timing-function: ease, ease, step-end;\n      }\n\n      /* TODO: using unsupported selector to fix IE11 (even thought the label element is scaled down,\n         the 133% width still takes the same space as an unscaled element */\n      ::-ms-backdrop,\n      .vaadin-text-field-container {\n        overflow: hidden;\n      }\n\n      /* Same fix for MS Edge ^^   */\n      @supports (-ms-ime-align:auto) {\n        .vaadin-text-field-container {\n          overflow: hidden;\n        }\n      }\n\n      :host(:hover:not([readonly]):not([invalid])) [part=\"input-field\"]::before {\n        opacity: var(--_material-text-field-input-line-hover-opacity, 0.87);\n      }\n\n      :host([focused]:not([invalid])) [part=\"label\"] {\n        color: var(--material-primary-text-color);\n      }\n\n      :host([focused]) [part=\"input-field\"]::after,\n      :host([invalid]) [part=\"input-field\"]::after {\n        opacity: 1;\n        transform: none;\n        transition: transform 0.175s, opacity 0.175s;\n      }\n\n      :host([invalid]) [part=\"input-field\"]::after {\n        background-color: var(--material-error-color);\n      }\n\n      :host([input-prevented]) [part=\"input-field\"] {\n        color: var(--material-error-text-color);\n      }\n\n      :host([disabled]) {\n        pointer-events: none;\n      }\n\n      :host([disabled]) [part=\"input-field\"] {\n        color: var(--material-disabled-text-color);\n      }\n\n      :host([disabled]) [part=\"input-field\"]::before {\n        background-color: transparent;\n        background-image: linear-gradient(90deg, var(--_material-text-field-input-line-background-color, #000) 0, var(--_material-text-field-input-line-background-color, #000) 2px, transparent 2px);\n        background-size: 4px 1px;\n        background-repeat: repeat-x;\n      }\n\n      /* Only target the visible floating label */\n      :host([has-label]:not([has-value]):not([focused]):not([invalid]):not([theme~=\"always-float-label\"])) [part=\"label\"] {\n        width: 100%;\n        /* IE11 doesn’t work with calc inside the translate function, so we need to have a fixed pixel value instead of 50% + 16px */\n        transform: scale(1) translateY(24px);\n        transition-timing-function: ease, ease, step-start;\n        pointer-events: none;\n        left: auto;\n        transition-delay: 0.1s;\n      }\n\n      /* Slotted content */\n\n      [part=\"input-field\"] ::slotted(*:not([part=\"value\"]):not([part\\$=\"-button\"]):not(input):not(textarea)) {\n        color: var(--material-secondary-text-color);\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--material-icons-clear);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-text-field-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: inline-flex;\n        outline: none;\n      }\n\n      :host::before {\n        content: \"\\\\2003\";\n        width: 0;\n        display: inline-block;\n        /* Size and position this element on the same vertical position as the input-field element\n           to make vertical align for the host element work as expected */\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      .vaadin-text-field-container,\n      .vaadin-text-area-container {\n        display: flex;\n        flex-direction: column;\n        min-width: 100%;\n        max-width: 100%;\n        width: var(--vaadin-text-field-default-width, 12em);\n      }\n\n      [part=\"label\"]:empty {\n        display: none;\n      }\n\n      [part=\"input-field\"] {\n        display: flex;\n        align-items: center;\n        flex: auto;\n      }\n\n      .vaadin-text-field-container [part=\"input-field\"] {\n        flex-grow: 0;\n      }\n\n      /* Reset the native input styles */\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea) {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        outline: none;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        border-radius: 0;\n        min-width: 0;\n        font: inherit;\n        font-size: 1em;\n        line-height: normal;\n        color: inherit;\n        background-color: transparent;\n        /* Disable default invalid style in Firefox */\n        box-shadow: none;\n      }\n\n      [part=\"input-field\"] ::slotted(*) {\n        flex: none;\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        flex: auto;\n        white-space: nowrap;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n      }\n\n      [part=\"input-field\"] ::slotted(textarea) {\n        resize: none;\n      }\n\n      [part=\"value\"]::-ms-clear,\n      [part=\"input-field\"] ::slotted(input)::-ms-clear {\n        display: none;\n      }\n\n      [part=\"clear-button\"] {\n        cursor: default;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: \"✕\";\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\nconst HOST_PROPS = {\n  default: ['list', 'autofocus', 'pattern', 'autocapitalize', 'autocorrect', 'maxlength',\n    'minlength', 'name', 'placeholder', 'autocomplete', 'title'],\n  accessible: ['disabled', 'readonly', 'required', 'invalid']\n};\n\nconst PROP_TYPE = {\n  DEFAULT: 'default',\n  ACCESSIBLE: 'accessible'\n};\n\n\n/**\n * @polymerMixin\n * @mixes Vaadin.ControlStateMixin\n */\nexport const TextFieldMixin = subclass => class VaadinTextFieldMixin extends ControlStateMixin(subclass) {\n  static get properties() {\n    return {\n      /**\n       * Whether the value of the control can be automatically completed by the browser.\n       * List of available options at:\n       * https://developer.mozilla.org/en/docs/Web/HTML/Element/input#attr-autocomplete\n       */\n      autocomplete: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari that is used to control whether\n       * autocorrection should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * on: Enable autocorrection.\n       * off: Disable autocorrection.\n       */\n      autocorrect: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari and Chrome that is used to control whether\n       * autocapitalization should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * characters: Characters capitalization.\n       * words: Words capitalization.\n       * sentences: Sentences capitalization.\n       * none: No capitalization.\n       */\n      autocapitalize: {\n        type: String\n      },\n\n      /**\n       * Specify that the value should be automatically selected when the field gains focus.\n       */\n      autoselect: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set to true to display the clear icon which clears the input.\n       */\n      clearButtonVisible: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Error to show when the input value is invalid.\n       */\n      errorMessage: {\n        type: String,\n        value: ''\n      },\n\n      /**\n       * Object with translated strings used for localization. Has\n       * the following structure and default values:\n       *\n       * ```\n       * {\n       *   // Translation of the clear icon button accessible label\n       *   clear: 'Clear'\n       * }\n       * ```\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            clear: 'Clear'\n          };\n        }\n      },\n\n      /**\n       * String used for the label element.\n       */\n      label: {\n        type: String,\n        value: '',\n        observer: '_labelChanged'\n      },\n\n      /**\n       * Maximum number of characters (in Unicode code points) that the user can enter.\n       */\n      maxlength: {\n        type: Number\n      },\n\n      /**\n       * Minimum number of characters (in Unicode code points) that the user can enter.\n       */\n      minlength: {\n        type: Number\n      },\n\n      /**\n       * The name of the control, which is submitted with the form data.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * A hint to the user of what can be entered in the control.\n       */\n      placeholder: {\n        type: String\n      },\n\n      /**\n       * This attribute indicates that the user cannot modify the value of the control.\n       */\n      readonly: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Specifies that the user must fill in a value.\n       */\n      required: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n\n      /**\n       * The initial value of the control.\n       * It can be used for two-way data binding.\n       */\n      value: {\n        type: String,\n        value: '',\n        observer: '_valueChanged',\n        notify: true\n      },\n\n      /**\n       * This property is set to true when the control value is invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      /**\n       * Specifies that the text field has value.\n       */\n      hasValue: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * When set to true, user is prevented from typing a value that\n       * conflicts with the given `pattern`.\n       */\n      preventInvalidInput: {\n        type: Boolean\n      },\n\n      /**\n       * A pattern matched against individual characters the user inputs.\n       * When set, the field will prevent:\n       * - `keyDown` events if the entered key doesn't match `/^_enabledCharPattern$/`\n       * - `paste` events if the pasted text doesn't match `/^_enabledCharPattern*$/`\n       * - `drop` events if the dropped text doesn't match `/^_enabledCharPattern*$/`\n       *\n       * For example, to enable entering only numbers and minus signs,\n       * `_enabledCharPattern = \"[\\\\d-]\"`\n       */\n      _enabledCharPattern: String,\n\n      _labelId: String,\n\n      _errorId: String,\n\n      _inputId: String\n    };\n  }\n\n  static get observers() {\n    return ['_stateChanged(disabled, readonly, clearButtonVisible, hasValue)',\n      '_hostPropsChanged(' + HOST_PROPS.default.join(', ') + ')',\n      '_hostAccessiblePropsChanged(' + HOST_PROPS.accessible.join(', ') + ')',\n      '_getActiveErrorId(invalid, errorMessage, _errorId)',\n      '_getActiveLabelId(label, _labelId, _inputId)',\n      '__observeOffsetHeight(errorMessage, invalid, label)',\n      '__enabledCharPatternChanged(_enabledCharPattern)'\n    ];\n  }\n\n  get focusElement() {\n    if (!this.shadowRoot) {\n      return;\n    }\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    if (slotted) {\n      return slotted;\n    }\n    return this.shadowRoot.querySelector('[part=\"value\"]');\n  }\n\n  /**\n   * @private\n   */\n  get inputElement() {\n    return this.focusElement;\n  }\n\n  get _slottedTagName() {\n    return 'input';\n  }\n\n  _createConstraintsObserver() {\n    // This complex observer needs to be added dynamically here (instead of defining it above in the `get observers()`)\n    // so that it runs after complex observers of inheriting classes. Otherwise e.g. `_stepOrMinChanged()` observer of\n    // vaadin-number-field would run after this and the `min` and `step` properties would not yet be propagated to\n    // the `inputElement` when this runs.\n    this._createMethodObserver('_constraintsChanged(required, minlength, maxlength, pattern)');\n  }\n\n  _onInput(e) {\n    if (this.__preventInput) {\n      e.stopImmediatePropagation();\n      this.__preventInput = false;\n      return;\n    }\n\n    if (this.preventInvalidInput) {\n      const input = this.inputElement;\n      if (input.value.length > 0 && !this.checkValidity()) {\n        input.value = this.value || '';\n        // add input-prevented attribute for 200ms\n        this.setAttribute('input-prevented', '');\n        this._inputDebouncer = Debouncer.debounce(\n          this._inputDebouncer,\n          timeOut.after(200), () => {\n            this.removeAttribute('input-prevented');\n          });\n        return;\n      }\n    }\n\n    if (!e.__fromClearButton) {\n      this.__userInput = true;\n    }\n    this.value = e.target.value;\n  }\n\n  // NOTE(yuriy): Workaround needed for IE11 and Edge for proper displaying\n  // of the clear button instead of setting display property for it depending on state.\n  _stateChanged(disabled, readonly, clearButtonVisible, hasValue) {\n    if (!disabled &&\n        !readonly &&\n        clearButtonVisible &&\n        hasValue\n    ) {\n      this.$.clearButton.removeAttribute('hidden');\n    } else {\n      this.$.clearButton.setAttribute('hidden', true);\n    }\n  }\n\n  _onChange(e) {\n    if (this._valueClearing) {\n      return;\n    }\n\n    // In the Shadow DOM, the `change` event is not leaked into the\n    // ancestor tree, so we must do this manually.\n    const changeEvent = new CustomEvent('change', {\n      detail: {\n        sourceEvent: e\n      },\n      bubbles: e.bubbles,\n      cancelable: e.cancelable,\n    });\n    this.dispatchEvent(changeEvent);\n  }\n\n  _valueChanged(newVal, oldVal) {\n    // setting initial value to empty string, skip validation\n    if (newVal === '' && oldVal === undefined) {\n      return;\n    }\n\n    if (newVal !== '' && newVal != null) {\n      this.hasValue = true;\n    } else {\n      this.hasValue = false;\n    }\n\n    if (this.__userInput) {\n      this.__userInput = false;\n      return;\n    } else if (newVal !== undefined) {\n      this.inputElement.value = newVal;\n    } else {\n      this.value = this.inputElement.value = '';\n    }\n\n    if (this.invalid) {\n      this.validate();\n    }\n  }\n\n  _labelChanged(label) {\n    if (label !== '' && label != null) {\n      this.setAttribute('has-label', '');\n    } else {\n      this.removeAttribute('has-label');\n    }\n  }\n\n  _onSlotChange() {\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n\n    if (this.value) {\n      this.inputElement.value = this.value;\n      this.validate();\n    }\n\n    if (slotted && !this._slottedInput) {\n      this._validateSlottedValue(slotted);\n      this._addInputListeners(slotted);\n      this._addIEListeners(slotted);\n      this._slottedInput = slotted;\n    } else if (!slotted && this._slottedInput) {\n      this._removeInputListeners(this._slottedInput);\n      this._removeIEListeners(this._slottedInput);\n      this._slottedInput = undefined;\n    }\n\n    Object.keys(PROP_TYPE).map(key => PROP_TYPE[key]).forEach(type =>\n      this._propagateHostAttributes(HOST_PROPS[type].map(attr => this[attr]), type));\n  }\n\n  _hostPropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.DEFAULT);\n  }\n\n  _hostAccessiblePropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.ACCESSIBLE);\n  }\n\n  _validateSlottedValue(slotted) {\n    if (slotted.value !== this.value) {\n      console.warn('Please define value on the vaadin-text-field component!');\n      slotted.value = '';\n    }\n  }\n\n  _propagateHostAttributes(attributesValues, type) {\n    const input = this.inputElement;\n    const attributeNames = HOST_PROPS[type];\n\n    if (type === 'accessible') {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n        this._setOrToggleAttribute(`aria-${attr}`, attributesValues[index], input);\n      });\n    } else {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n      });\n    }\n  }\n\n  _setOrToggleAttribute(name, value, node) {\n    if (!name || !node) {\n      return;\n    }\n\n    if (value) {\n      node.setAttribute(name, (typeof value === 'boolean') ? '' : value);\n    } else {\n      node.removeAttribute(name);\n    }\n  }\n\n  _constraintsChanged(required, minlength, maxlength, pattern) {\n    if (!this.invalid) {\n      return;\n    }\n\n    if (!required && !minlength && !maxlength && !pattern) {\n      this.invalid = false;\n    } else {\n      this.validate();\n    }\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   * @returns {boolean}\n   */\n  checkValidity() {\n    if (this.required || this.pattern || this.maxlength || this.minlength) {\n      return this.inputElement.checkValidity();\n    } else {\n      return !this.invalid;\n    }\n  }\n\n  _addInputListeners(node) {\n    node.addEventListener('input', this._boundOnInput);\n    node.addEventListener('change', this._boundOnChange);\n    node.addEventListener('blur', this._boundOnBlur);\n    node.addEventListener('focus', this._boundOnFocus);\n    node.addEventListener('paste', this._boundOnPaste);\n    node.addEventListener('drop', this._boundOnDrop);\n    node.addEventListener('beforeinput', this._boundOnBeforeInput);\n  }\n\n  _removeInputListeners(node) {\n    node.removeEventListener('input', this._boundOnInput);\n    node.removeEventListener('change', this._boundOnChange);\n    node.removeEventListener('blur', this._boundOnBlur);\n    node.removeEventListener('focus', this._boundOnFocus);\n    node.removeEventListener('paste', this._boundOnPaste);\n    node.removeEventListener('drop', this._boundOnDrop);\n    node.removeEventListener('beforeinput', this._boundOnBeforeInput);\n  }\n\n  ready() {\n    super.ready();\n\n    this._createConstraintsObserver();\n\n    this._boundOnInput = this._onInput.bind(this);\n    this._boundOnChange = this._onChange.bind(this);\n    this._boundOnBlur = this._onBlur.bind(this);\n    this._boundOnFocus = this._onFocus.bind(this);\n    this._boundOnPaste = this._onPaste.bind(this);\n    this._boundOnDrop = this._onDrop.bind(this);\n    this._boundOnBeforeInput = this._onBeforeInput.bind(this);\n\n    const defaultInput = this.shadowRoot.querySelector('[part=\"value\"]');\n    this._slottedInput = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    this._addInputListeners(defaultInput);\n    this._addIEListeners(defaultInput);\n    if (this._slottedInput) {\n      this._addIEListeners(this._slottedInput);\n      this._addInputListeners(this._slottedInput);\n    }\n\n    this.shadowRoot.querySelector('[name=\"input\"], [name=\"textarea\"]')\n      .addEventListener('slotchange', this._onSlotChange.bind(this));\n\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n      this.updateStyles();\n    }\n\n    this.$.clearButton.addEventListener('mousedown', () => this._valueClearing = true);\n    this.$.clearButton.addEventListener('mouseleave', () => this._valueClearing = false);\n    this.$.clearButton.addEventListener('click', this._onClearButtonClick.bind(this));\n    this.addEventListener('keydown', this._onKeyDown.bind(this));\n\n    var uniqueId = TextFieldMixin._uniqueId = 1 + TextFieldMixin._uniqueId || 0;\n    this._errorId = `${this.constructor.is}-error-${uniqueId}`;\n    this._labelId = `${this.constructor.is}-label-${uniqueId}`;\n    this._inputId = `${this.constructor.is}-input-${uniqueId}`;\n\n    // Lumo theme defines a max-height transition for the \"error-message\"\n    // part on invalid state change.\n    this.shadowRoot.querySelector('[part=\"error-message\"]')\n      .addEventListener('transitionend', () => {\n        this.__observeOffsetHeight();\n      });\n  }\n\n  /**\n   * Returns true if `value` is valid.\n   * `<iron-form>` uses this to check the validity for all its elements.\n   *\n   * @return {boolean} True if the value is valid.\n   */\n  validate() {\n    return !(this.invalid = !this.checkValidity());\n  }\n\n  clear() {\n    this.value = '';\n  }\n\n  _onBlur() {\n    this.validate();\n  }\n\n  _onFocus() {\n    if (this.autoselect) {\n      this.inputElement.select();\n      // iOS 9 workaround: https://stackoverflow.com/a/7436574\n      setTimeout(() => {\n        try {\n          this.inputElement.setSelectionRange(0, 9999);\n        } catch (e) {\n          // The workaround may cause errors on different input types.\n          // Needs to be suppressed. See https://github.com/vaadin/flow/issues/6070\n        }\n      });\n    }\n  }\n\n  _onClearButtonClick(e) {\n    e.preventDefault();\n    // NOTE(yuriy): This line won't affect focus on the host. Cannot be properly tested.\n    this.inputElement.focus();\n    this.clear();\n    this._valueClearing = false;\n    if (navigator.userAgent.match(/Trident/)) {\n      // Disable IE input\" event prevention here, we want the input event from\n      // below to propagate normally.\n      this.__preventInput = false;\n    }\n    const inputEvent = new Event('input', {bubbles: true, composed: true});\n    inputEvent.__fromClearButton = true;\n    const changeEvent = new Event('change', {bubbles: !this._slottedInput});\n    changeEvent.__fromClearButton = true;\n    this.inputElement.dispatchEvent(inputEvent);\n    this.inputElement.dispatchEvent(changeEvent);\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode === 27 && this.clearButtonVisible) {\n      const dispatchChange = !!this.value;\n      this.clear();\n      dispatchChange && this.inputElement.dispatchEvent(new Event('change', {bubbles: !this._slottedInput}));\n    }\n\n    if (this._enabledCharPattern && !this.__shouldAcceptKey(e)) {\n      e.preventDefault();\n    }\n  }\n\n  __shouldAcceptKey(event) {\n    return (event.metaKey || event.ctrlKey)\n      || !event.key // allow typing anything if event.key is not supported\n      || event.key.length !== 1 // allow \"Backspace\", \"ArrowLeft\" etc.\n      || this.__enabledCharRegExp.test(event.key);\n  }\n\n  _onPaste(e) {\n    if (this._enabledCharPattern) {\n      const pastedText = (e.clipboardData || window.clipboardData).getData('text');\n      if (!this.__enabledTextRegExp.test(pastedText)) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  _onDrop(e) {\n    if (this._enabledCharPattern) {\n      const draggedText = e.dataTransfer.getData('text');\n      if (!this.__enabledTextRegExp.test(draggedText)) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  _onBeforeInput(e) {\n    // The `beforeinput` event covers all the cases for `_enabledCharPattern`: keyboard, pasting and dropping,\n    // but it is still experimental technology so we can't rely on it. It's used here just as an additional check,\n    // because it seems to be the only way to detect and prevent specific keys on mobile devices. See issue #429.\n    if (this._enabledCharPattern && e.data && !this.__enabledTextRegExp.test(e.data)) {\n      e.preventDefault();\n    }\n  }\n\n  __enabledCharPatternChanged(_enabledCharPattern) {\n    this.__enabledCharRegExp = _enabledCharPattern && new RegExp('^' + _enabledCharPattern + '$');\n    this.__enabledTextRegExp = _enabledCharPattern && new RegExp('^' + _enabledCharPattern + '*$');\n  }\n\n  _addIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      // IE11 dispatches `input` event in following cases:\n      // - focus or blur, when placeholder attribute is set\n      // - placeholder attribute value changed\n      // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/101220/\n      this._shouldPreventInput = () => {\n        this.__preventInput = true;\n        requestAnimationFrame(() => {\n          this.__preventInput = false;\n        });\n      };\n      node.addEventListener('focusin', this._shouldPreventInput);\n      node.addEventListener('focusout', this._shouldPreventInput);\n      this._createPropertyObserver('placeholder', this._shouldPreventInput);\n    }\n  }\n\n  _removeIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      node.removeEventListener('focusin', this._shouldPreventInput);\n      node.removeEventListener('focusout', this._shouldPreventInput);\n    }\n  }\n\n  _getActiveErrorId(invalid, errorMessage, errorId) {\n    this._setOrToggleAttribute('aria-describedby',\n      (errorMessage && invalid ? errorId : undefined),\n      this.focusElement);\n  }\n\n  _getActiveLabelId(label, _labelId, _inputId) {\n    let ids = _inputId;\n    if (label) {\n      ids = `${_labelId} ${_inputId}`;\n    }\n    this.focusElement.setAttribute('aria-labelledby', ids);\n  }\n\n  _getErrorMessageAriaHidden(invalid, errorMessage, errorId) {\n    return (!(errorMessage && invalid ? errorId : undefined)).toString();\n  }\n\n  _dispatchIronResizeEventIfNeeded(sizePropertyName, value) {\n    const previousSizePropertyName = '__previous' + sizePropertyName;\n    if (this[previousSizePropertyName] !== undefined\n        && this[previousSizePropertyName] !== value) {\n      this.dispatchEvent(\n        new CustomEvent('iron-resize', {bubbles: true})\n      );\n    }\n\n    this[previousSizePropertyName] = value;\n  }\n\n  __observeOffsetHeight() {\n    this._dispatchIronResizeEventIfNeeded('Height', this.offsetHeight);\n  }\n\n  /**\n   * @protected\n   */\n  attributeChangedCallback(prop, oldVal, newVal) {\n    super.attributeChangedCallback(prop, oldVal, newVal);\n    // Needed until Edge has CSS Custom Properties (present in Edge Preview)\n    /* istanbul ignore if */\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss) &&\n      /^(focused|focus-ring|invalid|disabled|placeholder|has-value)$/.test(prop)) {\n      this.updateStyles();\n    }\n\n    // Safari has an issue with repainting shadow root element styles when a host attribute changes.\n    // Need this workaround (toggle any inline css property on and off) until the issue gets fixed.\n    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    /* istanbul ignore if */\n    if (isSafari && this.root) {\n      const WEBKIT_PROPERTY = '-webkit-backface-visibility';\n      this.root.querySelectorAll('*').forEach(el => {\n        el.style[WEBKIT_PROPERTY] = 'visible';\n        el.style[WEBKIT_PROPERTY] = '';\n      });\n    }\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n\n  /**\n   * Fired when the value is changed by the user: on every typing keystroke,\n   * and the value is cleared using the clear button.\n   *\n   * @event input\n   */\n\n  /**\n   * Fired when the size of the element changes.\n   *\n   * @event iron-resize\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { TextFieldMixin } from './vaadin-text-field-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n/**\n * `<vaadin-text-field>` is a Web Component for text field control in forms.\n *\n * ```html\n * <vaadin-text-field label=\"First Name\">\n * </vaadin-text-field>\n * ```\n *\n * ### Prefixes and suffixes\n *\n * These are child elements of a `<vaadin-text-field>` that are displayed\n * inline with the input, before or after.\n * In order for an element to be considered as a prefix, it must have the slot\n * attribute set to `prefix` (and similarly for `suffix`).\n *\n * ```html\n * <vaadin-text-field label=\"Email address\">\n *   <div slot=\"prefix\">Sent to:</div>\n *   <div slot=\"suffix\">@vaadin.com</div>\n * </vaadin-text-area>\n * ```\n *\n * ### Styling\n *\n * The following custom properties are available for styling:\n *\n * Custom property | Description | Default\n * ----------------|-------------|-------------\n * `--vaadin-text-field-default-width` | Set the default width of the input field | `12em`\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label element\n * `input-field` | The element that wraps prefix, value and suffix\n * `value` | The text value element inside the `input-field` element\n * `error-message` | The error message element\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `disabled` | Set to a disabled text field | :host\n * `has-value` | Set when the element has a value | :host\n * `has-label` | Set when the element has a label | :host\n * `invalid` | Set when the element is invalid | :host\n * `input-prevented` | Temporarily set when invalid input is prevented | :host\n * `focused` | Set when the element is focused | :host\n * `focus-ring` | Set when the element is keyboard focused | :host\n * `readonly` | Set to a readonly text field | :host\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.TextFieldMixin\n * @mixes Vaadin.ThemableMixin\n * @demo demo/index.html\n */\nclass TextFieldElement extends ElementMixin(TextFieldMixin(ThemableMixin(PolymerElement))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-text-field-shared-styles\">\n      /* polymer-cli linter breaks with empty line */\n    </style>\n\n    <div class=\"vaadin-text-field-container\">\n\n      <label part=\"label\" on-click=\"focus\" id=\"[[_labelId]]\">[[label]]</label>\n\n      <div part=\"input-field\" id=\"[[_inputId]]\">\n\n        <slot name=\"prefix\"></slot>\n\n        <slot name=\"input\">\n          <input part=\"value\">\n        </slot>\n\n        <div part=\"clear-button\" id=\"clearButton\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n        <slot name=\"suffix\"></slot>\n\n      </div>\n\n      <div part=\"error-message\" id=\"[[_errorId]]\" aria-live=\"assertive\" aria-hidden\\$=\"[[_getErrorMessageAriaHidden(invalid, errorMessage, _errorId)]]\">[[errorMessage]]</div>\n\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-text-field';\n  }\n\n  static get version() {\n    return '2.5.3';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Identifies a list of pre-defined options to suggest to the user.\n       * The value must be the id of a <datalist> element in the same document.\n       */\n      list: {\n        type: String\n      },\n\n      /**\n       * A regular expression that the value is checked against.\n       * The pattern must match the entire value, not just some subset.\n       */\n      pattern: {\n        type: String\n      },\n\n      /**\n       * The text usually displayed in a tooltip popup when the mouse is over the field.\n       */\n      title: {\n        type: String\n      }\n    };\n  }\n}\n\ncustomElements.define(TextFieldElement.is, TextFieldElement);\n\nexport { TextFieldElement };\n","import './vaadin-date-picker-overlay.js';\nimport './vaadin-date-picker-overlay-content.js';\nimport './vaadin-month-calendar.js';\nimport '@vaadin/vaadin-text-field/theme/material/vaadin-text-field.js';\nimport '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/font-icons.js';\nimport '@vaadin/vaadin-material-styles/mixins/field-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-date-picker\" theme-for=\"vaadin-date-picker\">\n  <template>\n    <style include=\"material-field-button\">\n      :host {\n        display: inline-flex;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--material-icons-clear);\n      }\n\n      [part=\"toggle-button\"]::before {\n        content: var(--material-icons-calendar);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\n/**\n * @polymerMixin\n */\nexport const DatePickerMixin = subclass => class VaadinDatePickerMixin extends mixinBehaviors(\n  [IronResizableBehavior], subclass\n) {\n\n  static get properties() {\n    return {\n      /**\n       * The current selected date.\n       */\n      _selectedDate: {\n        type: Date\n      },\n\n      _focusedDate: Date,\n\n      /**\n       * The value for this element.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      value: {\n        type: String,\n        observer: '_valueChanged',\n        notify: true,\n        value: ''\n      },\n\n      /**\n       * Set to true to mark the input as required.\n       */\n      required: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * The name of this element.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * Date which should be visible when there is no value selected.\n       *\n       * The same date formats as for the `value` property are supported.\n       */\n      initialPosition: String,\n\n      /**\n       * The label for this element.\n       */\n      label: String,\n\n      /**\n       * Set true to open the date selector overlay.\n       */\n      opened: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        observer: '_openedChanged'\n      },\n\n      /**\n       * Set true to display ISO-8601 week numbers in the calendar. Notice that\n       * displaying week numbers is only supported when `i18n.firstDayOfWeek`\n       * is 1 (Monday).\n       */\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _fullscreen: {\n        value: false,\n        observer: '_fullscreenChanged'\n      },\n\n      _fullscreenMediaQuery: {\n        value: '(max-width: 420px), (max-height: 420px)'\n      },\n\n      // An array of ancestor elements whose -webkit-overflow-scrolling is forced from value\n      // 'touch' to value 'auto' in order to prevent them from clipping the dropdown. iOS only.\n      _touchPrevented: Array,\n\n      /**\n       * The object used to localize this component.\n       * To change the default localization, replace the entire\n       * _i18n_ object or just the property you want to modify.\n       *\n       * The object has the following JSON structure and default values:\n\n          {\n            // An array with the full names of months starting\n            // with January.\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September',\n              'October', 'November', 'December'\n            ],\n\n            // An array of weekday names starting with Sunday. Used\n            // in screen reader announcements.\n            weekdays: [\n              'Sunday', 'Monday', 'Tuesday', 'Wednesday',\n              'Thursday', 'Friday', 'Saturday'\n            ],\n\n            // An array of short weekday names starting with Sunday.\n            // Displayed in the calendar.\n            weekdaysShort: [\n              'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n            ],\n\n            // An integer indicating the first day of the week\n            // (0 = Sunday, 1 = Monday, etc.).\n            firstDayOfWeek: 0,\n\n            // Used in screen reader announcements along with week\n            // numbers, if they are displayed.\n            week: 'Week',\n\n            // Translation of the Calendar icon button title.\n            calendar: 'Calendar',\n\n            // Translation of the Clear icon button title.\n            clear: 'Clear',\n\n            // Translation of the Today shortcut button text.\n            today: 'Today',\n\n            // Translation of the Cancel button text.\n            cancel: 'Cancel',\n\n            // A function to format given `Object` as\n            // date string. Object is in the format `{ day: ..., month: ..., year: ... }`\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            formatDate: d => {\n              // returns a string representation of the given\n              // object in 'MM/DD/YYYY' -format\n            },\n\n            // A function to parse the given text to an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            // Must properly parse (at least) text formatted by `formatDate`.\n            // Setting the property to null will disable keyboard input feature.\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            parseDate: text => {\n              // Parses a string in 'MM/DD/YY', 'MM/DD' or 'DD' -format to\n              // an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            }\n\n            // A function to format given `monthName` and\n            // `fullYear` integer as calendar title string.\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          }\n\n       *\n       * @default {English/US}\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September', 'October', 'November', 'December'\n            ],\n            weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n            weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n            firstDayOfWeek: 0,\n            week: 'Week',\n            calendar: 'Calendar',\n            clear: 'Clear',\n            today: 'Today',\n            cancel: 'Cancel',\n            formatDate: d => {\n              const yearStr = String(d.year).replace(/\\d+/, y => '0000'.substr(y.length) + y);\n              return [d.month + 1, d.day, yearStr].join('/');\n            },\n            parseDate: text => {\n              const parts = text.split('/');\n              const today = new Date();\n              let date, month = today.getMonth(), year = today.getFullYear();\n\n              if (parts.length === 3) {\n                year = parseInt(parts[2]);\n                if (parts[2].length < 3 && year >= 0) {\n                  year += year < 50 ? 2000 : 1900;\n                }\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 2) {\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 1) {\n                date = parseInt(parts[0]);\n              }\n\n              if (date !== undefined) {\n                return {day: date, month, year};\n              }\n            },\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          };\n        }\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      min: {\n        type: String,\n        observer: '_minChanged'\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      max: {\n        type: String,\n        observer: '_maxChanged'\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      _minDate: {\n        type: Date,\n        // null does not work here because minimizer passes undefined to overlay (#351)\n        value: ''\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      _maxDate: {\n        type: Date,\n        value: ''\n      },\n\n      _noInput: {\n        type: Boolean,\n        computed: '_isNoInput(_fullscreen, _ios, i18n, i18n.*)'\n      },\n\n      _ios: {\n        type: Boolean,\n        value: navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/)\n      },\n\n      _webkitOverflowScroll: {\n        type: Boolean,\n        value: document.createElement('div').style.webkitOverflowScrolling === ''\n      },\n\n      _ignoreAnnounce: {\n        value: true\n      },\n\n      _focusOverlayOnOpen: Boolean,\n\n      _overlayInitialized: Boolean\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateHasValue(value)',\n      '_validateInput(_selectedDate, _minDate, _maxDate)',\n      '_selectedDateChanged(_selectedDate, i18n.formatDate)',\n      '_focusedDateChanged(_focusedDate, i18n.formatDate)',\n      '_announceFocusedDate(_focusedDate, opened, _ignoreAnnounce)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this._boundOnScroll = this._onScroll.bind(this);\n    this._boundFocus = this._focus.bind(this);\n    this._boundUpdateAlignmentAndPosition = this._updateAlignmentAndPosition.bind(this);\n\n    addListener(this, 'tap', e => {\n      // FIXME(platosha): use preventDefault in the text field clear button,\n      // then the following composedPath check could be simplified down\n      // to `if (!e.defaultPrevented)`.\n      // https://github.com/vaadin/vaadin-text-field/issues/352\n      const inputIndex = e.composedPath().indexOf(this._inputElement);\n      if (\n        e.composedPath().slice(0, inputIndex)\n          .filter(el => el.getAttribute && el.getAttribute('part') === 'clear-button')\n          .length === 0\n      ) {\n        this.open();\n      }\n    });\n\n    this.addEventListener('touchend', this._preventDefault.bind(this));\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    this.addEventListener('input', this._onUserInput.bind(this));\n    this.addEventListener('focus', e => this._noInput && e.target.blur());\n  }\n\n  _initOverlay() {\n    this.$.overlay.removeAttribute('disable-upgrade');\n    this._overlayInitialized = true;\n\n    this.$.overlay.addEventListener('opened-changed', e => this.opened = e.detail.value);\n\n    this._overlayContent.addEventListener('close', this._close.bind(this));\n    this._overlayContent.addEventListener('focus-input', this._focusAndSelect.bind(this));\n    this.$.overlay.addEventListener('vaadin-overlay-escape-press', this._boundFocus);\n\n    // Keep focus attribute in focusElement for styling\n    this._overlayContent.addEventListener('focus', () => this.focusElement._setFocused(true));\n\n    this.$.overlay.addEventListener('vaadin-overlay-close', this._onVaadinOverlayClose.bind(this));\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._overlayInitialized) {\n      this.$.overlay.removeEventListener('vaadin-overlay-escape-press', this._boundFocus);\n    }\n\n    this.opened = false;\n  }\n\n  /**\n   * Opens the dropdown.\n   */\n  open() {\n    if (!this.disabled && !this.readonly) {\n      this.opened = true;\n    }\n  }\n\n  _close(e) {\n    if (e) {\n      e.stopPropagation();\n    }\n    this._focus();\n    this.close();\n  }\n\n  /**\n   * Closes the dropdown.\n   */\n  close() {\n    if (this._overlayInitialized) {\n      this.$.overlay.close();\n    }\n  }\n\n  get _inputElement() {\n    return this._input();\n  }\n\n  get _nativeInput() {\n    if (this._inputElement) {\n      // vaadin-text-field's input is focusElement\n      // iron-input's input is inputElement\n      return this._inputElement.focusElement ? this._inputElement.focusElement :\n        this._inputElement.inputElement ? this._inputElement.inputElement :\n          window.unwrap ? window.unwrap(this._inputElement) : this._inputElement;\n    }\n  }\n\n  _parseDate(str) {\n    // Parsing with RegExp to ensure correct format\n    var parts = /^([-+]\\d{1}|\\d{2,4}|[-+]\\d{6})-(\\d{1,2})-(\\d{1,2})$/.exec(str);\n    if (!parts) {\n      return;\n    }\n\n    var date = new Date(0, 0); // Wrong date (1900-01-01), but with midnight in local time\n    date.setFullYear(parseInt(parts[1], 10));\n    date.setMonth(parseInt(parts[2], 10) - 1);\n    date.setDate(parseInt(parts[3], 10));\n    return date;\n  }\n\n  _isNoInput(fullscreen, ios, i18n) {\n    return !this._inputElement || fullscreen || ios || !i18n.parseDate;\n  }\n\n  _formatISO(date) {\n    if (!(date instanceof Date)) {\n      return '';\n    }\n\n    const pad = (num, fmt = '00') => (fmt + num).substr((fmt + num).length - fmt.length);\n\n    let yearSign = '';\n    let yearFmt = '0000';\n    let yearAbs = date.getFullYear();\n    if (yearAbs < 0) {\n      yearAbs = -yearAbs;\n      yearSign = '-';\n      yearFmt = '000000';\n    } else if (date.getFullYear() >= 10000) {\n      yearSign = '+';\n      yearFmt = '000000';\n    }\n\n    const year = yearSign + pad(yearAbs, yearFmt);\n    const month = pad(date.getMonth() + 1);\n    const day = pad(date.getDate());\n    return [year, month, day].join('-');\n  }\n\n  _openedChanged(opened) {\n    if (opened && !this._overlayInitialized) {\n      this._initOverlay();\n    }\n    if (this._overlayInitialized) {\n      this.$.overlay.opened = opened;\n    }\n    if (opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _selectedDateChanged(selectedDate, formatDate) {\n    if (selectedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    if (this.__userInputOccurred) {\n      this.__dispatchChange = true;\n    }\n    const inputValue = selectedDate && formatDate(DatePickerHelper._extractDateParts(selectedDate));\n    const value = this._formatISO(selectedDate);\n    if (value !== this.value) {\n      this.validate(inputValue);\n      this.value = value;\n    }\n    this.__userInputOccurred = false;\n    this.__dispatchChange = false;\n    this._focusedDate = selectedDate;\n    this._inputValue = selectedDate ? inputValue : '';\n  }\n\n  _focusedDateChanged(focusedDate, formatDate) {\n    if (focusedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    this.__userInputOccurred = true;\n    if (!this._ignoreFocusedDateChange && !this._noInput) {\n      this._inputValue = focusedDate ? formatDate(DatePickerHelper._extractDateParts(focusedDate)) : '';\n    }\n  }\n\n  _updateHasValue(value) {\n    if (value) {\n      this.setAttribute('has-value', '');\n    } else {\n      this.removeAttribute('has-value');\n    }\n  }\n\n\n  __getOverlayTheme(theme, overlayInitialized) {\n    if (overlayInitialized) {\n      return theme;\n    }\n  }\n\n  _handleDateChange(property, value, oldValue) {\n    if (!value) {\n      this[property] = '';\n      return;\n    }\n\n    var date = this._parseDate(value);\n    if (!date) {\n      this.value = oldValue;\n      return;\n    }\n    if (!DatePickerHelper._dateEquals(this[property], date)) {\n      this[property] = date;\n    }\n  }\n\n  _valueChanged(value, oldValue) {\n    if (this.__dispatchChange) {\n      this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\n    }\n    this._handleDateChange('_selectedDate', value, oldValue);\n  }\n\n  _minChanged(value, oldValue) {\n    this._handleDateChange('_minDate', value, oldValue);\n  }\n\n  _maxChanged(value, oldValue) {\n    this._handleDateChange('_maxDate', value, oldValue);\n  }\n\n  _updateAlignmentAndPosition() {\n    if (!this._overlayInitialized) {\n      return;\n    }\n    if (!this._fullscreen) {\n      const inputRect = this._inputElement.getBoundingClientRect();\n\n      const bottomAlign = inputRect.top > window.innerHeight / 2;\n      const rightAlign = inputRect.left + this.clientWidth / 2 > window.innerWidth / 2;\n\n      if (rightAlign) {\n        const viewportWidth = Math.min(window.innerWidth, document.documentElement.clientWidth);\n        this.$.overlay.setAttribute('right-aligned', '');\n        this.$.overlay.style.removeProperty('left');\n        this.$.overlay.style.right = (viewportWidth - inputRect.right) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('right-aligned');\n        this.$.overlay.style.removeProperty('right');\n        this.$.overlay.style.left = inputRect.left + 'px';\n      }\n\n      if (bottomAlign) {\n        const viewportHeight = Math.min(window.innerHeight, document.documentElement.clientHeight);\n        this.$.overlay.setAttribute('bottom-aligned', '');\n        this.$.overlay.style.removeProperty('top');\n        this.$.overlay.style.bottom = (viewportHeight - inputRect.top) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('bottom-aligned');\n        this.$.overlay.style.removeProperty('bottom');\n        this.$.overlay.style.top = inputRect.bottom + 'px';\n      }\n    }\n\n    this.$.overlay.setAttribute('dir',\n      getComputedStyle(this._inputElement).getPropertyValue('direction')\n    );\n    this._overlayContent._repositionYearScroller();\n  }\n\n  _fullscreenChanged() {\n    if (this._overlayInitialized && this.$.overlay.opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _onOverlayOpened() {\n    this._openedWithFocusRing = this.hasAttribute('focus-ring') || (this.focusElement && this.focusElement.hasAttribute('focus-ring'));\n\n    var parsedInitialPosition = this._parseDate(this.initialPosition);\n\n    var initialPosition = this._selectedDate || this._overlayContent.initialPosition ||\n      parsedInitialPosition || new Date();\n\n    if (parsedInitialPosition ||\n      DatePickerHelper._dateAllowed(initialPosition, this._minDate, this._maxDate)) {\n      this._overlayContent.initialPosition = initialPosition;\n    } else {\n      this._overlayContent.initialPosition =\n        DatePickerHelper._getClosestDate(initialPosition, [this._minDate, this._maxDate]);\n    }\n\n    this._overlayContent.scrollToDate(this._overlayContent.focusedDate || this._overlayContent.initialPosition);\n    // Have a default focused date\n    this._ignoreFocusedDateChange = true;\n    this._overlayContent.focusedDate = this._overlayContent.focusedDate || this._overlayContent.initialPosition;\n    this._ignoreFocusedDateChange = false;\n\n    window.addEventListener('scroll', this._boundOnScroll, true);\n    this.addEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._webkitOverflowScroll) {\n      this._touchPrevented = this._preventWebkitOverflowScrollingTouch(this.parentElement);\n    }\n\n    if (this._focusOverlayOnOpen) {\n      this._overlayContent.focus();\n      this._focusOverlayOnOpen = false;\n    } else {\n      this._focus();\n    }\n\n    if (this._noInput && this.focusElement) {\n      this.focusElement.blur();\n    }\n\n    this.updateStyles();\n\n    this._ignoreAnnounce = false;\n  }\n\n  // A hack needed for iOS to prevent dropdown from being clipped in an\n  // ancestor container with -webkit-overflow-scrolling: touch;\n  _preventWebkitOverflowScrollingTouch(element) {\n    var result = [];\n    while (element) {\n      if (window.getComputedStyle(element).webkitOverflowScrolling === 'touch') {\n        var oldInlineValue = element.style.webkitOverflowScrolling;\n        element.style.webkitOverflowScrolling = 'auto';\n        result.push({\n          element: element,\n          oldInlineValue: oldInlineValue\n        });\n      }\n      element = element.parentElement;\n    }\n    return result;\n  }\n\n  _onOverlayClosed() {\n    this._ignoreAnnounce = true;\n\n    window.removeEventListener('scroll', this._boundOnScroll, true);\n    this.removeEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._touchPrevented) {\n      this._touchPrevented.forEach(prevented =>\n        prevented.element.style.webkitOverflowScrolling = prevented.oldInlineValue);\n      this._touchPrevented = [];\n    }\n\n    this.updateStyles();\n\n    // Select the parsed input or focused date\n    this._ignoreFocusedDateChange = true;\n    if (this.i18n.parseDate) {\n      var inputValue = this._inputValue || '';\n      const dateObject = this.i18n.parseDate(inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._selectedDate = parsedDate;\n      } else {\n        this._selectedDate = null;\n        this._inputValue = inputValue;\n      }\n    } else if (this._focusedDate) {\n      this._selectedDate = this._focusedDate;\n    }\n    this._ignoreFocusedDateChange = false;\n\n    if (this._nativeInput && this._nativeInput.selectionStart) {\n      this._nativeInput.selectionStart = this._nativeInput.selectionEnd;\n    }\n    this.validate();\n  }\n\n  /**\n   * Returns true if `value` is valid, and sets the `invalid` flag appropriately.\n   *\n   * @param {string} value Value to validate. Optional, defaults to user's input value.\n   * @return {boolean} True if the value is valid and sets the `invalid` flag appropriately\n   */\n  validate(value) {\n    // reset invalid state on the underlying text field\n    this.invalid = false;\n    value = value !== undefined ? value : this._inputValue;\n    return !(this.invalid = !this.checkValidity(value));\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   *\n   * Override the `checkValidity` method for custom validations.\n   *\n   * @param {string} value Value to validate. Optional, defaults to the selected date.\n   * @return {boolean} True if the value is valid\n   */\n  checkValidity(value) {\n    var inputValid = !value ||\n      (this._selectedDate && value === this.i18n.formatDate(DatePickerHelper._extractDateParts(this._selectedDate)));\n    var minMaxValid = !this._selectedDate ||\n      DatePickerHelper._dateAllowed(this._selectedDate, this._minDate, this._maxDate);\n\n    var inputValidity = true;\n    if (this._inputElement) {\n      if (this._inputElement.checkValidity) {\n        // vaadin native input elements have the checkValidity method\n        inputValidity = this._inputElement.checkValidity(value);\n      } else if (this._inputElement.validate) {\n        // iron-form-elements have the validate API\n        inputValidity = this._inputElement.validate(value);\n      }\n    }\n\n    return inputValid && minMaxValid && inputValidity;\n  }\n\n  _onScroll(e) {\n    if (e.target === window || !this._overlayContent.contains(e.target)) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _focus() {\n    if (this._noInput) {\n      this._overlayInitialized && this._overlayContent.focus();\n    } else {\n      this._inputElement.focus();\n    }\n  }\n\n  _focusAndSelect() {\n    this._focus();\n    this._setSelectionRange(0, this._inputValue.length);\n  }\n\n  _setSelectionRange(a, b) {\n    if (this._nativeInput && this._nativeInput.setSelectionRange) {\n      this._nativeInput.setSelectionRange(a, b);\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'enter', 'esc', 'tab'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _isValidDate(d) {\n    return d && !isNaN(d.getTime());\n  }\n\n  _onKeydown(e) {\n    if (this._noInput) {\n      // The input element cannot be readonly as it would conflict with\n      // the required attribute. Both are not allowed on an input element.\n      // Therefore we prevent default on most keydown events.\n      var allowedKeys = [\n        9 // tab\n      ];\n      if (allowedKeys.indexOf(e.keyCode) === -1) {\n        e.preventDefault();\n      }\n    }\n\n    switch (this._eventKey(e)) {\n      case 'down':\n      case 'up':\n        // prevent scrolling the page with arrows\n        e.preventDefault();\n\n        if (this.opened) {\n          this._overlayContent.focus();\n          this._overlayContent._onKeydown(e);\n        } else {\n          this._focusOverlayOnOpen = true;\n          this.open();\n        }\n\n        break;\n      case 'enter': {\n        const dateObject = this.i18n.parseDate(this._inputValue);\n        const parsedDate = dateObject &&\n          this._parseDate(dateObject.year + '-' + (dateObject.month + 1) + '-' + dateObject.day);\n\n        if (this._overlayInitialized && this._overlayContent.focusedDate && this._isValidDate(parsedDate)) {\n          this._selectedDate = this._overlayContent.focusedDate;\n        }\n        this.close();\n        break;\n      }\n      case 'esc':\n        this._focusedDate = this._selectedDate;\n        this._close();\n        break;\n      case 'tab':\n        if (this.opened) {\n          e.preventDefault();\n          // Clear the selection range (remains visible on IE)\n          this._setSelectionRange(0, 0);\n          if (e.shiftKey) {\n            this._overlayContent.focusCancel();\n          } else {\n            this._overlayContent.focus();\n            this._overlayContent.revealDate(this._focusedDate);\n          }\n\n        }\n        break;\n    }\n  }\n\n  _validateInput(date, min, max) {\n    if (date && (min || max)) {\n      this.invalid = !DatePickerHelper._dateAllowed(date, min, max);\n    }\n  }\n\n  _onUserInput(e) {\n    if (!this.opened && this._inputElement.value) {\n      this.open();\n    }\n    this._userInputValueChanged();\n  }\n\n  _userInputValueChanged(value) {\n    if (this.opened && this._inputValue) {\n      const dateObject = this.i18n.parseDate && this.i18n.parseDate(this._inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._ignoreFocusedDateChange = true;\n        if (!DatePickerHelper._dateEquals(parsedDate, this._focusedDate)) {\n          this._focusedDate = parsedDate;\n        }\n        this._ignoreFocusedDateChange = false;\n      }\n    }\n  }\n\n  _announceFocusedDate(_focusedDate, opened, _ignoreAnnounce) {\n    if (opened && !_ignoreAnnounce) {\n      this._overlayContent.announceFocusedDate();\n    }\n  }\n\n  get _overlayContent() {\n    return this.$.overlay.content.querySelector('#overlay-content');\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport './vaadin-date-picker-overlay.js';\nimport './vaadin-date-picker-overlay-content.js';\nimport { DatePickerMixin } from './vaadin-date-picker-mixin.js';\nimport '@vaadin/vaadin-text-field/src/vaadin-text-field.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n/**\n *\n * `<vaadin-date-picker>` is a date selection field which includes a scrollable\n * month calendar view.\n * ```html\n * <vaadin-date-picker label=\"Birthday\"></vaadin-date-picker>\n * ```\n * ```js\n * datePicker.value = '2016-03-02';\n * ```\n * When the selected `value` is changed, a `value-changed` event is triggered.\n *\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description | Theme for Element\n * ----------------|----------------|----------------\n * `text-field` | Input element | vaadin-date-picker\n * `clear-button` | Clear button | vaadin-date-picker\n * `toggle-button` | Toggle button | vaadin-date-picker\n * `overlay-content` | The overlay element | vaadin-date-picker\n * `overlay-header` | Fullscreen mode header | vaadin-date-picker-overlay-content\n * `label` | Fullscreen mode value/label | vaadin-date-picker-overlay-content\n * `clear-button` | Fullscreen mode clear button | vaadin-date-picker-overlay-content\n * `toggle-button` | Fullscreen mode toggle button | vaadin-date-picker-overlay-content\n * `years-toggle-button` | Fullscreen mode years scroller toggle | vaadin-date-picker-overlay-content\n * `months` | Months scroller | vaadin-date-picker-overlay-content\n * `years` | Years scroller | vaadin-date-picker-overlay-content\n * `toolbar` | Footer bar with buttons | vaadin-date-picker-overlay-content\n * `today-button` | Today button | vaadin-date-picker-overlay-content\n * `cancel-button` | Cancel button | vaadin-date-picker-overlay-content\n * `month` | Month calendar | vaadin-date-picker-overlay-content\n * `year-number` | Year number | vaadin-date-picker-overlay-content\n * `year-separator` | Year separator | vaadin-date-picker-overlay-content\n * `month-header` | Month title | vaadin-month-calendar\n * `weekdays` | Weekday container | vaadin-month-calendar\n * `weekday` | Weekday element | vaadin-month-calendar\n * `week-numbers` | Week numbers container | vaadin-month-calendar\n * `week-number` | Week number element | vaadin-month-calendar\n * `date` | Date element | vaadin-month-calendar\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `invalid` | Set when the element is invalid | :host\n * `opened` | Set when the date selector overlay is opened | :host\n * `readonly` | Set when the element is readonly | :host\n * `disabled` | Set when the element is disabled | :host\n * `today` | Set on the date corresponding to the current day | date\n * `focused` | Set on the focused date | date\n * `disabled` | Set on the date out of the allowed range | date\n * `selected` | Set on the selected date | date\n *\n * If you want to replace the default input field with a custom implementation, you should use the\n * [`<vaadin-date-picker-light>`](#vaadin-date-picker-light) element.\n *\n * In addition to `<vaadin-date-picker>` itself, the following internal\n * components are themable:\n *\n * - `<vaadin-text-field>`\n * - `<vaadin-date-picker-overlay>`\n * - `<vaadin-date-picker-overlay-content>`\n * - `<vaadin-month-calendar>`\n *\n * Note: the `theme` attribute value set on `<vaadin-date-picker>` is\n * propagated to the internal themable components listed above.\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Vaadin.ThemePropertyMixin\n * @mixes Vaadin.DatePickerMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass DatePickerElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        ThemePropertyMixin(\n          DatePickerMixin(\n            GestureEventListeners(PolymerElement)))))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      :host([opened]) {\n        pointer-events: auto;\n      }\n\n      [part=\"text-field\"] {\n        width: 100%;\n        min-width: 0;\n      }\n    </style>\n\n\n    <vaadin-text-field id=\"input\" role=\"application\" autocomplete=\"off\" on-focus=\"_focus\" value=\"{{_userInputValue}}\" invalid=\"[[invalid]]\" label=\"[[label]]\" name=\"[[name]]\" placeholder=\"[[placeholder]]\" required=\"[[required]]\" disabled=\"[[disabled]]\" readonly=\"[[readonly]]\" error-message=\"[[errorMessage]]\" clear-button-visible=\"[[clearButtonVisible]]\" aria-label\\$=\"[[label]]\" part=\"text-field\" theme\\$=\"[[theme]]\">\n      <slot name=\"prefix\" slot=\"prefix\"></slot>\n      <div part=\"toggle-button\" slot=\"suffix\" on-tap=\"_toggle\" role=\"button\" aria-label\\$=\"[[i18n.calendar]]\" aria-expanded\\$=\"[[_getAriaExpanded(opened)]]\"></div>\n    </vaadin-text-field>\n\n    <vaadin-date-picker-overlay id=\"overlay\" fullscreen\\$=\"[[_fullscreen]]\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\" on-vaadin-overlay-open=\"_onOverlayOpened\" on-vaadin-overlay-close=\"_onOverlayClosed\" disable-upgrade=\"\">\n      <template>\n        <vaadin-date-picker-overlay-content id=\"overlay-content\" i18n=\"[[i18n]]\" fullscreen\\$=\"[[_fullscreen]]\" label=\"[[label]]\" selected-date=\"{{_selectedDate}}\" slot=\"dropdown-content\" focused-date=\"{{_focusedDate}}\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[_minDate]]\" max-date=\"[[_maxDate]]\" role=\"dialog\" on-date-tap=\"_close\" part=\"overlay-content\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\">\n        </vaadin-date-picker-overlay-content>\n      </template>\n    </vaadin-date-picker-overlay>\n\n    <iron-media-query query=\"[[_fullscreenMediaQuery]]\" query-matches=\"{{_fullscreen}}\">\n    </iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker';\n  }\n\n  static get version() {\n    return '4.0.3';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Set to true to display the clear icon which clears the input.\n       */\n      clearButtonVisible: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set to true to disable this element.\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The error message to display when the input is invalid.\n       */\n      errorMessage: String,\n\n      /**\n       * A placeholder string in addition to the label. If this is set, the label will always float.\n       */\n      placeholder: String,\n\n      /**\n       * Set to true to make this element read-only.\n       */\n      readonly: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * This property is set to true when the control value invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      _userInputValue: String\n    };\n  }\n\n  static get observers() {\n    return [\n      '_userInputValueChanged(_userInputValue)',\n      '_setClearButtonLabel(i18n.clear)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n\n    // In order to have synchronized invalid property, we need to use the same validate logic.\n    afterNextRender(this, () => this._inputElement.validate = () => {});\n\n    // FIXME(platosha): dispatch `input` event on\n    // <vaadin-text-field> clear button\n    // https://github.com/vaadin/vaadin-text-field/issues/347\n    this._inputElement.addEventListener('change', () => {\n      if (this._inputElement.value === '') {\n        this.__dispatchChange = true;\n        this.value = '';\n        this.__dispatchChange = false;\n      }\n    });\n  }\n\n  _onVaadinOverlayClose(e) {\n    if (this._openedWithFocusRing && this.hasAttribute('focused')) {\n      this.focusElement.setAttribute('focus-ring', '');\n    } else if (!this.hasAttribute('focused')) {\n      this.focusElement.blur();\n    }\n    if (e.detail.sourceEvent && e.detail.sourceEvent.composedPath().indexOf(this) !== -1) {\n      e.preventDefault();\n    }\n  }\n\n  _toggle(e) {\n    e.stopPropagation();\n    this[(this._overlayInitialized && this.$.overlay.opened) ? 'close' : 'open']();\n  }\n\n  _input() {\n    return this.$.input;\n  }\n\n  set _inputValue(value) {\n    this._inputElement.value = value;\n  }\n\n  get _inputValue() {\n    return this._inputElement.value;\n  }\n\n  _getAriaExpanded(opened) {\n    return Boolean(opened).toString();\n  }\n\n  /**\n   * Focussable element used by vaadin-control-state-mixin\n   */\n  get focusElement() {\n    return this._input() || this;\n  }\n\n  _setClearButtonLabel(i18nClear) {\n    // FIXME(platosha): expose i18n API in <vaadin-text-field>\n    // https://github.com/vaadin/vaadin-text-field/issues/348\n    this._inputElement.shadowRoot.querySelector('[part=\"clear-button\"]')\n      .setAttribute('aria-label', i18nClear);\n  }\n}\n\ncustomElements.define(DatePickerElement.is, DatePickerElement);\n\nexport { DatePickerElement };\n","const documentContainer = document.createElement(\"template\");\ndocumentContainer.setAttribute(\"style\", \"display: none;\");\n\ndocumentContainer.innerHTML = `\n<dom-module id=\"ha-date-picker-text-field-styles\" theme-for=\"vaadin-text-field\">\n  <template>\n    <style>\n      :host {\n        padding: 8px 0;\n      }\n\n      [part~=\"label\"] {\n        top: 6px;\n        font-size: var(--paper-font-subhead_-_font-size);\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      :host([focused]) [part~=\"label\"] {\n        color: var(--paper-input-container-focus-color, var(--primary-color));\n      }\n\n      [part~=\"input-field\"] {\n        color: var(--primary-text-color);\n        top: 3px;\n      }\n\n      [part~=\"input-field\"]::before, [part~=\"input-field\"]::after {\n        background-color: var(--paper-input-container-color, var(--secondary-text-color));\n        opacity: 1;\n      }\n\n      :host([focused]) [part~=\"input-field\"]::before, :host([focused]) [part~=\"input-field\"]::after {\n        background-color: var(--paper-input-container-focus-color, var(--primary-color));\n      }\n\n      [part~=\"value\"] {\n        font-size: var(--paper-font-subhead_-_font-size);\n      }\n    </style>\n  </template>\n</dom-module>\n<dom-module id=\"ha-date-picker-button-styles\" theme-for=\"vaadin-button\">\n  <template>\n    <style>\n      :host([part~=\"today-button\"]) [part~=\"button\"]::before {\n        content: \"⦿\";\n        color: var(--primary-color);\n      }\n\n      [part~=\"button\"] {\n        font-family: inherit;\n        font-size: var(--paper-font-subhead_-_font-size);\n        border: none;\n        background: transparent;\n        cursor: pointer;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n        color: inherit;\n      }\n\n      [part~=\"button\"]:focus {\n        outline: none;\n      }\n    </style>\n  </template>\n</dom-module>\n<dom-module id=\"ha-date-picker-overlay-styles\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style include=\"vaadin-date-picker-overlay-default-theme\">\n      [part~=\"toolbar\"] {\n        padding: 0.3em;\n        background-color: var(--secondary-background-color);\n      }\n\n      [part=\"years\"] {\n        background-color: var(--secondary-text-color);\n        --material-body-text-color: var(--primary-background-color);\n      }\n\n      [part=\"overlay\"] {\n        background-color: var(--primary-background-color);\n        --material-body-text-color: var(--secondary-text-color);\n      }\n\n    </style>\n  </template>\n</dom-module>\n<dom-module id=\"ha-date-picker-month-styles\" theme-for=\"vaadin-month-calendar\">\n  <template>\n    <style include=\"vaadin-month-calendar-default-theme\">\n      [part=\"date\"][today] {\n        color: var(--primary-color);\n      }\n    </style>\n  </template>\n</dom-module>\n`;\n\ndocument.head.appendChild(documentContainer.content);\n","import { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nconst DATA_CACHE = {};\nconst ALL_ENTITIES = \"*\";\n\nclass HaLogbookData extends PolymerElement {\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: \"hassChanged\",\n      },\n\n      filterDate: {\n        type: String,\n        observer: \"filterDataChanged\",\n      },\n\n      filterPeriod: {\n        type: Number,\n        observer: \"filterDataChanged\",\n      },\n\n      filterEntity: {\n        type: String,\n        observer: \"filterDataChanged\",\n      },\n\n      isLoading: {\n        type: Boolean,\n        value: true,\n        readOnly: true,\n        notify: true,\n      },\n\n      entries: {\n        type: Object,\n        value: null,\n        readOnly: true,\n        notify: true,\n      },\n    };\n  }\n\n  hassChanged(newHass, oldHass) {\n    if (!oldHass && this.filterDate) {\n      this.updateData();\n    }\n  }\n\n  filterDataChanged(newValue, oldValue) {\n    if (oldValue !== undefined) {\n      this.updateData();\n    }\n  }\n\n  updateData() {\n    if (!this.hass) return;\n\n    this._setIsLoading(true);\n\n    this.getDate(this.filterDate, this.filterPeriod, this.filterEntity).then(\n      (logbookEntries) => {\n        this._setEntries(logbookEntries);\n        this._setIsLoading(false);\n      }\n    );\n  }\n\n  getDate(date, period, entityId) {\n    if (!entityId) entityId = ALL_ENTITIES;\n\n    if (!DATA_CACHE[period]) DATA_CACHE[period] = [];\n    if (!DATA_CACHE[period][date]) DATA_CACHE[period][date] = [];\n\n    if (DATA_CACHE[period][date][entityId]) {\n      return DATA_CACHE[period][date][entityId];\n    }\n\n    if (entityId !== ALL_ENTITIES && DATA_CACHE[period][date][ALL_ENTITIES]) {\n      return DATA_CACHE[period][date][ALL_ENTITIES].then(function(entities) {\n        return entities.filter(function(entity) {\n          return entity.entity_id === entityId;\n        });\n      });\n    }\n\n    DATA_CACHE[period][date][entityId] = this._getFromServer(\n      date,\n      period,\n      entityId\n    );\n    return DATA_CACHE[period][date][entityId];\n  }\n\n  _getFromServer(date, period, entityId) {\n    let url = \"logbook/\" + date + \"?period=\" + period;\n    if (entityId !== ALL_ENTITIES) {\n      url += \"&entity=\" + entityId;\n    }\n\n    return this.hass.callApi(\"GET\", url).then(\n      function(logbookEntries) {\n        logbookEntries.reverse();\n        return logbookEntries;\n      },\n      function() {\n        return null;\n      }\n    );\n  }\n\n  refreshLogbook() {\n    DATA_CACHE[this.filterPeriod][this.filterDate] = [];\n    this.updateData();\n  }\n}\n\ncustomElements.define(\"ha-logbook-data\", HaLogbookData);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport formatTime from \"../../common/datetime/format_time\";\nimport formatDate from \"../../common/datetime/format_date\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\nimport { domainIcon } from \"../../common/entity/domain_icon\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaLogbook extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        :host {\n          display: block;\n        }\n\n        :host([rtl]) {\n          direction: ltr;\n        }\n\n        .entry {\n          @apply --paper-font-body1;\n          line-height: 2em;\n        }\n\n        .time {\n          width: 55px;\n          font-size: 0.8em;\n          color: var(--secondary-text-color);\n        }\n\n        :host([rtl]) .date {\n          direction: rtl;\n        }\n\n        iron-icon {\n          margin: 0 8px 0 16px;\n          color: var(--primary-text-color);\n        }\n\n        .message {\n          color: var(--primary-text-color);\n        }\n\n        a {\n          color: var(--primary-color);\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[!entries.length]]\">\n        [[localize('ui.panel.logbook.entries_not_found')]]\n      </template>\n\n      <template is=\"dom-repeat\" items=\"[[entries]]\">\n        <template is=\"dom-if\" if=\"{{_needHeader(entries.*, index)}}\">\n          <h4 class=\"date\">[[_formatDate(item.when)]]</h4>\n        </template>\n\n        <div class=\"horizontal layout entry\">\n          <div class=\"time\">[[_formatTime(item.when)]]</div>\n          <iron-icon icon=\"[[_computeIcon(item.domain)]]\"></iron-icon>\n          <div class=\"message\" flex=\"\">\n            <template is=\"dom-if\" if=\"[[!item.entity_id]]\">\n              <span class=\"name\">[[item.name]]</span>\n            </template>\n            <template is=\"dom-if\" if=\"[[item.entity_id]]\">\n              <a href=\"#\" on-click=\"entityClicked\" class=\"name\"\n                >[[item.name]]</a\n              >\n            </template>\n            <span> </span> <span>[[item.message]]</span>\n          </div>\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entries: {\n        type: Array,\n        value: [],\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  _formatTime(date) {\n    return formatTime(new Date(date), this.hass.language);\n  }\n\n  _formatDate(date) {\n    return formatDate(new Date(date), this.hass.language);\n  }\n\n  _needHeader(change, index) {\n    if (!index) return true;\n    const current = this.get(\"when\", change.base[index]);\n    const previous = this.get(\"when\", change.base[index - 1]);\n    return (\n      current &&\n      previous &&\n      new Date(current).toDateString() !== new Date(previous).toDateString()\n    );\n  }\n\n  _computeIcon(domain) {\n    return domainIcon(domain);\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n\n  entityClicked(ev) {\n    ev.preventDefault();\n    this.fire(\"hass-more-info\", { entityId: ev.model.item.entity_id });\n  }\n}\n\ncustomElements.define(\"ha-logbook\", HaLogbook);\n","import \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"@vaadin/vaadin-date-picker/theme/material/vaadin-date-picker\";\n\nimport \"../../components/ha-menu-button\";\nimport \"../../components/entity/ha-entity-picker\";\nimport \"../../resources/ha-date-picker-style\";\nimport \"../../resources/ha-style\";\n\nimport \"./ha-logbook-data\";\nimport \"./ha-logbook\";\n\nimport formatDate from \"../../common/datetime/format_date\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaPanelLogbook extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        .content {\n          padding: 0 16px 16px;\n        }\n\n        paper-spinner {\n          position: absolute;\n          left: 50%;\n          top: 50%;\n          transform: translate(-50%, -50%);\n        }\n\n        .wrap {\n          margin-bottom: 24px;\n        }\n\n        vaadin-date-picker {\n          max-width: 200px;\n          margin-right: 16px;\n        }\n\n        paper-dropdown-menu {\n          max-width: 100px;\n          margin-right: 16px;\n          --paper-input-container-label-floating: {\n            padding-bottom: 10px;\n          }\n        }\n\n        :host([rtl]) paper-dropdown-menu {\n          text-align: right;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-entity-picker {\n          display: inline-block;\n          width: 100%;\n          max-width: 400px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      </style>\n\n      <ha-logbook-data\n        hass=\"[[hass]]\"\n        is-loading=\"{{isLoading}}\"\n        entries=\"{{entries}}\"\n        filter-date=\"[[_computeFilterDate(_currentDate)]]\"\n        filter-period=\"[[_computeFilterDays(_periodIndex)]]\"\n        filter-entity=\"[[entityId]]\"\n      ></ha-logbook-data>\n\n      <app-header-layout has-scrolling-region>\n        <app-header slot=\"header\" fixed>\n          <app-toolbar>\n            <ha-menu-button\n              hass=\"[[hass]]\"\n              narrow=\"[[narrow]]\"\n            ></ha-menu-button>\n            <div main-title>[[localize('panel.logbook')]]</div>\n            <paper-icon-button\n              icon=\"hass:refresh\"\n              on-click=\"refreshLogbook\"\n              hidden$=\"[[isLoading]]\"\n            ></paper-icon-button>\n          </app-toolbar>\n        </app-header>\n\n        <div class=\"content\">\n          <paper-spinner\n            active=\"[[isLoading]]\"\n            hidden$=\"[[!isLoading]]\"\n            alt=\"[[localize('ui.common.loading')]]\"\n          ></paper-spinner>\n\n          <div class=\"flex layout horizontal wrap\">\n            <vaadin-date-picker\n              id=\"picker\"\n              value=\"{{_currentDate}}\"\n              label=\"[[localize('ui.panel.logbook.showing_entries')]]\"\n              disabled=\"[[isLoading]]\"\n              required\n            ></vaadin-date-picker>\n\n            <paper-dropdown-menu\n              label-float\n              label=\"[[localize('ui.panel.logbook.period')]]\"\n              disabled=\"[[isLoading]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"{{_periodIndex}}\"\n              >\n                <paper-item\n                  >[[localize('ui.duration.day', 'count', 1)]]</paper-item\n                >\n                <paper-item\n                  >[[localize('ui.duration.day', 'count', 3)]]</paper-item\n                >\n                <paper-item\n                  >[[localize('ui.duration.week', 'count', 1)]]</paper-item\n                >\n              </paper-listbox>\n            </paper-dropdown-menu>\n\n            <ha-entity-picker\n              hass=\"[[hass]]\"\n              value=\"{{_entityId}}\"\n              label=\"[[localize('ui.components.entity.entity-picker.entity')]]\"\n              disabled=\"[[isLoading]]\"\n              on-change=\"_entityPicked\"\n            ></ha-entity-picker>\n          </div>\n\n          <ha-logbook\n            hass=\"[[hass]]\"\n            entries=\"[[entries]]\"\n            hidden$=\"[[isLoading]]\"\n          ></ha-logbook>\n        </div>\n      </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n\n      // ISO8601 formatted date string\n      _currentDate: {\n        type: String,\n        value: function() {\n          const value = new Date();\n          const today = new Date(\n            Date.UTC(value.getFullYear(), value.getMonth(), value.getDate())\n          );\n          return today.toISOString().split(\"T\")[0];\n        },\n      },\n\n      _periodIndex: {\n        type: Number,\n        value: 0,\n      },\n\n      _entityId: {\n        type: String,\n        value: \"\",\n      },\n\n      entityId: {\n        type: String,\n        value: \"\",\n        readOnly: true,\n      },\n\n      isLoading: {\n        type: Boolean,\n      },\n\n      entries: {\n        type: Array,\n      },\n\n      datePicker: {\n        type: Object,\n      },\n\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // We are unable to parse date because we use intl api to render date\n    this.$.picker.set(\"i18n.parseDate\", null);\n    this.$.picker.set(\"i18n.formatDate\", (date) =>\n      formatDate(new Date(date.year, date.month, date.day), this.hass.language)\n    );\n  }\n\n  _computeFilterDate(_currentDate) {\n    if (!_currentDate) return undefined;\n    var parts = _currentDate.split(\"-\");\n    parts[1] = parseInt(parts[1]) - 1;\n    return new Date(parts[0], parts[1], parts[2]).toISOString();\n  }\n\n  _computeFilterDays(periodIndex) {\n    switch (periodIndex) {\n      case 1:\n        return 3;\n      case 2:\n        return 7;\n      default:\n        return 1;\n    }\n  }\n\n  _entityPicked(ev) {\n    this._setEntityId(ev.target.value);\n  }\n\n  refreshLogbook() {\n    this.shadowRoot.querySelector(\"ha-logbook-data\").refreshLogbook();\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\n\ncustomElements.define(\"ha-panel-logbook\", HaPanelLogbook);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-input/iron-input.js';\nimport './paper-input-char-counter.js';\nimport './paper-input-container.js';\nimport './paper-input-error.js';\n\nimport {IronFormElementBehavior} from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport {DomModule} from '@polymer/polymer/lib/elements/dom-module.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {PaperInputBehavior} from './paper-input-behavior.js';\n\n/**\nMaterial design: [Text\nfields](https://www.google.com/design/spec/components/text-fields.html)\n\n`<paper-input>` is a single-line text field with Material Design styling.\n\n    <paper-input label=\"Input label\"></paper-input>\n\nIt may include an optional error message or character counter.\n\n    <paper-input error-message=\"Invalid input!\" label=\"Input\n    label\"></paper-input> <paper-input char-counter label=\"Input\n    label\"></paper-input>\n\nIt can also include custom prefix or suffix elements, which are displayed\nbefore or after the text input itself. In order for an element to be\nconsidered as a prefix, it must have the `prefix` attribute (and similarly\nfor `suffix`).\n\n    <paper-input label=\"total\">\n      <div prefix>$</div>\n      <paper-icon-button slot=\"suffix\" icon=\"clear\"></paper-icon-button>\n    </paper-input>\n\nA `paper-input` can use the native `type=search` or `type=file` features.\nHowever, since we can't control the native styling of the input (search icon,\nfile button, date placeholder, etc.), in these cases the label will be\nautomatically floated. The `placeholder` attribute can still be used for\nadditional informational text.\n\n    <paper-input label=\"search!\" type=\"search\"\n        placeholder=\"search for cats\" autosave=\"test\" results=\"5\">\n    </paper-input>\n\nSee `Polymer.PaperInputBehavior` for more API docs.\n\n### Focus\n\nTo focus a paper-input, you can call the native `focus()` method as long as the\npaper input has a tab index. Similarly, `blur()` will blur the element.\n\n### Styling\n\nSee `Polymer.PaperInputContainer` for a list of custom properties used to\nstyle this element.\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-input-container-ms-clear` | Mixin applied to the Internet Explorer reveal button (the eyeball) | {}\n\n@group Paper Elements\n@element paper-input\n@hero hero.svg\n@demo demo/index.html\n*/\nPolymer({\n  is: 'paper-input',\n\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([focused]) {\n        outline: none;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      input {\n        /* Firefox sets a min-width on the input, which can cause layout issues */\n        min-width: 0;\n      }\n\n      /* In 1.x, the <input> is distributed to paper-input-container, which styles it.\n      In 2.x the <iron-input> is distributed to paper-input-container, which styles\n      it, but in order for this to work correctly, we need to reset some\n      of the native input's properties to inherit (from the iron-input) */\n      iron-input > input {\n        @apply --paper-input-container-shared-input-style;\n        font-family: inherit;\n        font-weight: inherit;\n        font-size: inherit;\n        letter-spacing: inherit;\n        word-spacing: inherit;\n        line-height: inherit;\n        text-shadow: inherit;\n        color: inherit;\n        cursor: inherit;\n      }\n\n      input:disabled {\n        @apply --paper-input-container-input-disabled;\n      }\n\n      input::-webkit-outer-spin-button,\n      input::-webkit-inner-spin-button {\n        @apply --paper-input-container-input-webkit-spinner;\n      }\n\n      input::-webkit-clear-button {\n        @apply --paper-input-container-input-webkit-clear;\n      }\n\n      input::-webkit-calendar-picker-indicator {\n        @apply --paper-input-container-input-webkit-calendar-picker-indicator;\n      }\n\n      input::-webkit-input-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input:-moz-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input::-moz-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input::-ms-clear {\n        @apply --paper-input-container-ms-clear;\n      }\n\n      input::-ms-reveal {\n        @apply --paper-input-container-ms-reveal;\n      }\n\n      input:-ms-input-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      label {\n        pointer-events: none;\n      }\n    </style>\n\n    <paper-input-container id=\"container\" no-label-float=\"[[noLabelFloat]]\" always-float-label=\"[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]\" auto-validate$=\"[[autoValidate]]\" disabled$=\"[[disabled]]\" invalid=\"[[invalid]]\">\n\n      <slot name=\"prefix\" slot=\"prefix\"></slot>\n\n      <label hidden$=\"[[!label]]\" aria-hidden=\"true\" for$=\"[[_inputId]]\" slot=\"label\">[[label]]</label>\n\n      <!-- Need to bind maxlength so that the paper-input-char-counter works correctly -->\n      <iron-input bind-value=\"{{value}}\" slot=\"input\" class=\"input-element\" id$=\"[[_inputId]]\" maxlength$=\"[[maxlength]]\" allowed-pattern=\"[[allowedPattern]]\" invalid=\"{{invalid}}\" validator=\"[[validator]]\">\n        <input aria-labelledby$=\"[[_ariaLabelledBy]]\" aria-describedby$=\"[[_ariaDescribedBy]]\" disabled$=\"[[disabled]]\" title$=\"[[title]]\" type$=\"[[type]]\" pattern$=\"[[pattern]]\" required$=\"[[required]]\" autocomplete$=\"[[autocomplete]]\" autofocus$=\"[[autofocus]]\" inputmode$=\"[[inputmode]]\" minlength$=\"[[minlength]]\" maxlength$=\"[[maxlength]]\" min$=\"[[min]]\" max$=\"[[max]]\" step$=\"[[step]]\" name$=\"[[name]]\" placeholder$=\"[[placeholder]]\" readonly$=\"[[readonly]]\" list$=\"[[list]]\" size$=\"[[size]]\" autocapitalize$=\"[[autocapitalize]]\" autocorrect$=\"[[autocorrect]]\" on-change=\"_onChange\" tabindex$=\"[[tabIndex]]\" autosave$=\"[[autosave]]\" results$=\"[[results]]\" accept$=\"[[accept]]\" multiple$=\"[[multiple]]\">\n      </iron-input>\n\n      <slot name=\"suffix\" slot=\"suffix\"></slot>\n\n      <template is=\"dom-if\" if=\"[[errorMessage]]\">\n        <paper-input-error aria-live=\"assertive\" slot=\"add-on\">[[errorMessage]]</paper-input-error>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[charCounter]]\">\n        <paper-input-char-counter slot=\"add-on\"></paper-input-char-counter>\n      </template>\n\n    </paper-input-container>\n  `,\n\n  behaviors: [PaperInputBehavior, IronFormElementBehavior],\n\n  properties: {\n    value: {\n      // Required for the correct TypeScript type-generation\n      type: String\n    }\n  },\n\n  /**\n   * Returns a reference to the focusable element. Overridden from\n   * PaperInputBehavior to correctly focus the native input.\n   *\n   * @return {!HTMLElement}\n   */\n  get _focusableElement() {\n    return this.inputElement._inputElement;\n  },\n\n  // Note: This event is only available in the 1.0 version of this element.\n  // In 2.0, the functionality of `_onIronInputReady` is done in\n  // PaperInputBehavior::attached.\n  listeners: {'iron-input-ready': '_onIronInputReady'},\n\n  _onIronInputReady: function() {\n    // Even though this is only used in the next line, save this for\n    // backwards compatibility, since the native input had this ID until 2.0.5.\n    if (!this.$.nativeInput) {\n      this.$.nativeInput = this.$$('input');\n    }\n    if (this.inputElement &&\n        this._typesThatHaveText.indexOf(this.$.nativeInput.type) !== -1) {\n      this.alwaysFloatLabel = true;\n    }\n\n    // Only validate when attached if the input already has a value.\n    if (!!this.inputElement.bindValue) {\n      this.$.container._handleValueAndAutoValidate(this.inputElement);\n    }\n  },\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`iron-a11y-announcer` is a singleton element that is intended to add a11y\nto features that require on-demand announcement from screen readers. In\norder to make use of the announcer, it is best to request its availability\nin the announcing element.\n\nExample:\n\n    Polymer({\n\n      is: 'x-chatty',\n\n      attached: function() {\n        // This will create the singleton element if it has not\n        // been created yet:\n        Polymer.IronA11yAnnouncer.requestAvailability();\n      }\n    });\n\nAfter the `iron-a11y-announcer` has been made available, elements can\nmake announces by firing bubbling `iron-announce` events.\n\nExample:\n\n    this.fire('iron-announce', {\n      text: 'This is an announcement!'\n    }, { bubbles: true });\n\nNote: announcements are only audible if you have a screen reader enabled.\n\n@group Iron Elements\n@demo demo/index.html\n*/\nexport const IronA11yAnnouncer = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: fixed;\n        clip: rect(0px,0px,0px,0px);\n      }\n    </style>\n    <div aria-live$=\"[[mode]]\">[[_text]]</div>\n`,\n\n  is: 'iron-a11y-announcer',\n\n  properties: {\n\n    /**\n     * The value of mode is used to set the `aria-live` attribute\n     * for the element that will be announced. Valid values are: `off`,\n     * `polite` and `assertive`.\n     */\n    mode: {type: String, value: 'polite'},\n\n    _text: {type: String, value: ''}\n  },\n\n  created: function() {\n    if (!IronA11yAnnouncer.instance) {\n      IronA11yAnnouncer.instance = this;\n    }\n\n    document.body.addEventListener(\n        'iron-announce', this._onIronAnnounce.bind(this));\n  },\n\n  /**\n   * Cause a text string to be announced by screen readers.\n   *\n   * @param {string} text The text that should be announced.\n   */\n  announce: function(text) {\n    this._text = '';\n    this.async(function() {\n      this._text = text;\n    }, 100);\n  },\n\n  _onIronAnnounce: function(event) {\n    if (event.detail && event.detail.text) {\n      this.announce(event.detail.text);\n    }\n  }\n});\n\nIronA11yAnnouncer.instance = null;\n\nIronA11yAnnouncer.requestAvailability = function() {\n  if (!IronA11yAnnouncer.instance) {\n    IronA11yAnnouncer.instance = document.createElement('iron-a11y-announcer');\n  }\n\n  document.body.appendChild(IronA11yAnnouncer.instance);\n};\n"],"sourceRoot":""}